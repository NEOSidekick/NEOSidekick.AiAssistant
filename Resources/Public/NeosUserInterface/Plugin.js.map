{
  "version": 3,
  "sources": ["../../Private/NeosUserInterface/node_modules/@neos-project/neos-ui-extensibility/src/readFromConsumerApi.ts", "../../Private/NeosUserInterface/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/react-ui-components/index.js", "../../Private/NeosUserInterface/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-redux-store/index.js", "../../Private/NeosUserInterface/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react/index.js", "../../Private/NeosUserInterface/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react-redux/index.js", "../../Private/NeosUserInterface/node_modules/@neos-project/neos-ui-extensibility/src/index.ts", "../../Private/NeosUserInterface/src/manifest.tsx"],
  "sourcesContent": ["export default function readFromConsumerApi(key: string): (...args: any[]) => any {\n    return (...args: any[]) => {\n        if ((window as any)['@Neos:HostPluginAPI'] && (window as any)['@Neos:HostPluginAPI'][`@${key}`]) {\n            return (window as any)['@Neos:HostPluginAPI'][`@${key}`](...args);\n        }\n\n        throw new Error('You are trying to read from a consumer api that hasn\\'t been initialized yet!');\n    };\n}\n", "import readFromConsumerApi from '../../../readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().ReactUiComponents;\n", "import readFromConsumerApi from '../../../readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().NeosUiReduxStore;\n", "import readFromConsumerApi from '../../../readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().React;\n", "import readFromConsumerApi from '../../../readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().reactRedux;\n", "import createConsumerApi from './createConsumerApi';\nimport readFromConsumerApi from './readFromConsumerApi';\nimport {\n    SynchronousRegistry,\n    SynchronousMetaRegistry\n} from './registry/index';\n\nexport default readFromConsumerApi('manifest');\n\nexport {\n    createConsumerApi,\n    readFromConsumerApi,\n    SynchronousRegistry,\n    SynchronousMetaRegistry\n};\n", "// @ts-ignore\nimport manifest from \"@neos-project/neos-ui-extensibility\";\n// @ts-ignore\nimport { IconButton, Headline } from \"@neos-project/react-ui-components\";\n// @ts-ignore\nimport {selectors} from '@neos-project/neos-ui-redux-store';\n// @ts-ignore\nimport * as React from 'react';\n// @ts-ignore\nimport { useSelector } from 'react-redux';\nimport \"./style.css\";\n\n\nmanifest(\"NEOSidekick.AiAssistant\", {}, (globalRegistry, { frontendConfiguration }) => {\n    let configuration = null;\n    // Call the configuration endpoint to get the plugin configuration\n    // and to check whether the user has permission to use AiAsisstant\n    // If not, the endpoint will return a 403 status\n    const pingRequest = new XMLHttpRequest();\n    pingRequest.open('GET', '/neosidekick/aiassistant/configuration', false);\n    pingRequest.withCredentials = true;\n    pingRequest.addEventListener('load', (event) => {\n        const response = event.target;\n        // @ts-ignore\n        if (response?.status >= 200 && response?.status <= 299) {\n            // @ts-ignore\n            configuration = JSON.parse(response.responseText)\n        }\n    })\n    pingRequest.send();\n\n    if (configuration === null) {\n        return\n    }\n\n    const containerRegistry = globalRegistry.get('containers');\n    const App = containerRegistry.get('App');\n\tconst WrappedApp = (props: Record<string, unknown>) => {\n        const state = localStorage.getItem('NEOSidekick') ? JSON.parse(localStorage.getItem('NEOSidekick')) : { open: true, fullscreen: false };\n\t\tconst [isOpen, setOpen] = React.useState(state?.open);\n        const setOpenAndPersistState = (open) => {\n            setOpen(open);\n            state.open = open;\n            localStorage.setItem('NEOSidekick', JSON.stringify(state));\n        }\n\n        const [isFullscreen, setFullscreen] = React.useState(state?.fullscreen);\n        const setFullscreenAndPersistState = (fullscreen) => {\n            setFullscreen(fullscreen);\n            state.fullscreen = fullscreen;\n            localStorage.setItem('NEOSidekick', JSON.stringify(state));\n        }\n\n        const fullscreenButton = (isOpen, isFullscreen, onClick) => {\n            if (isOpen) {\n                return <IconButton icon={isFullscreen ? \"compress\" : \"expand\"} onClick={onClick} />\n            }\n        }\n        const toggleButton = (isOpen, isFullscreen, onClick) => {\n            if (!isFullscreen) {\n                return <IconButton icon={isOpen ? \"chevron-circle-right\" : \"chevron-circle-left\"} onClick={onClick} />\n            }\n        }\n\n\t\tconst activeContentDimensions = useSelector(selectors.CR.ContentDimensions.active);\n\t\tconst interfaceLanguage = useSelector((state) => state?.user?.preferences?.interfaceLanguage);\n        const iframeSrc = new URL('https://api.neosidekick.com/chat/');\n        iframeSrc.searchParams.append('contentLanguage', activeContentDimensions.language ? activeContentDimensions.language[0] : \"\");\n        iframeSrc.searchParams.append('interfaceLanguage', interfaceLanguage);\n        iframeSrc.searchParams.append('userId', configuration.userId);\n        iframeSrc.searchParams.append('plattform', 'neos');\n        iframeSrc.searchParams.append('domain', configuration.domain);\n        iframeSrc.searchParams.append('siteName', configuration.siteName)\n        if (configuration?.referral) {\n            iframeSrc.searchParams.append('referral', configuration?.referral);\n        }\n        if (configuration?.apikey) {\n            iframeSrc.searchParams.append('apikey', configuration?.apikey);\n        }\n\n        return <div className={`neosidekick_appWrapper ${isOpen ? \"neosidekick_appWrapper--sidebar-open\" : \"\"}  ${isFullscreen ? \"neosidekick_appWrapper--sidebar-fullscreen\" : \"\"}`}>\n\t\t\t<App {...props} />\n            <div className=\"neosidekick_sideBar\">\n\t\t\t\t<div className=\"neosidekick_sideBar__title\">\n\t\t\t\t\t<Headline className={`neosidekick_sideBar__title-headline ${isOpen ? \"neosidekick_sideBar__title-headline--open\" : \"\"}`}>AI Sidekick</Headline>\n\t\t\t\t\t<div>\n                        {fullscreenButton(isOpen, isFullscreen, () => setFullscreenAndPersistState(!isFullscreen))}\n                        {toggleButton(isOpen, isFullscreen, () => setOpenAndPersistState(!isOpen))}\n                    </div>\n\t\t\t\t</div>\n                <iframe className={`neosidekick_sideBar__frame ${isOpen ? \"neosidekick_sideBar__frame--open\" : \"\"}`} src={iframeSrc.toString()} />\n            </div>\n\t\t</div>\n\t}\n\tcontainerRegistry.set('App', WrappedApp);\n});\n"],
  "mappings": "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",
  "names": ["readFromConsumerApi", "key", "args", "init_readFromConsumerApi", "__esmMin", "require_react_ui_components", "__commonJSMin", "exports", "module", "init_readFromConsumerApi", "readFromConsumerApi", "require_neos_ui_redux_store", "__commonJSMin", "exports", "module", "init_readFromConsumerApi", "readFromConsumerApi", "require_react", "__commonJSMin", "exports", "module", "init_readFromConsumerApi", "readFromConsumerApi", "require_react_redux", "__commonJSMin", "exports", "module", "init_readFromConsumerApi", "readFromConsumerApi", "init_readFromConsumerApi", "dist_default", "readFromConsumerApi", "import_react_ui_components", "import_neos_ui_redux_store", "React", "import_react_redux", "dist_default", "globalRegistry", "frontendConfiguration", "configuration", "pingRequest", "event", "response", "containerRegistry", "App", "WrappedApp", "props", "state", "isOpen", "setOpen", "setOpenAndPersistState", "open", "isFullscreen", "setFullscreen", "setFullscreenAndPersistState", "fullscreen", "fullscreenButton", "onClick", "toggleButton", "activeContentDimensions", "interfaceLanguage", "iframeSrc"]
}
