"use strict";(()=>{var G_=Object.create;var Hi=Object.defineProperty;var nf=Object.getOwnPropertyDescriptor;var H_=Object.getOwnPropertyNames;var q_=Object.getPrototypeOf,K_=Object.prototype.hasOwnProperty;var $_=(n,i,s)=>i in n?Hi(n,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[i]=s;var j_=(n,i)=>()=>(n&&(i=n(n=0)),i);var at=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports);var z_=(n,i,s,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of H_(i))!K_.call(n,l)&&l!==s&&Hi(n,l,{get:()=>i[l],enumerable:!(u=nf(i,l))||u.enumerable});return n};var R=(n,i,s)=>(s=n!=null?G_(q_(n)):{},z_(i||!n||!n.__esModule?Hi(s,"default",{value:n,enumerable:!0}):s,n));var Ce=(n,i,s,u)=>{for(var l=u>1?void 0:u?nf(i,s):i,p=n.length-1,v;p>=0;p--)(v=n[p])&&(l=(u?v(i,s,l):v(l))||l);return u&&l&&Hi(i,s,l),l};var O=(n,i,s)=>($_(n,typeof i!="symbol"?i+"":i,s),s);function de(n){return(...i)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${n}`])return window["@Neos:HostPluginAPI"][`@${n}`](...i);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var ut=j_(()=>{});var Ge=at((NA,af)=>{ut();af.exports=de("NeosProjectPackages")().NeosUiReduxStore});var Xf=at((Dr,Xn)=>{var a0=200,u0="Expected a function",da="__lodash_hash_undefined__",Qi=1,Qn=2,Of=1/0,Nf=9007199254740991,ji="[object Arguments]",oa="[object Array]",kf="[object Boolean]",Tf="[object Date]",If="[object Error]",Mf="[object Function]",c0="[object GeneratorFunction]",zi="[object Map]",Ff="[object Number]",Vn="[object Object]",_f="[object Promise]",Rf="[object RegExp]",Yi="[object Set]",Df="[object String]",Lf="[object Symbol]",sa="[object WeakMap]",Wf="[object ArrayBuffer]",Ji="[object DataView]",f0="[object Float32Array]",l0="[object Float64Array]",d0="[object Int8Array]",p0="[object Int16Array]",h0="[object Int32Array]",g0="[object Uint8Array]",m0="[object Uint8ClampedArray]",v0="[object Uint16Array]",y0="[object Uint32Array]",_0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A0=/^\w*$/,S0=/^\./,w0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,b0=/[\\^$.*+?()[\]{}|]/g,C0=/\\(\\)?/g,x0=/^\[object .+?Constructor\]$/,E0=/^(?:0|[1-9]\d*)$/,ce={};ce[f0]=ce[l0]=ce[d0]=ce[p0]=ce[h0]=ce[g0]=ce[m0]=ce[v0]=ce[y0]=!0;ce[ji]=ce[oa]=ce[Wf]=ce[kf]=ce[Ji]=ce[Tf]=ce[If]=ce[Mf]=ce[zi]=ce[Ff]=ce[Vn]=ce[Rf]=ce[Yi]=ce[Df]=ce[sa]=!1;var Bf=typeof global=="object"&&global&&global.Object===Object&&global,P0=typeof self=="object"&&self&&self.Object===Object&&self,rn=Bf||P0||Function("return this")(),Uf=typeof Dr=="object"&&Dr&&!Dr.nodeType&&Dr,Af=Uf&&typeof Xn=="object"&&Xn&&!Xn.nodeType&&Xn,O0=Af&&Af.exports===Uf,Sf=O0&&Bf.process,wf=function(){try{return Sf&&Sf.binding("util")}catch{}}(),bf=wf&&wf.isTypedArray;function N0(n,i){for(var s=-1,u=n?n.length:0;++s<u;)if(i(n[s],s,n))return!0;return!1}function k0(n){return function(i){return i?.[n]}}function T0(n,i){for(var s=-1,u=Array(n);++s<n;)u[s]=i(s);return u}function I0(n){return function(i){return n(i)}}function M0(n,i){return n?.[i]}function aa(n){var i=!1;if(n!=null&&typeof n.toString!="function")try{i=!!(n+"")}catch{}return i}function F0(n){var i=-1,s=Array(n.size);return n.forEach(function(u,l){s[++i]=[l,u]}),s}function R0(n,i){return function(s){return n(i(s))}}function D0(n){var i=-1,s=Array(n.size);return n.forEach(function(u){s[++i]=u}),s}var L0=Array.prototype,W0=Function.prototype,eo=Object.prototype,ra=rn["__core-js_shared__"],Cf=function(){var n=/[^.]+$/.exec(ra&&ra.keys&&ra.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Gf=W0.toString,Dt=eo.hasOwnProperty,er=eo.toString,B0=RegExp("^"+Gf.call(Dt).replace(b0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xf=rn.Symbol,Ef=rn.Uint8Array,U0=eo.propertyIsEnumerable,G0=L0.splice,H0=R0(Object.keys,Object),ua=tr(rn,"DataView"),Lr=tr(rn,"Map"),ca=tr(rn,"Promise"),fa=tr(rn,"Set"),la=tr(rn,"WeakMap"),Wr=tr(Object,"create"),q0=xn(ua),K0=xn(Lr),$0=xn(ca),j0=xn(fa),z0=xn(la),Zi=xf?xf.prototype:void 0,ia=Zi?Zi.valueOf:void 0,Pf=Zi?Zi.toString:void 0;function bn(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function Y0(){this.__data__=Wr?Wr(null):{}}function J0(n){return this.has(n)&&delete this.__data__[n]}function Z0(n){var i=this.__data__;if(Wr){var s=i[n];return s===da?void 0:s}return Dt.call(i,n)?i[n]:void 0}function V0(n){var i=this.__data__;return Wr?i[n]!==void 0:Dt.call(i,n)}function X0(n,i){var s=this.__data__;return s[n]=Wr&&i===void 0?da:i,this}bn.prototype.clear=Y0;bn.prototype.delete=J0;bn.prototype.get=Z0;bn.prototype.has=V0;bn.prototype.set=X0;function Lt(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function Q0(){this.__data__=[]}function e1(n){var i=this.__data__,s=to(i,n);if(s<0)return!1;var u=i.length-1;return s==u?i.pop():G0.call(i,s,1),!0}function t1(n){var i=this.__data__,s=to(i,n);return s<0?void 0:i[s][1]}function n1(n){return to(this.__data__,n)>-1}function r1(n,i){var s=this.__data__,u=to(s,n);return u<0?s.push([n,i]):s[u][1]=i,this}Lt.prototype.clear=Q0;Lt.prototype.delete=e1;Lt.prototype.get=t1;Lt.prototype.has=n1;Lt.prototype.set=r1;function Wt(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function i1(){this.__data__={hash:new bn,map:new(Lr||Lt),string:new bn}}function o1(n){return no(this,n).delete(n)}function s1(n){return no(this,n).get(n)}function a1(n){return no(this,n).has(n)}function u1(n,i){return no(this,n).set(n,i),this}Wt.prototype.clear=i1;Wt.prototype.delete=o1;Wt.prototype.get=s1;Wt.prototype.has=a1;Wt.prototype.set=u1;function Vi(n){var i=-1,s=n?n.length:0;for(this.__data__=new Wt;++i<s;)this.add(n[i])}function c1(n){return this.__data__.set(n,da),this}function f1(n){return this.__data__.has(n)}Vi.prototype.add=Vi.prototype.push=c1;Vi.prototype.has=f1;function Rt(n){this.__data__=new Lt(n)}function l1(){this.__data__=new Lt}function d1(n){return this.__data__.delete(n)}function p1(n){return this.__data__.get(n)}function h1(n){return this.__data__.has(n)}function g1(n,i){var s=this.__data__;if(s instanceof Lt){var u=s.__data__;if(!Lr||u.length<a0-1)return u.push([n,i]),this;s=this.__data__=new Wt(u)}return s.set(n,i),this}Rt.prototype.clear=l1;Rt.prototype.delete=d1;Rt.prototype.get=p1;Rt.prototype.has=h1;Rt.prototype.set=g1;function m1(n,i){var s=Cn(n)||Jf(n)?T0(n.length,String):[],u=s.length,l=!!u;for(var p in n)(i||Dt.call(n,p))&&!(l&&(p=="length"||$f(p,u)))&&s.push(p);return s}function to(n,i){for(var s=n.length;s--;)if(Yf(n[s][0],i))return s;return-1}var v1=T1();function y1(n,i){return n&&v1(n,i,Xi)}function Hf(n,i){i=ro(i,n)?[i]:qf(i);for(var s=0,u=i.length;n!=null&&s<u;)n=n[io(i[s++])];return s&&s==u?n:void 0}function _1(n){return er.call(n)}function A1(n,i){return n!=null&&i in Object(n)}function pa(n,i,s,u,l){return n===i?!0:n==null||i==null||!oo(n)&&!so(i)?n!==n&&i!==i:S1(n,i,pa,s,u,l)}function S1(n,i,s,u,l,p){var v=Cn(n),_=Cn(i),b=oa,C=oa;v||(b=nn(n),b=b==ji?Vn:b),_||(C=nn(i),C=C==ji?Vn:C);var E=b==Vn&&!aa(n),k=C==Vn&&!aa(i),I=b==C;if(I&&!E)return p||(p=new Rt),v||G1(n)?Kf(n,i,s,u,l,p):I1(n,i,b,s,u,l,p);if(!(l&Qn)){var F=E&&Dt.call(n,"__wrapped__"),G=k&&Dt.call(i,"__wrapped__");if(F||G){var B=F?n.value():n,P=G?i.value():i;return p||(p=new Rt),s(B,P,u,l,p)}}return I?(p||(p=new Rt),M1(n,i,s,u,l,p)):!1}function w1(n,i,s,u){var l=s.length,p=l,v=!u;if(n==null)return!p;for(n=Object(n);l--;){var _=s[l];if(v&&_[2]?_[1]!==n[_[0]]:!(_[0]in n))return!1}for(;++l<p;){_=s[l];var b=_[0],C=n[b],E=_[1];if(v&&_[2]){if(C===void 0&&!(b in n))return!1}else{var k=new Rt;if(u)var I=u(C,E,b,n,i,k);if(!(I===void 0?pa(E,C,u,Qi|Qn,k):I))return!1}}return!0}function b1(n){if(!oo(n)||L1(n))return!1;var i=Vf(n)||aa(n)?B0:x0;return i.test(xn(n))}function C1(n){return so(n)&&ga(n.length)&&!!ce[er.call(n)]}function x1(n){return typeof n=="function"?n:n==null?j1:typeof n=="object"?Cn(n)?O1(n[0],n[1]):P1(n):z1(n)}function E1(n){if(!W1(n))return H0(n);var i=[];for(var s in Object(n))Dt.call(n,s)&&s!="constructor"&&i.push(s);return i}function P1(n){var i=F1(n);return i.length==1&&i[0][2]?zf(i[0][0],i[0][1]):function(s){return s===n||w1(s,n,i)}}function O1(n,i){return ro(n)&&jf(i)?zf(io(n),i):function(s){var u=q1(s,n);return u===void 0&&u===i?K1(s,n):pa(i,u,void 0,Qi|Qn)}}function N1(n){return function(i){return Hf(i,n)}}function k1(n){if(typeof n=="string")return n;if(ma(n))return Pf?Pf.call(n):"";var i=n+"";return i=="0"&&1/n==-Of?"-0":i}function qf(n){return Cn(n)?n:B1(n)}function T1(n){return function(i,s,u){for(var l=-1,p=Object(i),v=u(i),_=v.length;_--;){var b=v[n?_:++l];if(s(p[b],b,p)===!1)break}return i}}function Kf(n,i,s,u,l,p){var v=l&Qn,_=n.length,b=i.length;if(_!=b&&!(v&&b>_))return!1;var C=p.get(n);if(C&&p.get(i))return C==i;var E=-1,k=!0,I=l&Qi?new Vi:void 0;for(p.set(n,i),p.set(i,n);++E<_;){var F=n[E],G=i[E];if(u)var B=v?u(G,F,E,i,n,p):u(F,G,E,n,i,p);if(B!==void 0){if(B)continue;k=!1;break}if(I){if(!N0(i,function(P,N){if(!I.has(N)&&(F===P||s(F,P,u,l,p)))return I.add(N)})){k=!1;break}}else if(!(F===G||s(F,G,u,l,p))){k=!1;break}}return p.delete(n),p.delete(i),k}function I1(n,i,s,u,l,p,v){switch(s){case Ji:if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case Wf:return!(n.byteLength!=i.byteLength||!u(new Ef(n),new Ef(i)));case kf:case Tf:case Ff:return Yf(+n,+i);case If:return n.name==i.name&&n.message==i.message;case Rf:case Df:return n==i+"";case zi:var _=F0;case Yi:var b=p&Qn;if(_||(_=D0),n.size!=i.size&&!b)return!1;var C=v.get(n);if(C)return C==i;p|=Qi,v.set(n,i);var E=Kf(_(n),_(i),u,l,p,v);return v.delete(n),E;case Lf:if(ia)return ia.call(n)==ia.call(i)}return!1}function M1(n,i,s,u,l,p){var v=l&Qn,_=Xi(n),b=_.length,C=Xi(i),E=C.length;if(b!=E&&!v)return!1;for(var k=b;k--;){var I=_[k];if(!(v?I in i:Dt.call(i,I)))return!1}var F=p.get(n);if(F&&p.get(i))return F==i;var G=!0;p.set(n,i),p.set(i,n);for(var B=v;++k<b;){I=_[k];var P=n[I],N=i[I];if(u)var U=v?u(N,P,I,i,n,p):u(P,N,I,n,i,p);if(!(U===void 0?P===N||s(P,N,u,l,p):U)){G=!1;break}B||(B=I=="constructor")}if(G&&!B){var L=n.constructor,Y=i.constructor;L!=Y&&"constructor"in n&&"constructor"in i&&!(typeof L=="function"&&L instanceof L&&typeof Y=="function"&&Y instanceof Y)&&(G=!1)}return p.delete(n),p.delete(i),G}function no(n,i){var s=n.__data__;return D1(i)?s[typeof i=="string"?"string":"hash"]:s.map}function F1(n){for(var i=Xi(n),s=i.length;s--;){var u=i[s],l=n[u];i[s]=[u,l,jf(l)]}return i}function tr(n,i){var s=M0(n,i);return b1(s)?s:void 0}var nn=_1;(ua&&nn(new ua(new ArrayBuffer(1)))!=Ji||Lr&&nn(new Lr)!=zi||ca&&nn(ca.resolve())!=_f||fa&&nn(new fa)!=Yi||la&&nn(new la)!=sa)&&(nn=function(n){var i=er.call(n),s=i==Vn?n.constructor:void 0,u=s?xn(s):void 0;if(u)switch(u){case q0:return Ji;case K0:return zi;case $0:return _f;case j0:return Yi;case z0:return sa}return i});function R1(n,i,s){i=ro(i,n)?[i]:qf(i);for(var u,l=-1,v=i.length;++l<v;){var p=io(i[l]);if(!(u=n!=null&&s(n,p)))break;n=n[p]}if(u)return u;var v=n?n.length:0;return!!v&&ga(v)&&$f(p,v)&&(Cn(n)||Jf(n))}function $f(n,i){return i=i??Nf,!!i&&(typeof n=="number"||E0.test(n))&&n>-1&&n%1==0&&n<i}function ro(n,i){if(Cn(n))return!1;var s=typeof n;return s=="number"||s=="symbol"||s=="boolean"||n==null||ma(n)?!0:A0.test(n)||!_0.test(n)||i!=null&&n in Object(i)}function D1(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function L1(n){return!!Cf&&Cf in n}function W1(n){var i=n&&n.constructor,s=typeof i=="function"&&i.prototype||eo;return n===s}function jf(n){return n===n&&!oo(n)}function zf(n,i){return function(s){return s==null?!1:s[n]===i&&(i!==void 0||n in Object(s))}}var B1=ha(function(n){n=H1(n);var i=[];return S0.test(n)&&i.push(""),n.replace(w0,function(s,u,l,p){i.push(l?p.replace(C0,"$1"):u||s)}),i});function io(n){if(typeof n=="string"||ma(n))return n;var i=n+"";return i=="0"&&1/n==-Of?"-0":i}function xn(n){if(n!=null){try{return Gf.call(n)}catch{}try{return n+""}catch{}}return""}function ha(n,i){if(typeof n!="function"||i&&typeof i!="function")throw new TypeError(u0);var s=function(){var u=arguments,l=i?i.apply(this,u):u[0],p=s.cache;if(p.has(l))return p.get(l);var v=n.apply(this,u);return s.cache=p.set(l,v),v};return s.cache=new(ha.Cache||Wt),s}ha.Cache=Wt;function Yf(n,i){return n===i||n!==n&&i!==i}function Jf(n){return U1(n)&&Dt.call(n,"callee")&&(!U0.call(n,"callee")||er.call(n)==ji)}var Cn=Array.isArray;function Zf(n){return n!=null&&ga(n.length)&&!Vf(n)}function U1(n){return so(n)&&Zf(n)}function Vf(n){var i=oo(n)?er.call(n):"";return i==Mf||i==c0}function ga(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Nf}function oo(n){var i=typeof n;return!!n&&(i=="object"||i=="function")}function so(n){return!!n&&typeof n=="object"}function ma(n){return typeof n=="symbol"||so(n)&&er.call(n)==Lf}var G1=bf?I0(bf):C1;function H1(n){return n==null?"":k1(n)}function q1(n,i,s){var u=n==null?void 0:Hf(n,i);return u===void 0?s:u}function K1(n,i){return n!=null&&R1(n,i,A1)}function Xi(n){return Zf(n)?m1(n):E1(n)}function $1(n,i){var s={};return i=x1(i,3),y1(n,function(u,l,p){s[l]=i(u,l,p)}),s}function j1(n){return n}function z1(n){return ro(n)?k0(io(n)):N1(n)}Xn.exports=$1});var ol=at((ao,il)=>{(function(n,i){typeof ao=="object"&&typeof il<"u"?i(ao):typeof define=="function"&&define.amd?define(["exports"],i):i((n=n||self).TypesafeActions={})})(ao,function(n){"use strict";function i(P){return P==null}function s(P){throw new Error("Argument "+P+" is empty.")}function u(P){return typeof P=="function"&&"getType"in P}function l(P){throw new Error("Argument "+P+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function p(P,N){if(P==null)throw new Error("Argument contains array with empty element at index "+N);if(P.getType==null)throw new Error("Argument contains array with invalid element at index "+N+', it should be an action-creator instance from "typesafe-actions"')}function v(P){return typeof P=="string"||typeof P=="symbol"}function _(P){return!v(P)}function b(P){throw new Error("Argument "+P+" is invalid, it should be an action type of type: string | symbol")}function C(P,N){if(P==null)throw new Error("Argument contains array with empty element at index "+N);if(typeof P!="string"&&typeof P!="symbol")throw new Error("Argument contains array with invalid element at index "+N+", it should be of type: string | symbol")}function E(P,N,U,L){return i(P)&&s(1),_(P)&&l(1),{type:P,payload:N,meta:U,error:L}}function k(P,N){return i(P)&&s(1),_(P)&&b(1),Object.assign(function(){var U=N?.apply(void 0,arguments);return Object.assign({type:P},U)},{getType:function(){return P},toString:function(){return P}})}function I(P,N,U){return i(P)&&s(1),_(P)&&b(1),function(){return k(P,function(){var L=arguments.length<=0?void 0:arguments[0],Y=arguments.length<=1?void 0:arguments[1];return N==null&&U==null||(L=N?.apply(void 0,arguments),Y=U?.apply(void 0,arguments)),Object.assign({},L!==void 0&&{payload:L},{},Y!==void 0&&{meta:Y})})}}function F(P){return i(P)&&s(1),u(P)||l(1),P.getType()}function G(P,N){i(P)&&s(1),_(P)&&b(1);var U=N!=null?N(P):function(){return{type:P}};return Object.assign(U,{getType:function(){return P},toString:function(){return P}})}var B={createAction:function(P,N){var U=N==null?function(){return E(P)}:N(E.bind(null,P));return Object.assign(U,{getType:function(){return P},toString:function(){return P}})},createCustomAction:G,createStandardAction:function(P){return i(P)&&s(1),_(P)&&b(1),Object.assign(function(){return G(P,function(N){return function(U,L){return{type:N,payload:U,meta:L}}})},{map:function(N){return G(P,function(U){return function(L,Y){return Object.assign(N(L,Y),{type:U})}})}})}};n.action=E,n.createAction=I,n.createAsyncAction=function(P,N,U,L){return function(){var Y=[P,N,U,L].map(function($,ve){return Array.isArray($)?I($[0],$[1],$[2])():typeof $=="string"||typeof $=="symbol"?I($)():void(ve<3&&function(ee){throw new Error("Argument "+ee+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(ve))});return{request:Y[0],success:Y[1],failure:Y[2],cancel:Y[3]}}},n.createCustomAction=k,n.createReducer=function P(N,U){U===void 0&&(U={});var L=Object.assign({},U),Y=function($,ve){var ee=Array.isArray($)?$:[$],fe={};return ee.map(function(Ne,mo){return u(Ne)?F(Ne):v(Ne)?Ne:function(vo){throw new Error("Argument "+vo+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(mo+1)}).forEach(function(Ne){return fe[Ne]=ve}),P(N,Object.assign({},L,{},fe))};return Object.assign(function($,ve){if($===void 0&&($=N),L.hasOwnProperty(ve.type)){var ee=L[ve.type];if(typeof ee!="function")throw Error('Reducer under "'+ve.type+'" key is not a valid reducer');return ee($,ve)}return $},{handlers:Object.assign({},L),handleAction:Y,handleType:Y})},n.deprecated=B,n.getType=F,n.isActionOf=function(P,N){i(P)&&s(1);var U=Array.isArray(P)?P:[P];U.forEach(p);var L=function(Y){return U.some(function($){return Y.type===$.getType()})};return N===void 0?L:L(N)},n.isOfType=function(P,N){i(P)&&s(1);var U=Array.isArray(P)?P:[P];U.forEach(C);var L=function(Y){return U.includes(Y.type)};return N===void 0?L:L(N)}})});var Aa=at((ZA,al)=>{ut();al.exports=de("NeosProjectPackages")().NeosUiEditors});var Ze=at((XA,ul)=>{ut();ul.exports=de("vendor")().React});var Bt=at((eS,cl)=>{ut();cl.exports=de("vendor")().reactRedux});var St=at((nS,fl)=>{ut();fl.exports=de("vendor")().PropTypes});var wt=at((iS,ll)=>{ut();ll.exports=de("NeosProjectPackages")().NeosUiDecorators});var Ut=at((sS,dl)=>{ut();dl.exports=de("NeosProjectPackages")().ReactUiComponents});var lo=at((WS,xl)=>{ut();xl.exports=de("vendor")().reduxSagaEffects});var Tl=at((ar,Hr)=>{(function(){var n,i="4.17.21",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",p="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",_=500,b="__lodash_placeholder__",C=1,E=2,k=4,I=1,F=2,G=1,B=2,P=4,N=8,U=16,L=32,Y=64,$=128,ve=256,ee=512,fe=30,Ne="...",mo=800,vo=16,Ca=1,Zl=2,Vl=3,ln=1/0,Kt=9007199254740991,Xl=17976931348623157e292,Jr=0/0,mt=4294967295,Ql=mt-1,ed=mt>>>1,td=[["ary",$],["bind",G],["bindKey",B],["curry",N],["curryRight",U],["flip",ee],["partial",L],["partialRight",Y],["rearg",ve]],Fn="[object Arguments]",Zr="[object Array]",nd="[object AsyncFunction]",cr="[object Boolean]",fr="[object Date]",rd="[object DOMException]",Vr="[object Error]",Xr="[object Function]",xa="[object GeneratorFunction]",ct="[object Map]",lr="[object Number]",id="[object Null]",xt="[object Object]",Ea="[object Promise]",od="[object Proxy]",dr="[object RegExp]",ft="[object Set]",pr="[object String]",Qr="[object Symbol]",sd="[object Undefined]",hr="[object WeakMap]",ad="[object WeakSet]",gr="[object ArrayBuffer]",Rn="[object DataView]",yo="[object Float32Array]",_o="[object Float64Array]",Ao="[object Int8Array]",So="[object Int16Array]",wo="[object Int32Array]",bo="[object Uint8Array]",Co="[object Uint8ClampedArray]",xo="[object Uint16Array]",Eo="[object Uint32Array]",ud=/\b__p \+= '';/g,cd=/\b(__p \+=) '' \+/g,fd=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pa=/&(?:amp|lt|gt|quot|#39);/g,Oa=/[&<>"']/g,ld=RegExp(Pa.source),dd=RegExp(Oa.source),pd=/<%-([\s\S]+?)%>/g,hd=/<%([\s\S]+?)%>/g,Na=/<%=([\s\S]+?)%>/g,gd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,md=/^\w*$/,vd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Po=/[\\^$.*+?()[\]{}|]/g,yd=RegExp(Po.source),Oo=/^\s+/,_d=/\s/,Ad=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Sd=/\{\n\/\* \[wrapped with (.+)\] \*/,wd=/,? & /,bd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Cd=/[()=,{}\[\]\/\s]/,xd=/\\(\\)?/g,Ed=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ka=/\w*$/,Pd=/^[-+]0x[0-9a-f]+$/i,Od=/^0b[01]+$/i,Nd=/^\[object .+?Constructor\]$/,kd=/^0o[0-7]+$/i,Td=/^(?:0|[1-9]\d*)$/,Id=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ei=/($^)/,Md=/['\n\r\u2028\u2029\\]/g,ti="\\ud800-\\udfff",Fd="\\u0300-\\u036f",Rd="\\ufe20-\\ufe2f",Dd="\\u20d0-\\u20ff",Ta=Fd+Rd+Dd,Ia="\\u2700-\\u27bf",Ma="a-z\\xdf-\\xf6\\xf8-\\xff",Ld="\\xac\\xb1\\xd7\\xf7",Wd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Bd="\\u2000-\\u206f",Ud=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fa="A-Z\\xc0-\\xd6\\xd8-\\xde",Ra="\\ufe0e\\ufe0f",Da=Ld+Wd+Bd+Ud,No="['\u2019]",Gd="["+ti+"]",La="["+Da+"]",ni="["+Ta+"]",Wa="\\d+",Hd="["+Ia+"]",Ba="["+Ma+"]",Ua="[^"+ti+Da+Wa+Ia+Ma+Fa+"]",ko="\\ud83c[\\udffb-\\udfff]",qd="(?:"+ni+"|"+ko+")",Ga="[^"+ti+"]",To="(?:\\ud83c[\\udde6-\\uddff]){2}",Io="[\\ud800-\\udbff][\\udc00-\\udfff]",Dn="["+Fa+"]",Ha="\\u200d",qa="(?:"+Ba+"|"+Ua+")",Kd="(?:"+Dn+"|"+Ua+")",Ka="(?:"+No+"(?:d|ll|m|re|s|t|ve))?",$a="(?:"+No+"(?:D|LL|M|RE|S|T|VE))?",ja=qd+"?",za="["+Ra+"]?",$d="(?:"+Ha+"(?:"+[Ga,To,Io].join("|")+")"+za+ja+")*",jd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ya=za+ja+$d,Yd="(?:"+[Hd,To,Io].join("|")+")"+Ya,Jd="(?:"+[Ga+ni+"?",ni,To,Io,Gd].join("|")+")",Zd=RegExp(No,"g"),Vd=RegExp(ni,"g"),Mo=RegExp(ko+"(?="+ko+")|"+Jd+Ya,"g"),Xd=RegExp([Dn+"?"+Ba+"+"+Ka+"(?="+[La,Dn,"$"].join("|")+")",Kd+"+"+$a+"(?="+[La,Dn+qa,"$"].join("|")+")",Dn+"?"+qa+"+"+Ka,Dn+"+"+$a,zd,jd,Wa,Yd].join("|"),"g"),Qd=RegExp("["+Ha+ti+Ta+Ra+"]"),ep=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],np=-1,ue={};ue[yo]=ue[_o]=ue[Ao]=ue[So]=ue[wo]=ue[bo]=ue[Co]=ue[xo]=ue[Eo]=!0,ue[Fn]=ue[Zr]=ue[gr]=ue[cr]=ue[Rn]=ue[fr]=ue[Vr]=ue[Xr]=ue[ct]=ue[lr]=ue[xt]=ue[dr]=ue[ft]=ue[pr]=ue[hr]=!1;var ae={};ae[Fn]=ae[Zr]=ae[gr]=ae[Rn]=ae[cr]=ae[fr]=ae[yo]=ae[_o]=ae[Ao]=ae[So]=ae[wo]=ae[ct]=ae[lr]=ae[xt]=ae[dr]=ae[ft]=ae[pr]=ae[Qr]=ae[bo]=ae[Co]=ae[xo]=ae[Eo]=!0,ae[Vr]=ae[Xr]=ae[hr]=!1;var rp={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ip={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},op={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},sp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ap=parseFloat,up=parseInt,Ja=typeof global=="object"&&global&&global.Object===Object&&global,cp=typeof self=="object"&&self&&self.Object===Object&&self,we=Ja||cp||Function("return this")(),Fo=typeof ar=="object"&&ar&&!ar.nodeType&&ar,dn=Fo&&typeof Hr=="object"&&Hr&&!Hr.nodeType&&Hr,Za=dn&&dn.exports===Fo,Ro=Za&&Ja.process,Qe=function(){try{var g=dn&&dn.require&&dn.require("util").types;return g||Ro&&Ro.binding&&Ro.binding("util")}catch{}}(),Va=Qe&&Qe.isArrayBuffer,Xa=Qe&&Qe.isDate,Qa=Qe&&Qe.isMap,eu=Qe&&Qe.isRegExp,tu=Qe&&Qe.isSet,nu=Qe&&Qe.isTypedArray;function He(g,A,y){switch(y.length){case 0:return g.call(A);case 1:return g.call(A,y[0]);case 2:return g.call(A,y[0],y[1]);case 3:return g.call(A,y[0],y[1],y[2])}return g.apply(A,y)}function fp(g,A,y,D){for(var j=-1,re=g==null?0:g.length;++j<re;){var ye=g[j];A(D,ye,y(ye),g)}return D}function et(g,A){for(var y=-1,D=g==null?0:g.length;++y<D&&A(g[y],y,g)!==!1;);return g}function lp(g,A){for(var y=g==null?0:g.length;y--&&A(g[y],y,g)!==!1;);return g}function ru(g,A){for(var y=-1,D=g==null?0:g.length;++y<D;)if(!A(g[y],y,g))return!1;return!0}function $t(g,A){for(var y=-1,D=g==null?0:g.length,j=0,re=[];++y<D;){var ye=g[y];A(ye,y,g)&&(re[j++]=ye)}return re}function ri(g,A){var y=g==null?0:g.length;return!!y&&Ln(g,A,0)>-1}function Do(g,A,y){for(var D=-1,j=g==null?0:g.length;++D<j;)if(y(A,g[D]))return!0;return!1}function le(g,A){for(var y=-1,D=g==null?0:g.length,j=Array(D);++y<D;)j[y]=A(g[y],y,g);return j}function jt(g,A){for(var y=-1,D=A.length,j=g.length;++y<D;)g[j+y]=A[y];return g}function Lo(g,A,y,D){var j=-1,re=g==null?0:g.length;for(D&&re&&(y=g[++j]);++j<re;)y=A(y,g[j],j,g);return y}function dp(g,A,y,D){var j=g==null?0:g.length;for(D&&j&&(y=g[--j]);j--;)y=A(y,g[j],j,g);return y}function Wo(g,A){for(var y=-1,D=g==null?0:g.length;++y<D;)if(A(g[y],y,g))return!0;return!1}var pp=Bo("length");function hp(g){return g.split("")}function gp(g){return g.match(bd)||[]}function iu(g,A,y){var D;return y(g,function(j,re,ye){if(A(j,re,ye))return D=re,!1}),D}function ii(g,A,y,D){for(var j=g.length,re=y+(D?1:-1);D?re--:++re<j;)if(A(g[re],re,g))return re;return-1}function Ln(g,A,y){return A===A?Pp(g,A,y):ii(g,ou,y)}function mp(g,A,y,D){for(var j=y-1,re=g.length;++j<re;)if(D(g[j],A))return j;return-1}function ou(g){return g!==g}function su(g,A){var y=g==null?0:g.length;return y?Go(g,A)/y:Jr}function Bo(g){return function(A){return A==null?n:A[g]}}function Uo(g){return function(A){return g==null?n:g[A]}}function au(g,A,y,D,j){return j(g,function(re,ye,se){y=D?(D=!1,re):A(y,re,ye,se)}),y}function vp(g,A){var y=g.length;for(g.sort(A);y--;)g[y]=g[y].value;return g}function Go(g,A){for(var y,D=-1,j=g.length;++D<j;){var re=A(g[D]);re!==n&&(y=y===n?re:y+re)}return y}function Ho(g,A){for(var y=-1,D=Array(g);++y<g;)D[y]=A(y);return D}function yp(g,A){return le(A,function(y){return[y,g[y]]})}function uu(g){return g&&g.slice(0,du(g)+1).replace(Oo,"")}function qe(g){return function(A){return g(A)}}function qo(g,A){return le(A,function(y){return g[y]})}function mr(g,A){return g.has(A)}function cu(g,A){for(var y=-1,D=g.length;++y<D&&Ln(A,g[y],0)>-1;);return y}function fu(g,A){for(var y=g.length;y--&&Ln(A,g[y],0)>-1;);return y}function _p(g,A){for(var y=g.length,D=0;y--;)g[y]===A&&++D;return D}var Ap=Uo(rp),Sp=Uo(ip);function wp(g){return"\\"+sp[g]}function bp(g,A){return g==null?n:g[A]}function Wn(g){return Qd.test(g)}function Cp(g){return ep.test(g)}function xp(g){for(var A,y=[];!(A=g.next()).done;)y.push(A.value);return y}function Ko(g){var A=-1,y=Array(g.size);return g.forEach(function(D,j){y[++A]=[j,D]}),y}function lu(g,A){return function(y){return g(A(y))}}function zt(g,A){for(var y=-1,D=g.length,j=0,re=[];++y<D;){var ye=g[y];(ye===A||ye===b)&&(g[y]=b,re[j++]=y)}return re}function oi(g){var A=-1,y=Array(g.size);return g.forEach(function(D){y[++A]=D}),y}function Ep(g){var A=-1,y=Array(g.size);return g.forEach(function(D){y[++A]=[D,D]}),y}function Pp(g,A,y){for(var D=y-1,j=g.length;++D<j;)if(g[D]===A)return D;return-1}function Op(g,A,y){for(var D=y+1;D--;)if(g[D]===A)return D;return D}function Bn(g){return Wn(g)?kp(g):pp(g)}function lt(g){return Wn(g)?Tp(g):hp(g)}function du(g){for(var A=g.length;A--&&_d.test(g.charAt(A)););return A}var Np=Uo(op);function kp(g){for(var A=Mo.lastIndex=0;Mo.test(g);)++A;return A}function Tp(g){return g.match(Mo)||[]}function Ip(g){return g.match(Xd)||[]}var Mp=function g(A){A=A==null?we:Yt.defaults(we.Object(),A,Yt.pick(we,tp));var y=A.Array,D=A.Date,j=A.Error,re=A.Function,ye=A.Math,se=A.Object,$o=A.RegExp,Fp=A.String,tt=A.TypeError,si=y.prototype,Rp=re.prototype,Un=se.prototype,ai=A["__core-js_shared__"],ui=Rp.toString,oe=Un.hasOwnProperty,Dp=0,pu=function(){var e=/[^.]+$/.exec(ai&&ai.keys&&ai.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ci=Un.toString,Lp=ui.call(se),Wp=we._,Bp=$o("^"+ui.call(oe).replace(Po,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fi=Za?A.Buffer:n,Jt=A.Symbol,li=A.Uint8Array,hu=fi?fi.allocUnsafe:n,di=lu(se.getPrototypeOf,se),gu=se.create,mu=Un.propertyIsEnumerable,pi=si.splice,vu=Jt?Jt.isConcatSpreadable:n,vr=Jt?Jt.iterator:n,pn=Jt?Jt.toStringTag:n,hi=function(){try{var e=yn(se,"defineProperty");return e({},"",{}),e}catch{}}(),Up=A.clearTimeout!==we.clearTimeout&&A.clearTimeout,Gp=D&&D.now!==we.Date.now&&D.now,Hp=A.setTimeout!==we.setTimeout&&A.setTimeout,gi=ye.ceil,mi=ye.floor,jo=se.getOwnPropertySymbols,qp=fi?fi.isBuffer:n,yu=A.isFinite,Kp=si.join,$p=lu(se.keys,se),_e=ye.max,ke=ye.min,jp=D.now,zp=A.parseInt,_u=ye.random,Yp=si.reverse,zo=yn(A,"DataView"),yr=yn(A,"Map"),Yo=yn(A,"Promise"),Gn=yn(A,"Set"),_r=yn(A,"WeakMap"),Ar=yn(se,"create"),vi=_r&&new _r,Hn={},Jp=_n(zo),Zp=_n(yr),Vp=_n(Yo),Xp=_n(Gn),Qp=_n(_r),yi=Jt?Jt.prototype:n,Sr=yi?yi.valueOf:n,Au=yi?yi.toString:n;function c(e){if(he(e)&&!z(e)&&!(e instanceof Q)){if(e instanceof nt)return e;if(oe.call(e,"__wrapped__"))return Sc(e)}return new nt(e)}var qn=function(){function e(){}return function(t){if(!pe(t))return{};if(gu)return gu(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function _i(){}function nt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}c.templateSettings={escape:pd,evaluate:hd,interpolate:Na,variable:"",imports:{_:c}},c.prototype=_i.prototype,c.prototype.constructor=c,nt.prototype=qn(_i.prototype),nt.prototype.constructor=nt;function Q(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=mt,this.__views__=[]}function eh(){var e=new Q(this.__wrapped__);return e.__actions__=Le(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Le(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Le(this.__views__),e}function th(){if(this.__filtered__){var e=new Q(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function nh(){var e=this.__wrapped__.value(),t=this.__dir__,r=z(e),o=t<0,a=r?e.length:0,f=hg(0,a,this.__views__),d=f.start,h=f.end,m=h-d,S=o?h:d-1,w=this.__iteratees__,x=w.length,T=0,W=ke(m,this.__takeCount__);if(!r||!o&&a==m&&W==m)return Ku(e,this.__actions__);var q=[];e:for(;m--&&T<W;){S+=t;for(var Z=-1,K=e[S];++Z<x;){var X=w[Z],te=X.iteratee,je=X.type,Re=te(K);if(je==Zl)K=Re;else if(!Re){if(je==Ca)continue e;break e}}q[T++]=K}return q}Q.prototype=qn(_i.prototype),Q.prototype.constructor=Q;function hn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function rh(){this.__data__=Ar?Ar(null):{},this.size=0}function ih(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function oh(e){var t=this.__data__;if(Ar){var r=t[e];return r===v?n:r}return oe.call(t,e)?t[e]:n}function sh(e){var t=this.__data__;return Ar?t[e]!==n:oe.call(t,e)}function ah(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ar&&t===n?v:t,this}hn.prototype.clear=rh,hn.prototype.delete=ih,hn.prototype.get=oh,hn.prototype.has=sh,hn.prototype.set=ah;function Et(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function uh(){this.__data__=[],this.size=0}function ch(e){var t=this.__data__,r=Ai(t,e);if(r<0)return!1;var o=t.length-1;return r==o?t.pop():pi.call(t,r,1),--this.size,!0}function fh(e){var t=this.__data__,r=Ai(t,e);return r<0?n:t[r][1]}function lh(e){return Ai(this.__data__,e)>-1}function dh(e,t){var r=this.__data__,o=Ai(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}Et.prototype.clear=uh,Et.prototype.delete=ch,Et.prototype.get=fh,Et.prototype.has=lh,Et.prototype.set=dh;function Pt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function ph(){this.size=0,this.__data__={hash:new hn,map:new(yr||Et),string:new hn}}function hh(e){var t=Ii(this,e).delete(e);return this.size-=t?1:0,t}function gh(e){return Ii(this,e).get(e)}function mh(e){return Ii(this,e).has(e)}function vh(e,t){var r=Ii(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}Pt.prototype.clear=ph,Pt.prototype.delete=hh,Pt.prototype.get=gh,Pt.prototype.has=mh,Pt.prototype.set=vh;function gn(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Pt;++t<r;)this.add(e[t])}function yh(e){return this.__data__.set(e,v),this}function _h(e){return this.__data__.has(e)}gn.prototype.add=gn.prototype.push=yh,gn.prototype.has=_h;function dt(e){var t=this.__data__=new Et(e);this.size=t.size}function Ah(){this.__data__=new Et,this.size=0}function Sh(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function wh(e){return this.__data__.get(e)}function bh(e){return this.__data__.has(e)}function Ch(e,t){var r=this.__data__;if(r instanceof Et){var o=r.__data__;if(!yr||o.length<s-1)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new Pt(o)}return r.set(e,t),this.size=r.size,this}dt.prototype.clear=Ah,dt.prototype.delete=Sh,dt.prototype.get=wh,dt.prototype.has=bh,dt.prototype.set=Ch;function Su(e,t){var r=z(e),o=!r&&An(e),a=!r&&!o&&en(e),f=!r&&!o&&!a&&zn(e),d=r||o||a||f,h=d?Ho(e.length,Fp):[],m=h.length;for(var S in e)(t||oe.call(e,S))&&!(d&&(S=="length"||a&&(S=="offset"||S=="parent")||f&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||Tt(S,m)))&&h.push(S);return h}function wu(e){var t=e.length;return t?e[os(0,t-1)]:n}function xh(e,t){return Mi(Le(e),mn(t,0,e.length))}function Eh(e){return Mi(Le(e))}function Jo(e,t,r){(r!==n&&!pt(e[t],r)||r===n&&!(t in e))&&Ot(e,t,r)}function wr(e,t,r){var o=e[t];(!(oe.call(e,t)&&pt(o,r))||r===n&&!(t in e))&&Ot(e,t,r)}function Ai(e,t){for(var r=e.length;r--;)if(pt(e[r][0],t))return r;return-1}function Ph(e,t,r,o){return Zt(e,function(a,f,d){t(o,a,r(a),d)}),o}function bu(e,t){return e&&yt(t,be(t),e)}function Oh(e,t){return e&&yt(t,Be(t),e)}function Ot(e,t,r){t=="__proto__"&&hi?hi(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Zo(e,t){for(var r=-1,o=t.length,a=y(o),f=e==null;++r<o;)a[r]=f?n:ks(e,t[r]);return a}function mn(e,t,r){return e===e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function rt(e,t,r,o,a,f){var d,h=t&C,m=t&E,S=t&k;if(r&&(d=a?r(e,o,a,f):r(e)),d!==n)return d;if(!pe(e))return e;var w=z(e);if(w){if(d=mg(e),!h)return Le(e,d)}else{var x=Te(e),T=x==Xr||x==xa;if(en(e))return zu(e,h);if(x==xt||x==Fn||T&&!a){if(d=m||T?{}:dc(e),!h)return m?og(e,Oh(d,e)):ig(e,bu(d,e))}else{if(!ae[x])return a?e:{};d=vg(e,x,h)}}f||(f=new dt);var W=f.get(e);if(W)return W;f.set(e,d),Gc(e)?e.forEach(function(K){d.add(rt(K,t,r,K,e,f))}):Bc(e)&&e.forEach(function(K,X){d.set(X,rt(K,t,r,X,e,f))});var q=S?m?ms:gs:m?Be:be,Z=w?n:q(e);return et(Z||e,function(K,X){Z&&(X=K,K=e[X]),wr(d,X,rt(K,t,r,X,e,f))}),d}function Nh(e){var t=be(e);return function(r){return Cu(r,e,t)}}function Cu(e,t,r){var o=r.length;if(e==null)return!o;for(e=se(e);o--;){var a=r[o],f=t[a],d=e[a];if(d===n&&!(a in e)||!f(d))return!1}return!0}function xu(e,t,r){if(typeof e!="function")throw new tt(l);return Nr(function(){e.apply(n,r)},t)}function br(e,t,r,o){var a=-1,f=ri,d=!0,h=e.length,m=[],S=t.length;if(!h)return m;r&&(t=le(t,qe(r))),o?(f=Do,d=!1):t.length>=s&&(f=mr,d=!1,t=new gn(t));e:for(;++a<h;){var w=e[a],x=r==null?w:r(w);if(w=o||w!==0?w:0,d&&x===x){for(var T=S;T--;)if(t[T]===x)continue e;m.push(w)}else f(t,x,o)||m.push(w)}return m}var Zt=Xu(vt),Eu=Xu(Xo,!0);function kh(e,t){var r=!0;return Zt(e,function(o,a,f){return r=!!t(o,a,f),r}),r}function Si(e,t,r){for(var o=-1,a=e.length;++o<a;){var f=e[o],d=t(f);if(d!=null&&(h===n?d===d&&!$e(d):r(d,h)))var h=d,m=f}return m}function Th(e,t,r,o){var a=e.length;for(r=J(r),r<0&&(r=-r>a?0:a+r),o=o===n||o>a?a:J(o),o<0&&(o+=a),o=r>o?0:qc(o);r<o;)e[r++]=t;return e}function Pu(e,t){var r=[];return Zt(e,function(o,a,f){t(o,a,f)&&r.push(o)}),r}function Pe(e,t,r,o,a){var f=-1,d=e.length;for(r||(r=_g),a||(a=[]);++f<d;){var h=e[f];t>0&&r(h)?t>1?Pe(h,t-1,r,o,a):jt(a,h):o||(a[a.length]=h)}return a}var Vo=Qu(),Ou=Qu(!0);function vt(e,t){return e&&Vo(e,t,be)}function Xo(e,t){return e&&Ou(e,t,be)}function wi(e,t){return $t(t,function(r){return It(e[r])})}function vn(e,t){t=Xt(t,e);for(var r=0,o=t.length;e!=null&&r<o;)e=e[_t(t[r++])];return r&&r==o?e:n}function Nu(e,t,r){var o=t(e);return z(e)?o:jt(o,r(e))}function Me(e){return e==null?e===n?sd:id:pn&&pn in se(e)?pg(e):Eg(e)}function Qo(e,t){return e>t}function Ih(e,t){return e!=null&&oe.call(e,t)}function Mh(e,t){return e!=null&&t in se(e)}function Fh(e,t,r){return e>=ke(t,r)&&e<_e(t,r)}function es(e,t,r){for(var o=r?Do:ri,a=e[0].length,f=e.length,d=f,h=y(f),m=1/0,S=[];d--;){var w=e[d];d&&t&&(w=le(w,qe(t))),m=ke(w.length,m),h[d]=!r&&(t||a>=120&&w.length>=120)?new gn(d&&w):n}w=e[0];var x=-1,T=h[0];e:for(;++x<a&&S.length<m;){var W=w[x],q=t?t(W):W;if(W=r||W!==0?W:0,!(T?mr(T,q):o(S,q,r))){for(d=f;--d;){var Z=h[d];if(!(Z?mr(Z,q):o(e[d],q,r)))continue e}T&&T.push(q),S.push(W)}}return S}function Rh(e,t,r,o){return vt(e,function(a,f,d){t(o,r(a),f,d)}),o}function Cr(e,t,r){t=Xt(t,e),e=mc(e,t);var o=e==null?e:e[_t(ot(t))];return o==null?n:He(o,e,r)}function ku(e){return he(e)&&Me(e)==Fn}function Dh(e){return he(e)&&Me(e)==gr}function Lh(e){return he(e)&&Me(e)==fr}function xr(e,t,r,o,a){return e===t?!0:e==null||t==null||!he(e)&&!he(t)?e!==e&&t!==t:Wh(e,t,r,o,xr,a)}function Wh(e,t,r,o,a,f){var d=z(e),h=z(t),m=d?Zr:Te(e),S=h?Zr:Te(t);m=m==Fn?xt:m,S=S==Fn?xt:S;var w=m==xt,x=S==xt,T=m==S;if(T&&en(e)){if(!en(t))return!1;d=!0,w=!1}if(T&&!w)return f||(f=new dt),d||zn(e)?cc(e,t,r,o,a,f):lg(e,t,m,r,o,a,f);if(!(r&I)){var W=w&&oe.call(e,"__wrapped__"),q=x&&oe.call(t,"__wrapped__");if(W||q){var Z=W?e.value():e,K=q?t.value():t;return f||(f=new dt),a(Z,K,r,o,f)}}return T?(f||(f=new dt),dg(e,t,r,o,a,f)):!1}function Bh(e){return he(e)&&Te(e)==ct}function ts(e,t,r,o){var a=r.length,f=a,d=!o;if(e==null)return!f;for(e=se(e);a--;){var h=r[a];if(d&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++a<f;){h=r[a];var m=h[0],S=e[m],w=h[1];if(d&&h[2]){if(S===n&&!(m in e))return!1}else{var x=new dt;if(o)var T=o(S,w,m,e,t,x);if(!(T===n?xr(w,S,I|F,o,x):T))return!1}}return!0}function Tu(e){if(!pe(e)||Sg(e))return!1;var t=It(e)?Bp:Nd;return t.test(_n(e))}function Uh(e){return he(e)&&Me(e)==dr}function Gh(e){return he(e)&&Te(e)==ft}function Hh(e){return he(e)&&Bi(e.length)&&!!ue[Me(e)]}function Iu(e){return typeof e=="function"?e:e==null?Ue:typeof e=="object"?z(e)?Ru(e[0],e[1]):Fu(e):ef(e)}function ns(e){if(!Or(e))return $p(e);var t=[];for(var r in se(e))oe.call(e,r)&&r!="constructor"&&t.push(r);return t}function qh(e){if(!pe(e))return xg(e);var t=Or(e),r=[];for(var o in e)o=="constructor"&&(t||!oe.call(e,o))||r.push(o);return r}function rs(e,t){return e<t}function Mu(e,t){var r=-1,o=We(e)?y(e.length):[];return Zt(e,function(a,f,d){o[++r]=t(a,f,d)}),o}function Fu(e){var t=ys(e);return t.length==1&&t[0][2]?hc(t[0][0],t[0][1]):function(r){return r===e||ts(r,e,t)}}function Ru(e,t){return As(e)&&pc(t)?hc(_t(e),t):function(r){var o=ks(r,e);return o===n&&o===t?Ts(r,e):xr(t,o,I|F)}}function bi(e,t,r,o,a){e!==t&&Vo(t,function(f,d){if(a||(a=new dt),pe(f))Kh(e,t,d,r,bi,o,a);else{var h=o?o(ws(e,d),f,d+"",e,t,a):n;h===n&&(h=f),Jo(e,d,h)}},Be)}function Kh(e,t,r,o,a,f,d){var h=ws(e,r),m=ws(t,r),S=d.get(m);if(S){Jo(e,r,S);return}var w=f?f(h,m,r+"",e,t,d):n,x=w===n;if(x){var T=z(m),W=!T&&en(m),q=!T&&!W&&zn(m);w=m,T||W||q?z(h)?w=h:ge(h)?w=Le(h):W?(x=!1,w=zu(m,!0)):q?(x=!1,w=Yu(m,!0)):w=[]:kr(m)||An(m)?(w=h,An(h)?w=Kc(h):(!pe(h)||It(h))&&(w=dc(m))):x=!1}x&&(d.set(m,w),a(w,m,o,f,d),d.delete(m)),Jo(e,r,w)}function Du(e,t){var r=e.length;if(r)return t+=t<0?r:0,Tt(t,r)?e[t]:n}function Lu(e,t,r){t.length?t=le(t,function(f){return z(f)?function(d){return vn(d,f.length===1?f[0]:f)}:f}):t=[Ue];var o=-1;t=le(t,qe(H()));var a=Mu(e,function(f,d,h){var m=le(t,function(S){return S(f)});return{criteria:m,index:++o,value:f}});return vp(a,function(f,d){return rg(f,d,r)})}function $h(e,t){return Wu(e,t,function(r,o){return Ts(e,o)})}function Wu(e,t,r){for(var o=-1,a=t.length,f={};++o<a;){var d=t[o],h=vn(e,d);r(h,d)&&Er(f,Xt(d,e),h)}return f}function jh(e){return function(t){return vn(t,e)}}function is(e,t,r,o){var a=o?mp:Ln,f=-1,d=t.length,h=e;for(e===t&&(t=Le(t)),r&&(h=le(e,qe(r)));++f<d;)for(var m=0,S=t[f],w=r?r(S):S;(m=a(h,w,m,o))>-1;)h!==e&&pi.call(h,m,1),pi.call(e,m,1);return e}function Bu(e,t){for(var r=e?t.length:0,o=r-1;r--;){var a=t[r];if(r==o||a!==f){var f=a;Tt(a)?pi.call(e,a,1):us(e,a)}}return e}function os(e,t){return e+mi(_u()*(t-e+1))}function zh(e,t,r,o){for(var a=-1,f=_e(gi((t-e)/(r||1)),0),d=y(f);f--;)d[o?f:++a]=e,e+=r;return d}function ss(e,t){var r="";if(!e||t<1||t>Kt)return r;do t%2&&(r+=e),t=mi(t/2),t&&(e+=e);while(t);return r}function V(e,t){return bs(gc(e,t,Ue),e+"")}function Yh(e){return wu(Yn(e))}function Jh(e,t){var r=Yn(e);return Mi(r,mn(t,0,r.length))}function Er(e,t,r,o){if(!pe(e))return e;t=Xt(t,e);for(var a=-1,f=t.length,d=f-1,h=e;h!=null&&++a<f;){var m=_t(t[a]),S=r;if(m==="__proto__"||m==="constructor"||m==="prototype")return e;if(a!=d){var w=h[m];S=o?o(w,m,h):n,S===n&&(S=pe(w)?w:Tt(t[a+1])?[]:{})}wr(h,m,S),h=h[m]}return e}var Uu=vi?function(e,t){return vi.set(e,t),e}:Ue,Zh=hi?function(e,t){return hi(e,"toString",{configurable:!0,enumerable:!1,value:Ms(t),writable:!0})}:Ue;function Vh(e){return Mi(Yn(e))}function it(e,t,r){var o=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var f=y(a);++o<a;)f[o]=e[o+t];return f}function Xh(e,t){var r;return Zt(e,function(o,a,f){return r=t(o,a,f),!r}),!!r}function Ci(e,t,r){var o=0,a=e==null?o:e.length;if(typeof t=="number"&&t===t&&a<=ed){for(;o<a;){var f=o+a>>>1,d=e[f];d!==null&&!$e(d)&&(r?d<=t:d<t)?o=f+1:a=f}return a}return as(e,t,Ue,r)}function as(e,t,r,o){var a=0,f=e==null?0:e.length;if(f===0)return 0;t=r(t);for(var d=t!==t,h=t===null,m=$e(t),S=t===n;a<f;){var w=mi((a+f)/2),x=r(e[w]),T=x!==n,W=x===null,q=x===x,Z=$e(x);if(d)var K=o||q;else S?K=q&&(o||T):h?K=q&&T&&(o||!W):m?K=q&&T&&!W&&(o||!Z):W||Z?K=!1:K=o?x<=t:x<t;K?a=w+1:f=w}return ke(f,Ql)}function Gu(e,t){for(var r=-1,o=e.length,a=0,f=[];++r<o;){var d=e[r],h=t?t(d):d;if(!r||!pt(h,m)){var m=h;f[a++]=d===0?0:d}}return f}function Hu(e){return typeof e=="number"?e:$e(e)?Jr:+e}function Ke(e){if(typeof e=="string")return e;if(z(e))return le(e,Ke)+"";if($e(e))return Au?Au.call(e):"";var t=e+"";return t=="0"&&1/e==-ln?"-0":t}function Vt(e,t,r){var o=-1,a=ri,f=e.length,d=!0,h=[],m=h;if(r)d=!1,a=Do;else if(f>=s){var S=t?null:cg(e);if(S)return oi(S);d=!1,a=mr,m=new gn}else m=t?[]:h;e:for(;++o<f;){var w=e[o],x=t?t(w):w;if(w=r||w!==0?w:0,d&&x===x){for(var T=m.length;T--;)if(m[T]===x)continue e;t&&m.push(x),h.push(w)}else a(m,x,r)||(m!==h&&m.push(x),h.push(w))}return h}function us(e,t){return t=Xt(t,e),e=mc(e,t),e==null||delete e[_t(ot(t))]}function qu(e,t,r,o){return Er(e,t,r(vn(e,t)),o)}function xi(e,t,r,o){for(var a=e.length,f=o?a:-1;(o?f--:++f<a)&&t(e[f],f,e););return r?it(e,o?0:f,o?f+1:a):it(e,o?f+1:0,o?a:f)}function Ku(e,t){var r=e;return r instanceof Q&&(r=r.value()),Lo(t,function(o,a){return a.func.apply(a.thisArg,jt([o],a.args))},r)}function cs(e,t,r){var o=e.length;if(o<2)return o?Vt(e[0]):[];for(var a=-1,f=y(o);++a<o;)for(var d=e[a],h=-1;++h<o;)h!=a&&(f[a]=br(f[a]||d,e[h],t,r));return Vt(Pe(f,1),t,r)}function $u(e,t,r){for(var o=-1,a=e.length,f=t.length,d={};++o<a;){var h=o<f?t[o]:n;r(d,e[o],h)}return d}function fs(e){return ge(e)?e:[]}function ls(e){return typeof e=="function"?e:Ue}function Xt(e,t){return z(e)?e:As(e,t)?[e]:Ac(ie(e))}var Qh=V;function Qt(e,t,r){var o=e.length;return r=r===n?o:r,!t&&r>=o?e:it(e,t,r)}var ju=Up||function(e){return we.clearTimeout(e)};function zu(e,t){if(t)return e.slice();var r=e.length,o=hu?hu(r):new e.constructor(r);return e.copy(o),o}function ds(e){var t=new e.constructor(e.byteLength);return new li(t).set(new li(e)),t}function eg(e,t){var r=t?ds(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function tg(e){var t=new e.constructor(e.source,ka.exec(e));return t.lastIndex=e.lastIndex,t}function ng(e){return Sr?se(Sr.call(e)):{}}function Yu(e,t){var r=t?ds(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ju(e,t){if(e!==t){var r=e!==n,o=e===null,a=e===e,f=$e(e),d=t!==n,h=t===null,m=t===t,S=$e(t);if(!h&&!S&&!f&&e>t||f&&d&&m&&!h&&!S||o&&d&&m||!r&&m||!a)return 1;if(!o&&!f&&!S&&e<t||S&&r&&a&&!o&&!f||h&&r&&a||!d&&a||!m)return-1}return 0}function rg(e,t,r){for(var o=-1,a=e.criteria,f=t.criteria,d=a.length,h=r.length;++o<d;){var m=Ju(a[o],f[o]);if(m){if(o>=h)return m;var S=r[o];return m*(S=="desc"?-1:1)}}return e.index-t.index}function Zu(e,t,r,o){for(var a=-1,f=e.length,d=r.length,h=-1,m=t.length,S=_e(f-d,0),w=y(m+S),x=!o;++h<m;)w[h]=t[h];for(;++a<d;)(x||a<f)&&(w[r[a]]=e[a]);for(;S--;)w[h++]=e[a++];return w}function Vu(e,t,r,o){for(var a=-1,f=e.length,d=-1,h=r.length,m=-1,S=t.length,w=_e(f-h,0),x=y(w+S),T=!o;++a<w;)x[a]=e[a];for(var W=a;++m<S;)x[W+m]=t[m];for(;++d<h;)(T||a<f)&&(x[W+r[d]]=e[a++]);return x}function Le(e,t){var r=-1,o=e.length;for(t||(t=y(o));++r<o;)t[r]=e[r];return t}function yt(e,t,r,o){var a=!r;r||(r={});for(var f=-1,d=t.length;++f<d;){var h=t[f],m=o?o(r[h],e[h],h,r,e):n;m===n&&(m=e[h]),a?Ot(r,h,m):wr(r,h,m)}return r}function ig(e,t){return yt(e,_s(e),t)}function og(e,t){return yt(e,fc(e),t)}function Ei(e,t){return function(r,o){var a=z(r)?fp:Ph,f=t?t():{};return a(r,e,H(o,2),f)}}function Kn(e){return V(function(t,r){var o=-1,a=r.length,f=a>1?r[a-1]:n,d=a>2?r[2]:n;for(f=e.length>3&&typeof f=="function"?(a--,f):n,d&&Fe(r[0],r[1],d)&&(f=a<3?n:f,a=1),t=se(t);++o<a;){var h=r[o];h&&e(t,h,o,f)}return t})}function Xu(e,t){return function(r,o){if(r==null)return r;if(!We(r))return e(r,o);for(var a=r.length,f=t?a:-1,d=se(r);(t?f--:++f<a)&&o(d[f],f,d)!==!1;);return r}}function Qu(e){return function(t,r,o){for(var a=-1,f=se(t),d=o(t),h=d.length;h--;){var m=d[e?h:++a];if(r(f[m],m,f)===!1)break}return t}}function sg(e,t,r){var o=t&G,a=Pr(e);function f(){var d=this&&this!==we&&this instanceof f?a:e;return d.apply(o?r:this,arguments)}return f}function ec(e){return function(t){t=ie(t);var r=Wn(t)?lt(t):n,o=r?r[0]:t.charAt(0),a=r?Qt(r,1).join(""):t.slice(1);return o[e]()+a}}function $n(e){return function(t){return Lo(Xc(Vc(t).replace(Zd,"")),e,"")}}function Pr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=qn(e.prototype),o=e.apply(r,t);return pe(o)?o:r}}function ag(e,t,r){var o=Pr(e);function a(){for(var f=arguments.length,d=y(f),h=f,m=jn(a);h--;)d[h]=arguments[h];var S=f<3&&d[0]!==m&&d[f-1]!==m?[]:zt(d,m);if(f-=S.length,f<r)return oc(e,t,Pi,a.placeholder,n,d,S,n,n,r-f);var w=this&&this!==we&&this instanceof a?o:e;return He(w,this,d)}return a}function tc(e){return function(t,r,o){var a=se(t);if(!We(t)){var f=H(r,3);t=be(t),r=function(h){return f(a[h],h,a)}}var d=e(t,r,o);return d>-1?a[f?t[d]:d]:n}}function nc(e){return kt(function(t){var r=t.length,o=r,a=nt.prototype.thru;for(e&&t.reverse();o--;){var f=t[o];if(typeof f!="function")throw new tt(l);if(a&&!d&&Ti(f)=="wrapper")var d=new nt([],!0)}for(o=d?o:r;++o<r;){f=t[o];var h=Ti(f),m=h=="wrapper"?vs(f):n;m&&Ss(m[0])&&m[1]==($|N|L|ve)&&!m[4].length&&m[9]==1?d=d[Ti(m[0])].apply(d,m[3]):d=f.length==1&&Ss(f)?d[h]():d.thru(f)}return function(){var S=arguments,w=S[0];if(d&&S.length==1&&z(w))return d.plant(w).value();for(var x=0,T=r?t[x].apply(this,S):w;++x<r;)T=t[x].call(this,T);return T}})}function Pi(e,t,r,o,a,f,d,h,m,S){var w=t&$,x=t&G,T=t&B,W=t&(N|U),q=t&ee,Z=T?n:Pr(e);function K(){for(var X=arguments.length,te=y(X),je=X;je--;)te[je]=arguments[je];if(W)var Re=jn(K),ze=_p(te,Re);if(o&&(te=Zu(te,o,a,W)),f&&(te=Vu(te,f,d,W)),X-=ze,W&&X<S){var me=zt(te,Re);return oc(e,t,Pi,K.placeholder,r,te,me,h,m,S-X)}var ht=x?r:this,Ft=T?ht[e]:e;return X=te.length,h?te=Pg(te,h):q&&X>1&&te.reverse(),w&&m<X&&(te.length=m),this&&this!==we&&this instanceof K&&(Ft=Z||Pr(Ft)),Ft.apply(ht,te)}return K}function rc(e,t){return function(r,o){return Rh(r,e,t(o),{})}}function Oi(e,t){return function(r,o){var a;if(r===n&&o===n)return t;if(r!==n&&(a=r),o!==n){if(a===n)return o;typeof r=="string"||typeof o=="string"?(r=Ke(r),o=Ke(o)):(r=Hu(r),o=Hu(o)),a=e(r,o)}return a}}function ps(e){return kt(function(t){return t=le(t,qe(H())),V(function(r){var o=this;return e(t,function(a){return He(a,o,r)})})})}function Ni(e,t){t=t===n?" ":Ke(t);var r=t.length;if(r<2)return r?ss(t,e):t;var o=ss(t,gi(e/Bn(t)));return Wn(t)?Qt(lt(o),0,e).join(""):o.slice(0,e)}function ug(e,t,r,o){var a=t&G,f=Pr(e);function d(){for(var h=-1,m=arguments.length,S=-1,w=o.length,x=y(w+m),T=this&&this!==we&&this instanceof d?f:e;++S<w;)x[S]=o[S];for(;m--;)x[S++]=arguments[++h];return He(T,a?r:this,x)}return d}function ic(e){return function(t,r,o){return o&&typeof o!="number"&&Fe(t,r,o)&&(r=o=n),t=Mt(t),r===n?(r=t,t=0):r=Mt(r),o=o===n?t<r?1:-1:Mt(o),zh(t,r,o,e)}}function ki(e){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=st(t),r=st(r)),e(t,r)}}function oc(e,t,r,o,a,f,d,h,m,S){var w=t&N,x=w?d:n,T=w?n:d,W=w?f:n,q=w?n:f;t|=w?L:Y,t&=~(w?Y:L),t&P||(t&=~(G|B));var Z=[e,t,a,W,x,q,T,h,m,S],K=r.apply(n,Z);return Ss(e)&&vc(K,Z),K.placeholder=o,yc(K,e,t)}function hs(e){var t=ye[e];return function(r,o){if(r=st(r),o=o==null?0:ke(J(o),292),o&&yu(r)){var a=(ie(r)+"e").split("e"),f=t(a[0]+"e"+(+a[1]+o));return a=(ie(f)+"e").split("e"),+(a[0]+"e"+(+a[1]-o))}return t(r)}}var cg=Gn&&1/oi(new Gn([,-0]))[1]==ln?function(e){return new Gn(e)}:Ds;function sc(e){return function(t){var r=Te(t);return r==ct?Ko(t):r==ft?Ep(t):yp(t,e(t))}}function Nt(e,t,r,o,a,f,d,h){var m=t&B;if(!m&&typeof e!="function")throw new tt(l);var S=o?o.length:0;if(S||(t&=~(L|Y),o=a=n),d=d===n?d:_e(J(d),0),h=h===n?h:J(h),S-=a?a.length:0,t&Y){var w=o,x=a;o=a=n}var T=m?n:vs(e),W=[e,t,r,o,a,w,x,f,d,h];if(T&&Cg(W,T),e=W[0],t=W[1],r=W[2],o=W[3],a=W[4],h=W[9]=W[9]===n?m?0:e.length:_e(W[9]-S,0),!h&&t&(N|U)&&(t&=~(N|U)),!t||t==G)var q=sg(e,t,r);else t==N||t==U?q=ag(e,t,h):(t==L||t==(G|L))&&!a.length?q=ug(e,t,r,o):q=Pi.apply(n,W);var Z=T?Uu:vc;return yc(Z(q,W),e,t)}function ac(e,t,r,o){return e===n||pt(e,Un[r])&&!oe.call(o,r)?t:e}function uc(e,t,r,o,a,f){return pe(e)&&pe(t)&&(f.set(t,e),bi(e,t,n,uc,f),f.delete(t)),e}function fg(e){return kr(e)?n:e}function cc(e,t,r,o,a,f){var d=r&I,h=e.length,m=t.length;if(h!=m&&!(d&&m>h))return!1;var S=f.get(e),w=f.get(t);if(S&&w)return S==t&&w==e;var x=-1,T=!0,W=r&F?new gn:n;for(f.set(e,t),f.set(t,e);++x<h;){var q=e[x],Z=t[x];if(o)var K=d?o(Z,q,x,t,e,f):o(q,Z,x,e,t,f);if(K!==n){if(K)continue;T=!1;break}if(W){if(!Wo(t,function(X,te){if(!mr(W,te)&&(q===X||a(q,X,r,o,f)))return W.push(te)})){T=!1;break}}else if(!(q===Z||a(q,Z,r,o,f))){T=!1;break}}return f.delete(e),f.delete(t),T}function lg(e,t,r,o,a,f,d){switch(r){case Rn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case gr:return!(e.byteLength!=t.byteLength||!f(new li(e),new li(t)));case cr:case fr:case lr:return pt(+e,+t);case Vr:return e.name==t.name&&e.message==t.message;case dr:case pr:return e==t+"";case ct:var h=Ko;case ft:var m=o&I;if(h||(h=oi),e.size!=t.size&&!m)return!1;var S=d.get(e);if(S)return S==t;o|=F,d.set(e,t);var w=cc(h(e),h(t),o,a,f,d);return d.delete(e),w;case Qr:if(Sr)return Sr.call(e)==Sr.call(t)}return!1}function dg(e,t,r,o,a,f){var d=r&I,h=gs(e),m=h.length,S=gs(t),w=S.length;if(m!=w&&!d)return!1;for(var x=m;x--;){var T=h[x];if(!(d?T in t:oe.call(t,T)))return!1}var W=f.get(e),q=f.get(t);if(W&&q)return W==t&&q==e;var Z=!0;f.set(e,t),f.set(t,e);for(var K=d;++x<m;){T=h[x];var X=e[T],te=t[T];if(o)var je=d?o(te,X,T,t,e,f):o(X,te,T,e,t,f);if(!(je===n?X===te||a(X,te,r,o,f):je)){Z=!1;break}K||(K=T=="constructor")}if(Z&&!K){var Re=e.constructor,ze=t.constructor;Re!=ze&&"constructor"in e&&"constructor"in t&&!(typeof Re=="function"&&Re instanceof Re&&typeof ze=="function"&&ze instanceof ze)&&(Z=!1)}return f.delete(e),f.delete(t),Z}function kt(e){return bs(gc(e,n,Cc),e+"")}function gs(e){return Nu(e,be,_s)}function ms(e){return Nu(e,Be,fc)}var vs=vi?function(e){return vi.get(e)}:Ds;function Ti(e){for(var t=e.name+"",r=Hn[t],o=oe.call(Hn,t)?r.length:0;o--;){var a=r[o],f=a.func;if(f==null||f==e)return a.name}return t}function jn(e){var t=oe.call(c,"placeholder")?c:e;return t.placeholder}function H(){var e=c.iteratee||Fs;return e=e===Fs?Iu:e,arguments.length?e(arguments[0],arguments[1]):e}function Ii(e,t){var r=e.__data__;return Ag(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ys(e){for(var t=be(e),r=t.length;r--;){var o=t[r],a=e[o];t[r]=[o,a,pc(a)]}return t}function yn(e,t){var r=bp(e,t);return Tu(r)?r:n}function pg(e){var t=oe.call(e,pn),r=e[pn];try{e[pn]=n;var o=!0}catch{}var a=ci.call(e);return o&&(t?e[pn]=r:delete e[pn]),a}var _s=jo?function(e){return e==null?[]:(e=se(e),$t(jo(e),function(t){return mu.call(e,t)}))}:Ls,fc=jo?function(e){for(var t=[];e;)jt(t,_s(e)),e=di(e);return t}:Ls,Te=Me;(zo&&Te(new zo(new ArrayBuffer(1)))!=Rn||yr&&Te(new yr)!=ct||Yo&&Te(Yo.resolve())!=Ea||Gn&&Te(new Gn)!=ft||_r&&Te(new _r)!=hr)&&(Te=function(e){var t=Me(e),r=t==xt?e.constructor:n,o=r?_n(r):"";if(o)switch(o){case Jp:return Rn;case Zp:return ct;case Vp:return Ea;case Xp:return ft;case Qp:return hr}return t});function hg(e,t,r){for(var o=-1,a=r.length;++o<a;){var f=r[o],d=f.size;switch(f.type){case"drop":e+=d;break;case"dropRight":t-=d;break;case"take":t=ke(t,e+d);break;case"takeRight":e=_e(e,t-d);break}}return{start:e,end:t}}function gg(e){var t=e.match(Sd);return t?t[1].split(wd):[]}function lc(e,t,r){t=Xt(t,e);for(var o=-1,a=t.length,f=!1;++o<a;){var d=_t(t[o]);if(!(f=e!=null&&r(e,d)))break;e=e[d]}return f||++o!=a?f:(a=e==null?0:e.length,!!a&&Bi(a)&&Tt(d,a)&&(z(e)||An(e)))}function mg(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&oe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function dc(e){return typeof e.constructor=="function"&&!Or(e)?qn(di(e)):{}}function vg(e,t,r){var o=e.constructor;switch(t){case gr:return ds(e);case cr:case fr:return new o(+e);case Rn:return eg(e,r);case yo:case _o:case Ao:case So:case wo:case bo:case Co:case xo:case Eo:return Yu(e,r);case ct:return new o;case lr:case pr:return new o(e);case dr:return tg(e);case ft:return new o;case Qr:return ng(e)}}function yg(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(Ad,`{
/* [wrapped with `+t+`] */
`)}function _g(e){return z(e)||An(e)||!!(vu&&e&&e[vu])}function Tt(e,t){var r=typeof e;return t=t??Kt,!!t&&(r=="number"||r!="symbol"&&Td.test(e))&&e>-1&&e%1==0&&e<t}function Fe(e,t,r){if(!pe(r))return!1;var o=typeof t;return(o=="number"?We(r)&&Tt(t,r.length):o=="string"&&t in r)?pt(r[t],e):!1}function As(e,t){if(z(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||$e(e)?!0:md.test(e)||!gd.test(e)||t!=null&&e in se(t)}function Ag(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ss(e){var t=Ti(e),r=c[t];if(typeof r!="function"||!(t in Q.prototype))return!1;if(e===r)return!0;var o=vs(r);return!!o&&e===o[0]}function Sg(e){return!!pu&&pu in e}var wg=ai?It:Ws;function Or(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Un;return e===r}function pc(e){return e===e&&!pe(e)}function hc(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==n||e in se(r))}}function bg(e){var t=Li(e,function(o){return r.size===_&&r.clear(),o}),r=t.cache;return t}function Cg(e,t){var r=e[1],o=t[1],a=r|o,f=a<(G|B|$),d=o==$&&r==N||o==$&&r==ve&&e[7].length<=t[8]||o==($|ve)&&t[7].length<=t[8]&&r==N;if(!(f||d))return e;o&G&&(e[2]=t[2],a|=r&G?0:P);var h=t[3];if(h){var m=e[3];e[3]=m?Zu(m,h,t[4]):h,e[4]=m?zt(e[3],b):t[4]}return h=t[5],h&&(m=e[5],e[5]=m?Vu(m,h,t[6]):h,e[6]=m?zt(e[5],b):t[6]),h=t[7],h&&(e[7]=h),o&$&&(e[8]=e[8]==null?t[8]:ke(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function xg(e){var t=[];if(e!=null)for(var r in se(e))t.push(r);return t}function Eg(e){return ci.call(e)}function gc(e,t,r){return t=_e(t===n?e.length-1:t,0),function(){for(var o=arguments,a=-1,f=_e(o.length-t,0),d=y(f);++a<f;)d[a]=o[t+a];a=-1;for(var h=y(t+1);++a<t;)h[a]=o[a];return h[t]=r(d),He(e,this,h)}}function mc(e,t){return t.length<2?e:vn(e,it(t,0,-1))}function Pg(e,t){for(var r=e.length,o=ke(t.length,r),a=Le(e);o--;){var f=t[o];e[o]=Tt(f,r)?a[f]:n}return e}function ws(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var vc=_c(Uu),Nr=Hp||function(e,t){return we.setTimeout(e,t)},bs=_c(Zh);function yc(e,t,r){var o=t+"";return bs(e,yg(o,Og(gg(o),r)))}function _c(e){var t=0,r=0;return function(){var o=jp(),a=vo-(o-r);if(r=o,a>0){if(++t>=mo)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Mi(e,t){var r=-1,o=e.length,a=o-1;for(t=t===n?o:t;++r<t;){var f=os(r,a),d=e[f];e[f]=e[r],e[r]=d}return e.length=t,e}var Ac=bg(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(vd,function(r,o,a,f){t.push(a?f.replace(xd,"$1"):o||r)}),t});function _t(e){if(typeof e=="string"||$e(e))return e;var t=e+"";return t=="0"&&1/e==-ln?"-0":t}function _n(e){if(e!=null){try{return ui.call(e)}catch{}try{return e+""}catch{}}return""}function Og(e,t){return et(td,function(r){var o="_."+r[0];t&r[1]&&!ri(e,o)&&e.push(o)}),e.sort()}function Sc(e){if(e instanceof Q)return e.clone();var t=new nt(e.__wrapped__,e.__chain__);return t.__actions__=Le(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ng(e,t,r){(r?Fe(e,t,r):t===n)?t=1:t=_e(J(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var a=0,f=0,d=y(gi(o/t));a<o;)d[f++]=it(e,a,a+=t);return d}function kg(e){for(var t=-1,r=e==null?0:e.length,o=0,a=[];++t<r;){var f=e[t];f&&(a[o++]=f)}return a}function Tg(){var e=arguments.length;if(!e)return[];for(var t=y(e-1),r=arguments[0],o=e;o--;)t[o-1]=arguments[o];return jt(z(r)?Le(r):[r],Pe(t,1))}var Ig=V(function(e,t){return ge(e)?br(e,Pe(t,1,ge,!0)):[]}),Mg=V(function(e,t){var r=ot(t);return ge(r)&&(r=n),ge(e)?br(e,Pe(t,1,ge,!0),H(r,2)):[]}),Fg=V(function(e,t){var r=ot(t);return ge(r)&&(r=n),ge(e)?br(e,Pe(t,1,ge,!0),n,r):[]});function Rg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),it(e,t<0?0:t,o)):[]}function Dg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),t=o-t,it(e,0,t<0?0:t)):[]}function Lg(e,t){return e&&e.length?xi(e,H(t,3),!0,!0):[]}function Wg(e,t){return e&&e.length?xi(e,H(t,3),!0):[]}function Bg(e,t,r,o){var a=e==null?0:e.length;return a?(r&&typeof r!="number"&&Fe(e,t,r)&&(r=0,o=a),Th(e,t,r,o)):[]}function wc(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=r==null?0:J(r);return a<0&&(a=_e(o+a,0)),ii(e,H(t,3),a)}function bc(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=o-1;return r!==n&&(a=J(r),a=r<0?_e(o+a,0):ke(a,o-1)),ii(e,H(t,3),a,!0)}function Cc(e){var t=e==null?0:e.length;return t?Pe(e,1):[]}function Ug(e){var t=e==null?0:e.length;return t?Pe(e,ln):[]}function Gg(e,t){var r=e==null?0:e.length;return r?(t=t===n?1:J(t),Pe(e,t)):[]}function Hg(e){for(var t=-1,r=e==null?0:e.length,o={};++t<r;){var a=e[t];o[a[0]]=a[1]}return o}function xc(e){return e&&e.length?e[0]:n}function qg(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=r==null?0:J(r);return a<0&&(a=_e(o+a,0)),Ln(e,t,a)}function Kg(e){var t=e==null?0:e.length;return t?it(e,0,-1):[]}var $g=V(function(e){var t=le(e,fs);return t.length&&t[0]===e[0]?es(t):[]}),jg=V(function(e){var t=ot(e),r=le(e,fs);return t===ot(r)?t=n:r.pop(),r.length&&r[0]===e[0]?es(r,H(t,2)):[]}),zg=V(function(e){var t=ot(e),r=le(e,fs);return t=typeof t=="function"?t:n,t&&r.pop(),r.length&&r[0]===e[0]?es(r,n,t):[]});function Yg(e,t){return e==null?"":Kp.call(e,t)}function ot(e){var t=e==null?0:e.length;return t?e[t-1]:n}function Jg(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=o;return r!==n&&(a=J(r),a=a<0?_e(o+a,0):ke(a,o-1)),t===t?Op(e,t,a):ii(e,ou,a,!0)}function Zg(e,t){return e&&e.length?Du(e,J(t)):n}var Vg=V(Ec);function Ec(e,t){return e&&e.length&&t&&t.length?is(e,t):e}function Xg(e,t,r){return e&&e.length&&t&&t.length?is(e,t,H(r,2)):e}function Qg(e,t,r){return e&&e.length&&t&&t.length?is(e,t,n,r):e}var em=kt(function(e,t){var r=e==null?0:e.length,o=Zo(e,t);return Bu(e,le(t,function(a){return Tt(a,r)?+a:a}).sort(Ju)),o});function tm(e,t){var r=[];if(!(e&&e.length))return r;var o=-1,a=[],f=e.length;for(t=H(t,3);++o<f;){var d=e[o];t(d,o,e)&&(r.push(d),a.push(o))}return Bu(e,a),r}function Cs(e){return e==null?e:Yp.call(e)}function nm(e,t,r){var o=e==null?0:e.length;return o?(r&&typeof r!="number"&&Fe(e,t,r)?(t=0,r=o):(t=t==null?0:J(t),r=r===n?o:J(r)),it(e,t,r)):[]}function rm(e,t){return Ci(e,t)}function im(e,t,r){return as(e,t,H(r,2))}function om(e,t){var r=e==null?0:e.length;if(r){var o=Ci(e,t);if(o<r&&pt(e[o],t))return o}return-1}function sm(e,t){return Ci(e,t,!0)}function am(e,t,r){return as(e,t,H(r,2),!0)}function um(e,t){var r=e==null?0:e.length;if(r){var o=Ci(e,t,!0)-1;if(pt(e[o],t))return o}return-1}function cm(e){return e&&e.length?Gu(e):[]}function fm(e,t){return e&&e.length?Gu(e,H(t,2)):[]}function lm(e){var t=e==null?0:e.length;return t?it(e,1,t):[]}function dm(e,t,r){return e&&e.length?(t=r||t===n?1:J(t),it(e,0,t<0?0:t)):[]}function pm(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),t=o-t,it(e,t<0?0:t,o)):[]}function hm(e,t){return e&&e.length?xi(e,H(t,3),!1,!0):[]}function gm(e,t){return e&&e.length?xi(e,H(t,3)):[]}var mm=V(function(e){return Vt(Pe(e,1,ge,!0))}),vm=V(function(e){var t=ot(e);return ge(t)&&(t=n),Vt(Pe(e,1,ge,!0),H(t,2))}),ym=V(function(e){var t=ot(e);return t=typeof t=="function"?t:n,Vt(Pe(e,1,ge,!0),n,t)});function _m(e){return e&&e.length?Vt(e):[]}function Am(e,t){return e&&e.length?Vt(e,H(t,2)):[]}function Sm(e,t){return t=typeof t=="function"?t:n,e&&e.length?Vt(e,n,t):[]}function xs(e){if(!(e&&e.length))return[];var t=0;return e=$t(e,function(r){if(ge(r))return t=_e(r.length,t),!0}),Ho(t,function(r){return le(e,Bo(r))})}function Pc(e,t){if(!(e&&e.length))return[];var r=xs(e);return t==null?r:le(r,function(o){return He(t,n,o)})}var wm=V(function(e,t){return ge(e)?br(e,t):[]}),bm=V(function(e){return cs($t(e,ge))}),Cm=V(function(e){var t=ot(e);return ge(t)&&(t=n),cs($t(e,ge),H(t,2))}),xm=V(function(e){var t=ot(e);return t=typeof t=="function"?t:n,cs($t(e,ge),n,t)}),Em=V(xs);function Pm(e,t){return $u(e||[],t||[],wr)}function Om(e,t){return $u(e||[],t||[],Er)}var Nm=V(function(e){var t=e.length,r=t>1?e[t-1]:n;return r=typeof r=="function"?(e.pop(),r):n,Pc(e,r)});function Oc(e){var t=c(e);return t.__chain__=!0,t}function km(e,t){return t(e),e}function Fi(e,t){return t(e)}var Tm=kt(function(e){var t=e.length,r=t?e[0]:0,o=this.__wrapped__,a=function(f){return Zo(f,e)};return t>1||this.__actions__.length||!(o instanceof Q)||!Tt(r)?this.thru(a):(o=o.slice(r,+r+(t?1:0)),o.__actions__.push({func:Fi,args:[a],thisArg:n}),new nt(o,this.__chain__).thru(function(f){return t&&!f.length&&f.push(n),f}))});function Im(){return Oc(this)}function Mm(){return new nt(this.value(),this.__chain__)}function Fm(){this.__values__===n&&(this.__values__=Hc(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function Rm(){return this}function Dm(e){for(var t,r=this;r instanceof _i;){var o=Sc(r);o.__index__=0,o.__values__=n,t?a.__wrapped__=o:t=o;var a=o;r=r.__wrapped__}return a.__wrapped__=e,t}function Lm(){var e=this.__wrapped__;if(e instanceof Q){var t=e;return this.__actions__.length&&(t=new Q(this)),t=t.reverse(),t.__actions__.push({func:Fi,args:[Cs],thisArg:n}),new nt(t,this.__chain__)}return this.thru(Cs)}function Wm(){return Ku(this.__wrapped__,this.__actions__)}var Bm=Ei(function(e,t,r){oe.call(e,r)?++e[r]:Ot(e,r,1)});function Um(e,t,r){var o=z(e)?ru:kh;return r&&Fe(e,t,r)&&(t=n),o(e,H(t,3))}function Gm(e,t){var r=z(e)?$t:Pu;return r(e,H(t,3))}var Hm=tc(wc),qm=tc(bc);function Km(e,t){return Pe(Ri(e,t),1)}function $m(e,t){return Pe(Ri(e,t),ln)}function jm(e,t,r){return r=r===n?1:J(r),Pe(Ri(e,t),r)}function Nc(e,t){var r=z(e)?et:Zt;return r(e,H(t,3))}function kc(e,t){var r=z(e)?lp:Eu;return r(e,H(t,3))}var zm=Ei(function(e,t,r){oe.call(e,r)?e[r].push(t):Ot(e,r,[t])});function Ym(e,t,r,o){e=We(e)?e:Yn(e),r=r&&!o?J(r):0;var a=e.length;return r<0&&(r=_e(a+r,0)),Ui(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&Ln(e,t,r)>-1}var Jm=V(function(e,t,r){var o=-1,a=typeof t=="function",f=We(e)?y(e.length):[];return Zt(e,function(d){f[++o]=a?He(t,d,r):Cr(d,t,r)}),f}),Zm=Ei(function(e,t,r){Ot(e,r,t)});function Ri(e,t){var r=z(e)?le:Mu;return r(e,H(t,3))}function Vm(e,t,r,o){return e==null?[]:(z(t)||(t=t==null?[]:[t]),r=o?n:r,z(r)||(r=r==null?[]:[r]),Lu(e,t,r))}var Xm=Ei(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});function Qm(e,t,r){var o=z(e)?Lo:au,a=arguments.length<3;return o(e,H(t,4),r,a,Zt)}function ev(e,t,r){var o=z(e)?dp:au,a=arguments.length<3;return o(e,H(t,4),r,a,Eu)}function tv(e,t){var r=z(e)?$t:Pu;return r(e,Wi(H(t,3)))}function nv(e){var t=z(e)?wu:Yh;return t(e)}function rv(e,t,r){(r?Fe(e,t,r):t===n)?t=1:t=J(t);var o=z(e)?xh:Jh;return o(e,t)}function iv(e){var t=z(e)?Eh:Vh;return t(e)}function ov(e){if(e==null)return 0;if(We(e))return Ui(e)?Bn(e):e.length;var t=Te(e);return t==ct||t==ft?e.size:ns(e).length}function sv(e,t,r){var o=z(e)?Wo:Xh;return r&&Fe(e,t,r)&&(t=n),o(e,H(t,3))}var av=V(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Fe(e,t[0],t[1])?t=[]:r>2&&Fe(t[0],t[1],t[2])&&(t=[t[0]]),Lu(e,Pe(t,1),[])}),Di=Gp||function(){return we.Date.now()};function uv(e,t){if(typeof t!="function")throw new tt(l);return e=J(e),function(){if(--e<1)return t.apply(this,arguments)}}function Tc(e,t,r){return t=r?n:t,t=e&&t==null?e.length:t,Nt(e,$,n,n,n,n,t)}function Ic(e,t){var r;if(typeof t!="function")throw new tt(l);return e=J(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var Es=V(function(e,t,r){var o=G;if(r.length){var a=zt(r,jn(Es));o|=L}return Nt(e,o,t,r,a)}),Mc=V(function(e,t,r){var o=G|B;if(r.length){var a=zt(r,jn(Mc));o|=L}return Nt(t,o,e,r,a)});function Fc(e,t,r){t=r?n:t;var o=Nt(e,N,n,n,n,n,n,t);return o.placeholder=Fc.placeholder,o}function Rc(e,t,r){t=r?n:t;var o=Nt(e,U,n,n,n,n,n,t);return o.placeholder=Rc.placeholder,o}function Dc(e,t,r){var o,a,f,d,h,m,S=0,w=!1,x=!1,T=!0;if(typeof e!="function")throw new tt(l);t=st(t)||0,pe(r)&&(w=!!r.leading,x="maxWait"in r,f=x?_e(st(r.maxWait)||0,t):f,T="trailing"in r?!!r.trailing:T);function W(me){var ht=o,Ft=a;return o=a=n,S=me,d=e.apply(Ft,ht),d}function q(me){return S=me,h=Nr(X,t),w?W(me):d}function Z(me){var ht=me-m,Ft=me-S,tf=t-ht;return x?ke(tf,f-Ft):tf}function K(me){var ht=me-m,Ft=me-S;return m===n||ht>=t||ht<0||x&&Ft>=f}function X(){var me=Di();if(K(me))return te(me);h=Nr(X,Z(me))}function te(me){return h=n,T&&o?W(me):(o=a=n,d)}function je(){h!==n&&ju(h),S=0,o=m=a=h=n}function Re(){return h===n?d:te(Di())}function ze(){var me=Di(),ht=K(me);if(o=arguments,a=this,m=me,ht){if(h===n)return q(m);if(x)return ju(h),h=Nr(X,t),W(m)}return h===n&&(h=Nr(X,t)),d}return ze.cancel=je,ze.flush=Re,ze}var cv=V(function(e,t){return xu(e,1,t)}),fv=V(function(e,t,r){return xu(e,st(t)||0,r)});function lv(e){return Nt(e,ee)}function Li(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new tt(l);var r=function(){var o=arguments,a=t?t.apply(this,o):o[0],f=r.cache;if(f.has(a))return f.get(a);var d=e.apply(this,o);return r.cache=f.set(a,d)||f,d};return r.cache=new(Li.Cache||Pt),r}Li.Cache=Pt;function Wi(e){if(typeof e!="function")throw new tt(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function dv(e){return Ic(2,e)}var pv=Qh(function(e,t){t=t.length==1&&z(t[0])?le(t[0],qe(H())):le(Pe(t,1),qe(H()));var r=t.length;return V(function(o){for(var a=-1,f=ke(o.length,r);++a<f;)o[a]=t[a].call(this,o[a]);return He(e,this,o)})}),Ps=V(function(e,t){var r=zt(t,jn(Ps));return Nt(e,L,n,t,r)}),Lc=V(function(e,t){var r=zt(t,jn(Lc));return Nt(e,Y,n,t,r)}),hv=kt(function(e,t){return Nt(e,ve,n,n,n,t)});function gv(e,t){if(typeof e!="function")throw new tt(l);return t=t===n?t:J(t),V(e,t)}function mv(e,t){if(typeof e!="function")throw new tt(l);return t=t==null?0:_e(J(t),0),V(function(r){var o=r[t],a=Qt(r,0,t);return o&&jt(a,o),He(e,this,a)})}function vv(e,t,r){var o=!0,a=!0;if(typeof e!="function")throw new tt(l);return pe(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),Dc(e,t,{leading:o,maxWait:t,trailing:a})}function yv(e){return Tc(e,1)}function _v(e,t){return Ps(ls(t),e)}function Av(){if(!arguments.length)return[];var e=arguments[0];return z(e)?e:[e]}function Sv(e){return rt(e,k)}function wv(e,t){return t=typeof t=="function"?t:n,rt(e,k,t)}function bv(e){return rt(e,C|k)}function Cv(e,t){return t=typeof t=="function"?t:n,rt(e,C|k,t)}function xv(e,t){return t==null||Cu(e,t,be(t))}function pt(e,t){return e===t||e!==e&&t!==t}var Ev=ki(Qo),Pv=ki(function(e,t){return e>=t}),An=ku(function(){return arguments}())?ku:function(e){return he(e)&&oe.call(e,"callee")&&!mu.call(e,"callee")},z=y.isArray,Ov=Va?qe(Va):Dh;function We(e){return e!=null&&Bi(e.length)&&!It(e)}function ge(e){return he(e)&&We(e)}function Nv(e){return e===!0||e===!1||he(e)&&Me(e)==cr}var en=qp||Ws,kv=Xa?qe(Xa):Lh;function Tv(e){return he(e)&&e.nodeType===1&&!kr(e)}function Iv(e){if(e==null)return!0;if(We(e)&&(z(e)||typeof e=="string"||typeof e.splice=="function"||en(e)||zn(e)||An(e)))return!e.length;var t=Te(e);if(t==ct||t==ft)return!e.size;if(Or(e))return!ns(e).length;for(var r in e)if(oe.call(e,r))return!1;return!0}function Mv(e,t){return xr(e,t)}function Fv(e,t,r){r=typeof r=="function"?r:n;var o=r?r(e,t):n;return o===n?xr(e,t,n,r):!!o}function Os(e){if(!he(e))return!1;var t=Me(e);return t==Vr||t==rd||typeof e.message=="string"&&typeof e.name=="string"&&!kr(e)}function Rv(e){return typeof e=="number"&&yu(e)}function It(e){if(!pe(e))return!1;var t=Me(e);return t==Xr||t==xa||t==nd||t==od}function Wc(e){return typeof e=="number"&&e==J(e)}function Bi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Kt}function pe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function he(e){return e!=null&&typeof e=="object"}var Bc=Qa?qe(Qa):Bh;function Dv(e,t){return e===t||ts(e,t,ys(t))}function Lv(e,t,r){return r=typeof r=="function"?r:n,ts(e,t,ys(t),r)}function Wv(e){return Uc(e)&&e!=+e}function Bv(e){if(wg(e))throw new j(u);return Tu(e)}function Uv(e){return e===null}function Gv(e){return e==null}function Uc(e){return typeof e=="number"||he(e)&&Me(e)==lr}function kr(e){if(!he(e)||Me(e)!=xt)return!1;var t=di(e);if(t===null)return!0;var r=oe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ui.call(r)==Lp}var Ns=eu?qe(eu):Uh;function Hv(e){return Wc(e)&&e>=-Kt&&e<=Kt}var Gc=tu?qe(tu):Gh;function Ui(e){return typeof e=="string"||!z(e)&&he(e)&&Me(e)==pr}function $e(e){return typeof e=="symbol"||he(e)&&Me(e)==Qr}var zn=nu?qe(nu):Hh;function qv(e){return e===n}function Kv(e){return he(e)&&Te(e)==hr}function $v(e){return he(e)&&Me(e)==ad}var jv=ki(rs),zv=ki(function(e,t){return e<=t});function Hc(e){if(!e)return[];if(We(e))return Ui(e)?lt(e):Le(e);if(vr&&e[vr])return xp(e[vr]());var t=Te(e),r=t==ct?Ko:t==ft?oi:Yn;return r(e)}function Mt(e){if(!e)return e===0?e:0;if(e=st(e),e===ln||e===-ln){var t=e<0?-1:1;return t*Xl}return e===e?e:0}function J(e){var t=Mt(e),r=t%1;return t===t?r?t-r:t:0}function qc(e){return e?mn(J(e),0,mt):0}function st(e){if(typeof e=="number")return e;if($e(e))return Jr;if(pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=uu(e);var r=Od.test(e);return r||kd.test(e)?up(e.slice(2),r?2:8):Pd.test(e)?Jr:+e}function Kc(e){return yt(e,Be(e))}function Yv(e){return e?mn(J(e),-Kt,Kt):e===0?e:0}function ie(e){return e==null?"":Ke(e)}var Jv=Kn(function(e,t){if(Or(t)||We(t)){yt(t,be(t),e);return}for(var r in t)oe.call(t,r)&&wr(e,r,t[r])}),$c=Kn(function(e,t){yt(t,Be(t),e)}),Gi=Kn(function(e,t,r,o){yt(t,Be(t),e,o)}),Zv=Kn(function(e,t,r,o){yt(t,be(t),e,o)}),Vv=kt(Zo);function Xv(e,t){var r=qn(e);return t==null?r:bu(r,t)}var Qv=V(function(e,t){e=se(e);var r=-1,o=t.length,a=o>2?t[2]:n;for(a&&Fe(t[0],t[1],a)&&(o=1);++r<o;)for(var f=t[r],d=Be(f),h=-1,m=d.length;++h<m;){var S=d[h],w=e[S];(w===n||pt(w,Un[S])&&!oe.call(e,S))&&(e[S]=f[S])}return e}),ey=V(function(e){return e.push(n,uc),He(jc,n,e)});function ty(e,t){return iu(e,H(t,3),vt)}function ny(e,t){return iu(e,H(t,3),Xo)}function ry(e,t){return e==null?e:Vo(e,H(t,3),Be)}function iy(e,t){return e==null?e:Ou(e,H(t,3),Be)}function oy(e,t){return e&&vt(e,H(t,3))}function sy(e,t){return e&&Xo(e,H(t,3))}function ay(e){return e==null?[]:wi(e,be(e))}function uy(e){return e==null?[]:wi(e,Be(e))}function ks(e,t,r){var o=e==null?n:vn(e,t);return o===n?r:o}function cy(e,t){return e!=null&&lc(e,t,Ih)}function Ts(e,t){return e!=null&&lc(e,t,Mh)}var fy=rc(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=ci.call(t)),e[t]=r},Ms(Ue)),ly=rc(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=ci.call(t)),oe.call(e,t)?e[t].push(r):e[t]=[r]},H),dy=V(Cr);function be(e){return We(e)?Su(e):ns(e)}function Be(e){return We(e)?Su(e,!0):qh(e)}function py(e,t){var r={};return t=H(t,3),vt(e,function(o,a,f){Ot(r,t(o,a,f),o)}),r}function hy(e,t){var r={};return t=H(t,3),vt(e,function(o,a,f){Ot(r,a,t(o,a,f))}),r}var gy=Kn(function(e,t,r){bi(e,t,r)}),jc=Kn(function(e,t,r,o){bi(e,t,r,o)}),my=kt(function(e,t){var r={};if(e==null)return r;var o=!1;t=le(t,function(f){return f=Xt(f,e),o||(o=f.length>1),f}),yt(e,ms(e),r),o&&(r=rt(r,C|E|k,fg));for(var a=t.length;a--;)us(r,t[a]);return r});function vy(e,t){return zc(e,Wi(H(t)))}var yy=kt(function(e,t){return e==null?{}:$h(e,t)});function zc(e,t){if(e==null)return{};var r=le(ms(e),function(o){return[o]});return t=H(t),Wu(e,r,function(o,a){return t(o,a[0])})}function _y(e,t,r){t=Xt(t,e);var o=-1,a=t.length;for(a||(a=1,e=n);++o<a;){var f=e==null?n:e[_t(t[o])];f===n&&(o=a,f=r),e=It(f)?f.call(e):f}return e}function Ay(e,t,r){return e==null?e:Er(e,t,r)}function Sy(e,t,r,o){return o=typeof o=="function"?o:n,e==null?e:Er(e,t,r,o)}var Yc=sc(be),Jc=sc(Be);function wy(e,t,r){var o=z(e),a=o||en(e)||zn(e);if(t=H(t,4),r==null){var f=e&&e.constructor;a?r=o?new f:[]:pe(e)?r=It(f)?qn(di(e)):{}:r={}}return(a?et:vt)(e,function(d,h,m){return t(r,d,h,m)}),r}function by(e,t){return e==null?!0:us(e,t)}function Cy(e,t,r){return e==null?e:qu(e,t,ls(r))}function xy(e,t,r,o){return o=typeof o=="function"?o:n,e==null?e:qu(e,t,ls(r),o)}function Yn(e){return e==null?[]:qo(e,be(e))}function Ey(e){return e==null?[]:qo(e,Be(e))}function Py(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=st(r),r=r===r?r:0),t!==n&&(t=st(t),t=t===t?t:0),mn(st(e),t,r)}function Oy(e,t,r){return t=Mt(t),r===n?(r=t,t=0):r=Mt(r),e=st(e),Fh(e,t,r)}function Ny(e,t,r){if(r&&typeof r!="boolean"&&Fe(e,t,r)&&(t=r=n),r===n&&(typeof t=="boolean"?(r=t,t=n):typeof e=="boolean"&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Mt(e),t===n?(t=e,e=0):t=Mt(t)),e>t){var o=e;e=t,t=o}if(r||e%1||t%1){var a=_u();return ke(e+a*(t-e+ap("1e-"+((a+"").length-1))),t)}return os(e,t)}var ky=$n(function(e,t,r){return t=t.toLowerCase(),e+(r?Zc(t):t)});function Zc(e){return Is(ie(e).toLowerCase())}function Vc(e){return e=ie(e),e&&e.replace(Id,Ap).replace(Vd,"")}function Ty(e,t,r){e=ie(e),t=Ke(t);var o=e.length;r=r===n?o:mn(J(r),0,o);var a=r;return r-=t.length,r>=0&&e.slice(r,a)==t}function Iy(e){return e=ie(e),e&&dd.test(e)?e.replace(Oa,Sp):e}function My(e){return e=ie(e),e&&yd.test(e)?e.replace(Po,"\\$&"):e}var Fy=$n(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),Ry=$n(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Dy=ec("toLowerCase");function Ly(e,t,r){e=ie(e),t=J(t);var o=t?Bn(e):0;if(!t||o>=t)return e;var a=(t-o)/2;return Ni(mi(a),r)+e+Ni(gi(a),r)}function Wy(e,t,r){e=ie(e),t=J(t);var o=t?Bn(e):0;return t&&o<t?e+Ni(t-o,r):e}function By(e,t,r){e=ie(e),t=J(t);var o=t?Bn(e):0;return t&&o<t?Ni(t-o,r)+e:e}function Uy(e,t,r){return r||t==null?t=0:t&&(t=+t),zp(ie(e).replace(Oo,""),t||0)}function Gy(e,t,r){return(r?Fe(e,t,r):t===n)?t=1:t=J(t),ss(ie(e),t)}function Hy(){var e=arguments,t=ie(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var qy=$n(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});function Ky(e,t,r){return r&&typeof r!="number"&&Fe(e,t,r)&&(t=r=n),r=r===n?mt:r>>>0,r?(e=ie(e),e&&(typeof t=="string"||t!=null&&!Ns(t))&&(t=Ke(t),!t&&Wn(e))?Qt(lt(e),0,r):e.split(t,r)):[]}var $y=$n(function(e,t,r){return e+(r?" ":"")+Is(t)});function jy(e,t,r){return e=ie(e),r=r==null?0:mn(J(r),0,e.length),t=Ke(t),e.slice(r,r+t.length)==t}function zy(e,t,r){var o=c.templateSettings;r&&Fe(e,t,r)&&(t=n),e=ie(e),t=Gi({},t,o,ac);var a=Gi({},t.imports,o.imports,ac),f=be(a),d=qo(a,f),h,m,S=0,w=t.interpolate||ei,x="__p += '",T=$o((t.escape||ei).source+"|"+w.source+"|"+(w===Na?Ed:ei).source+"|"+(t.evaluate||ei).source+"|$","g"),W="//# sourceURL="+(oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++np+"]")+`
`;e.replace(T,function(K,X,te,je,Re,ze){return te||(te=je),x+=e.slice(S,ze).replace(Md,wp),X&&(h=!0,x+=`' +
__e(`+X+`) +
'`),Re&&(m=!0,x+=`';
`+Re+`;
__p += '`),te&&(x+=`' +
((__t = (`+te+`)) == null ? '' : __t) +
'`),S=ze+K.length,K}),x+=`';
`;var q=oe.call(t,"variable")&&t.variable;if(!q)x=`with (obj) {
`+x+`
}
`;else if(Cd.test(q))throw new j(p);x=(m?x.replace(ud,""):x).replace(cd,"$1").replace(fd,"$1;"),x="function("+(q||"obj")+`) {
`+(q?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(h?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+x+`return __p
}`;var Z=Qc(function(){return re(f,W+"return "+x).apply(n,d)});if(Z.source=x,Os(Z))throw Z;return Z}function Yy(e){return ie(e).toLowerCase()}function Jy(e){return ie(e).toUpperCase()}function Zy(e,t,r){if(e=ie(e),e&&(r||t===n))return uu(e);if(!e||!(t=Ke(t)))return e;var o=lt(e),a=lt(t),f=cu(o,a),d=fu(o,a)+1;return Qt(o,f,d).join("")}function Vy(e,t,r){if(e=ie(e),e&&(r||t===n))return e.slice(0,du(e)+1);if(!e||!(t=Ke(t)))return e;var o=lt(e),a=fu(o,lt(t))+1;return Qt(o,0,a).join("")}function Xy(e,t,r){if(e=ie(e),e&&(r||t===n))return e.replace(Oo,"");if(!e||!(t=Ke(t)))return e;var o=lt(e),a=cu(o,lt(t));return Qt(o,a).join("")}function Qy(e,t){var r=fe,o=Ne;if(pe(t)){var a="separator"in t?t.separator:a;r="length"in t?J(t.length):r,o="omission"in t?Ke(t.omission):o}e=ie(e);var f=e.length;if(Wn(e)){var d=lt(e);f=d.length}if(r>=f)return e;var h=r-Bn(o);if(h<1)return o;var m=d?Qt(d,0,h).join(""):e.slice(0,h);if(a===n)return m+o;if(d&&(h+=m.length-h),Ns(a)){if(e.slice(h).search(a)){var S,w=m;for(a.global||(a=$o(a.source,ie(ka.exec(a))+"g")),a.lastIndex=0;S=a.exec(w);)var x=S.index;m=m.slice(0,x===n?h:x)}}else if(e.indexOf(Ke(a),h)!=h){var T=m.lastIndexOf(a);T>-1&&(m=m.slice(0,T))}return m+o}function e_(e){return e=ie(e),e&&ld.test(e)?e.replace(Pa,Np):e}var t_=$n(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Is=ec("toUpperCase");function Xc(e,t,r){return e=ie(e),t=r?n:t,t===n?Cp(e)?Ip(e):gp(e):e.match(t)||[]}var Qc=V(function(e,t){try{return He(e,n,t)}catch(r){return Os(r)?r:new j(r)}}),n_=kt(function(e,t){return et(t,function(r){r=_t(r),Ot(e,r,Es(e[r],e))}),e});function r_(e){var t=e==null?0:e.length,r=H();return e=t?le(e,function(o){if(typeof o[1]!="function")throw new tt(l);return[r(o[0]),o[1]]}):[],V(function(o){for(var a=-1;++a<t;){var f=e[a];if(He(f[0],this,o))return He(f[1],this,o)}})}function i_(e){return Nh(rt(e,C))}function Ms(e){return function(){return e}}function o_(e,t){return e==null||e!==e?t:e}var s_=nc(),a_=nc(!0);function Ue(e){return e}function Fs(e){return Iu(typeof e=="function"?e:rt(e,C))}function u_(e){return Fu(rt(e,C))}function c_(e,t){return Ru(e,rt(t,C))}var f_=V(function(e,t){return function(r){return Cr(r,e,t)}}),l_=V(function(e,t){return function(r){return Cr(e,r,t)}});function Rs(e,t,r){var o=be(t),a=wi(t,o);r==null&&!(pe(t)&&(a.length||!o.length))&&(r=t,t=e,e=this,a=wi(t,be(t)));var f=!(pe(r)&&"chain"in r)||!!r.chain,d=It(e);return et(a,function(h){var m=t[h];e[h]=m,d&&(e.prototype[h]=function(){var S=this.__chain__;if(f||S){var w=e(this.__wrapped__),x=w.__actions__=Le(this.__actions__);return x.push({func:m,args:arguments,thisArg:e}),w.__chain__=S,w}return m.apply(e,jt([this.value()],arguments))})}),e}function d_(){return we._===this&&(we._=Wp),this}function Ds(){}function p_(e){return e=J(e),V(function(t){return Du(t,e)})}var h_=ps(le),g_=ps(ru),m_=ps(Wo);function ef(e){return As(e)?Bo(_t(e)):jh(e)}function v_(e){return function(t){return e==null?n:vn(e,t)}}var y_=ic(),__=ic(!0);function Ls(){return[]}function Ws(){return!1}function A_(){return{}}function S_(){return""}function w_(){return!0}function b_(e,t){if(e=J(e),e<1||e>Kt)return[];var r=mt,o=ke(e,mt);t=H(t),e-=mt;for(var a=Ho(o,t);++r<e;)t(r);return a}function C_(e){return z(e)?le(e,_t):$e(e)?[e]:Le(Ac(ie(e)))}function x_(e){var t=++Dp;return ie(e)+t}var E_=Oi(function(e,t){return e+t},0),P_=hs("ceil"),O_=Oi(function(e,t){return e/t},1),N_=hs("floor");function k_(e){return e&&e.length?Si(e,Ue,Qo):n}function T_(e,t){return e&&e.length?Si(e,H(t,2),Qo):n}function I_(e){return su(e,Ue)}function M_(e,t){return su(e,H(t,2))}function F_(e){return e&&e.length?Si(e,Ue,rs):n}function R_(e,t){return e&&e.length?Si(e,H(t,2),rs):n}var D_=Oi(function(e,t){return e*t},1),L_=hs("round"),W_=Oi(function(e,t){return e-t},0);function B_(e){return e&&e.length?Go(e,Ue):0}function U_(e,t){return e&&e.length?Go(e,H(t,2)):0}return c.after=uv,c.ary=Tc,c.assign=Jv,c.assignIn=$c,c.assignInWith=Gi,c.assignWith=Zv,c.at=Vv,c.before=Ic,c.bind=Es,c.bindAll=n_,c.bindKey=Mc,c.castArray=Av,c.chain=Oc,c.chunk=Ng,c.compact=kg,c.concat=Tg,c.cond=r_,c.conforms=i_,c.constant=Ms,c.countBy=Bm,c.create=Xv,c.curry=Fc,c.curryRight=Rc,c.debounce=Dc,c.defaults=Qv,c.defaultsDeep=ey,c.defer=cv,c.delay=fv,c.difference=Ig,c.differenceBy=Mg,c.differenceWith=Fg,c.drop=Rg,c.dropRight=Dg,c.dropRightWhile=Lg,c.dropWhile=Wg,c.fill=Bg,c.filter=Gm,c.flatMap=Km,c.flatMapDeep=$m,c.flatMapDepth=jm,c.flatten=Cc,c.flattenDeep=Ug,c.flattenDepth=Gg,c.flip=lv,c.flow=s_,c.flowRight=a_,c.fromPairs=Hg,c.functions=ay,c.functionsIn=uy,c.groupBy=zm,c.initial=Kg,c.intersection=$g,c.intersectionBy=jg,c.intersectionWith=zg,c.invert=fy,c.invertBy=ly,c.invokeMap=Jm,c.iteratee=Fs,c.keyBy=Zm,c.keys=be,c.keysIn=Be,c.map=Ri,c.mapKeys=py,c.mapValues=hy,c.matches=u_,c.matchesProperty=c_,c.memoize=Li,c.merge=gy,c.mergeWith=jc,c.method=f_,c.methodOf=l_,c.mixin=Rs,c.negate=Wi,c.nthArg=p_,c.omit=my,c.omitBy=vy,c.once=dv,c.orderBy=Vm,c.over=h_,c.overArgs=pv,c.overEvery=g_,c.overSome=m_,c.partial=Ps,c.partialRight=Lc,c.partition=Xm,c.pick=yy,c.pickBy=zc,c.property=ef,c.propertyOf=v_,c.pull=Vg,c.pullAll=Ec,c.pullAllBy=Xg,c.pullAllWith=Qg,c.pullAt=em,c.range=y_,c.rangeRight=__,c.rearg=hv,c.reject=tv,c.remove=tm,c.rest=gv,c.reverse=Cs,c.sampleSize=rv,c.set=Ay,c.setWith=Sy,c.shuffle=iv,c.slice=nm,c.sortBy=av,c.sortedUniq=cm,c.sortedUniqBy=fm,c.split=Ky,c.spread=mv,c.tail=lm,c.take=dm,c.takeRight=pm,c.takeRightWhile=hm,c.takeWhile=gm,c.tap=km,c.throttle=vv,c.thru=Fi,c.toArray=Hc,c.toPairs=Yc,c.toPairsIn=Jc,c.toPath=C_,c.toPlainObject=Kc,c.transform=wy,c.unary=yv,c.union=mm,c.unionBy=vm,c.unionWith=ym,c.uniq=_m,c.uniqBy=Am,c.uniqWith=Sm,c.unset=by,c.unzip=xs,c.unzipWith=Pc,c.update=Cy,c.updateWith=xy,c.values=Yn,c.valuesIn=Ey,c.without=wm,c.words=Xc,c.wrap=_v,c.xor=bm,c.xorBy=Cm,c.xorWith=xm,c.zip=Em,c.zipObject=Pm,c.zipObjectDeep=Om,c.zipWith=Nm,c.entries=Yc,c.entriesIn=Jc,c.extend=$c,c.extendWith=Gi,Rs(c,c),c.add=E_,c.attempt=Qc,c.camelCase=ky,c.capitalize=Zc,c.ceil=P_,c.clamp=Py,c.clone=Sv,c.cloneDeep=bv,c.cloneDeepWith=Cv,c.cloneWith=wv,c.conformsTo=xv,c.deburr=Vc,c.defaultTo=o_,c.divide=O_,c.endsWith=Ty,c.eq=pt,c.escape=Iy,c.escapeRegExp=My,c.every=Um,c.find=Hm,c.findIndex=wc,c.findKey=ty,c.findLast=qm,c.findLastIndex=bc,c.findLastKey=ny,c.floor=N_,c.forEach=Nc,c.forEachRight=kc,c.forIn=ry,c.forInRight=iy,c.forOwn=oy,c.forOwnRight=sy,c.get=ks,c.gt=Ev,c.gte=Pv,c.has=cy,c.hasIn=Ts,c.head=xc,c.identity=Ue,c.includes=Ym,c.indexOf=qg,c.inRange=Oy,c.invoke=dy,c.isArguments=An,c.isArray=z,c.isArrayBuffer=Ov,c.isArrayLike=We,c.isArrayLikeObject=ge,c.isBoolean=Nv,c.isBuffer=en,c.isDate=kv,c.isElement=Tv,c.isEmpty=Iv,c.isEqual=Mv,c.isEqualWith=Fv,c.isError=Os,c.isFinite=Rv,c.isFunction=It,c.isInteger=Wc,c.isLength=Bi,c.isMap=Bc,c.isMatch=Dv,c.isMatchWith=Lv,c.isNaN=Wv,c.isNative=Bv,c.isNil=Gv,c.isNull=Uv,c.isNumber=Uc,c.isObject=pe,c.isObjectLike=he,c.isPlainObject=kr,c.isRegExp=Ns,c.isSafeInteger=Hv,c.isSet=Gc,c.isString=Ui,c.isSymbol=$e,c.isTypedArray=zn,c.isUndefined=qv,c.isWeakMap=Kv,c.isWeakSet=$v,c.join=Yg,c.kebabCase=Fy,c.last=ot,c.lastIndexOf=Jg,c.lowerCase=Ry,c.lowerFirst=Dy,c.lt=jv,c.lte=zv,c.max=k_,c.maxBy=T_,c.mean=I_,c.meanBy=M_,c.min=F_,c.minBy=R_,c.stubArray=Ls,c.stubFalse=Ws,c.stubObject=A_,c.stubString=S_,c.stubTrue=w_,c.multiply=D_,c.nth=Zg,c.noConflict=d_,c.noop=Ds,c.now=Di,c.pad=Ly,c.padEnd=Wy,c.padStart=By,c.parseInt=Uy,c.random=Ny,c.reduce=Qm,c.reduceRight=ev,c.repeat=Gy,c.replace=Hy,c.result=_y,c.round=L_,c.runInContext=g,c.sample=nv,c.size=ov,c.snakeCase=qy,c.some=sv,c.sortedIndex=rm,c.sortedIndexBy=im,c.sortedIndexOf=om,c.sortedLastIndex=sm,c.sortedLastIndexBy=am,c.sortedLastIndexOf=um,c.startCase=$y,c.startsWith=jy,c.subtract=W_,c.sum=B_,c.sumBy=U_,c.template=zy,c.times=b_,c.toFinite=Mt,c.toInteger=J,c.toLength=qc,c.toLower=Yy,c.toNumber=st,c.toSafeInteger=Yv,c.toString=ie,c.toUpper=Jy,c.trim=Zy,c.trimEnd=Vy,c.trimStart=Xy,c.truncate=Qy,c.unescape=e_,c.uniqueId=x_,c.upperCase=t_,c.upperFirst=Is,c.each=Nc,c.eachRight=kc,c.first=xc,Rs(c,function(){var e={};return vt(c,function(t,r){oe.call(c.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),c.VERSION=i,et(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){c[e].placeholder=c}),et(["drop","take"],function(e,t){Q.prototype[e]=function(r){r=r===n?1:_e(J(r),0);var o=this.__filtered__&&!t?new Q(this):this.clone();return o.__filtered__?o.__takeCount__=ke(r,o.__takeCount__):o.__views__.push({size:ke(r,mt),type:e+(o.__dir__<0?"Right":"")}),o},Q.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),et(["filter","map","takeWhile"],function(e,t){var r=t+1,o=r==Ca||r==Vl;Q.prototype[e]=function(a){var f=this.clone();return f.__iteratees__.push({iteratee:H(a,3),type:r}),f.__filtered__=f.__filtered__||o,f}}),et(["head","last"],function(e,t){var r="take"+(t?"Right":"");Q.prototype[e]=function(){return this[r](1).value()[0]}}),et(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");Q.prototype[e]=function(){return this.__filtered__?new Q(this):this[r](1)}}),Q.prototype.compact=function(){return this.filter(Ue)},Q.prototype.find=function(e){return this.filter(e).head()},Q.prototype.findLast=function(e){return this.reverse().find(e)},Q.prototype.invokeMap=V(function(e,t){return typeof e=="function"?new Q(this):this.map(function(r){return Cr(r,e,t)})}),Q.prototype.reject=function(e){return this.filter(Wi(H(e)))},Q.prototype.slice=function(e,t){e=J(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Q(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(t=J(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},Q.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Q.prototype.toArray=function(){return this.take(mt)},vt(Q.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=c[o?"take"+(t=="last"?"Right":""):t],f=o||/^find/.test(t);a&&(c.prototype[t]=function(){var d=this.__wrapped__,h=o?[1]:arguments,m=d instanceof Q,S=h[0],w=m||z(d),x=function(X){var te=a.apply(c,jt([X],h));return o&&T?te[0]:te};w&&r&&typeof S=="function"&&S.length!=1&&(m=w=!1);var T=this.__chain__,W=!!this.__actions__.length,q=f&&!T,Z=m&&!W;if(!f&&w){d=Z?d:new Q(this);var K=e.apply(d,h);return K.__actions__.push({func:Fi,args:[x],thisArg:n}),new nt(K,T)}return q&&Z?e.apply(this,h):(K=this.thru(x),q?o?K.value()[0]:K.value():K)})}),et(["pop","push","shift","sort","splice","unshift"],function(e){var t=si[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);c.prototype[e]=function(){var a=arguments;if(o&&!this.__chain__){var f=this.value();return t.apply(z(f)?f:[],a)}return this[r](function(d){return t.apply(z(d)?d:[],a)})}}),vt(Q.prototype,function(e,t){var r=c[t];if(r){var o=r.name+"";oe.call(Hn,o)||(Hn[o]=[]),Hn[o].push({name:t,func:r})}}),Hn[Pi(n,B).name]=[{name:"wrapper",func:n}],Q.prototype.clone=eh,Q.prototype.reverse=th,Q.prototype.value=nh,c.prototype.at=Tm,c.prototype.chain=Im,c.prototype.commit=Mm,c.prototype.next=Fm,c.prototype.plant=Dm,c.prototype.reverse=Lm,c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=Wm,c.prototype.first=c.prototype.head,vr&&(c.prototype[vr]=Rm),c},Yt=Mp();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(we._=Yt,define(function(){return Yt})):dn?((dn.exports=Yt)._=Yt,Fo._=Yt):we._=Yt}).call(ar)});var Hl=at((ew,Gl)=>{ut();Gl.exports=de("NeosProjectPackages")().NeosUiI18n});ut();var Tr=class{constructor(i){this.SERIAL_VERSION_UID="d8a5aa78-978e-11e6-ae22-56b6b6499611",this.description=i}};var Y_=(n,i="position",s="key")=>{let u=typeof i=="string"?N=>N[i]:i,l={},p={},v={},_={},b={},C={};n.forEach((N,U)=>{let L=N[s]?N[s]:String(U);l[L]=U;let Y=u(N),$=String(Y||U),ve=!1;if($.startsWith("start")){let ee=$.match(/start\s+(\d+)/),fe=ee&&ee[1]?Number(ee[1]):0;v[fe]||(v[fe]=[]),v[fe].push(L)}else if($.startsWith("end")){let ee=$.match(/end\s+(\d+)/),fe=ee&&ee[1]?Number(ee[1]):0;_[fe]||(_[fe]=[]),_[fe].push(L)}else if($.startsWith("before")){let ee=$.match(/before\s+(\S+)(\s+(\d+))?/);if(!ee)ve=!0;else{let fe=ee[1],Ne=ee[3]?Number(ee[3]):0;b[fe]||(b[fe]={}),b[fe][Ne]||(b[fe][Ne]=[]),b[fe][Ne].push(L)}}else if($.startsWith("after")){let ee=$.match(/after\s+(\S+)(\s+(\d+))?/);if(!ee)ve=!0;else{let fe=ee[1],Ne=ee[3]?Number(ee[3]):0;C[fe]||(C[fe]={}),C[fe][Ne]||(C[fe][Ne]=[]),C[fe][Ne].push(L)}}else ve=!0;if(ve){let ee=parseFloat($);(isNaN(ee)||!isFinite(ee))&&(ee=U),p[ee]||(p[ee]=[]),p[ee].push(L)}});let E=[],k=[],I=[],F=[],G=(N,U)=>{let L=Object.keys(N).map(Y=>Number(Y)).sort((Y,$)=>Y-$);return U?L:L.reverse()},B=(N,U)=>{N.forEach(L=>{if(!(F.indexOf(L)>=0)){if(F.push(L),b[L]){let Y=G(b[L],!0);for(let $ of Y)B(b[L][$],U)}if(U.push(L),C[L]){let Y=G(C[L],!1);for(let $ of Y)B(C[L][$],U)}}})};for(let N of G(v,!1))B(v[N],E);for(let N of G(p,!0))B(p[N],k);for(let N of G(_,!0))B(_[N],I);for(let N of Object.keys(b))if(!(F.indexOf(N)>=0))for(let U of G(b[N],!1))B(b[N][U],E);for(let N of Object.keys(C))if(!(F.indexOf(N)>=0))for(let U of G(C[N],!1))B(C[N][U],k);return[...E,...k,...I].map(N=>l[N]).map(N=>n[N])},Bs=Y_;var tn=class extends Tr{constructor(i){super(i),this._registry=[]}set(i,s,u=0){if(typeof i!="string")throw new Error("Key must be a string");if(typeof u!="string"&&typeof u!="number")throw new Error("Position must be a string or a number");let l={key:i,value:s};u&&(l.position=u);let p=this._registry.findIndex(v=>v.key===i);return p===-1?this._registry.push(l):this._registry[p]=l,s}get(i){if(typeof i!="string")return console.error("Key must be a string"),null;let s=this._registry.find(u=>u.key===i);return s?s.value:null}_getChildrenWrapped(i){let s=this._registry.filter(u=>u.key.indexOf(i+"/")===0);return Bs(s)}getChildrenAsObject(i){let s={};return this._getChildrenWrapped(i).forEach(u=>{s[u.key]=u.value}),s}getChildren(i){return this._getChildrenWrapped(i).map(s=>s.value)}has(i){return typeof i!="string"?(console.error("Key must be a string"),!1):!!this._registry.find(s=>s.key===i)}_getAllWrapped(){return Bs(this._registry)}getAllAsObject(){let i={};return this._getAllWrapped().forEach(s=>{i[s.key]=s.value}),i}getAllAsList(){return this._getAllWrapped().map(i=>Object.assign({id:i.key},i.value))}};var rf=de("manifest");var Ie=class extends Error{constructor(s,u,l=""){super(s);O(this,"code");O(this,"severity","error");O(this,"externalMessage");this.code=u,this.externalMessage=l}};var of=n=>new Us(n.apiDomain,n.apiKey),Us=class{constructor(i,s){O(this,"apiDomain","");O(this,"apiKey","");O(this,"hasApiKey",()=>this.apiKey!==null&&this.apiKey!=="");O(this,"generate",async(i,s,u={})=>{let p=(await this.fetch(`/api/v1/chat?language=${s}`,{method:"POST",body:JSON.stringify({module:i,platform:"neos",user_input:u})}))?.data?.message?.message;return typeof p=="string"&&p.startsWith('"')&&p.endsWith('"')&&(p=p.substring(1,p.length-1)),p});O(this,"fetch",async(i,s={})=>{if(!this.apiKey)throw new Ie("This feature is not available in the free version.","1688157373215");let u=await fetch(this.apiDomain+i,Object.assign({},s,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`,Accept:"application/json"}})),l=await u.json();if(u.status===401)throw new Ie("The NEOSidekick api key provided is not valid.","1688158193038");if(u.status<200||u.status>=400){let p=l?.message;throw l?.errors&&(p+="<br>"+Object.values(l.errors).join("<br>")),new Ie("An error occurred while asking NEOSidekick.","1688158257149",p)}return l});this.apiDomain=i,this.apiKey=s}};ut();var sf=de("NeosProjectPackages")().NeosUiBackendConnectorDefault,{fetchWithErrorHandling:EA}=de("NeosProjectPackages")().NeosUiBackendConnector;var on=R(Ge());function gt(n){for(var i=arguments.length,s=Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];if(!1)var l,p;throw Error("[Immer] minified error nr: "+n+(s.length?" "+s.map(function(v){return"'"+v+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Jn(n){return!!n&&!!n[Ye]}function wn(n){var i;return!!n&&(function(s){if(!s||typeof s!="object")return!1;var u=Object.getPrototypeOf(s);if(u===null)return!0;var l=Object.hasOwnProperty.call(u,"constructor")&&u.constructor;return l===Object||typeof l=="function"&&Function.toString.call(l)===r0}(n)||Array.isArray(n)||!!n[gf]||!!(!((i=n.constructor)===null||i===void 0)&&i[gf])||Zs(n)||Vs(n))}function Mr(n,i,s){s===void 0&&(s=!1),Zn(n)===0?(s?Object.keys:na)(n).forEach(function(u){s&&typeof u=="symbol"||i(u,n[u],n)}):n.forEach(function(u,l){return i(l,u,n)})}function Zn(n){var i=n[Ye];return i?i.i>3?i.i-4:i.i:Array.isArray(n)?1:Zs(n)?2:Vs(n)?3:0}function $s(n,i){return Zn(n)===2?n.has(i):Object.prototype.hasOwnProperty.call(n,i)}function Z_(n,i){return Zn(n)===2?n.get(i):n[i]}function mf(n,i,s){var u=Zn(n);u===2?n.set(i,s):u===3?n.add(s):n[i]=s}function V_(n,i){return n===i?n!==0||1/n==1/i:n!=n&&i!=i}function Zs(n){return t0&&n instanceof Map}function Vs(n){return n0&&n instanceof Set}function Sn(n){return n.o||n.t}function Xs(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var i=i0(n);delete i[Ye];for(var s=na(i),u=0;u<s.length;u++){var l=s[u],p=i[l];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(i[l]={configurable:!0,writable:!0,enumerable:p.enumerable,value:n[l]})}return Object.create(Object.getPrototypeOf(n),i)}function Qs(n,i){return i===void 0&&(i=!1),ea(n)||Jn(n)||!wn(n)||(Zn(n)>1&&(n.set=n.add=n.clear=n.delete=X_),Object.freeze(n),i&&Mr(n,function(s,u){return Qs(u,!0)},!0)),n}function X_(){gt(2)}function ea(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function At(n){var i=o0[n];return i||gt(18,n),i}function uf(){return Fr}function Gs(n,i){i&&(At("Patches"),n.u=[],n.s=[],n.v=i)}function qi(n){js(n),n.p.forEach(Q_),n.p=null}function js(n){n===Fr&&(Fr=n.l)}function cf(n){return Fr={p:[],l:Fr,h:n,m:!0,_:0}}function Q_(n){var i=n[Ye];i.i===0||i.i===1?i.j():i.g=!0}function Hs(n,i){i._=i.p.length;var s=i.p[0],u=n!==void 0&&n!==s;return i.h.O||At("ES5").S(i,n,u),u?(s[Ye].P&&(qi(i),gt(4)),wn(n)&&(n=Ki(i,n),i.l||$i(i,n)),i.u&&At("Patches").M(s[Ye].t,n,i.u,i.s)):n=Ki(i,s,[]),qi(i),i.u&&i.v(i.u,i.s),n!==vf?n:void 0}function Ki(n,i,s){if(ea(i))return i;var u=i[Ye];if(!u)return Mr(i,function(_,b){return ff(n,u,i,_,b,s)},!0),i;if(u.A!==n)return i;if(!u.P)return $i(n,u.t,!0),u.t;if(!u.I){u.I=!0,u.A._--;var l=u.i===4||u.i===5?u.o=Xs(u.k):u.o,p=l,v=!1;u.i===3&&(p=new Set(l),l.clear(),v=!0),Mr(p,function(_,b){return ff(n,u,l,_,b,s,v)}),$i(n,l,!1),s&&n.u&&At("Patches").N(u,s,n.u,n.s)}return u.o}function ff(n,i,s,u,l,p,v){if(Jn(l)){var _=Ki(n,l,p&&i&&i.i!==3&&!$s(i.R,u)?p.concat(u):void 0);if(mf(s,u,_),!Jn(_))return;n.m=!1}else v&&s.add(l);if(wn(l)&&!ea(l)){if(!n.h.D&&n._<1)return;Ki(n,l),i&&i.A.l||$i(n,l)}}function $i(n,i,s){s===void 0&&(s=!1),!n.l&&n.h.D&&n.m&&Qs(i,s)}function qs(n,i){var s=n[Ye];return(s?Sn(s):n)[i]}function lf(n,i){if(i in n)for(var s=Object.getPrototypeOf(n);s;){var u=Object.getOwnPropertyDescriptor(s,i);if(u)return u;s=Object.getPrototypeOf(s)}}function zs(n){n.P||(n.P=!0,n.l&&zs(n.l))}function Ks(n){n.o||(n.o=Xs(n.t))}function Ys(n,i,s){var u=Zs(i)?At("MapSet").F(i,s):Vs(i)?At("MapSet").T(i,s):n.O?function(l,p){var v=Array.isArray(l),_={i:v?1:0,A:p?p.A:uf(),P:!1,I:!1,R:{},l:p,t:l,k:null,o:null,j:null,C:!1},b=_,C=Js;v&&(b=[_],C=Ir);var E=Proxy.revocable(b,C),k=E.revoke,I=E.proxy;return _.k=I,_.j=k,I}(i,s):At("ES5").J(i,s);return(s?s.A:uf()).p.push(u),u}function e0(n){return Jn(n)||gt(22,n),function i(s){if(!wn(s))return s;var u,l=s[Ye],p=Zn(s);if(l){if(!l.P&&(l.i<4||!At("ES5").K(l)))return l.t;l.I=!0,u=df(s,p),l.I=!1}else u=df(s,p);return Mr(u,function(v,_){l&&Z_(l.t,v)===_||mf(u,v,i(_))}),p===3?new Set(u):u}(n)}function df(n,i){switch(i){case 2:return new Map(n);case 3:return Array.from(n)}return Xs(n)}var pf,Fr,ta=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",t0=typeof Map<"u",n0=typeof Set<"u",hf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",vf=ta?Symbol.for("immer-nothing"):((pf={})["immer-nothing"]=!0,pf),gf=ta?Symbol.for("immer-draftable"):"__$immer_draftable",Ye=ta?Symbol.for("immer-state"):"__$immer_state";var r0=""+Object.prototype.constructor,na=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,i0=Object.getOwnPropertyDescriptors||function(n){var i={};return na(n).forEach(function(s){i[s]=Object.getOwnPropertyDescriptor(n,s)}),i},o0={},Js={get:function(n,i){if(i===Ye)return n;var s=Sn(n);if(!$s(s,i))return function(l,p,v){var _,b=lf(p,v);return b?"value"in b?b.value:(_=b.get)===null||_===void 0?void 0:_.call(l.k):void 0}(n,s,i);var u=s[i];return n.I||!wn(u)?u:u===qs(n.t,i)?(Ks(n),n.o[i]=Ys(n.A.h,u,n)):u},has:function(n,i){return i in Sn(n)},ownKeys:function(n){return Reflect.ownKeys(Sn(n))},set:function(n,i,s){var u=lf(Sn(n),i);if(u?.set)return u.set.call(n.k,s),!0;if(!n.P){var l=qs(Sn(n),i),p=l?.[Ye];if(p&&p.t===s)return n.o[i]=s,n.R[i]=!1,!0;if(V_(s,l)&&(s!==void 0||$s(n.t,i)))return!0;Ks(n),zs(n)}return n.o[i]===s&&(s!==void 0||i in n.o)||Number.isNaN(s)&&Number.isNaN(n.o[i])||(n.o[i]=s,n.R[i]=!0),!0},deleteProperty:function(n,i){return qs(n.t,i)!==void 0||i in n.t?(n.R[i]=!1,Ks(n),zs(n)):delete n.R[i],n.o&&delete n.o[i],!0},getOwnPropertyDescriptor:function(n,i){var s=Sn(n),u=Reflect.getOwnPropertyDescriptor(s,i);return u&&{writable:!0,configurable:n.i!==1||i!=="length",enumerable:u.enumerable,value:s[i]}},defineProperty:function(){gt(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){gt(12)}},Ir={};Mr(Js,function(n,i){Ir[n]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),Ir.deleteProperty=function(n,i){return Ir.set.call(this,n,i,void 0)},Ir.set=function(n,i,s){return Js.set.call(this,n[0],i,s,n[0])};var s0=function(){function n(s){var u=this;this.O=hf,this.D=!0,this.produce=function(l,p,v){if(typeof l=="function"&&typeof p!="function"){var _=p;p=l;var b=u;return function(B){var P=this;B===void 0&&(B=_);for(var N=arguments.length,U=Array(N>1?N-1:0),L=1;L<N;L++)U[L-1]=arguments[L];return b.produce(B,function(Y){var $;return($=p).call.apply($,[P,Y].concat(U))})}}var C;if(typeof p!="function"&&gt(6),v!==void 0&&typeof v!="function"&&gt(7),wn(l)){var E=cf(u),k=Ys(u,l,void 0),I=!0;try{C=p(k),I=!1}finally{I?qi(E):js(E)}return typeof Promise<"u"&&C instanceof Promise?C.then(function(B){return Gs(E,v),Hs(B,E)},function(B){throw qi(E),B}):(Gs(E,v),Hs(C,E))}if(!l||typeof l!="object"){if((C=p(l))===void 0&&(C=l),C===vf&&(C=void 0),u.D&&Qs(C,!0),v){var F=[],G=[];At("Patches").M(l,C,F,G),v(F,G)}return C}gt(21,l)},this.produceWithPatches=function(l,p){if(typeof l=="function")return function(C){for(var E=arguments.length,k=Array(E>1?E-1:0),I=1;I<E;I++)k[I-1]=arguments[I];return u.produceWithPatches(C,function(F){return l.apply(void 0,[F].concat(k))})};var v,_,b=u.produce(l,p,function(C,E){v=C,_=E});return typeof Promise<"u"&&b instanceof Promise?b.then(function(C){return[C,v,_]}):[b,v,_]},typeof s?.useProxies=="boolean"&&this.setUseProxies(s.useProxies),typeof s?.autoFreeze=="boolean"&&this.setAutoFreeze(s.autoFreeze)}var i=n.prototype;return i.createDraft=function(s){wn(s)||gt(8),Jn(s)&&(s=e0(s));var u=cf(this),l=Ys(this,s,void 0);return l[Ye].C=!0,js(u),l},i.finishDraft=function(s,u){var l=s&&s[Ye],p=l.A;return Gs(p,u),Hs(void 0,p)},i.setAutoFreeze=function(s){this.D=s},i.setUseProxies=function(s){s&&!hf&&gt(20),this.O=s},i.applyPatches=function(s,u){var l;for(l=u.length-1;l>=0;l--){var p=u[l];if(p.path.length===0&&p.op==="replace"){s=p.value;break}}l>-1&&(u=u.slice(l+1));var v=At("Patches").$;return Jn(s)?v(s,u):this.produce(s,function(_){return v(_,u)})},n}(),Je=new s0,Rr=Je.produce,kA=Je.produceWithPatches.bind(Je),TA=Je.setAutoFreeze.bind(Je),IA=Je.setUseProxies.bind(Je),MA=Je.applyPatches.bind(Je),FA=Je.createDraft.bind(Je),RA=Je.finishDraft.bind(Je),yf=Rr;var Qf=R(Xf());var el=(n,i)=>new va(n,i),va=class{constructor(i,s){O(this,"globalRegistry");O(this,"store");O(this,"guestFrameContentDocument",null);O(this,"nodeTypesRegistry");O(this,"externalService");O(this,"getGuestFrameContentDocument",async()=>{let i=document.getElementsByName("neos-content-main")[0];for(;!i;)await new Promise(s=>setTimeout(s,100)),i=document.getElementsByName("neos-content-main")[0];for(;!i.contentDocument||i.contentDocument.readyState==="loading"||!i?.contentDocument?.title;)await new Promise(s=>setTimeout(s,100));return this.guestFrameContentDocument=i?.contentDocument,this.guestFrameContentDocument});O(this,"getGuestFrameDocumentTitle",async()=>(await this.getGuestFrameContentDocument())?.title);O(this,"getGuestFrameDocumentHtml",async()=>(await this.getGuestFrameContentDocument())?.body?.innerHTML);O(this,"getCurrentDocumentNode",()=>{let i=this.store.getState();return on.selectors.CR.Nodes.documentNodeSelector(i)});O(this,"getCurrentDocumentParentNode",()=>{let i=this.store.getState(),s=this.getCurrentDocumentNode();return on.selectors.CR.Nodes.nodeByContextPath(i)(s.parent)});O(this,"getCurrentDocumentNodeType",()=>{let i=this.getCurrentDocumentNode();return this.globalRegistry.get("@neos-project/neos-ui-contentrepository").get(i?.nodeType)});O(this,"getCurrentDocumentTargetAudience",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.targetAudience;return i?this.processClientEval(i):""});O(this,"getCurrentDocumentPageBriefing",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.pageBriefing;return i?this.processClientEval(i):""});O(this,"getCurrentDocumentFocusKeyword",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.focusKeyword;return i?await this.processClientEval(i):""});O(this,"processClientEval",async(i,s,u)=>{if(typeof i=="string"&&(i.startsWith("SidekickClientEval:")||i.startsWith("ClientEval:")))try{s=s??this.getCurrentDocumentNode();let l=on.selectors.UI.Inspector.transientValues(this.store.getState());s=this.generateNodeForContext(s,l),u=u??this.getCurrentDocumentParentNode();let p=null,v=null;(i.indexOf("documentTitle")!==-1||i.indexOf("documentContent")!==-1)&&(p=await this.getGuestFrameDocumentTitle(),v=await this.getGuestFrameDocumentHtml());let _=this.getImageMetadata,b=(I,F)=>this.getAssetProperty("title",I,F||""),C=(I,F)=>this.getAssetProperty("caption",I,F||""),E=Object.getPrototypeOf(async function(){}).constructor;return await new E("node,parentNode,documentTitle,documentContent,AssetUri,AssetTitle,AssetCaption","return "+i.replace("SidekickClientEval:","").replace("ClientEval:",""))(s,u,p,v,_,b,C)}catch(l){throw l instanceof Ie?l:(console.error(l),new Ie('An error occurred while trying to evaluate "'+i+'"',"1694682118365",i))}return i});O(this,"processValueWithClientEval",async(i,s,u)=>{if(typeof i=="string")return this.processClientEval(i,s,u);if(typeof i=="object"&&i!==null)return this.processObjectWithClientEval(i,s,u);if(typeof i=="boolean")return i;if(i===null)return null;if(Array.isArray(i))return Promise.all(i.map(async l=>this.processObjectWithClientEval(l,s,u)))});O(this,"processObjectWithClientEval",async(i,s,u)=>{let l={};return await Promise.all(Object.keys(i).map(async p=>{let v=i[p];l[p]=await this.processValueWithClientEval(v,s,u)})),l});O(this,"getImageMetadata",async i=>{if(!i||!i?.__identity)throw new Ie("The property does not have a valid image.","1694595562191");let{loadImageMetadata:s}=sf.get().endpoints,u,l;try{let v=await s(i?.__identity);u=v?.originalImageResourceUri,l=v?.previewImageResourceUri}catch{throw new Ie("Could not fetch image object.","1694595598880")}if(!u||u==="")throw new Ie("The given image does not have a correct url.","1694595462402");let p=[];return p.push(this.prependConfiguredDomainToImageUri(u)),l&&p.push(this.prependConfiguredDomainToImageUri(l)),p});O(this,"getAssetProperty",async(i,s,u="")=>{if(!s||!s?.__identity)return u;try{return(await(await fetch("/neosidekick/aiassistant/service/imageTitleAndCaption?image="+s?.__identity,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"}})).json())[i]||u}catch{return u}});this.globalRegistry=i,this.store=s,this.nodeTypesRegistry=i.get("@neos-project/neos-ui-contentrepository"),this.externalService=i.get("NEOSidekick.AiAssistant").get("externalService")}prependConfiguredDomainToImageUri(i){let s=this.globalRegistry.get("NEOSidekick.AiAssistant").get("configuration").domain,u=i.replace("http://","").replace("https://","").split("/");return u.shift(),u.unshift(s),u.join("/")}getCurrentlyFocusedNodePathAndProperty(){let i=this.store.getState(),s=this.globalRegistry.get("@neos-project/neos-ui-contentrepository"),u=i?.cr?.nodes?.focused?.contextPaths[0],l=u?on.selectors.CR.Nodes.nodeByContextPath(i)(u):null;return{nodePath:u,node:l,property:i?.ui?.contentCanvas?.currentlyEditedPropertyName,nodeType:l?s.get(l?.nodeType):null,parentNode:l?on.selectors.CR.Nodes.nodesByContextPathSelector(i)[l.parent]:null}}async evaluateNodeTypeConfigurationAndStartGeneration(i,s,u,l,p=!1){if(!u||s[0]==="_")return;let v=u.properties?u.properties[s]:null;try{if(v?.options?.sidekick?.onCreate?.module)throw new Ie("Please do not use options.sidekick.onCreate.module anymore. Read the docs to find out about the new configuration.","1696264259260");if(!v?.options?.sidekick?.module||p&&v?.options?.sidekick?.onCreate&&!await this.processValueWithClientEval(v?.options?.sidekick?.onCreate,i,l))return;if(!v?.ui?.inlineEditable)throw new Ie("You can only generate content on inline editable properties","1688395273728");if(!this.externalService.hasApiKey())throw new Ie("This feature is not available in the free version.","1688157373215")}catch(E){let k=this.globalRegistry.get("i18n");this.store.dispatch(on.actions.UI.FlashMessages.add(E?.code??E?.message,E?.code?k.translate("NEOSidekick.AiAssistant:Error:"+E.code):E?.message,E?.severity??"error"));return}let _=JSON.parse(JSON.stringify(v.options.sidekick)),b=this.globalRegistry.get("NEOSidekick.AiAssistant").get("contentCanvasService"),C=await this.processObjectWithClientEval(_,i,l);b.streamGenerationIntoInlineProperty(i.contextPath,s,C)}generateNodeForContext(i,s){return s?Rr(i,u=>{let l=(0,Qf.default)(s,p=>p?.value);u.properties=Object.assign({},u.properties,l)}):i}};var tl=R(Ge());var nl=(n,i,s)=>new ya(n,i,s),ya=class{constructor(i,s,u){O(this,"globalRegistry");O(this,"store");O(this,"iFrameApiService");O(this,"currentlyHandledNodePath",null);O(this,"streamGenerationIntoInlineProperty",(i,s,u)=>{this.iFrameApiService.callModule({target:{nodePath:i,propertyName:s},...u},()=>this.currentlyHandledNodePath=i)});O(this,"onNodeRemoved",i=>{this.currentlyHandledNodePath===i&&(this.iFrameApiService.cancelCallModule(),this.unsetCurrentlyHandledNodePath())});O(this,"getEditorContent",(i,s)=>this.getPropertyInlineField(i,s)?.ckeditorInstance?.getData());O(this,"getSelectedContent",(i,s)=>{let l=this.getPropertyInlineField(i,s)?.ckeditorInstance;return l?.data.stringify(l.model.getSelectedContent(l.model.document.selection))});O(this,"insertTextIntoInlineEditor",(i,s,u,l)=>{let v=this.getPropertyInlineField(i,s)?.ckeditorInstance,_=v.model.document.selection.getFirstRange();if(l){let b=u.lastIndexOf("</");b+10<u.length&&(b=u.length),u=u.substring(0,b)+"&nbsp;"+u.substring(b)}v.model.change(b=>{let C=v.data.processor.toView(u),E=v.data.toModel(C),k=v.model.insertContent(E,_);v.editing.view.focus(),b.setSelection(k)})});O(this,"handleMessage",i=>{switch(i?.data?.eventName){case"write-content":let{nodePath:s,propertyName:u,value:l,isFinished:p}=i?.data?.data;s&&u&&(console.info(s+": "+l),this.setPropertyValue(s,u,l||"",p||!1),p&&this.handleStreamingFinished());break;case"stopped-generation":this.handleStreamingFinished();break;case"error":let v=i?.data?.data?.message;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+v,"error",v),this.handleStreamingFinished();break;default:let _="Unknown message event: "+i?.data?.eventName;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+_,"error",_),this.handleStreamingFinished()}});O(this,"handleStreamingFinished",()=>{this.resetTypingCaret(),this.unsetCurrentlyHandledNodePath(),this.iFrameApiService.setStreamingFinished()});O(this,"getPropertyInlineField",(i,s)=>document.getElementsByName("neos-content-main")[0]?.contentDocument?.querySelector(`[data-__neos-editable-node-contextpath="${i}"][data-__neos-property="${s}"]`)||void 0);O(this,"setPropertyValue",(i,s,u,l)=>{let p=this.getPropertyInlineField(i,s);if(!p&&l){let _="Could not find inline field for nodePath: "+i+" and propertyName: "+s;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+_,"error",_),this.unsetCurrentlyHandledNodePath();return}if(!p)return;if(!this.store.getState()?.cr?.nodes?.byContextPath.hasOwnProperty(i)){this.handleStreamingFinished();return}p.ckeditorInstance?.setData(u),p.classList.add("typing-caret")});this.globalRegistry=i,this.store=s,this.iFrameApiService=u,this.iFrameApiService.listenToMessages(this.handleMessage)}unsetCurrentlyHandledNodePath(){this.currentlyHandledNodePath=null}resetTypingCaret(){let u=document.getElementsByName("neos-content-main")[0]?.contentDocument?.querySelector(".typing-caret");u&&u.classList.remove("typing-caret")}addFlashMessage(i,s,u="error",l){let p=this.globalRegistry.get("i18n");this.store.dispatch(tl.actions.UI.FlashMessages.add(i,p.translate("NEOSidekick.AiAssistant:Error:"+i,s,{0:l}),u))}};var rl=()=>new _a,_a=class{constructor(){O(this,"isStreaming",!1);O(this,"unsyncedWebContextIsNewPage");O(this,"unsyncedWebContextData");O(this,"callModuleQueue",[]);O(this,"callModule",(i,s)=>{if(this.isStreaming){this.callModuleQueue.push({data:i,onStarted:s});return}this.isStreaming=!0;let u={version:"1.0",eventName:"call-module",data:{platform:"neos",...i}};this.sendMessage(u,s)});O(this,"setStreamingFinished",()=>{this.isStreaming=!1,this.unsyncedWebContextData&&(this.updateWebContext(this.unsyncedWebContextIsNewPage||!1,this.unsyncedWebContextData),this.unsyncedWebContextData=void 0,this.unsyncedWebContextIsNewPage=void 0);let i=this.callModuleQueue.shift();if(i){let{data:s,onStarted:u}=i;this.callModule(s,u)}});O(this,"cancelCallModule",()=>{let i={version:"1.0",eventName:"cancel-call-module"};this.setStreamingFinished(),this.sendMessage(i)});O(this,"updateWebContext",(i,s)=>{if(this.isStreaming){this.unsyncedWebContextIsNewPage=i,this.unsyncedWebContextData=s;return}let u={version:"1.0",eventName:i?"page-changed":"page-updated",data:s};this.sendMessage(u)});O(this,"listenToMessages",i=>{let s=this.getAssistantFrame();s?window.addEventListener("message",u=>{u.source===s.contentWindow&&i(u)}):setTimeout(()=>this.listenToMessages(i),250)});O(this,"sendMessage",(i,s,u=0)=>{let l=this.getAssistantFrame();if(l)console.log("Sending message to frame",i),l.contentWindow?.postMessage(i,"*"),s&&s();else{if(u>20){alert("NEOSidekick AI-Error: Could not load assistant frame, please reload the page or contact support@neosidekick.com.");return}u++,setTimeout(()=>this.sendMessage(i,s),250)}});O(this,"getAssistantFrame",()=>{let i=document.getElementById("neosidekickAssistant");return i?.dataset.hasOwnProperty("loaded")&&i.contentWindow?i:null})}};var uo=R(ol());var Y1=(n,i)=>(0,uo.action)("@neosidekick/ai-assistant/UI/ModifyDialog/OPEN",{selectedText:i,fullText:n}),J1=()=>(0,uo.action)("@neosidekick/ai-assistant/UI/ModifyDialog/CANCEL"),Z1=n=>(0,uo.action)("@neosidekick/ai-assistant/UI/ModifyDialog/APPLY",{newText:n}),En={openModal:Y1,cancelModal:J1,applyModal:Z1},sl=(n,i)=>yf(n,s=>{switch(i.type){case"@neos/neos-ui/System/INIT":{s.plugins.NEOSidekick={},s.plugins.NEOSidekick.AiAssistant={},s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/OPEN":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!0,s.plugins.NEOSidekick.AiAssistant.fullText=i.payload.fullText,s.plugins.NEOSidekick.AiAssistant.selectedText=i.payload.selectedText;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/CANCEL":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/APPLY":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}}}),co={isModalOpen:n=>n.plugins?.NEOSidekick?.AiAssistant?.isModalOpen,fullText:n=>n.plugins?.NEOSidekick?.AiAssistant?.fullText,selectedText:n=>n.plugins?.NEOSidekick?.AiAssistant?.selectedText};var Tn=R(Aa());var De=R(Ze()),pl=R(Bt()),xe=R(St()),hl=R(wt()),rr=R(Ut()),nr=R(Ge()),gl=R(Aa());var sn=class extends De.Component{constructor(i){super(i),this.state={suggestionsState:"none",suggestions:[]}}renderIcon(i){return i?De.default.createElement(rr.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):De.default.createElement(rr.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}getLanguage(){let{activeContentDimensions:i,frontendConfiguration:s}=this.props;return i.language?i.language[0]:s.defaultLanguage}async fetchSuggestions(i=3){let{externalService:s,contentService:u,addFlashMessage:l,i18nRegistry:p,node:v,parentNode:_,options:b}=this.props,C=b.module,E=b.arguments??{};this.setState({suggestionsState:"is-loading"});try{let k=await u.processObjectWithClientEval(E,v,_);k=Object.keys(k).map(F=>({identifier:F,value:k[F]}));let I=await s.generate(C,this.getLanguage(),k);if(!Array.isArray(I)||I.length===0){if(i===0)throw new Error(p.translate("NEOSidekick.AiAssistant:Editors.FocusKeywordEditor:suggestionsFailed","Could not calculate focus keyword suggestions for the page."));this.fetchSuggestions(i-1);return}this.setState({suggestionsState:"loaded",suggestions:I})}catch(k){this.setState({suggestionsState:"none"}),l(k?.code??k?.message,k?.code?p.translate("NEOSidekick.AiAssistant:Error:"+k.code,k.message,{0:k.externalMessage}):k.message,k?.severity??"error")}}render(){let{value:i,commit:s,i18nRegistry:u}=this.props,{suggestionsState:l,suggestions:p}=this.state,v=`https://app.ahrefs.com/keywords-explorer/google/${this.getLanguage().replace("en","uk")}/overview?keyword=${i}`,_="https://ads.google.com/aw/keywordplanner/plan/keywords/historical";return De.default.createElement("div",{style:{display:"flex",flexDirection:"column"}},De.default.createElement("div",null,De.default.createElement(gl.TextField,{...this.props})),(l==="none"||l==="is-loading")&&De.default.createElement("div",{style:{marginTop:"5px"}},De.default.createElement(rr.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:l==="is-loading"?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:l==="is-loading",onClick:()=>this.fetchSuggestions()},u.translate("NEOSidekick.AiAssistant:Main:calculateWithSidekick","Calculate with Sidekick"),"\xA0",this.renderIcon(l==="is-loading"))),l==="loaded"&&De.default.createElement("div",{style:{padding:"1rem",background:"gray"}},u.translate("NEOSidekick.AiAssistant:Editors.FocusKeywordEditor:suggestionsIntro","Our page content analysis points one of the following phrases as focus keyword. If this does not fit at all, customising the text for SEO could be helpful."),p.map(b=>De.default.createElement(rr.Button,{key:b,className:"neosidekick__editor__suggestion-button",size:"small",style:"lighter",hoverStyle:"brand",onClick:()=>s(b)},b))),(l==="loaded"||i)&&De.default.createElement("p",{style:{marginBottom:"16px"}},u.translate("NEOSidekick.AiAssistant:Editors.FocusKeywordEditor:checkSearchVolume","Check search volume:"),"\xA0",De.default.createElement("a",{href:v,target:"_blank",style:{textDecoration:"underline",color:"white"}},"Ahrefs"),"\xA0|\xA0",De.default.createElement("a",{href:_,target:"_blank",style:{textDecoration:"underline",color:"white"}},"Google")))}};O(sn,"propTypes",{className:xe.default.string,value:xe.default.oneOfType([xe.default.string,xe.default.number]),commit:xe.default.func.isRequired,options:xe.default.object,onKeyPress:xe.default.func,onEnterKey:xe.default.func,id:xe.default.string,activeContentDimensions:xe.default.object.isRequired,node:xe.default.object,parentNode:xe.default.object,i18nRegistry:xe.default.object.isRequired,externalService:xe.default.object.isRequired,contentService:xe.default.object.isRequired,addFlashMessage:xe.default.func.isRequired,frontendConfiguration:xe.default.object}),sn=Ce([(0,hl.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,pl.connect)(n=>{let i=nr.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:nr.selectors.CR.ContentDimensions.active(n),node:i,parentNode:nr.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:nr.actions.UI.FlashMessages.add})],sn);var ir=R(Ze());var bt=R(Ze()),ml=R(Bt()),Oe=R(St()),vl=R(wt()),On=R(Ut()),Pn=R(Ge());var V1={disabled:!1,maxlength:null,readonly:!1,placeholder:"",minRows:2,expandedRows:6},Ve=class extends bt.Component{constructor(s){super(s);O(this,"fetch",async(s,u)=>{let{commit:l,externalService:p,contentService:v,activeContentDimensions:_,addFlashMessage:b,i18nRegistry:C,node:E,parentNode:k,frontendConfiguration:I}=this.props;this.setState({loading:!0});try{u=await v.processObjectWithClientEval(u,E,k),u=Object.keys(u).map(B=>({identifier:B,value:u[B]}));let F=_.language?_.language[0]:I.defaultLanguage,G=await p.generate(s,F,u);l(G)}catch(F){b(F?.code??F?.message,F?.code?C.translate("NEOSidekick.AiAssistant:Error:"+F.code,F.message,{0:F.externalMessage}):F.message,F?.severity??"error")}finally{this.setState({loading:!1})}});O(this,"fetchAndUpdatePlaceholderIfReferencedPropertyHasChanged",async s=>{let{node:u,transientValues:l,options:p}=this.props;if(!p?.placeholder?.startsWith("SidekickClientEval"))return;let v=/node\.properties\.(\w+)/g,_=p.placeholder.match(v);if(!_)return;_.map(E=>{let k=E.match(/node\.properties\.(.*)/);return k?k[1]:null}).filter(E=>E!==null).some(E=>l?.[E]!==s.transientValues?.[E]||u?.properties?.[E]!==s.node?.properties?.[E])&&await this.fetchAndUpdatePlaceholder()});O(this,"fetchAndUpdatePlaceholder",async()=>{let{contentService:s,node:u,parentNode:l,options:p}=this.props;s.processClientEval(p.placeholder,u,l).then(v=>this.setState({placeholder:v}))});let u="";s.options?.placeholder?.startsWith("SidekickClientEval")?this.fetchAndUpdatePlaceholder():s.options?.placeholder&&(u=s.i18nRegistry.translate(unescape(s.options.placeholder))),this.state={loading:!1,placeholder:u}}componentDidUpdate(s){this.fetchAndUpdatePlaceholderIfReferencedPropertyHasChanged(s)}renderIcon(s){return s?bt.default.createElement(On.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):bt.default.createElement(On.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}render(){let{id:s,value:u,className:l,commit:p,options:v,i18nRegistry:_}=this.props,{placeholder:b}=this.state,C=Object.assign({},V1,v),E=!C.readonly&&!C.disabled;return bt.default.createElement("div",{style:{display:"flex",flexDirection:"column"},className:l},bt.default.createElement("div",null,bt.default.createElement(On.TextArea,{id:s,value:u,onChange:p,disabled:C.disabled||this.state.loading,maxLength:C.maxlength,readOnly:C.readonly,placeholder:b,minRows:C.minRows,expandedRows:C.expandedRows})),E?bt.default.createElement("div",null,bt.default.createElement(On.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:this.state.loading?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:this.state.loading,onClick:()=>this.fetch(C.module,C.arguments??{})},_.translate("NEOSidekick.AiAssistant:Main:generateWithSidekick"),"\xA0",this.renderIcon(this.state.loading))):null)}};O(Ve,"propTypes",{className:Oe.default.string,value:Oe.default.oneOfType([Oe.default.string,Oe.default.number]),commit:Oe.default.func.isRequired,options:Oe.default.object,id:Oe.default.string,activeContentDimensions:Oe.default.object.isRequired,node:Oe.default.object,parentNode:Oe.default.object,transientValues:Oe.default.object,i18nRegistry:Oe.default.object.isRequired,externalService:Oe.default.object.isRequired,contentService:Oe.default.object.isRequired,addFlashMessage:Oe.default.func.isRequired,frontendConfiguration:Oe.default.object}),O(Ve,"defaultProps",{options:{}}),Ve=Ce([(0,vl.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,ml.connect)(n=>{let i=Pn.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:Pn.selectors.CR.ContentDimensions.active(n),node:i,transientValues:Pn.selectors.UI.Inspector.transientValues(n),parentNode:Pn.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:Pn.actions.UI.FlashMessages.add})],Ve);function Sa(n,i){return Object.keys(n.options).forEach(s=>{["imagePropertyName","fallbackAssetPropertyName"].includes(s)||console.warn('[NEOSidekick.AiAssistant]: Image text editor does not support editorOption "'+s+'".')}),Rr(n,s=>{let u=s.options,l=u.imagePropertyName,p=u.fallbackAssetPropertyName;if(u=u||{},u.module=u.module||i,!l)throw console.warn("[NEOSidekick.AiAssistant]: Could not find inspector editors registry."),console.warn("[NEOSidekick.AiAssistant]: Skipping registration of InspectorEditor..."),new Error("imagePropertyName is required");if(p)switch(u.arguments=u.arguments||{},u.arguments.url=u.arguments.url||`SidekickClientEval: AssetUri(node.properties.${l})`,p){case"title":u.placeholder=u.placeholder||`SidekickClientEval: AssetTitle(node.properties.${l})`;break;case"caption":u.placeholder=u.placeholder||`SidekickClientEval: AssetCaption(node.properties.${l})`;break}})}var Br=class extends ir.Component{render(){return this.props.options?.imagePropertyName?ir.default.createElement(Ve,{...Sa(this.props,"image_alt_text")}):ir.default.createElement("div",{style:{background:"#ff460d",color:"#fff",padding:"8px"}},"Incorrect YAML Configuration: ImageAltTextEditor requires an editorOption ",ir.default.createElement("i",null,"imagePropertyName"))}};var or=R(Ze());var Ur=class extends or.Component{render(){return this.props.options?.imagePropertyName?or.default.createElement(Ve,{...Sa(this.props,"image_title")}):or.default.createElement("div",{style:{background:"#ff460d",color:"#fff",padding:"8px"}},"Incorrect YAML Configuration: ImageTitleEditor requires an editorOption ",or.default.createElement("i",null,"imagePropertyName"))}};var Ct=R(Ze()),yl=R(Bt()),Ae=R(St()),_l=R(wt()),kn=R(Ut()),Nn=R(Ge());var X1={autoFocus:!1,disabled:!1,maxlength:null,readonly:!1},Gt=class extends Ct.PureComponent{constructor(s){super(s);O(this,"fetch",async(s,u)=>{let{commit:l,externalService:p,contentService:v,activeContentDimensions:_,addFlashMessage:b,i18nRegistry:C,node:E,parentNode:k,frontendConfiguration:I}=this.props;this.setState({loading:!0});try{u=await v.processObjectWithClientEval(u,E,k),u=Object.keys(u).map(B=>({identifier:B,value:u[B]}));let F=_.language?_.language[0]:I.defaultLanguage,G=await p.generate(s,F,u);l(G)}catch(F){b(F?.code??F?.message,F?.code?C.translate("NEOSidekick.AiAssistant:Error:"+F.code,F.message,{0:F.externalMessage}):F.message,F?.severity??"error")}finally{this.setState({loading:!1})}});O(this,"fetchAndUpdatePlaceholderIfReferencedPropertyHasChanged",async s=>{let{node:u,transientValues:l,options:p}=this.props;if(!p?.placeholder?.startsWith("SidekickClientEval"))return;let v=/node\.properties\.(\w+)/g,_=p.placeholder.match(v);if(!_)return;_.map(E=>{let k=E.match(/node\.properties\.(.*)/);return k?k[1]:null}).filter(E=>E!==null).some(E=>l?.[E]!==s.transientValues?.[E]||u?.properties?.[E]!==s.node?.properties?.[E])&&await this.fetchAndUpdatePlaceholder()});O(this,"fetchAndUpdatePlaceholder",async()=>{let{contentService:s,node:u,parentNode:l,options:p}=this.props;s.processClientEval(p.placeholder,u,l).then(v=>this.setState({placeholder:v}))});let u="";s.options?.placeholder?.startsWith("SidekickClientEval")?this.fetchAndUpdatePlaceholder():s.options?.placeholder&&(u=s.i18nRegistry.translate(unescape(s.options.placeholder))),this.state={loading:!1,placeholder:u}}componentDidUpdate(s){this.fetchAndUpdatePlaceholderIfReferencedPropertyHasChanged(s)}renderIcon(s){return s?Ct.default.createElement(kn.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):Ct.default.createElement(kn.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}render(){let{id:s,value:u,className:l,commit:p,options:v,i18nRegistry:_,onKeyPress:b,onEnterKey:C}=this.props,{placeholder:E}=this.state,k=Object.assign({},X1,v),I=!k.readonly&&!k.disabled;return Ct.default.createElement("div",{style:{display:"flex",flexDirection:"column"},className:l},Ct.default.createElement("div",null,Ct.default.createElement(kn.TextInput,{id:s,autoFocus:k.autoFocus,value:u===null?"":u,onChange:p,disabled:k.disabled||this.state.loading,maxLength:k.maxlength,readOnly:k.readonly,placeholder:E,onKeyPress:b,onEnterKey:C})),I?Ct.default.createElement("div",{style:{marginTop:"4px"}},Ct.default.createElement(kn.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:this.state.loading?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:this.state.loading,onClick:()=>this.fetch(k.module,k.arguments??{})},_.translate("NEOSidekick.AiAssistant:Main:generateWithSidekick"),"\xA0",this.renderIcon(this.state.loading))):null)}};O(Gt,"propTypes",{className:Ae.default.string,value:Ae.default.oneOfType([Ae.default.string,Ae.default.number]),commit:Ae.default.func.isRequired,options:Ae.default.object,onKeyPress:Ae.default.func,onEnterKey:Ae.default.func,id:Ae.default.string,activeContentDimensions:Ae.default.object.isRequired,node:Ae.default.object,parentNode:Ae.default.object,transientValues:Ae.default.object,i18nRegistry:Ae.default.object.isRequired,externalService:Ae.default.object.isRequired,contentService:Ae.default.object.isRequired,addFlashMessage:Ae.default.func.isRequired,frontendConfiguration:Ae.default.object}),O(Gt,"defaultProps",{options:{}}),Gt=Ce([(0,_l.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,yl.connect)(n=>{let i=Nn.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:Nn.selectors.CR.ContentDimensions.active(n),node:i,transientValues:Nn.selectors.UI.Inspector.transientValues(n),parentNode:Nn.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:Nn.actions.UI.FlashMessages.add})],Gt);var Al=(n,i)=>{let s=n.get("inspector").get("editors");if(!s){console.warn("[NEOSidekick.AiAssistant]: Could not find inspector editors registry."),console.warn("[NEOSidekick.AiAssistant]: Skipping registration of InspectorEditor...");return}s.set("NEOSidekick.AiAssistant/Inspector/Editors/FocusKeywordEditor",{component:i?sn:Tn.TextField}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/ImageAltTextEditor",{component:i?Br:Tn.TextArea}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/ImageTitleEditor",{component:i?Ur:Tn.TextArea}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/MagicTextFieldEditor",{component:i?Gt:Tn.TextField}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/MagicTextAreaEditor",{component:i?Ve:Tn.TextArea})};var Xe=R(Ze()),Gr=R(Ut());var fo=R(Ze()),Sl=R(Bt()),sr=R(St()),wl=R(Ge()),bl=R(wt());var Ht=class extends fo.PureComponent{getUri(){let{configuration:i,activeContentDimensions:s,interfaceLanguage:u}=this.props,l=new URL(`${i.apiDomain}/chat/`);return l.searchParams.append("contentLanguage",s.language?s.language[0]:i.defaultLanguage),l.searchParams.append("interfaceLanguage",u),l.searchParams.append("userId",i.userId),l.searchParams.append("plattform","neos"),l.searchParams.append("domain",i.domain),l.searchParams.append("siteName",i.siteName),i?.referrer&&l.searchParams.append("referral",i?.referrer),i?.apiKey&&l.searchParams.append("apikey",i?.apiKey),l}render(){let{className:i}=this.props;return fo.default.createElement("iframe",{id:"neosidekickAssistant",className:i,src:this.getUri().toString(),allow:"clipboard-write",onLoad:s=>s.target.dataset.loaded="true"})}};O(Ht,"propTypes",{configuration:sr.default.object.isRequired,i18nRegistry:sr.default.object.isRequired,activeContentDimensions:sr.default.object.isRequired,interfaceLanguage:sr.default.string.isRequired,className:sr.default.string}),Ht=Ce([(0,bl.neos)(n=>({configuration:n.get("NEOSidekick.AiAssistant").get("configuration"),i18nRegistry:n.get("i18n")})),(0,Sl.connect)(n=>({activeContentDimensions:wl.selectors.CR.ContentDimensions.active(n),interfaceLanguage:n.user?.preferences?.interfaceLanguage}),{})],Ht);var Cl=(n,i)=>{let s=n.get("containers"),u=s.get("App");if(!i.chatSidebarEnabled){s.set("Modals/SidekickIFrame",()=>Xe.default.createElement(Ht,{className:"neosidekick__frame--hidden"}));return}let l=p=>{let v=localStorage.getItem("NEOSidekick")?JSON.parse(localStorage.getItem("NEOSidekick")):{open:!0,fullscreen:!1},[_,b]=Xe.default.useState(v?.open),C=B=>{b(B),v.open=B,localStorage.setItem("NEOSidekick",JSON.stringify(v))},[E,k]=Xe.default.useState(v?.fullscreen),I=B=>{k(B),v.fullscreen=B,localStorage.setItem("NEOSidekick",JSON.stringify(v))},F=(B,P,N)=>B?Xe.default.createElement(Gr.IconButton,{icon:P?"compress":"expand",onClick:N}):"",G=(B,P,N)=>P?"":Xe.default.createElement(Gr.IconButton,{icon:B?"chevron-circle-right":"chevron-circle-left",onClick:N});return Xe.default.createElement("div",{className:`neosidekick_appWrapper ${_?"neosidekick_appWrapper--sidebar-open":""}  ${E?"neosidekick_appWrapper--sidebar-fullscreen":""}`},Xe.default.createElement(u,{...p}),Xe.default.createElement("div",{className:"neosidekick_sideBar"},Xe.default.createElement("div",{className:"neosidekick_sideBar__title"},Xe.default.createElement(Gr.Headline,{className:`neosidekick_sideBar__title-headline ${_?"neosidekick_sideBar__title-headline--open":""}`},"AI Sidekick"),Xe.default.createElement("div",null,F(_,E,()=>I(!E)),G(_,E,()=>C(!_)))),Xe.default.createElement(Ht,{className:`neosidekick_sideBar__frame ${_?"neosidekick_sideBar__frame--open":""}`})))};s.set("App",l)};var qr=R(Ge()),Il=R(lo());var El=R(lo()),po=R(Ge()),Pl=(n,i)=>function*(){yield(0,El.takeEvery)(po.actionTypes.ServerFeedback.HANDLE_SERVER_FEEDBACK,function*(s){s.payload.feedbackEnvelope.feedbacks.forEach(u=>{if(u.type!=="Neos.Neos.Ui:NodeCreated")return;let p=u.payload.contextPath.split("@")[0],v=i.getState(),_=po.selectors.CR.Nodes.nodesByContextPathSelector(v),b=n.get("@neos-project/neos-ui-contentrepository"),C=n.get("NEOSidekick.AiAssistant").get("contentService");Object.keys(_).forEach(E=>{if(!E.split("@")[0].startsWith(p))return;let I=_[E],F=_[I.parent],G=b.get(I.nodeType);Object.keys(G.properties).forEach(B=>{C.evaluateNodeTypeConfigurationAndStartGeneration(I,B,G,F,!0)})})})})};var Ol=R(lo()),Nl=R(Ge()),kl=(n,i)=>function*(){yield(0,Ol.takeEvery)(Nl.actionTypes.CR.Nodes.REMOVE,function*(s){n.get("NEOSidekick.AiAssistant").get("contentCanvasService").onNodeRemoved(s.payload)})};var Ml=R(Tl());var Fl=(n,i,s,u)=>{let l=!1,p=(0,Ml.debounce)((b,C)=>s.updateWebContext(b,C),500),v=function*(){yield(0,Il.takeLatest)([qr.actionTypes.UI.ContentCanvas.SET_SRC,qr.actionTypes.UI.ContentCanvas.RELOAD,qr.actionTypes.CR.Nodes.MERGE],async function*(b){b.type===qr.actionTypes.UI.ContentCanvas.SET_SRC&&(l=!0);let C=n.get("@neos-project/neos-ui-contentrepository"),E=i.getState(),k=E?.ui?.contentCanvas?.previewUrl,I=u.getCurrentDocumentNode(),F=I?.contextPath,G=Object.values(E?.cr?.nodes?.byContextPath||{}).filter(P=>{let N=C.getRole("document");if(!N)throw new Error("Document role is not loaded!");let U=C.getSubTypesOf(N);return F&&P.contextPath.indexOf(F.split("@")[0])===0&&(P.contextPath===F||!U.includes(P.nodeType))}),B={url:k,title:I?.properties?.title||await u.getGuestFrameDocumentTitle(),content:await u.getGuestFrameDocumentHtml(),structuredContent:G,targetAudience:await u.getCurrentDocumentTargetAudience(),pageBriefing:await u.getCurrentDocumentPageBriefing(),focusKeyword:await u.getCurrentDocumentFocusKeyword()};p(l,B),l=!1})},_=n.get("sagas");_.set("NEOSidekick.AiAssistant/watchDocumentNodeChange",{saga:v}),_.set("NEOSidekick.AiAssistant/watchNodeCreated",{saga:Pl(n,i)}),_.set("NEOSidekick.AiAssistant/watchNodeRemoved",{saga:kl(n,i)})};var Kr=R(Ze()),Rl=R(Bt()),ho=R(St()),go=R(Ut()),Dl=R(wt()),Ll=R(Ge());var an=class extends Kr.PureComponent{constructor(){super(...arguments);O(this,"state",{show:!1,enabled:!0});O(this,"evaluateFocusedNodeAndPropertyAndShowButton",(s=5)=>{let{nodeType:u,property:l}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty();if(!u||!l){if(s===0)return;setTimeout(()=>this.evaluateFocusedNodeAndPropertyAndShowButton(s-1),100);return}let p=u.properties[l];this.setState({show:p?.ui?.inlineEditable===!0&&p?.options?.sidekick?.module!==void 0})});O(this,"onClick",async()=>{let{addFlashMessage:s,i18nRegistry:u,contentService:l}=this.props;try{this.setState({enabled:!1});let{node:p,nodeType:v,parentNode:_,property:b}=l.getCurrentlyFocusedNodePathAndProperty();await l.evaluateNodeTypeConfigurationAndStartGeneration(p,b,v,_)}catch(p){s(p?.code??p?.message,p?.code?u.translate("NEOSidekick.AiAssistant:Error:"+p.code,p.message,{0:p.externalMessage}):p.message,p?.severity??"error")}finally{setTimeout(()=>{this.setState({enabled:!0})},2500)}})}componentDidMount(){this.evaluateFocusedNodeAndPropertyAndShowButton()}render(){let{i18nRegistry:s}=this.props;return this.state.show?Kr.default.createElement(go.Button,{disabled:!this.state.enabled,style:"transparent",hoverStyle:"brand",onClick:this.onClick,isActive:!!this.props.isActive,title:s.translate("NEOSidekick.AiAssistant:Main:generate")},Kr.default.createElement(go.Icon,{icon:"magic",fixedWidth:!0,padded:"right"}),s.translate("NEOSidekick.AiAssistant:Main:generate")):""}};O(an,"propTypes",{contentService:ho.default.object.isRequired,i18nRegistry:ho.default.object.isRequired,addFlashMessage:ho.default.func.isRequired}),an=Ce([(0,Dl.neos)(n=>({contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),i18nRegistry:n.get("i18n")})),(0,Rl.connect)(()=>{},{addFlashMessage:Ll.actions.UI.FlashMessages.add})],an);var $r=R(Ze()),In=R(St()),Wl=R(Ut()),Bl=R(wt()),Ul=R(Bt());var wa=R(Ge());var un=class extends $r.PureComponent{constructor(){super(...arguments);O(this,"handleOpen",()=>{let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props,l=this.props.contentCanvasService.getEditorContent(s,u),p=this.props.contentCanvasService.getSelectedContent(s,u);this.props.openModal(l,p)})}render(){let{i18nRegistry:s}=this.props;return $r.default.createElement("div",null,$r.default.createElement(Wl.Button,{className:"button",style:"transparent",hoverStyle:"brand",onClick:this.handleOpen,title:s.translate("NEOSidekick.AiAssistant:Main:title","Mit AI bearbeiten")},"AI"))}};O(un,"propTypes",{contentService:In.default.object.isRequired,contentCanvasService:In.default.object.isRequired,i18nRegistry:In.default.object.isRequired,openModal:In.default.func.isRequired,focusedNodePath:In.default.string,currentlyEditedPropertyName:In.default.string}),un=Ce([(0,Bl.neos)(n=>({contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService"),i18nRegistry:n.get("i18n")})),(0,Ul.connect)(n=>({focusedNodePath:wa.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:wa.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n)}),{openModal:En.openModal})],un);var M=R(Ze()),Ee=R(St()),Kl=R(Bt()),$l=R(wt()),ne=R(Ut()),Se=R(Hl()),Mn=R(Ge());var ur=R(Ze()),jr=R(St()),ql=R(wt());var qt=class extends ur.PureComponent{constructor(s){super(s);O(this,"elementRef");O(this,"editorInstance");O(this,"lastValue");this.elementRef=ur.default.createRef()}componentDidUpdate(s){if(s.value!==this.props.value&&this.lastValue!==this.props.value){if(!this.editorInstance){let u=this.elementRef.current;if(this.editorInstance=u?.querySelector(".ck-content")?.ckeditorInstance,!this.editorInstance)return}this.editorInstance.setData(this.props.value),this.lastValue=this.props.value}}render(){let{secondaryEditorsRegistry:s}=this.props,{component:u}=s.get("Neos.Neos/Inspector/Secondary/Editors/CKEditorWrap");return ur.default.createElement("div",{className:"neosidekick__ck-editor"+(this.props.disabled?" neosidekick__ck-editor--disabled":""),ref:this.elementRef},ur.default.createElement(u,{onChange:l=>{this.lastValue!==l&&(this.lastValue=l,this.props.onChange&&this.props.onChange(l))},value:this.props.value,options:Object.assign({},this.props.options,{disabled:!0})}))}};O(qt,"propTypes",{value:jr.default.string.isRequired,onChange:jr.default.func,options:jr.default.object,disabled:jr.default.bool}),qt=Ce([(0,ql.neos)(n=>({secondaryEditorsRegistry:n.get("inspector").get("secondaryEditors")}))],qt);var cn=class extends M.PureComponent{constructor(s){super(s);O(this,"handleCancel",()=>{this.props.cancelModal(),this.setState({generatedText:"",generationState:"empty"})});O(this,"handleApply",()=>{this.props.applyModal();let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props,l=this.props.selectedText.endsWith(" ")||this.props.selectedText.endsWith("&nbsp;");this.props.contentCanvasService.insertTextIntoInlineEditor(s,u,this.state.generatedText,l),this.setState({generatedText:"",generationState:"empty"})});O(this,"handleGenerate",async(s,u="default")=>{this.setState({generationModificationType:s,generationWritingStyle:u}),s!=="custom"&&this.setState({customPromptIsVisible:!1}),this.state.generationState==="loading"&&this.props.iFrameApiService.cancelCallModule();let{customPrompt:l}=this.state,{fullText:p,selectedText:v}=this.props,_=this.getPropertyConfiguration().ui?.inline?.editorOptions?.formatting,b=Object.keys(_).filter(I=>_[I]).map(I=>({a:"link",b:"bold",i:"italic",ol:"ordered list",ul:"unordered list"})[I]||I).join(", "),C,E;switch(s){case"configured":let I=this.getConfiguredSidekick();if(I.onCreate?.module){this.addFlashMessage("1696264259260","Please do not use options.sidekick.onCreate.module anymore. Read the docs to find out about the new configuration.","error");return}let{node:F,parentNode:G}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty(),B=await this.props.contentService.processObjectWithClientEval(I,F,G);C=B.module,E=B.arguments||{};break;case"intro":C="custom_prompt",E={customPrompt:"Write a two sentence introduction for the current page.",allowedMarkdownFormattingOptions:b};break;case"page_conclusion":C="page_conclusion_writer",E={allowedMarkdownFormattingOptions:b};break;case"custom":if(!l||l.length<5){this.addFlashMessage("1696264259270","Please write a few words about how to change the text.","error");return}v&&v.length?(C="modify_selected_text",E={fullText:p,selectedText:v,modificationType:s,allowedMarkdownFormattingOptions:b,customPrompt:l,writingStyle:u}):(C="custom_prompt",E={customPrompt:l,allowedMarkdownFormattingOptions:b});break;default:C="modify_selected_text",E={fullText:p,selectedText:v,modificationType:s,allowedMarkdownFormattingOptions:b,customPrompt:l,writingStyle:u};break}this.setState({generatedText:"",generationState:"loading"});let k={target:{modalTarget:!0},module:C,arguments:E};this.props.iFrameApiService.callModule(k)});O(this,"handleRegenerate",async()=>this.handleGenerate(this.state.generationModificationType,this.state.generationWritingStyle||"default"));this.state={customPromptIsVisible:this.props.configuration.modifyTextModalPreferCustomPrompt,customPrompt:"",writingStyles:[{value:"",label:"Loading..."}],generatedText:"",generationState:"empty"}}getLanguage(){let{activeContentDimensions:s,configuration:u}=this.props;return s.language?s.language[0]:u.defaultLanguage}getPropertyConfiguration(){let{node:s,nodeTypesRegistry:u}=this.props,l=s?u.get(s?.nodeType):null,{property:p}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty();return!s||!l||!p?null:l?.properties?l?.properties[p]:null}getConfiguredSidekick(){return this.getPropertyConfiguration()?.options?.sidekick}componentDidMount(){let s=this.getLanguage();this.props.externalService.fetch("/api/v1/writing-styles?language="+s).then(u=>{let l=u.data.filter(p=>p.identifier!=="default"&&p.allowed_languages.includes(s));this.setState({writingStyles:l.map(p=>({value:p.identifier,label:p.label}))})}),this.props.iFrameApiService.listenToMessages(u=>{if(u.data?.data?.modalTarget)switch(u?.data?.eventName){case"write-content":let{value:l,isFinished:p}=u.data?.data;this.setState({generatedText:l||""}),p&&(this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished());break;case"stopped-generation":this.setState({generationState:"finished"});break;case"error":let v=u?.data?.data?.message;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+v,"error",v),this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished();break;default:let _="Unknown message event: "+u?.data?.eventName;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+_,"error",_),this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished()}}),window.addEventListener("keydown",u=>{u.key==="Enter"&&u.target===document.getElementById("neosidekickAiModifyPromptTextarea")&&this.handleGenerate("custom")})}componentDidUpdate(s){s.isOpen&&!this.props.isOpen&&this.state.generationState==="loading"&&this.props.iFrameApiService.cancelCallModule(),!s.isOpen&&this.props.isOpen&&this.setState({customPromptIsVisible:this.props.configuration.modifyTextModalPreferCustomPrompt,customPrompt:"",generatedText:"",generationState:"empty",generationModificationType:void 0,generationWritingStyle:void 0})}addFlashMessage(s,u,l="error",p){this.props.addFlashMessage(s,this.props.i18nRegistry.translate("NEOSidekick.AiAssistant:Error:"+s,u,{0:p}),l)}renderTitle(){return M.default.createElement("div",null,M.default.createElement("svg",{className:"sidekick-icon","enable-background":"new 0 0 245 245",viewBox:"0 0 245 245"},M.default.createElement("path",{d:"m72.6 75.3 5.3-2.6m-18.5-30.7",fill:"#fff"}),M.default.createElement("circle",{cx:"64.7",cy:"50.5",fill:"#fff",r:"9.4"}),M.default.createElement("path",{d:"m68 59.1 7.5 15.2",fill:"none",stroke:"#fff","stroke-miterlimit":"10","stroke-width":"4.9606"}),M.default.createElement("path",{d:"m170.1 72.7 5.3 2.6m13.2-33.3",fill:"#fff"}),M.default.createElement("circle",{cx:"183.4",cy:"50.5",fill:"#fff",r:"9.4"}),M.default.createElement("path",{d:"m180.1 59.1-7.5 15.2",fill:"none",stroke:"#fff","stroke-miterlimit":"10","stroke-width":"4.9606"}),M.default.createElement("path",{d:"m123.6 60c38.1 0 69 31 69 69s-31 69-69 69-69-31-69-69 31-69 69-69m0-8.5c-42.8 0-77.5 34.7-77.5 77.5s34.7 77.5 77.5 77.5 77.5-34.7 77.5-77.5-34.6-77.5-77.5-77.5z",fill:"#fff"}),M.default.createElement("circle",{cx:"97",cy:"123.5",fill:"#fff",r:"9.1"}),M.default.createElement("g",{fill:"none",stroke:"#fff","stroke-miterlimit":"10"},M.default.createElement("path",{d:"m164.2 137.9h-80c-7.8 0-14.1-6.3-14.1-14.1v-.3c0-7.8 6.3-14.1 14.1-14.1h80c7.8 0 14.1 6.3 14.1 14.1v.3c0 7.8-6.4 14.1-14.1 14.1z","stroke-width":"9.0714"}),M.default.createElement("path",{d:"m52.4 153.9h-17.5c-4.1 0-7.4-3.2-7.4-7.2v-34.2c0-3.9 3.4-7.2 7.4-7.2h17.5","stroke-width":"8.5039"}),M.default.createElement("path",{d:"m193.1 153.9h17.5c4.1 0 7.4-3.2 7.4-7.2v-34.2c0-3.9-3.4-7.2-7.4-7.2h-17.5","stroke-width":"8.5039"}),M.default.createElement("path",{d:"m104.1 165.1s18.1 18.1 39 .5","stroke-linecap":"round","stroke-width":"8.5039"}))),this.props.selectedText?M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:modify-text-title",fallback:"Revise text"}):M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:create-text-title",fallback:"Generate text with AI"})," (Beta)")}renderCancelAction(){return M.default.createElement(ne.Button,{key:"cancel",style:"lighter",hoverStyle:"brand",onClick:this.handleCancel},M.default.createElement(Se.default,{id:"Neos.Neos:Main:cancel",fallback:"Cancel"}))}renderRegenerateAction(){return this.state.generationState==="finished"?M.default.createElement(ne.Button,{key:"regenerate",style:"lighter",hoverStyle:"warn",onClick:this.handleRegenerate},M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:regenerate-text",fallback:"Regenerate"})):""}renderSaveAction(){return this.state.generationState==="finished"?M.default.createElement(ne.Button,{key:"save",style:"success",hoverStyle:"success",onClick:this.handleApply},this.props.selectedText?M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:apply-modify-text",fallback:"Use text"}):M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:apply-create-text",fallback:"Insert text"})):""}hasSelectedText(){return this.props.selectedText&&this.props.selectedText.trim().length>0}renderConfiguredButton(){return this.getConfiguredSidekick()?.module?M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("configured")},M.default.createElement(ne.Icon,{icon:"hand-sparkles",className:"icon--space-right"}),this.getConfiguredSidekick()?.label||M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:configured-button",fallback:"Configured instruction"})):""}renderCreateButtons(){return M.default.createElement("div",{className:"quickGenerationButtons"},this.renderConfiguredButton(),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("intro")},M.default.createElement(ne.Icon,{icon:"paragraph",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:intro-button",fallback:"Introduction"})),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("page_conclusion")},M.default.createElement(ne.Icon,{icon:"paragraph",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:page-conclusion-button",fallback:"Page Conclusion"})))}renderEditButtons(){let{i18nRegistry:s}=this.props;return M.default.createElement("div",{className:"quickGenerationButtons"},M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("rephrase")},M.default.createElement(ne.Icon,{icon:"redo",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:rephrase-button",fallback:"Rephrase"})),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("longer")},M.default.createElement(ne.Icon,{icon:"expand-alt",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:longer-button-short",fallback:"Longer"})),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("shorter")},M.default.createElement(ne.Icon,{icon:"compress-alt",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:shorter-button-short",fallback:"Shorter"})),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("fix_spelling")},M.default.createElement(ne.Icon,{icon:"spell-check",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:fix-text-button",fallback:"Fix spelling"})),M.default.createElement(ne.Button,{style:this.state.customPromptIsVisible?"brand":"lighter",hoverStyle:"brand",onClick:()=>this.setState({customPromptIsVisible:!this.state.customPromptIsVisible})},M.default.createElement(ne.Icon,{icon:"pen-fancy",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:custom-prompt-button",fallback:"Etwas anderes"})),M.default.createElement("div",{className:"quickGenerationButtons__selectWrapper"},M.default.createElement(ne.SelectBox,{className:"quickGenerationButtons__select",placeholder:s.translate("NEOSidekick.AiAssistant:AiModal:change-tone"),onValueChange:u=>this.handleGenerate("style",u),options:this.state.writingStyles})))}render(){let{selectedText:s,i18nRegistry:u}=this.props,{customPrompt:l,generatedText:p,generationState:v}=this.state,_=JSON.parse(JSON.stringify(this.getPropertyConfiguration()?.ui?.inline?.editorOptions)||"{}");return _.sidekickModifyButton=!1,M.default.createElement(ne.Dialog,{actions:[this.renderCancelAction(),this.renderRegenerateAction(),this.renderSaveAction()],title:this.renderTitle(),onRequestClose:this.handleCancel,isOpen:this.props.isOpen,style:"wide"},M.default.createElement("div",{className:"primaryColumn"},this.hasSelectedText()?M.default.createElement("div",{className:"originalText"},M.default.createElement(ne.Label,null,M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:selected-text",fallback:"Selected Text"}),":"),M.default.createElement(qt,{value:s,options:_,disabled:!0})):"",this.hasSelectedText()?this.renderEditButtons():"",!this.hasSelectedText()||this.state.customPromptIsVisible?M.default.createElement("div",{className:"promptRow"},M.default.createElement(ne.TextArea,{autoFocus:!0,id:"neosidekickAiModifyPromptTextarea",placeholder:this.hasSelectedText()?u.translate("NEOSidekick.AiAssistant:AiModal:custom-prompt-modify-placeholder","How should the text be changed?"):u.translate("NEOSidekick.AiAssistant:AiModal:custom-prompt-create-placeholder","Which text should I write?"),onChange:b=>this.setState({customPrompt:b}),minRows:2,expandedRows:2}),M.default.createElement(ne.Button,{className:"promptRow__button",disabled:!l,style:l&&v=="empty"?"success":"lighter",hoverStyle:"success",onClick:()=>this.handleGenerate("custom")},M.default.createElement(ne.Icon,{icon:"magic",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:Main:generate",fallback:"Generate"}))):"",this.hasSelectedText()?"":this.renderCreateButtons(),v==="empty"?"":M.default.createElement("div",{className:"result"},M.default.createElement(ne.Label,null,M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:new-text",fallback:"New Text"}),":"),M.default.createElement(qt,{onChange:b=>this.setState({generatedText:b}),value:p,options:_}),M.default.createElement("i",{className:"result__notice"},M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:disclaimer",fallback:"GenAI models can make mistakes. Check important information."})))))}};O(cn,"propTypes",{iFrameApiService:Ee.default.object.isRequired,contentService:Ee.default.object.isRequired,contentCanvasService:Ee.default.object.isRequired,externalService:Ee.default.object.isRequired,i18nRegistry:Ee.default.object.isRequired,nodeTypesRegistry:Ee.default.object.isRequired,configuration:Ee.default.object.isRequired,isOpen:Ee.default.bool,focusedNodePath:Ee.default.string,currentlyEditedPropertyName:Ee.default.string,fullText:Ee.default.string,selectedText:Ee.default.string,activeContentDimensions:Ee.default.object,node:Ee.default.object,cancelModal:Ee.default.func.isRequired,applyModal:Ee.default.func.isRequired,addFlashMessage:Ee.default.func.isRequired}),cn=Ce([(0,$l.neos)(n=>({iFrameApiService:n.get("NEOSidekick.AiAssistant").get("iFrameApiService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),i18nRegistry:n.get("i18n"),nodeTypesRegistry:n.get("@neos-project/neos-ui-contentrepository"),configuration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,Kl.connect)(n=>({isOpen:co.isModalOpen(n),focusedNodePath:Mn.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:Mn.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n),fullText:co.fullText(n),selectedText:co.selectedText(n),activeContentDimensions:Mn.selectors.CR.ContentDimensions.active(n),node:Mn.selectors.CR.Nodes.focusedSelector(n)}),{cancelModal:En.cancelModal,applyModal:En.applyModal,addFlashMessage:Mn.actions.UI.FlashMessages.add})],cn);var Yr=R(Ze()),zr=R(St()),jl=R(Bt()),ba=R(Ge()),zl=R(wt()),Yl=R(Ut());var fn=class extends Yr.PureComponent{constructor(){super(...arguments);O(this,"handleOpen",()=>{let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props,l=this.props.contentCanvasService.getEditorContent(s,u),p=this.props.contentCanvasService.getSelectedContent(s,u);this.props.openModal(l,p)})}render(){let{currentlyEditedPropertyName:s,i18nRegistry:u}=this.props;return Yr.default.createElement(Yl.Button,{id:"neos-InlineToolbar-AiModify",disabled:!s,className:this.props.className,style:"transparent",hoverStyle:"brand",onClick:this.handleOpen,title:u.translate("NEOSidekick.AiAssistant:Main:title","Mit AI bearbeiten")},Yr.default.createElement("strong",null,"AI"))}};O(fn,"propTypes",{className:zr.default.string,i18nRegistry:zr.default.object.isRequired,focusedNodePath:zr.default.string,currentlyEditedPropertyName:zr.default.string}),fn=Ce([(0,zl.neos)(n=>({nodeTypesRegistry:n.get("@neos-project/neos-ui-contentrepository"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService")})),(0,jl.connect)(n=>({focusedNodePath:ba.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:ba.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n)}),{openModal:En.openModal})],fn);var Jl=n=>{let s=n.get("ckEditor5").get("richtextToolbar");s.set("NEOSidekick.AiAssistant:ModifyButton",{component:un,isVisible:p=>p?.sidekickModifyButton!==!1},"start"),s.set("NEOSidekick.AiAssistant:generate",{component:an,isVisible:()=>!0},"end"),n.get("containers").set("Modals/AiModal",cn),n.get("@neos-project/neos-ui-guest-frame").set("NodeToolbar/Buttons/AiModify",fn,"after NodeToolbar/Buttons/AddNode")};rf("NEOSidekick.AiAssistant",{},(n,{store:i,frontendConfiguration:s})=>{let u=s["NEOSidekick.AiAssistant"];if(Al(n,u?.enabled),!u?.enabled)return;if(!u.hasOwnProperty("defaultLanguage")||!u.defaultLanguage){console.error("Could not initialize AiAssistant: defaultLanguage is not configured correctly, see README.");return}n.get("reducers").set("NEOSidekick.AiAssistant",{reducer:sl}),n.set("NEOSidekick.AiAssistant",new tn(""));let l=n.get("NEOSidekick.AiAssistant");l.set("configuration",u);let p=of(u);l.set("externalService",p);let v=el(n,i);l.set("contentService",v);let _=rl();l.set("iFrameApiService",_);let b=nl(n,i,_);l.set("contentCanvasService",b),Cl(n,u),Fl(n,i,_,v),Jl(n)});})();
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
//# sourceMappingURL=Plugin.js.map
