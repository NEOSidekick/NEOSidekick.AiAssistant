"use strict";(()=>{var H_=Object.create;var Hi=Object.defineProperty;var nf=Object.getOwnPropertyDescriptor;var q_=Object.getOwnPropertyNames;var K_=Object.getPrototypeOf,$_=Object.prototype.hasOwnProperty;var j_=(n,i,s)=>i in n?Hi(n,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[i]=s;var z_=(n,i)=>()=>(n&&(i=n(n=0)),i);var at=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports);var Y_=(n,i,s,a)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of q_(i))!$_.call(n,l)&&l!==s&&Hi(n,l,{get:()=>i[l],enumerable:!(a=nf(i,l))||a.enumerable});return n};var R=(n,i,s)=>(s=n!=null?H_(K_(n)):{},Y_(i||!n||!n.__esModule?Hi(s,"default",{value:n,enumerable:!0}):s,n));var Ce=(n,i,s,a)=>{for(var l=a>1?void 0:a?nf(i,s):i,p=n.length-1,v;p>=0;p--)(v=n[p])&&(l=(a?v(i,s,l):v(l))||l);return a&&l&&Hi(i,s,l),l};var N=(n,i,s)=>(j_(n,typeof i!="symbol"?i+"":i,s),s);function de(n){return(...i)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${n}`])return window["@Neos:HostPluginAPI"][`@${n}`](...i);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var ut=z_(()=>{});var Ge=at((PA,af)=>{ut();af.exports=de("NeosProjectPackages")().NeosUiReduxStore});var Xf=at((Dr,Xn)=>{var u0=200,c0="Expected a function",da="__lodash_hash_undefined__",Qi=1,Qn=2,Of=1/0,Pf=9007199254740991,ji="[object Arguments]",oa="[object Array]",kf="[object Boolean]",Tf="[object Date]",If="[object Error]",Mf="[object Function]",f0="[object GeneratorFunction]",zi="[object Map]",Ff="[object Number]",Zn="[object Object]",_f="[object Promise]",Rf="[object RegExp]",Yi="[object Set]",Df="[object String]",Lf="[object Symbol]",sa="[object WeakMap]",Wf="[object ArrayBuffer]",Ji="[object DataView]",l0="[object Float32Array]",d0="[object Float64Array]",p0="[object Int8Array]",h0="[object Int16Array]",g0="[object Int32Array]",m0="[object Uint8Array]",v0="[object Uint8ClampedArray]",y0="[object Uint16Array]",_0="[object Uint32Array]",A0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S0=/^\w*$/,w0=/^\./,b0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C0=/[\\^$.*+?()[\]{}|]/g,x0=/\\(\\)?/g,E0=/^\[object .+?Constructor\]$/,N0=/^(?:0|[1-9]\d*)$/,ce={};ce[l0]=ce[d0]=ce[p0]=ce[h0]=ce[g0]=ce[m0]=ce[v0]=ce[y0]=ce[_0]=!0;ce[ji]=ce[oa]=ce[Wf]=ce[kf]=ce[Ji]=ce[Tf]=ce[If]=ce[Mf]=ce[zi]=ce[Ff]=ce[Zn]=ce[Rf]=ce[Yi]=ce[Df]=ce[sa]=!1;var Bf=typeof global=="object"&&global&&global.Object===Object&&global,O0=typeof self=="object"&&self&&self.Object===Object&&self,rn=Bf||O0||Function("return this")(),Uf=typeof Dr=="object"&&Dr&&!Dr.nodeType&&Dr,Af=Uf&&typeof Xn=="object"&&Xn&&!Xn.nodeType&&Xn,P0=Af&&Af.exports===Uf,Sf=P0&&Bf.process,wf=function(){try{return Sf&&Sf.binding("util")}catch{}}(),bf=wf&&wf.isTypedArray;function k0(n,i){for(var s=-1,a=n?n.length:0;++s<a;)if(i(n[s],s,n))return!0;return!1}function T0(n){return function(i){return i?.[n]}}function I0(n,i){for(var s=-1,a=Array(n);++s<n;)a[s]=i(s);return a}function M0(n){return function(i){return n(i)}}function F0(n,i){return n?.[i]}function aa(n){var i=!1;if(n!=null&&typeof n.toString!="function")try{i=!!(n+"")}catch{}return i}function R0(n){var i=-1,s=Array(n.size);return n.forEach(function(a,l){s[++i]=[l,a]}),s}function D0(n,i){return function(s){return n(i(s))}}function L0(n){var i=-1,s=Array(n.size);return n.forEach(function(a){s[++i]=a}),s}var W0=Array.prototype,B0=Function.prototype,eo=Object.prototype,ra=rn["__core-js_shared__"],Cf=function(){var n=/[^.]+$/.exec(ra&&ra.keys&&ra.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Gf=B0.toString,Dt=eo.hasOwnProperty,er=eo.toString,U0=RegExp("^"+Gf.call(Dt).replace(C0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xf=rn.Symbol,Ef=rn.Uint8Array,G0=eo.propertyIsEnumerable,H0=W0.splice,q0=D0(Object.keys,Object),ua=tr(rn,"DataView"),Lr=tr(rn,"Map"),ca=tr(rn,"Promise"),fa=tr(rn,"Set"),la=tr(rn,"WeakMap"),Wr=tr(Object,"create"),K0=xn(ua),$0=xn(Lr),j0=xn(ca),z0=xn(fa),Y0=xn(la),Vi=xf?xf.prototype:void 0,ia=Vi?Vi.valueOf:void 0,Nf=Vi?Vi.toString:void 0;function bn(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var a=n[i];this.set(a[0],a[1])}}function J0(){this.__data__=Wr?Wr(null):{}}function V0(n){return this.has(n)&&delete this.__data__[n]}function Z0(n){var i=this.__data__;if(Wr){var s=i[n];return s===da?void 0:s}return Dt.call(i,n)?i[n]:void 0}function X0(n){var i=this.__data__;return Wr?i[n]!==void 0:Dt.call(i,n)}function Q0(n,i){var s=this.__data__;return s[n]=Wr&&i===void 0?da:i,this}bn.prototype.clear=J0;bn.prototype.delete=V0;bn.prototype.get=Z0;bn.prototype.has=X0;bn.prototype.set=Q0;function Lt(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var a=n[i];this.set(a[0],a[1])}}function e1(){this.__data__=[]}function t1(n){var i=this.__data__,s=to(i,n);if(s<0)return!1;var a=i.length-1;return s==a?i.pop():H0.call(i,s,1),!0}function n1(n){var i=this.__data__,s=to(i,n);return s<0?void 0:i[s][1]}function r1(n){return to(this.__data__,n)>-1}function i1(n,i){var s=this.__data__,a=to(s,n);return a<0?s.push([n,i]):s[a][1]=i,this}Lt.prototype.clear=e1;Lt.prototype.delete=t1;Lt.prototype.get=n1;Lt.prototype.has=r1;Lt.prototype.set=i1;function Wt(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var a=n[i];this.set(a[0],a[1])}}function o1(){this.__data__={hash:new bn,map:new(Lr||Lt),string:new bn}}function s1(n){return no(this,n).delete(n)}function a1(n){return no(this,n).get(n)}function u1(n){return no(this,n).has(n)}function c1(n,i){return no(this,n).set(n,i),this}Wt.prototype.clear=o1;Wt.prototype.delete=s1;Wt.prototype.get=a1;Wt.prototype.has=u1;Wt.prototype.set=c1;function Zi(n){var i=-1,s=n?n.length:0;for(this.__data__=new Wt;++i<s;)this.add(n[i])}function f1(n){return this.__data__.set(n,da),this}function l1(n){return this.__data__.has(n)}Zi.prototype.add=Zi.prototype.push=f1;Zi.prototype.has=l1;function Rt(n){this.__data__=new Lt(n)}function d1(){this.__data__=new Lt}function p1(n){return this.__data__.delete(n)}function h1(n){return this.__data__.get(n)}function g1(n){return this.__data__.has(n)}function m1(n,i){var s=this.__data__;if(s instanceof Lt){var a=s.__data__;if(!Lr||a.length<u0-1)return a.push([n,i]),this;s=this.__data__=new Wt(a)}return s.set(n,i),this}Rt.prototype.clear=d1;Rt.prototype.delete=p1;Rt.prototype.get=h1;Rt.prototype.has=g1;Rt.prototype.set=m1;function v1(n,i){var s=Cn(n)||Jf(n)?I0(n.length,String):[],a=s.length,l=!!a;for(var p in n)(i||Dt.call(n,p))&&!(l&&(p=="length"||$f(p,a)))&&s.push(p);return s}function to(n,i){for(var s=n.length;s--;)if(Yf(n[s][0],i))return s;return-1}var y1=I1();function _1(n,i){return n&&y1(n,i,Xi)}function Hf(n,i){i=ro(i,n)?[i]:qf(i);for(var s=0,a=i.length;n!=null&&s<a;)n=n[io(i[s++])];return s&&s==a?n:void 0}function A1(n){return er.call(n)}function S1(n,i){return n!=null&&i in Object(n)}function pa(n,i,s,a,l){return n===i?!0:n==null||i==null||!oo(n)&&!so(i)?n!==n&&i!==i:w1(n,i,pa,s,a,l)}function w1(n,i,s,a,l,p){var v=Cn(n),y=Cn(i),S=oa,C=oa;v||(S=nn(n),S=S==ji?Zn:S),y||(C=nn(i),C=C==ji?Zn:C);var x=S==Zn&&!aa(n),k=C==Zn&&!aa(i),I=S==C;if(I&&!x)return p||(p=new Rt),v||H1(n)?Kf(n,i,s,a,l,p):M1(n,i,S,s,a,l,p);if(!(l&Qn)){var F=x&&Dt.call(n,"__wrapped__"),B=k&&Dt.call(i,"__wrapped__");if(F||B){var U=F?n.value():n,O=B?i.value():i;return p||(p=new Rt),s(U,O,a,l,p)}}return I?(p||(p=new Rt),F1(n,i,s,a,l,p)):!1}function b1(n,i,s,a){var l=s.length,p=l,v=!a;if(n==null)return!p;for(n=Object(n);l--;){var y=s[l];if(v&&y[2]?y[1]!==n[y[0]]:!(y[0]in n))return!1}for(;++l<p;){y=s[l];var S=y[0],C=n[S],x=y[1];if(v&&y[2]){if(C===void 0&&!(S in n))return!1}else{var k=new Rt;if(a)var I=a(C,x,S,n,i,k);if(!(I===void 0?pa(x,C,a,Qi|Qn,k):I))return!1}}return!0}function C1(n){if(!oo(n)||W1(n))return!1;var i=Zf(n)||aa(n)?U0:E0;return i.test(xn(n))}function x1(n){return so(n)&&ga(n.length)&&!!ce[er.call(n)]}function E1(n){return typeof n=="function"?n:n==null?z1:typeof n=="object"?Cn(n)?P1(n[0],n[1]):O1(n):Y1(n)}function N1(n){if(!B1(n))return q0(n);var i=[];for(var s in Object(n))Dt.call(n,s)&&s!="constructor"&&i.push(s);return i}function O1(n){var i=R1(n);return i.length==1&&i[0][2]?zf(i[0][0],i[0][1]):function(s){return s===n||b1(s,n,i)}}function P1(n,i){return ro(n)&&jf(i)?zf(io(n),i):function(s){var a=K1(s,n);return a===void 0&&a===i?$1(s,n):pa(i,a,void 0,Qi|Qn)}}function k1(n){return function(i){return Hf(i,n)}}function T1(n){if(typeof n=="string")return n;if(ma(n))return Nf?Nf.call(n):"";var i=n+"";return i=="0"&&1/n==-Of?"-0":i}function qf(n){return Cn(n)?n:U1(n)}function I1(n){return function(i,s,a){for(var l=-1,p=Object(i),v=a(i),y=v.length;y--;){var S=v[n?y:++l];if(s(p[S],S,p)===!1)break}return i}}function Kf(n,i,s,a,l,p){var v=l&Qn,y=n.length,S=i.length;if(y!=S&&!(v&&S>y))return!1;var C=p.get(n);if(C&&p.get(i))return C==i;var x=-1,k=!0,I=l&Qi?new Zi:void 0;for(p.set(n,i),p.set(i,n);++x<y;){var F=n[x],B=i[x];if(a)var U=v?a(B,F,x,i,n,p):a(F,B,x,n,i,p);if(U!==void 0){if(U)continue;k=!1;break}if(I){if(!k0(i,function(O,P){if(!I.has(P)&&(F===O||s(F,O,a,l,p)))return I.add(P)})){k=!1;break}}else if(!(F===B||s(F,B,a,l,p))){k=!1;break}}return p.delete(n),p.delete(i),k}function M1(n,i,s,a,l,p,v){switch(s){case Ji:if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case Wf:return!(n.byteLength!=i.byteLength||!a(new Ef(n),new Ef(i)));case kf:case Tf:case Ff:return Yf(+n,+i);case If:return n.name==i.name&&n.message==i.message;case Rf:case Df:return n==i+"";case zi:var y=R0;case Yi:var S=p&Qn;if(y||(y=L0),n.size!=i.size&&!S)return!1;var C=v.get(n);if(C)return C==i;p|=Qi,v.set(n,i);var x=Kf(y(n),y(i),a,l,p,v);return v.delete(n),x;case Lf:if(ia)return ia.call(n)==ia.call(i)}return!1}function F1(n,i,s,a,l,p){var v=l&Qn,y=Xi(n),S=y.length,C=Xi(i),x=C.length;if(S!=x&&!v)return!1;for(var k=S;k--;){var I=y[k];if(!(v?I in i:Dt.call(i,I)))return!1}var F=p.get(n);if(F&&p.get(i))return F==i;var B=!0;p.set(n,i),p.set(i,n);for(var U=v;++k<S;){I=y[k];var O=n[I],P=i[I];if(a)var G=v?a(P,O,I,i,n,p):a(O,P,I,n,i,p);if(!(G===void 0?O===P||s(O,P,a,l,p):G)){B=!1;break}U||(U=I=="constructor")}if(B&&!U){var L=n.constructor,Y=i.constructor;L!=Y&&"constructor"in n&&"constructor"in i&&!(typeof L=="function"&&L instanceof L&&typeof Y=="function"&&Y instanceof Y)&&(B=!1)}return p.delete(n),p.delete(i),B}function no(n,i){var s=n.__data__;return L1(i)?s[typeof i=="string"?"string":"hash"]:s.map}function R1(n){for(var i=Xi(n),s=i.length;s--;){var a=i[s],l=n[a];i[s]=[a,l,jf(l)]}return i}function tr(n,i){var s=F0(n,i);return C1(s)?s:void 0}var nn=A1;(ua&&nn(new ua(new ArrayBuffer(1)))!=Ji||Lr&&nn(new Lr)!=zi||ca&&nn(ca.resolve())!=_f||fa&&nn(new fa)!=Yi||la&&nn(new la)!=sa)&&(nn=function(n){var i=er.call(n),s=i==Zn?n.constructor:void 0,a=s?xn(s):void 0;if(a)switch(a){case K0:return Ji;case $0:return zi;case j0:return _f;case z0:return Yi;case Y0:return sa}return i});function D1(n,i,s){i=ro(i,n)?[i]:qf(i);for(var a,l=-1,v=i.length;++l<v;){var p=io(i[l]);if(!(a=n!=null&&s(n,p)))break;n=n[p]}if(a)return a;var v=n?n.length:0;return!!v&&ga(v)&&$f(p,v)&&(Cn(n)||Jf(n))}function $f(n,i){return i=i??Pf,!!i&&(typeof n=="number"||N0.test(n))&&n>-1&&n%1==0&&n<i}function ro(n,i){if(Cn(n))return!1;var s=typeof n;return s=="number"||s=="symbol"||s=="boolean"||n==null||ma(n)?!0:S0.test(n)||!A0.test(n)||i!=null&&n in Object(i)}function L1(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function W1(n){return!!Cf&&Cf in n}function B1(n){var i=n&&n.constructor,s=typeof i=="function"&&i.prototype||eo;return n===s}function jf(n){return n===n&&!oo(n)}function zf(n,i){return function(s){return s==null?!1:s[n]===i&&(i!==void 0||n in Object(s))}}var U1=ha(function(n){n=q1(n);var i=[];return w0.test(n)&&i.push(""),n.replace(b0,function(s,a,l,p){i.push(l?p.replace(x0,"$1"):a||s)}),i});function io(n){if(typeof n=="string"||ma(n))return n;var i=n+"";return i=="0"&&1/n==-Of?"-0":i}function xn(n){if(n!=null){try{return Gf.call(n)}catch{}try{return n+""}catch{}}return""}function ha(n,i){if(typeof n!="function"||i&&typeof i!="function")throw new TypeError(c0);var s=function(){var a=arguments,l=i?i.apply(this,a):a[0],p=s.cache;if(p.has(l))return p.get(l);var v=n.apply(this,a);return s.cache=p.set(l,v),v};return s.cache=new(ha.Cache||Wt),s}ha.Cache=Wt;function Yf(n,i){return n===i||n!==n&&i!==i}function Jf(n){return G1(n)&&Dt.call(n,"callee")&&(!G0.call(n,"callee")||er.call(n)==ji)}var Cn=Array.isArray;function Vf(n){return n!=null&&ga(n.length)&&!Zf(n)}function G1(n){return so(n)&&Vf(n)}function Zf(n){var i=oo(n)?er.call(n):"";return i==Mf||i==f0}function ga(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Pf}function oo(n){var i=typeof n;return!!n&&(i=="object"||i=="function")}function so(n){return!!n&&typeof n=="object"}function ma(n){return typeof n=="symbol"||so(n)&&er.call(n)==Lf}var H1=bf?M0(bf):x1;function q1(n){return n==null?"":T1(n)}function K1(n,i,s){var a=n==null?void 0:Hf(n,i);return a===void 0?s:a}function $1(n,i){return n!=null&&D1(n,i,S1)}function Xi(n){return Vf(n)?v1(n):N1(n)}function j1(n,i){var s={};return i=E1(i,3),_1(n,function(a,l,p){s[l]=i(a,l,p)}),s}function z1(n){return n}function Y1(n){return ro(n)?T0(io(n)):k1(n)}Xn.exports=j1});var ol=at((ao,il)=>{(function(n,i){typeof ao=="object"&&typeof il<"u"?i(ao):typeof define=="function"&&define.amd?define(["exports"],i):i((n=n||self).TypesafeActions={})})(ao,function(n){"use strict";function i(O){return O==null}function s(O){throw new Error("Argument "+O+" is empty.")}function a(O){return typeof O=="function"&&"getType"in O}function l(O){throw new Error("Argument "+O+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function p(O,P){if(O==null)throw new Error("Argument contains array with empty element at index "+P);if(O.getType==null)throw new Error("Argument contains array with invalid element at index "+P+', it should be an action-creator instance from "typesafe-actions"')}function v(O){return typeof O=="string"||typeof O=="symbol"}function y(O){return!v(O)}function S(O){throw new Error("Argument "+O+" is invalid, it should be an action type of type: string | symbol")}function C(O,P){if(O==null)throw new Error("Argument contains array with empty element at index "+P);if(typeof O!="string"&&typeof O!="symbol")throw new Error("Argument contains array with invalid element at index "+P+", it should be of type: string | symbol")}function x(O,P,G,L){return i(O)&&s(1),y(O)&&l(1),{type:O,payload:P,meta:G,error:L}}function k(O,P){return i(O)&&s(1),y(O)&&S(1),Object.assign(function(){var G=P?.apply(void 0,arguments);return Object.assign({type:O},G)},{getType:function(){return O},toString:function(){return O}})}function I(O,P,G){return i(O)&&s(1),y(O)&&S(1),function(){return k(O,function(){var L=arguments.length<=0?void 0:arguments[0],Y=arguments.length<=1?void 0:arguments[1];return P==null&&G==null||(L=P?.apply(void 0,arguments),Y=G?.apply(void 0,arguments)),Object.assign({},L!==void 0&&{payload:L},{},Y!==void 0&&{meta:Y})})}}function F(O){return i(O)&&s(1),a(O)||l(1),O.getType()}function B(O,P){i(O)&&s(1),y(O)&&S(1);var G=P!=null?P(O):function(){return{type:O}};return Object.assign(G,{getType:function(){return O},toString:function(){return O}})}var U={createAction:function(O,P){var G=P==null?function(){return x(O)}:P(x.bind(null,O));return Object.assign(G,{getType:function(){return O},toString:function(){return O}})},createCustomAction:B,createStandardAction:function(O){return i(O)&&s(1),y(O)&&S(1),Object.assign(function(){return B(O,function(P){return function(G,L){return{type:P,payload:G,meta:L}}})},{map:function(P){return B(O,function(G){return function(L,Y){return Object.assign(P(L,Y),{type:G})}})}})}};n.action=x,n.createAction=I,n.createAsyncAction=function(O,P,G,L){return function(){var Y=[O,P,G,L].map(function($,ve){return Array.isArray($)?I($[0],$[1],$[2])():typeof $=="string"||typeof $=="symbol"?I($)():void(ve<3&&function(ee){throw new Error("Argument "+ee+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(ve))});return{request:Y[0],success:Y[1],failure:Y[2],cancel:Y[3]}}},n.createCustomAction=k,n.createReducer=function O(P,G){G===void 0&&(G={});var L=Object.assign({},G),Y=function($,ve){var ee=Array.isArray($)?$:[$],fe={};return ee.map(function(Pe,mo){return a(Pe)?F(Pe):v(Pe)?Pe:function(vo){throw new Error("Argument "+vo+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(mo+1)}).forEach(function(Pe){return fe[Pe]=ve}),O(P,Object.assign({},L,{},fe))};return Object.assign(function($,ve){if($===void 0&&($=P),L.hasOwnProperty(ve.type)){var ee=L[ve.type];if(typeof ee!="function")throw Error('Reducer under "'+ve.type+'" key is not a valid reducer');return ee($,ve)}return $},{handlers:Object.assign({},L),handleAction:Y,handleType:Y})},n.deprecated=U,n.getType=F,n.isActionOf=function(O,P){i(O)&&s(1);var G=Array.isArray(O)?O:[O];G.forEach(p);var L=function(Y){return G.some(function($){return Y.type===$.getType()})};return P===void 0?L:L(P)},n.isOfType=function(O,P){i(O)&&s(1);var G=Array.isArray(O)?O:[O];G.forEach(C);var L=function(Y){return G.includes(Y.type)};return P===void 0?L:L(P)}})});var Aa=at((VA,al)=>{ut();al.exports=de("NeosProjectPackages")().NeosUiEditors});var Ve=at((XA,ul)=>{ut();ul.exports=de("vendor")().React});var Bt=at((eS,cl)=>{ut();cl.exports=de("vendor")().reactRedux});var St=at((nS,fl)=>{ut();fl.exports=de("vendor")().PropTypes});var wt=at((iS,ll)=>{ut();ll.exports=de("NeosProjectPackages")().NeosUiDecorators});var Ut=at((sS,dl)=>{ut();dl.exports=de("NeosProjectPackages")().ReactUiComponents});var lo=at((WS,El)=>{ut();El.exports=de("vendor")().reduxSagaEffects});var Il=at((ar,Hr)=>{(function(){var n,i="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",p="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",y=500,S="__lodash_placeholder__",C=1,x=2,k=4,I=1,F=2,B=1,U=2,O=4,P=8,G=16,L=32,Y=64,$=128,ve=256,ee=512,fe=30,Pe="...",mo=800,vo=16,Ca=1,Zl=2,Xl=3,ln=1/0,Kt=9007199254740991,Ql=17976931348623157e292,Jr=0/0,mt=4294967295,ed=mt-1,td=mt>>>1,nd=[["ary",$],["bind",B],["bindKey",U],["curry",P],["curryRight",G],["flip",ee],["partial",L],["partialRight",Y],["rearg",ve]],Fn="[object Arguments]",Vr="[object Array]",rd="[object AsyncFunction]",cr="[object Boolean]",fr="[object Date]",id="[object DOMException]",Zr="[object Error]",Xr="[object Function]",xa="[object GeneratorFunction]",ct="[object Map]",lr="[object Number]",od="[object Null]",xt="[object Object]",Ea="[object Promise]",sd="[object Proxy]",dr="[object RegExp]",ft="[object Set]",pr="[object String]",Qr="[object Symbol]",ad="[object Undefined]",hr="[object WeakMap]",ud="[object WeakSet]",gr="[object ArrayBuffer]",Rn="[object DataView]",yo="[object Float32Array]",_o="[object Float64Array]",Ao="[object Int8Array]",So="[object Int16Array]",wo="[object Int32Array]",bo="[object Uint8Array]",Co="[object Uint8ClampedArray]",xo="[object Uint16Array]",Eo="[object Uint32Array]",cd=/\b__p \+= '';/g,fd=/\b(__p \+=) '' \+/g,ld=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Na=/&(?:amp|lt|gt|quot|#39);/g,Oa=/[&<>"']/g,dd=RegExp(Na.source),pd=RegExp(Oa.source),hd=/<%-([\s\S]+?)%>/g,gd=/<%([\s\S]+?)%>/g,Pa=/<%=([\s\S]+?)%>/g,md=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vd=/^\w*$/,yd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,No=/[\\^$.*+?()[\]{}|]/g,_d=RegExp(No.source),Oo=/^\s+/,Ad=/\s/,Sd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wd=/\{\n\/\* \[wrapped with (.+)\] \*/,bd=/,? & /,Cd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xd=/[()=,{}\[\]\/\s]/,Ed=/\\(\\)?/g,Nd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ka=/\w*$/,Od=/^[-+]0x[0-9a-f]+$/i,Pd=/^0b[01]+$/i,kd=/^\[object .+?Constructor\]$/,Td=/^0o[0-7]+$/i,Id=/^(?:0|[1-9]\d*)$/,Md=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ei=/($^)/,Fd=/['\n\r\u2028\u2029\\]/g,ti="\\ud800-\\udfff",Rd="\\u0300-\\u036f",Dd="\\ufe20-\\ufe2f",Ld="\\u20d0-\\u20ff",Ta=Rd+Dd+Ld,Ia="\\u2700-\\u27bf",Ma="a-z\\xdf-\\xf6\\xf8-\\xff",Wd="\\xac\\xb1\\xd7\\xf7",Bd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ud="\\u2000-\\u206f",Gd=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fa="A-Z\\xc0-\\xd6\\xd8-\\xde",Ra="\\ufe0e\\ufe0f",Da=Wd+Bd+Ud+Gd,Po="['\u2019]",Hd="["+ti+"]",La="["+Da+"]",ni="["+Ta+"]",Wa="\\d+",qd="["+Ia+"]",Ba="["+Ma+"]",Ua="[^"+ti+Da+Wa+Ia+Ma+Fa+"]",ko="\\ud83c[\\udffb-\\udfff]",Kd="(?:"+ni+"|"+ko+")",Ga="[^"+ti+"]",To="(?:\\ud83c[\\udde6-\\uddff]){2}",Io="[\\ud800-\\udbff][\\udc00-\\udfff]",Dn="["+Fa+"]",Ha="\\u200d",qa="(?:"+Ba+"|"+Ua+")",$d="(?:"+Dn+"|"+Ua+")",Ka="(?:"+Po+"(?:d|ll|m|re|s|t|ve))?",$a="(?:"+Po+"(?:D|LL|M|RE|S|T|VE))?",ja=Kd+"?",za="["+Ra+"]?",jd="(?:"+Ha+"(?:"+[Ga,To,Io].join("|")+")"+za+ja+")*",zd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ya=za+ja+jd,Jd="(?:"+[qd,To,Io].join("|")+")"+Ya,Vd="(?:"+[Ga+ni+"?",ni,To,Io,Hd].join("|")+")",Zd=RegExp(Po,"g"),Xd=RegExp(ni,"g"),Mo=RegExp(ko+"(?="+ko+")|"+Vd+Ya,"g"),Qd=RegExp([Dn+"?"+Ba+"+"+Ka+"(?="+[La,Dn,"$"].join("|")+")",$d+"+"+$a+"(?="+[La,Dn+qa,"$"].join("|")+")",Dn+"?"+qa+"+"+Ka,Dn+"+"+$a,Yd,zd,Wa,Jd].join("|"),"g"),ep=RegExp("["+Ha+ti+Ta+Ra+"]"),tp=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,np=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rp=-1,ue={};ue[yo]=ue[_o]=ue[Ao]=ue[So]=ue[wo]=ue[bo]=ue[Co]=ue[xo]=ue[Eo]=!0,ue[Fn]=ue[Vr]=ue[gr]=ue[cr]=ue[Rn]=ue[fr]=ue[Zr]=ue[Xr]=ue[ct]=ue[lr]=ue[xt]=ue[dr]=ue[ft]=ue[pr]=ue[hr]=!1;var ae={};ae[Fn]=ae[Vr]=ae[gr]=ae[Rn]=ae[cr]=ae[fr]=ae[yo]=ae[_o]=ae[Ao]=ae[So]=ae[wo]=ae[ct]=ae[lr]=ae[xt]=ae[dr]=ae[ft]=ae[pr]=ae[Qr]=ae[bo]=ae[Co]=ae[xo]=ae[Eo]=!0,ae[Zr]=ae[Xr]=ae[hr]=!1;var ip={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},op={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},sp={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ap={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},up=parseFloat,cp=parseInt,Ja=typeof global=="object"&&global&&global.Object===Object&&global,fp=typeof self=="object"&&self&&self.Object===Object&&self,we=Ja||fp||Function("return this")(),Fo=typeof ar=="object"&&ar&&!ar.nodeType&&ar,dn=Fo&&typeof Hr=="object"&&Hr&&!Hr.nodeType&&Hr,Va=dn&&dn.exports===Fo,Ro=Va&&Ja.process,Qe=function(){try{var g=dn&&dn.require&&dn.require("util").types;return g||Ro&&Ro.binding&&Ro.binding("util")}catch{}}(),Za=Qe&&Qe.isArrayBuffer,Xa=Qe&&Qe.isDate,Qa=Qe&&Qe.isMap,eu=Qe&&Qe.isRegExp,tu=Qe&&Qe.isSet,nu=Qe&&Qe.isTypedArray;function He(g,A,_){switch(_.length){case 0:return g.call(A);case 1:return g.call(A,_[0]);case 2:return g.call(A,_[0],_[1]);case 3:return g.call(A,_[0],_[1],_[2])}return g.apply(A,_)}function lp(g,A,_,D){for(var j=-1,re=g==null?0:g.length;++j<re;){var ye=g[j];A(D,ye,_(ye),g)}return D}function et(g,A){for(var _=-1,D=g==null?0:g.length;++_<D&&A(g[_],_,g)!==!1;);return g}function dp(g,A){for(var _=g==null?0:g.length;_--&&A(g[_],_,g)!==!1;);return g}function ru(g,A){for(var _=-1,D=g==null?0:g.length;++_<D;)if(!A(g[_],_,g))return!1;return!0}function $t(g,A){for(var _=-1,D=g==null?0:g.length,j=0,re=[];++_<D;){var ye=g[_];A(ye,_,g)&&(re[j++]=ye)}return re}function ri(g,A){var _=g==null?0:g.length;return!!_&&Ln(g,A,0)>-1}function Do(g,A,_){for(var D=-1,j=g==null?0:g.length;++D<j;)if(_(A,g[D]))return!0;return!1}function le(g,A){for(var _=-1,D=g==null?0:g.length,j=Array(D);++_<D;)j[_]=A(g[_],_,g);return j}function jt(g,A){for(var _=-1,D=A.length,j=g.length;++_<D;)g[j+_]=A[_];return g}function Lo(g,A,_,D){var j=-1,re=g==null?0:g.length;for(D&&re&&(_=g[++j]);++j<re;)_=A(_,g[j],j,g);return _}function pp(g,A,_,D){var j=g==null?0:g.length;for(D&&j&&(_=g[--j]);j--;)_=A(_,g[j],j,g);return _}function Wo(g,A){for(var _=-1,D=g==null?0:g.length;++_<D;)if(A(g[_],_,g))return!0;return!1}var hp=Bo("length");function gp(g){return g.split("")}function mp(g){return g.match(Cd)||[]}function iu(g,A,_){var D;return _(g,function(j,re,ye){if(A(j,re,ye))return D=re,!1}),D}function ii(g,A,_,D){for(var j=g.length,re=_+(D?1:-1);D?re--:++re<j;)if(A(g[re],re,g))return re;return-1}function Ln(g,A,_){return A===A?Op(g,A,_):ii(g,ou,_)}function vp(g,A,_,D){for(var j=_-1,re=g.length;++j<re;)if(D(g[j],A))return j;return-1}function ou(g){return g!==g}function su(g,A){var _=g==null?0:g.length;return _?Go(g,A)/_:Jr}function Bo(g){return function(A){return A==null?n:A[g]}}function Uo(g){return function(A){return g==null?n:g[A]}}function au(g,A,_,D,j){return j(g,function(re,ye,se){_=D?(D=!1,re):A(_,re,ye,se)}),_}function yp(g,A){var _=g.length;for(g.sort(A);_--;)g[_]=g[_].value;return g}function Go(g,A){for(var _,D=-1,j=g.length;++D<j;){var re=A(g[D]);re!==n&&(_=_===n?re:_+re)}return _}function Ho(g,A){for(var _=-1,D=Array(g);++_<g;)D[_]=A(_);return D}function _p(g,A){return le(A,function(_){return[_,g[_]]})}function uu(g){return g&&g.slice(0,du(g)+1).replace(Oo,"")}function qe(g){return function(A){return g(A)}}function qo(g,A){return le(A,function(_){return g[_]})}function mr(g,A){return g.has(A)}function cu(g,A){for(var _=-1,D=g.length;++_<D&&Ln(A,g[_],0)>-1;);return _}function fu(g,A){for(var _=g.length;_--&&Ln(A,g[_],0)>-1;);return _}function Ap(g,A){for(var _=g.length,D=0;_--;)g[_]===A&&++D;return D}var Sp=Uo(ip),wp=Uo(op);function bp(g){return"\\"+ap[g]}function Cp(g,A){return g==null?n:g[A]}function Wn(g){return ep.test(g)}function xp(g){return tp.test(g)}function Ep(g){for(var A,_=[];!(A=g.next()).done;)_.push(A.value);return _}function Ko(g){var A=-1,_=Array(g.size);return g.forEach(function(D,j){_[++A]=[j,D]}),_}function lu(g,A){return function(_){return g(A(_))}}function zt(g,A){for(var _=-1,D=g.length,j=0,re=[];++_<D;){var ye=g[_];(ye===A||ye===S)&&(g[_]=S,re[j++]=_)}return re}function oi(g){var A=-1,_=Array(g.size);return g.forEach(function(D){_[++A]=D}),_}function Np(g){var A=-1,_=Array(g.size);return g.forEach(function(D){_[++A]=[D,D]}),_}function Op(g,A,_){for(var D=_-1,j=g.length;++D<j;)if(g[D]===A)return D;return-1}function Pp(g,A,_){for(var D=_+1;D--;)if(g[D]===A)return D;return D}function Bn(g){return Wn(g)?Tp(g):hp(g)}function lt(g){return Wn(g)?Ip(g):gp(g)}function du(g){for(var A=g.length;A--&&Ad.test(g.charAt(A)););return A}var kp=Uo(sp);function Tp(g){for(var A=Mo.lastIndex=0;Mo.test(g);)++A;return A}function Ip(g){return g.match(Mo)||[]}function Mp(g){return g.match(Qd)||[]}var Fp=function g(A){A=A==null?we:Yt.defaults(we.Object(),A,Yt.pick(we,np));var _=A.Array,D=A.Date,j=A.Error,re=A.Function,ye=A.Math,se=A.Object,$o=A.RegExp,Rp=A.String,tt=A.TypeError,si=_.prototype,Dp=re.prototype,Un=se.prototype,ai=A["__core-js_shared__"],ui=Dp.toString,oe=Un.hasOwnProperty,Lp=0,pu=function(){var e=/[^.]+$/.exec(ai&&ai.keys&&ai.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ci=Un.toString,Wp=ui.call(se),Bp=we._,Up=$o("^"+ui.call(oe).replace(No,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fi=Va?A.Buffer:n,Jt=A.Symbol,li=A.Uint8Array,hu=fi?fi.allocUnsafe:n,di=lu(se.getPrototypeOf,se),gu=se.create,mu=Un.propertyIsEnumerable,pi=si.splice,vu=Jt?Jt.isConcatSpreadable:n,vr=Jt?Jt.iterator:n,pn=Jt?Jt.toStringTag:n,hi=function(){try{var e=yn(se,"defineProperty");return e({},"",{}),e}catch{}}(),Gp=A.clearTimeout!==we.clearTimeout&&A.clearTimeout,Hp=D&&D.now!==we.Date.now&&D.now,qp=A.setTimeout!==we.setTimeout&&A.setTimeout,gi=ye.ceil,mi=ye.floor,jo=se.getOwnPropertySymbols,Kp=fi?fi.isBuffer:n,yu=A.isFinite,$p=si.join,jp=lu(se.keys,se),_e=ye.max,ke=ye.min,zp=D.now,Yp=A.parseInt,_u=ye.random,Jp=si.reverse,zo=yn(A,"DataView"),yr=yn(A,"Map"),Yo=yn(A,"Promise"),Gn=yn(A,"Set"),_r=yn(A,"WeakMap"),Ar=yn(se,"create"),vi=_r&&new _r,Hn={},Vp=_n(zo),Zp=_n(yr),Xp=_n(Yo),Qp=_n(Gn),eh=_n(_r),yi=Jt?Jt.prototype:n,Sr=yi?yi.valueOf:n,Au=yi?yi.toString:n;function c(e){if(he(e)&&!z(e)&&!(e instanceof Q)){if(e instanceof nt)return e;if(oe.call(e,"__wrapped__"))return Sc(e)}return new nt(e)}var qn=function(){function e(){}return function(t){if(!pe(t))return{};if(gu)return gu(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function _i(){}function nt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}c.templateSettings={escape:hd,evaluate:gd,interpolate:Pa,variable:"",imports:{_:c}},c.prototype=_i.prototype,c.prototype.constructor=c,nt.prototype=qn(_i.prototype),nt.prototype.constructor=nt;function Q(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=mt,this.__views__=[]}function th(){var e=new Q(this.__wrapped__);return e.__actions__=Le(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Le(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Le(this.__views__),e}function nh(){if(this.__filtered__){var e=new Q(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function rh(){var e=this.__wrapped__.value(),t=this.__dir__,r=z(e),o=t<0,u=r?e.length:0,f=gg(0,u,this.__views__),d=f.start,h=f.end,m=h-d,w=o?h:d-1,b=this.__iteratees__,E=b.length,T=0,W=ke(m,this.__takeCount__);if(!r||!o&&u==m&&W==m)return Ku(e,this.__actions__);var q=[];e:for(;m--&&T<W;){w+=t;for(var V=-1,K=e[w];++V<E;){var X=b[V],te=X.iteratee,je=X.type,Re=te(K);if(je==Zl)K=Re;else if(!Re){if(je==Ca)continue e;break e}}q[T++]=K}return q}Q.prototype=qn(_i.prototype),Q.prototype.constructor=Q;function hn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function ih(){this.__data__=Ar?Ar(null):{},this.size=0}function oh(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function sh(e){var t=this.__data__;if(Ar){var r=t[e];return r===v?n:r}return oe.call(t,e)?t[e]:n}function ah(e){var t=this.__data__;return Ar?t[e]!==n:oe.call(t,e)}function uh(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ar&&t===n?v:t,this}hn.prototype.clear=ih,hn.prototype.delete=oh,hn.prototype.get=sh,hn.prototype.has=ah,hn.prototype.set=uh;function Et(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function ch(){this.__data__=[],this.size=0}function fh(e){var t=this.__data__,r=Ai(t,e);if(r<0)return!1;var o=t.length-1;return r==o?t.pop():pi.call(t,r,1),--this.size,!0}function lh(e){var t=this.__data__,r=Ai(t,e);return r<0?n:t[r][1]}function dh(e){return Ai(this.__data__,e)>-1}function ph(e,t){var r=this.__data__,o=Ai(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}Et.prototype.clear=ch,Et.prototype.delete=fh,Et.prototype.get=lh,Et.prototype.has=dh,Et.prototype.set=ph;function Nt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function hh(){this.size=0,this.__data__={hash:new hn,map:new(yr||Et),string:new hn}}function gh(e){var t=Ii(this,e).delete(e);return this.size-=t?1:0,t}function mh(e){return Ii(this,e).get(e)}function vh(e){return Ii(this,e).has(e)}function yh(e,t){var r=Ii(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}Nt.prototype.clear=hh,Nt.prototype.delete=gh,Nt.prototype.get=mh,Nt.prototype.has=vh,Nt.prototype.set=yh;function gn(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Nt;++t<r;)this.add(e[t])}function _h(e){return this.__data__.set(e,v),this}function Ah(e){return this.__data__.has(e)}gn.prototype.add=gn.prototype.push=_h,gn.prototype.has=Ah;function dt(e){var t=this.__data__=new Et(e);this.size=t.size}function Sh(){this.__data__=new Et,this.size=0}function wh(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function bh(e){return this.__data__.get(e)}function Ch(e){return this.__data__.has(e)}function xh(e,t){var r=this.__data__;if(r instanceof Et){var o=r.__data__;if(!yr||o.length<s-1)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new Nt(o)}return r.set(e,t),this.size=r.size,this}dt.prototype.clear=Sh,dt.prototype.delete=wh,dt.prototype.get=bh,dt.prototype.has=Ch,dt.prototype.set=xh;function Su(e,t){var r=z(e),o=!r&&An(e),u=!r&&!o&&en(e),f=!r&&!o&&!u&&zn(e),d=r||o||u||f,h=d?Ho(e.length,Rp):[],m=h.length;for(var w in e)(t||oe.call(e,w))&&!(d&&(w=="length"||u&&(w=="offset"||w=="parent")||f&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||Tt(w,m)))&&h.push(w);return h}function wu(e){var t=e.length;return t?e[os(0,t-1)]:n}function Eh(e,t){return Mi(Le(e),mn(t,0,e.length))}function Nh(e){return Mi(Le(e))}function Jo(e,t,r){(r!==n&&!pt(e[t],r)||r===n&&!(t in e))&&Ot(e,t,r)}function wr(e,t,r){var o=e[t];(!(oe.call(e,t)&&pt(o,r))||r===n&&!(t in e))&&Ot(e,t,r)}function Ai(e,t){for(var r=e.length;r--;)if(pt(e[r][0],t))return r;return-1}function Oh(e,t,r,o){return Vt(e,function(u,f,d){t(o,u,r(u),d)}),o}function bu(e,t){return e&&yt(t,be(t),e)}function Ph(e,t){return e&&yt(t,Be(t),e)}function Ot(e,t,r){t=="__proto__"&&hi?hi(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Vo(e,t){for(var r=-1,o=t.length,u=_(o),f=e==null;++r<o;)u[r]=f?n:ks(e,t[r]);return u}function mn(e,t,r){return e===e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function rt(e,t,r,o,u,f){var d,h=t&C,m=t&x,w=t&k;if(r&&(d=u?r(e,o,u,f):r(e)),d!==n)return d;if(!pe(e))return e;var b=z(e);if(b){if(d=vg(e),!h)return Le(e,d)}else{var E=Te(e),T=E==Xr||E==xa;if(en(e))return zu(e,h);if(E==xt||E==Fn||T&&!u){if(d=m||T?{}:dc(e),!h)return m?sg(e,Ph(d,e)):og(e,bu(d,e))}else{if(!ae[E])return u?e:{};d=yg(e,E,h)}}f||(f=new dt);var W=f.get(e);if(W)return W;f.set(e,d),Gc(e)?e.forEach(function(K){d.add(rt(K,t,r,K,e,f))}):Bc(e)&&e.forEach(function(K,X){d.set(X,rt(K,t,r,X,e,f))});var q=w?m?ms:gs:m?Be:be,V=b?n:q(e);return et(V||e,function(K,X){V&&(X=K,K=e[X]),wr(d,X,rt(K,t,r,X,e,f))}),d}function kh(e){var t=be(e);return function(r){return Cu(r,e,t)}}function Cu(e,t,r){var o=r.length;if(e==null)return!o;for(e=se(e);o--;){var u=r[o],f=t[u],d=e[u];if(d===n&&!(u in e)||!f(d))return!1}return!0}function xu(e,t,r){if(typeof e!="function")throw new tt(l);return Pr(function(){e.apply(n,r)},t)}function br(e,t,r,o){var u=-1,f=ri,d=!0,h=e.length,m=[],w=t.length;if(!h)return m;r&&(t=le(t,qe(r))),o?(f=Do,d=!1):t.length>=s&&(f=mr,d=!1,t=new gn(t));e:for(;++u<h;){var b=e[u],E=r==null?b:r(b);if(b=o||b!==0?b:0,d&&E===E){for(var T=w;T--;)if(t[T]===E)continue e;m.push(b)}else f(t,E,o)||m.push(b)}return m}var Vt=Xu(vt),Eu=Xu(Xo,!0);function Th(e,t){var r=!0;return Vt(e,function(o,u,f){return r=!!t(o,u,f),r}),r}function Si(e,t,r){for(var o=-1,u=e.length;++o<u;){var f=e[o],d=t(f);if(d!=null&&(h===n?d===d&&!$e(d):r(d,h)))var h=d,m=f}return m}function Ih(e,t,r,o){var u=e.length;for(r=J(r),r<0&&(r=-r>u?0:u+r),o=o===n||o>u?u:J(o),o<0&&(o+=u),o=r>o?0:qc(o);r<o;)e[r++]=t;return e}function Nu(e,t){var r=[];return Vt(e,function(o,u,f){t(o,u,f)&&r.push(o)}),r}function Ne(e,t,r,o,u){var f=-1,d=e.length;for(r||(r=Ag),u||(u=[]);++f<d;){var h=e[f];t>0&&r(h)?t>1?Ne(h,t-1,r,o,u):jt(u,h):o||(u[u.length]=h)}return u}var Zo=Qu(),Ou=Qu(!0);function vt(e,t){return e&&Zo(e,t,be)}function Xo(e,t){return e&&Ou(e,t,be)}function wi(e,t){return $t(t,function(r){return It(e[r])})}function vn(e,t){t=Xt(t,e);for(var r=0,o=t.length;e!=null&&r<o;)e=e[_t(t[r++])];return r&&r==o?e:n}function Pu(e,t,r){var o=t(e);return z(e)?o:jt(o,r(e))}function Me(e){return e==null?e===n?ad:od:pn&&pn in se(e)?hg(e):Ng(e)}function Qo(e,t){return e>t}function Mh(e,t){return e!=null&&oe.call(e,t)}function Fh(e,t){return e!=null&&t in se(e)}function Rh(e,t,r){return e>=ke(t,r)&&e<_e(t,r)}function es(e,t,r){for(var o=r?Do:ri,u=e[0].length,f=e.length,d=f,h=_(f),m=1/0,w=[];d--;){var b=e[d];d&&t&&(b=le(b,qe(t))),m=ke(b.length,m),h[d]=!r&&(t||u>=120&&b.length>=120)?new gn(d&&b):n}b=e[0];var E=-1,T=h[0];e:for(;++E<u&&w.length<m;){var W=b[E],q=t?t(W):W;if(W=r||W!==0?W:0,!(T?mr(T,q):o(w,q,r))){for(d=f;--d;){var V=h[d];if(!(V?mr(V,q):o(e[d],q,r)))continue e}T&&T.push(q),w.push(W)}}return w}function Dh(e,t,r,o){return vt(e,function(u,f,d){t(o,r(u),f,d)}),o}function Cr(e,t,r){t=Xt(t,e),e=mc(e,t);var o=e==null?e:e[_t(ot(t))];return o==null?n:He(o,e,r)}function ku(e){return he(e)&&Me(e)==Fn}function Lh(e){return he(e)&&Me(e)==gr}function Wh(e){return he(e)&&Me(e)==fr}function xr(e,t,r,o,u){return e===t?!0:e==null||t==null||!he(e)&&!he(t)?e!==e&&t!==t:Bh(e,t,r,o,xr,u)}function Bh(e,t,r,o,u,f){var d=z(e),h=z(t),m=d?Vr:Te(e),w=h?Vr:Te(t);m=m==Fn?xt:m,w=w==Fn?xt:w;var b=m==xt,E=w==xt,T=m==w;if(T&&en(e)){if(!en(t))return!1;d=!0,b=!1}if(T&&!b)return f||(f=new dt),d||zn(e)?cc(e,t,r,o,u,f):dg(e,t,m,r,o,u,f);if(!(r&I)){var W=b&&oe.call(e,"__wrapped__"),q=E&&oe.call(t,"__wrapped__");if(W||q){var V=W?e.value():e,K=q?t.value():t;return f||(f=new dt),u(V,K,r,o,f)}}return T?(f||(f=new dt),pg(e,t,r,o,u,f)):!1}function Uh(e){return he(e)&&Te(e)==ct}function ts(e,t,r,o){var u=r.length,f=u,d=!o;if(e==null)return!f;for(e=se(e);u--;){var h=r[u];if(d&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++u<f;){h=r[u];var m=h[0],w=e[m],b=h[1];if(d&&h[2]){if(w===n&&!(m in e))return!1}else{var E=new dt;if(o)var T=o(w,b,m,e,t,E);if(!(T===n?xr(b,w,I|F,o,E):T))return!1}}return!0}function Tu(e){if(!pe(e)||wg(e))return!1;var t=It(e)?Up:kd;return t.test(_n(e))}function Gh(e){return he(e)&&Me(e)==dr}function Hh(e){return he(e)&&Te(e)==ft}function qh(e){return he(e)&&Bi(e.length)&&!!ue[Me(e)]}function Iu(e){return typeof e=="function"?e:e==null?Ue:typeof e=="object"?z(e)?Ru(e[0],e[1]):Fu(e):ef(e)}function ns(e){if(!Or(e))return jp(e);var t=[];for(var r in se(e))oe.call(e,r)&&r!="constructor"&&t.push(r);return t}function Kh(e){if(!pe(e))return Eg(e);var t=Or(e),r=[];for(var o in e)o=="constructor"&&(t||!oe.call(e,o))||r.push(o);return r}function rs(e,t){return e<t}function Mu(e,t){var r=-1,o=We(e)?_(e.length):[];return Vt(e,function(u,f,d){o[++r]=t(u,f,d)}),o}function Fu(e){var t=ys(e);return t.length==1&&t[0][2]?hc(t[0][0],t[0][1]):function(r){return r===e||ts(r,e,t)}}function Ru(e,t){return As(e)&&pc(t)?hc(_t(e),t):function(r){var o=ks(r,e);return o===n&&o===t?Ts(r,e):xr(t,o,I|F)}}function bi(e,t,r,o,u){e!==t&&Zo(t,function(f,d){if(u||(u=new dt),pe(f))$h(e,t,d,r,bi,o,u);else{var h=o?o(ws(e,d),f,d+"",e,t,u):n;h===n&&(h=f),Jo(e,d,h)}},Be)}function $h(e,t,r,o,u,f,d){var h=ws(e,r),m=ws(t,r),w=d.get(m);if(w){Jo(e,r,w);return}var b=f?f(h,m,r+"",e,t,d):n,E=b===n;if(E){var T=z(m),W=!T&&en(m),q=!T&&!W&&zn(m);b=m,T||W||q?z(h)?b=h:ge(h)?b=Le(h):W?(E=!1,b=zu(m,!0)):q?(E=!1,b=Yu(m,!0)):b=[]:kr(m)||An(m)?(b=h,An(h)?b=Kc(h):(!pe(h)||It(h))&&(b=dc(m))):E=!1}E&&(d.set(m,b),u(b,m,o,f,d),d.delete(m)),Jo(e,r,b)}function Du(e,t){var r=e.length;if(r)return t+=t<0?r:0,Tt(t,r)?e[t]:n}function Lu(e,t,r){t.length?t=le(t,function(f){return z(f)?function(d){return vn(d,f.length===1?f[0]:f)}:f}):t=[Ue];var o=-1;t=le(t,qe(H()));var u=Mu(e,function(f,d,h){var m=le(t,function(w){return w(f)});return{criteria:m,index:++o,value:f}});return yp(u,function(f,d){return ig(f,d,r)})}function jh(e,t){return Wu(e,t,function(r,o){return Ts(e,o)})}function Wu(e,t,r){for(var o=-1,u=t.length,f={};++o<u;){var d=t[o],h=vn(e,d);r(h,d)&&Er(f,Xt(d,e),h)}return f}function zh(e){return function(t){return vn(t,e)}}function is(e,t,r,o){var u=o?vp:Ln,f=-1,d=t.length,h=e;for(e===t&&(t=Le(t)),r&&(h=le(e,qe(r)));++f<d;)for(var m=0,w=t[f],b=r?r(w):w;(m=u(h,b,m,o))>-1;)h!==e&&pi.call(h,m,1),pi.call(e,m,1);return e}function Bu(e,t){for(var r=e?t.length:0,o=r-1;r--;){var u=t[r];if(r==o||u!==f){var f=u;Tt(u)?pi.call(e,u,1):us(e,u)}}return e}function os(e,t){return e+mi(_u()*(t-e+1))}function Yh(e,t,r,o){for(var u=-1,f=_e(gi((t-e)/(r||1)),0),d=_(f);f--;)d[o?f:++u]=e,e+=r;return d}function ss(e,t){var r="";if(!e||t<1||t>Kt)return r;do t%2&&(r+=e),t=mi(t/2),t&&(e+=e);while(t);return r}function Z(e,t){return bs(gc(e,t,Ue),e+"")}function Jh(e){return wu(Yn(e))}function Vh(e,t){var r=Yn(e);return Mi(r,mn(t,0,r.length))}function Er(e,t,r,o){if(!pe(e))return e;t=Xt(t,e);for(var u=-1,f=t.length,d=f-1,h=e;h!=null&&++u<f;){var m=_t(t[u]),w=r;if(m==="__proto__"||m==="constructor"||m==="prototype")return e;if(u!=d){var b=h[m];w=o?o(b,m,h):n,w===n&&(w=pe(b)?b:Tt(t[u+1])?[]:{})}wr(h,m,w),h=h[m]}return e}var Uu=vi?function(e,t){return vi.set(e,t),e}:Ue,Zh=hi?function(e,t){return hi(e,"toString",{configurable:!0,enumerable:!1,value:Ms(t),writable:!0})}:Ue;function Xh(e){return Mi(Yn(e))}function it(e,t,r){var o=-1,u=e.length;t<0&&(t=-t>u?0:u+t),r=r>u?u:r,r<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var f=_(u);++o<u;)f[o]=e[o+t];return f}function Qh(e,t){var r;return Vt(e,function(o,u,f){return r=t(o,u,f),!r}),!!r}function Ci(e,t,r){var o=0,u=e==null?o:e.length;if(typeof t=="number"&&t===t&&u<=td){for(;o<u;){var f=o+u>>>1,d=e[f];d!==null&&!$e(d)&&(r?d<=t:d<t)?o=f+1:u=f}return u}return as(e,t,Ue,r)}function as(e,t,r,o){var u=0,f=e==null?0:e.length;if(f===0)return 0;t=r(t);for(var d=t!==t,h=t===null,m=$e(t),w=t===n;u<f;){var b=mi((u+f)/2),E=r(e[b]),T=E!==n,W=E===null,q=E===E,V=$e(E);if(d)var K=o||q;else w?K=q&&(o||T):h?K=q&&T&&(o||!W):m?K=q&&T&&!W&&(o||!V):W||V?K=!1:K=o?E<=t:E<t;K?u=b+1:f=b}return ke(f,ed)}function Gu(e,t){for(var r=-1,o=e.length,u=0,f=[];++r<o;){var d=e[r],h=t?t(d):d;if(!r||!pt(h,m)){var m=h;f[u++]=d===0?0:d}}return f}function Hu(e){return typeof e=="number"?e:$e(e)?Jr:+e}function Ke(e){if(typeof e=="string")return e;if(z(e))return le(e,Ke)+"";if($e(e))return Au?Au.call(e):"";var t=e+"";return t=="0"&&1/e==-ln?"-0":t}function Zt(e,t,r){var o=-1,u=ri,f=e.length,d=!0,h=[],m=h;if(r)d=!1,u=Do;else if(f>=s){var w=t?null:fg(e);if(w)return oi(w);d=!1,u=mr,m=new gn}else m=t?[]:h;e:for(;++o<f;){var b=e[o],E=t?t(b):b;if(b=r||b!==0?b:0,d&&E===E){for(var T=m.length;T--;)if(m[T]===E)continue e;t&&m.push(E),h.push(b)}else u(m,E,r)||(m!==h&&m.push(E),h.push(b))}return h}function us(e,t){return t=Xt(t,e),e=mc(e,t),e==null||delete e[_t(ot(t))]}function qu(e,t,r,o){return Er(e,t,r(vn(e,t)),o)}function xi(e,t,r,o){for(var u=e.length,f=o?u:-1;(o?f--:++f<u)&&t(e[f],f,e););return r?it(e,o?0:f,o?f+1:u):it(e,o?f+1:0,o?u:f)}function Ku(e,t){var r=e;return r instanceof Q&&(r=r.value()),Lo(t,function(o,u){return u.func.apply(u.thisArg,jt([o],u.args))},r)}function cs(e,t,r){var o=e.length;if(o<2)return o?Zt(e[0]):[];for(var u=-1,f=_(o);++u<o;)for(var d=e[u],h=-1;++h<o;)h!=u&&(f[u]=br(f[u]||d,e[h],t,r));return Zt(Ne(f,1),t,r)}function $u(e,t,r){for(var o=-1,u=e.length,f=t.length,d={};++o<u;){var h=o<f?t[o]:n;r(d,e[o],h)}return d}function fs(e){return ge(e)?e:[]}function ls(e){return typeof e=="function"?e:Ue}function Xt(e,t){return z(e)?e:As(e,t)?[e]:Ac(ie(e))}var eg=Z;function Qt(e,t,r){var o=e.length;return r=r===n?o:r,!t&&r>=o?e:it(e,t,r)}var ju=Gp||function(e){return we.clearTimeout(e)};function zu(e,t){if(t)return e.slice();var r=e.length,o=hu?hu(r):new e.constructor(r);return e.copy(o),o}function ds(e){var t=new e.constructor(e.byteLength);return new li(t).set(new li(e)),t}function tg(e,t){var r=t?ds(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function ng(e){var t=new e.constructor(e.source,ka.exec(e));return t.lastIndex=e.lastIndex,t}function rg(e){return Sr?se(Sr.call(e)):{}}function Yu(e,t){var r=t?ds(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ju(e,t){if(e!==t){var r=e!==n,o=e===null,u=e===e,f=$e(e),d=t!==n,h=t===null,m=t===t,w=$e(t);if(!h&&!w&&!f&&e>t||f&&d&&m&&!h&&!w||o&&d&&m||!r&&m||!u)return 1;if(!o&&!f&&!w&&e<t||w&&r&&u&&!o&&!f||h&&r&&u||!d&&u||!m)return-1}return 0}function ig(e,t,r){for(var o=-1,u=e.criteria,f=t.criteria,d=u.length,h=r.length;++o<d;){var m=Ju(u[o],f[o]);if(m){if(o>=h)return m;var w=r[o];return m*(w=="desc"?-1:1)}}return e.index-t.index}function Vu(e,t,r,o){for(var u=-1,f=e.length,d=r.length,h=-1,m=t.length,w=_e(f-d,0),b=_(m+w),E=!o;++h<m;)b[h]=t[h];for(;++u<d;)(E||u<f)&&(b[r[u]]=e[u]);for(;w--;)b[h++]=e[u++];return b}function Zu(e,t,r,o){for(var u=-1,f=e.length,d=-1,h=r.length,m=-1,w=t.length,b=_e(f-h,0),E=_(b+w),T=!o;++u<b;)E[u]=e[u];for(var W=u;++m<w;)E[W+m]=t[m];for(;++d<h;)(T||u<f)&&(E[W+r[d]]=e[u++]);return E}function Le(e,t){var r=-1,o=e.length;for(t||(t=_(o));++r<o;)t[r]=e[r];return t}function yt(e,t,r,o){var u=!r;r||(r={});for(var f=-1,d=t.length;++f<d;){var h=t[f],m=o?o(r[h],e[h],h,r,e):n;m===n&&(m=e[h]),u?Ot(r,h,m):wr(r,h,m)}return r}function og(e,t){return yt(e,_s(e),t)}function sg(e,t){return yt(e,fc(e),t)}function Ei(e,t){return function(r,o){var u=z(r)?lp:Oh,f=t?t():{};return u(r,e,H(o,2),f)}}function Kn(e){return Z(function(t,r){var o=-1,u=r.length,f=u>1?r[u-1]:n,d=u>2?r[2]:n;for(f=e.length>3&&typeof f=="function"?(u--,f):n,d&&Fe(r[0],r[1],d)&&(f=u<3?n:f,u=1),t=se(t);++o<u;){var h=r[o];h&&e(t,h,o,f)}return t})}function Xu(e,t){return function(r,o){if(r==null)return r;if(!We(r))return e(r,o);for(var u=r.length,f=t?u:-1,d=se(r);(t?f--:++f<u)&&o(d[f],f,d)!==!1;);return r}}function Qu(e){return function(t,r,o){for(var u=-1,f=se(t),d=o(t),h=d.length;h--;){var m=d[e?h:++u];if(r(f[m],m,f)===!1)break}return t}}function ag(e,t,r){var o=t&B,u=Nr(e);function f(){var d=this&&this!==we&&this instanceof f?u:e;return d.apply(o?r:this,arguments)}return f}function ec(e){return function(t){t=ie(t);var r=Wn(t)?lt(t):n,o=r?r[0]:t.charAt(0),u=r?Qt(r,1).join(""):t.slice(1);return o[e]()+u}}function $n(e){return function(t){return Lo(Xc(Zc(t).replace(Zd,"")),e,"")}}function Nr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=qn(e.prototype),o=e.apply(r,t);return pe(o)?o:r}}function ug(e,t,r){var o=Nr(e);function u(){for(var f=arguments.length,d=_(f),h=f,m=jn(u);h--;)d[h]=arguments[h];var w=f<3&&d[0]!==m&&d[f-1]!==m?[]:zt(d,m);if(f-=w.length,f<r)return oc(e,t,Ni,u.placeholder,n,d,w,n,n,r-f);var b=this&&this!==we&&this instanceof u?o:e;return He(b,this,d)}return u}function tc(e){return function(t,r,o){var u=se(t);if(!We(t)){var f=H(r,3);t=be(t),r=function(h){return f(u[h],h,u)}}var d=e(t,r,o);return d>-1?u[f?t[d]:d]:n}}function nc(e){return kt(function(t){var r=t.length,o=r,u=nt.prototype.thru;for(e&&t.reverse();o--;){var f=t[o];if(typeof f!="function")throw new tt(l);if(u&&!d&&Ti(f)=="wrapper")var d=new nt([],!0)}for(o=d?o:r;++o<r;){f=t[o];var h=Ti(f),m=h=="wrapper"?vs(f):n;m&&Ss(m[0])&&m[1]==($|P|L|ve)&&!m[4].length&&m[9]==1?d=d[Ti(m[0])].apply(d,m[3]):d=f.length==1&&Ss(f)?d[h]():d.thru(f)}return function(){var w=arguments,b=w[0];if(d&&w.length==1&&z(b))return d.plant(b).value();for(var E=0,T=r?t[E].apply(this,w):b;++E<r;)T=t[E].call(this,T);return T}})}function Ni(e,t,r,o,u,f,d,h,m,w){var b=t&$,E=t&B,T=t&U,W=t&(P|G),q=t&ee,V=T?n:Nr(e);function K(){for(var X=arguments.length,te=_(X),je=X;je--;)te[je]=arguments[je];if(W)var Re=jn(K),ze=Ap(te,Re);if(o&&(te=Vu(te,o,u,W)),f&&(te=Zu(te,f,d,W)),X-=ze,W&&X<w){var me=zt(te,Re);return oc(e,t,Ni,K.placeholder,r,te,me,h,m,w-X)}var ht=E?r:this,Ft=T?ht[e]:e;return X=te.length,h?te=Og(te,h):q&&X>1&&te.reverse(),b&&m<X&&(te.length=m),this&&this!==we&&this instanceof K&&(Ft=V||Nr(Ft)),Ft.apply(ht,te)}return K}function rc(e,t){return function(r,o){return Dh(r,e,t(o),{})}}function Oi(e,t){return function(r,o){var u;if(r===n&&o===n)return t;if(r!==n&&(u=r),o!==n){if(u===n)return o;typeof r=="string"||typeof o=="string"?(r=Ke(r),o=Ke(o)):(r=Hu(r),o=Hu(o)),u=e(r,o)}return u}}function ps(e){return kt(function(t){return t=le(t,qe(H())),Z(function(r){var o=this;return e(t,function(u){return He(u,o,r)})})})}function Pi(e,t){t=t===n?" ":Ke(t);var r=t.length;if(r<2)return r?ss(t,e):t;var o=ss(t,gi(e/Bn(t)));return Wn(t)?Qt(lt(o),0,e).join(""):o.slice(0,e)}function cg(e,t,r,o){var u=t&B,f=Nr(e);function d(){for(var h=-1,m=arguments.length,w=-1,b=o.length,E=_(b+m),T=this&&this!==we&&this instanceof d?f:e;++w<b;)E[w]=o[w];for(;m--;)E[w++]=arguments[++h];return He(T,u?r:this,E)}return d}function ic(e){return function(t,r,o){return o&&typeof o!="number"&&Fe(t,r,o)&&(r=o=n),t=Mt(t),r===n?(r=t,t=0):r=Mt(r),o=o===n?t<r?1:-1:Mt(o),Yh(t,r,o,e)}}function ki(e){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=st(t),r=st(r)),e(t,r)}}function oc(e,t,r,o,u,f,d,h,m,w){var b=t&P,E=b?d:n,T=b?n:d,W=b?f:n,q=b?n:f;t|=b?L:Y,t&=~(b?Y:L),t&O||(t&=~(B|U));var V=[e,t,u,W,E,q,T,h,m,w],K=r.apply(n,V);return Ss(e)&&vc(K,V),K.placeholder=o,yc(K,e,t)}function hs(e){var t=ye[e];return function(r,o){if(r=st(r),o=o==null?0:ke(J(o),292),o&&yu(r)){var u=(ie(r)+"e").split("e"),f=t(u[0]+"e"+(+u[1]+o));return u=(ie(f)+"e").split("e"),+(u[0]+"e"+(+u[1]-o))}return t(r)}}var fg=Gn&&1/oi(new Gn([,-0]))[1]==ln?function(e){return new Gn(e)}:Ds;function sc(e){return function(t){var r=Te(t);return r==ct?Ko(t):r==ft?Np(t):_p(t,e(t))}}function Pt(e,t,r,o,u,f,d,h){var m=t&U;if(!m&&typeof e!="function")throw new tt(l);var w=o?o.length:0;if(w||(t&=~(L|Y),o=u=n),d=d===n?d:_e(J(d),0),h=h===n?h:J(h),w-=u?u.length:0,t&Y){var b=o,E=u;o=u=n}var T=m?n:vs(e),W=[e,t,r,o,u,b,E,f,d,h];if(T&&xg(W,T),e=W[0],t=W[1],r=W[2],o=W[3],u=W[4],h=W[9]=W[9]===n?m?0:e.length:_e(W[9]-w,0),!h&&t&(P|G)&&(t&=~(P|G)),!t||t==B)var q=ag(e,t,r);else t==P||t==G?q=ug(e,t,h):(t==L||t==(B|L))&&!u.length?q=cg(e,t,r,o):q=Ni.apply(n,W);var V=T?Uu:vc;return yc(V(q,W),e,t)}function ac(e,t,r,o){return e===n||pt(e,Un[r])&&!oe.call(o,r)?t:e}function uc(e,t,r,o,u,f){return pe(e)&&pe(t)&&(f.set(t,e),bi(e,t,n,uc,f),f.delete(t)),e}function lg(e){return kr(e)?n:e}function cc(e,t,r,o,u,f){var d=r&I,h=e.length,m=t.length;if(h!=m&&!(d&&m>h))return!1;var w=f.get(e),b=f.get(t);if(w&&b)return w==t&&b==e;var E=-1,T=!0,W=r&F?new gn:n;for(f.set(e,t),f.set(t,e);++E<h;){var q=e[E],V=t[E];if(o)var K=d?o(V,q,E,t,e,f):o(q,V,E,e,t,f);if(K!==n){if(K)continue;T=!1;break}if(W){if(!Wo(t,function(X,te){if(!mr(W,te)&&(q===X||u(q,X,r,o,f)))return W.push(te)})){T=!1;break}}else if(!(q===V||u(q,V,r,o,f))){T=!1;break}}return f.delete(e),f.delete(t),T}function dg(e,t,r,o,u,f,d){switch(r){case Rn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case gr:return!(e.byteLength!=t.byteLength||!f(new li(e),new li(t)));case cr:case fr:case lr:return pt(+e,+t);case Zr:return e.name==t.name&&e.message==t.message;case dr:case pr:return e==t+"";case ct:var h=Ko;case ft:var m=o&I;if(h||(h=oi),e.size!=t.size&&!m)return!1;var w=d.get(e);if(w)return w==t;o|=F,d.set(e,t);var b=cc(h(e),h(t),o,u,f,d);return d.delete(e),b;case Qr:if(Sr)return Sr.call(e)==Sr.call(t)}return!1}function pg(e,t,r,o,u,f){var d=r&I,h=gs(e),m=h.length,w=gs(t),b=w.length;if(m!=b&&!d)return!1;for(var E=m;E--;){var T=h[E];if(!(d?T in t:oe.call(t,T)))return!1}var W=f.get(e),q=f.get(t);if(W&&q)return W==t&&q==e;var V=!0;f.set(e,t),f.set(t,e);for(var K=d;++E<m;){T=h[E];var X=e[T],te=t[T];if(o)var je=d?o(te,X,T,t,e,f):o(X,te,T,e,t,f);if(!(je===n?X===te||u(X,te,r,o,f):je)){V=!1;break}K||(K=T=="constructor")}if(V&&!K){var Re=e.constructor,ze=t.constructor;Re!=ze&&"constructor"in e&&"constructor"in t&&!(typeof Re=="function"&&Re instanceof Re&&typeof ze=="function"&&ze instanceof ze)&&(V=!1)}return f.delete(e),f.delete(t),V}function kt(e){return bs(gc(e,n,Cc),e+"")}function gs(e){return Pu(e,be,_s)}function ms(e){return Pu(e,Be,fc)}var vs=vi?function(e){return vi.get(e)}:Ds;function Ti(e){for(var t=e.name+"",r=Hn[t],o=oe.call(Hn,t)?r.length:0;o--;){var u=r[o],f=u.func;if(f==null||f==e)return u.name}return t}function jn(e){var t=oe.call(c,"placeholder")?c:e;return t.placeholder}function H(){var e=c.iteratee||Fs;return e=e===Fs?Iu:e,arguments.length?e(arguments[0],arguments[1]):e}function Ii(e,t){var r=e.__data__;return Sg(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ys(e){for(var t=be(e),r=t.length;r--;){var o=t[r],u=e[o];t[r]=[o,u,pc(u)]}return t}function yn(e,t){var r=Cp(e,t);return Tu(r)?r:n}function hg(e){var t=oe.call(e,pn),r=e[pn];try{e[pn]=n;var o=!0}catch{}var u=ci.call(e);return o&&(t?e[pn]=r:delete e[pn]),u}var _s=jo?function(e){return e==null?[]:(e=se(e),$t(jo(e),function(t){return mu.call(e,t)}))}:Ls,fc=jo?function(e){for(var t=[];e;)jt(t,_s(e)),e=di(e);return t}:Ls,Te=Me;(zo&&Te(new zo(new ArrayBuffer(1)))!=Rn||yr&&Te(new yr)!=ct||Yo&&Te(Yo.resolve())!=Ea||Gn&&Te(new Gn)!=ft||_r&&Te(new _r)!=hr)&&(Te=function(e){var t=Me(e),r=t==xt?e.constructor:n,o=r?_n(r):"";if(o)switch(o){case Vp:return Rn;case Zp:return ct;case Xp:return Ea;case Qp:return ft;case eh:return hr}return t});function gg(e,t,r){for(var o=-1,u=r.length;++o<u;){var f=r[o],d=f.size;switch(f.type){case"drop":e+=d;break;case"dropRight":t-=d;break;case"take":t=ke(t,e+d);break;case"takeRight":e=_e(e,t-d);break}}return{start:e,end:t}}function mg(e){var t=e.match(wd);return t?t[1].split(bd):[]}function lc(e,t,r){t=Xt(t,e);for(var o=-1,u=t.length,f=!1;++o<u;){var d=_t(t[o]);if(!(f=e!=null&&r(e,d)))break;e=e[d]}return f||++o!=u?f:(u=e==null?0:e.length,!!u&&Bi(u)&&Tt(d,u)&&(z(e)||An(e)))}function vg(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&oe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function dc(e){return typeof e.constructor=="function"&&!Or(e)?qn(di(e)):{}}function yg(e,t,r){var o=e.constructor;switch(t){case gr:return ds(e);case cr:case fr:return new o(+e);case Rn:return tg(e,r);case yo:case _o:case Ao:case So:case wo:case bo:case Co:case xo:case Eo:return Yu(e,r);case ct:return new o;case lr:case pr:return new o(e);case dr:return ng(e);case ft:return new o;case Qr:return rg(e)}}function _g(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(Sd,`{
/* [wrapped with `+t+`] */
`)}function Ag(e){return z(e)||An(e)||!!(vu&&e&&e[vu])}function Tt(e,t){var r=typeof e;return t=t??Kt,!!t&&(r=="number"||r!="symbol"&&Id.test(e))&&e>-1&&e%1==0&&e<t}function Fe(e,t,r){if(!pe(r))return!1;var o=typeof t;return(o=="number"?We(r)&&Tt(t,r.length):o=="string"&&t in r)?pt(r[t],e):!1}function As(e,t){if(z(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||$e(e)?!0:vd.test(e)||!md.test(e)||t!=null&&e in se(t)}function Sg(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ss(e){var t=Ti(e),r=c[t];if(typeof r!="function"||!(t in Q.prototype))return!1;if(e===r)return!0;var o=vs(r);return!!o&&e===o[0]}function wg(e){return!!pu&&pu in e}var bg=ai?It:Ws;function Or(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Un;return e===r}function pc(e){return e===e&&!pe(e)}function hc(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==n||e in se(r))}}function Cg(e){var t=Li(e,function(o){return r.size===y&&r.clear(),o}),r=t.cache;return t}function xg(e,t){var r=e[1],o=t[1],u=r|o,f=u<(B|U|$),d=o==$&&r==P||o==$&&r==ve&&e[7].length<=t[8]||o==($|ve)&&t[7].length<=t[8]&&r==P;if(!(f||d))return e;o&B&&(e[2]=t[2],u|=r&B?0:O);var h=t[3];if(h){var m=e[3];e[3]=m?Vu(m,h,t[4]):h,e[4]=m?zt(e[3],S):t[4]}return h=t[5],h&&(m=e[5],e[5]=m?Zu(m,h,t[6]):h,e[6]=m?zt(e[5],S):t[6]),h=t[7],h&&(e[7]=h),o&$&&(e[8]=e[8]==null?t[8]:ke(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=u,e}function Eg(e){var t=[];if(e!=null)for(var r in se(e))t.push(r);return t}function Ng(e){return ci.call(e)}function gc(e,t,r){return t=_e(t===n?e.length-1:t,0),function(){for(var o=arguments,u=-1,f=_e(o.length-t,0),d=_(f);++u<f;)d[u]=o[t+u];u=-1;for(var h=_(t+1);++u<t;)h[u]=o[u];return h[t]=r(d),He(e,this,h)}}function mc(e,t){return t.length<2?e:vn(e,it(t,0,-1))}function Og(e,t){for(var r=e.length,o=ke(t.length,r),u=Le(e);o--;){var f=t[o];e[o]=Tt(f,r)?u[f]:n}return e}function ws(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var vc=_c(Uu),Pr=qp||function(e,t){return we.setTimeout(e,t)},bs=_c(Zh);function yc(e,t,r){var o=t+"";return bs(e,_g(o,Pg(mg(o),r)))}function _c(e){var t=0,r=0;return function(){var o=zp(),u=vo-(o-r);if(r=o,u>0){if(++t>=mo)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Mi(e,t){var r=-1,o=e.length,u=o-1;for(t=t===n?o:t;++r<t;){var f=os(r,u),d=e[f];e[f]=e[r],e[r]=d}return e.length=t,e}var Ac=Cg(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(yd,function(r,o,u,f){t.push(u?f.replace(Ed,"$1"):o||r)}),t});function _t(e){if(typeof e=="string"||$e(e))return e;var t=e+"";return t=="0"&&1/e==-ln?"-0":t}function _n(e){if(e!=null){try{return ui.call(e)}catch{}try{return e+""}catch{}}return""}function Pg(e,t){return et(nd,function(r){var o="_."+r[0];t&r[1]&&!ri(e,o)&&e.push(o)}),e.sort()}function Sc(e){if(e instanceof Q)return e.clone();var t=new nt(e.__wrapped__,e.__chain__);return t.__actions__=Le(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function kg(e,t,r){(r?Fe(e,t,r):t===n)?t=1:t=_e(J(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var u=0,f=0,d=_(gi(o/t));u<o;)d[f++]=it(e,u,u+=t);return d}function Tg(e){for(var t=-1,r=e==null?0:e.length,o=0,u=[];++t<r;){var f=e[t];f&&(u[o++]=f)}return u}function Ig(){var e=arguments.length;if(!e)return[];for(var t=_(e-1),r=arguments[0],o=e;o--;)t[o-1]=arguments[o];return jt(z(r)?Le(r):[r],Ne(t,1))}var Mg=Z(function(e,t){return ge(e)?br(e,Ne(t,1,ge,!0)):[]}),Fg=Z(function(e,t){var r=ot(t);return ge(r)&&(r=n),ge(e)?br(e,Ne(t,1,ge,!0),H(r,2)):[]}),Rg=Z(function(e,t){var r=ot(t);return ge(r)&&(r=n),ge(e)?br(e,Ne(t,1,ge,!0),n,r):[]});function Dg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),it(e,t<0?0:t,o)):[]}function Lg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),t=o-t,it(e,0,t<0?0:t)):[]}function Wg(e,t){return e&&e.length?xi(e,H(t,3),!0,!0):[]}function Bg(e,t){return e&&e.length?xi(e,H(t,3),!0):[]}function Ug(e,t,r,o){var u=e==null?0:e.length;return u?(r&&typeof r!="number"&&Fe(e,t,r)&&(r=0,o=u),Ih(e,t,r,o)):[]}function wc(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var u=r==null?0:J(r);return u<0&&(u=_e(o+u,0)),ii(e,H(t,3),u)}function bc(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var u=o-1;return r!==n&&(u=J(r),u=r<0?_e(o+u,0):ke(u,o-1)),ii(e,H(t,3),u,!0)}function Cc(e){var t=e==null?0:e.length;return t?Ne(e,1):[]}function Gg(e){var t=e==null?0:e.length;return t?Ne(e,ln):[]}function Hg(e,t){var r=e==null?0:e.length;return r?(t=t===n?1:J(t),Ne(e,t)):[]}function qg(e){for(var t=-1,r=e==null?0:e.length,o={};++t<r;){var u=e[t];o[u[0]]=u[1]}return o}function xc(e){return e&&e.length?e[0]:n}function Kg(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var u=r==null?0:J(r);return u<0&&(u=_e(o+u,0)),Ln(e,t,u)}function $g(e){var t=e==null?0:e.length;return t?it(e,0,-1):[]}var jg=Z(function(e){var t=le(e,fs);return t.length&&t[0]===e[0]?es(t):[]}),zg=Z(function(e){var t=ot(e),r=le(e,fs);return t===ot(r)?t=n:r.pop(),r.length&&r[0]===e[0]?es(r,H(t,2)):[]}),Yg=Z(function(e){var t=ot(e),r=le(e,fs);return t=typeof t=="function"?t:n,t&&r.pop(),r.length&&r[0]===e[0]?es(r,n,t):[]});function Jg(e,t){return e==null?"":$p.call(e,t)}function ot(e){var t=e==null?0:e.length;return t?e[t-1]:n}function Vg(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var u=o;return r!==n&&(u=J(r),u=u<0?_e(o+u,0):ke(u,o-1)),t===t?Pp(e,t,u):ii(e,ou,u,!0)}function Zg(e,t){return e&&e.length?Du(e,J(t)):n}var Xg=Z(Ec);function Ec(e,t){return e&&e.length&&t&&t.length?is(e,t):e}function Qg(e,t,r){return e&&e.length&&t&&t.length?is(e,t,H(r,2)):e}function em(e,t,r){return e&&e.length&&t&&t.length?is(e,t,n,r):e}var tm=kt(function(e,t){var r=e==null?0:e.length,o=Vo(e,t);return Bu(e,le(t,function(u){return Tt(u,r)?+u:u}).sort(Ju)),o});function nm(e,t){var r=[];if(!(e&&e.length))return r;var o=-1,u=[],f=e.length;for(t=H(t,3);++o<f;){var d=e[o];t(d,o,e)&&(r.push(d),u.push(o))}return Bu(e,u),r}function Cs(e){return e==null?e:Jp.call(e)}function rm(e,t,r){var o=e==null?0:e.length;return o?(r&&typeof r!="number"&&Fe(e,t,r)?(t=0,r=o):(t=t==null?0:J(t),r=r===n?o:J(r)),it(e,t,r)):[]}function im(e,t){return Ci(e,t)}function om(e,t,r){return as(e,t,H(r,2))}function sm(e,t){var r=e==null?0:e.length;if(r){var o=Ci(e,t);if(o<r&&pt(e[o],t))return o}return-1}function am(e,t){return Ci(e,t,!0)}function um(e,t,r){return as(e,t,H(r,2),!0)}function cm(e,t){var r=e==null?0:e.length;if(r){var o=Ci(e,t,!0)-1;if(pt(e[o],t))return o}return-1}function fm(e){return e&&e.length?Gu(e):[]}function lm(e,t){return e&&e.length?Gu(e,H(t,2)):[]}function dm(e){var t=e==null?0:e.length;return t?it(e,1,t):[]}function pm(e,t,r){return e&&e.length?(t=r||t===n?1:J(t),it(e,0,t<0?0:t)):[]}function hm(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),t=o-t,it(e,t<0?0:t,o)):[]}function gm(e,t){return e&&e.length?xi(e,H(t,3),!1,!0):[]}function mm(e,t){return e&&e.length?xi(e,H(t,3)):[]}var vm=Z(function(e){return Zt(Ne(e,1,ge,!0))}),ym=Z(function(e){var t=ot(e);return ge(t)&&(t=n),Zt(Ne(e,1,ge,!0),H(t,2))}),_m=Z(function(e){var t=ot(e);return t=typeof t=="function"?t:n,Zt(Ne(e,1,ge,!0),n,t)});function Am(e){return e&&e.length?Zt(e):[]}function Sm(e,t){return e&&e.length?Zt(e,H(t,2)):[]}function wm(e,t){return t=typeof t=="function"?t:n,e&&e.length?Zt(e,n,t):[]}function xs(e){if(!(e&&e.length))return[];var t=0;return e=$t(e,function(r){if(ge(r))return t=_e(r.length,t),!0}),Ho(t,function(r){return le(e,Bo(r))})}function Nc(e,t){if(!(e&&e.length))return[];var r=xs(e);return t==null?r:le(r,function(o){return He(t,n,o)})}var bm=Z(function(e,t){return ge(e)?br(e,t):[]}),Cm=Z(function(e){return cs($t(e,ge))}),xm=Z(function(e){var t=ot(e);return ge(t)&&(t=n),cs($t(e,ge),H(t,2))}),Em=Z(function(e){var t=ot(e);return t=typeof t=="function"?t:n,cs($t(e,ge),n,t)}),Nm=Z(xs);function Om(e,t){return $u(e||[],t||[],wr)}function Pm(e,t){return $u(e||[],t||[],Er)}var km=Z(function(e){var t=e.length,r=t>1?e[t-1]:n;return r=typeof r=="function"?(e.pop(),r):n,Nc(e,r)});function Oc(e){var t=c(e);return t.__chain__=!0,t}function Tm(e,t){return t(e),e}function Fi(e,t){return t(e)}var Im=kt(function(e){var t=e.length,r=t?e[0]:0,o=this.__wrapped__,u=function(f){return Vo(f,e)};return t>1||this.__actions__.length||!(o instanceof Q)||!Tt(r)?this.thru(u):(o=o.slice(r,+r+(t?1:0)),o.__actions__.push({func:Fi,args:[u],thisArg:n}),new nt(o,this.__chain__).thru(function(f){return t&&!f.length&&f.push(n),f}))});function Mm(){return Oc(this)}function Fm(){return new nt(this.value(),this.__chain__)}function Rm(){this.__values__===n&&(this.__values__=Hc(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function Dm(){return this}function Lm(e){for(var t,r=this;r instanceof _i;){var o=Sc(r);o.__index__=0,o.__values__=n,t?u.__wrapped__=o:t=o;var u=o;r=r.__wrapped__}return u.__wrapped__=e,t}function Wm(){var e=this.__wrapped__;if(e instanceof Q){var t=e;return this.__actions__.length&&(t=new Q(this)),t=t.reverse(),t.__actions__.push({func:Fi,args:[Cs],thisArg:n}),new nt(t,this.__chain__)}return this.thru(Cs)}function Bm(){return Ku(this.__wrapped__,this.__actions__)}var Um=Ei(function(e,t,r){oe.call(e,r)?++e[r]:Ot(e,r,1)});function Gm(e,t,r){var o=z(e)?ru:Th;return r&&Fe(e,t,r)&&(t=n),o(e,H(t,3))}function Hm(e,t){var r=z(e)?$t:Nu;return r(e,H(t,3))}var qm=tc(wc),Km=tc(bc);function $m(e,t){return Ne(Ri(e,t),1)}function jm(e,t){return Ne(Ri(e,t),ln)}function zm(e,t,r){return r=r===n?1:J(r),Ne(Ri(e,t),r)}function Pc(e,t){var r=z(e)?et:Vt;return r(e,H(t,3))}function kc(e,t){var r=z(e)?dp:Eu;return r(e,H(t,3))}var Ym=Ei(function(e,t,r){oe.call(e,r)?e[r].push(t):Ot(e,r,[t])});function Jm(e,t,r,o){e=We(e)?e:Yn(e),r=r&&!o?J(r):0;var u=e.length;return r<0&&(r=_e(u+r,0)),Ui(e)?r<=u&&e.indexOf(t,r)>-1:!!u&&Ln(e,t,r)>-1}var Vm=Z(function(e,t,r){var o=-1,u=typeof t=="function",f=We(e)?_(e.length):[];return Vt(e,function(d){f[++o]=u?He(t,d,r):Cr(d,t,r)}),f}),Zm=Ei(function(e,t,r){Ot(e,r,t)});function Ri(e,t){var r=z(e)?le:Mu;return r(e,H(t,3))}function Xm(e,t,r,o){return e==null?[]:(z(t)||(t=t==null?[]:[t]),r=o?n:r,z(r)||(r=r==null?[]:[r]),Lu(e,t,r))}var Qm=Ei(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});function ev(e,t,r){var o=z(e)?Lo:au,u=arguments.length<3;return o(e,H(t,4),r,u,Vt)}function tv(e,t,r){var o=z(e)?pp:au,u=arguments.length<3;return o(e,H(t,4),r,u,Eu)}function nv(e,t){var r=z(e)?$t:Nu;return r(e,Wi(H(t,3)))}function rv(e){var t=z(e)?wu:Jh;return t(e)}function iv(e,t,r){(r?Fe(e,t,r):t===n)?t=1:t=J(t);var o=z(e)?Eh:Vh;return o(e,t)}function ov(e){var t=z(e)?Nh:Xh;return t(e)}function sv(e){if(e==null)return 0;if(We(e))return Ui(e)?Bn(e):e.length;var t=Te(e);return t==ct||t==ft?e.size:ns(e).length}function av(e,t,r){var o=z(e)?Wo:Qh;return r&&Fe(e,t,r)&&(t=n),o(e,H(t,3))}var uv=Z(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Fe(e,t[0],t[1])?t=[]:r>2&&Fe(t[0],t[1],t[2])&&(t=[t[0]]),Lu(e,Ne(t,1),[])}),Di=Hp||function(){return we.Date.now()};function cv(e,t){if(typeof t!="function")throw new tt(l);return e=J(e),function(){if(--e<1)return t.apply(this,arguments)}}function Tc(e,t,r){return t=r?n:t,t=e&&t==null?e.length:t,Pt(e,$,n,n,n,n,t)}function Ic(e,t){var r;if(typeof t!="function")throw new tt(l);return e=J(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var Es=Z(function(e,t,r){var o=B;if(r.length){var u=zt(r,jn(Es));o|=L}return Pt(e,o,t,r,u)}),Mc=Z(function(e,t,r){var o=B|U;if(r.length){var u=zt(r,jn(Mc));o|=L}return Pt(t,o,e,r,u)});function Fc(e,t,r){t=r?n:t;var o=Pt(e,P,n,n,n,n,n,t);return o.placeholder=Fc.placeholder,o}function Rc(e,t,r){t=r?n:t;var o=Pt(e,G,n,n,n,n,n,t);return o.placeholder=Rc.placeholder,o}function Dc(e,t,r){var o,u,f,d,h,m,w=0,b=!1,E=!1,T=!0;if(typeof e!="function")throw new tt(l);t=st(t)||0,pe(r)&&(b=!!r.leading,E="maxWait"in r,f=E?_e(st(r.maxWait)||0,t):f,T="trailing"in r?!!r.trailing:T);function W(me){var ht=o,Ft=u;return o=u=n,w=me,d=e.apply(Ft,ht),d}function q(me){return w=me,h=Pr(X,t),b?W(me):d}function V(me){var ht=me-m,Ft=me-w,tf=t-ht;return E?ke(tf,f-Ft):tf}function K(me){var ht=me-m,Ft=me-w;return m===n||ht>=t||ht<0||E&&Ft>=f}function X(){var me=Di();if(K(me))return te(me);h=Pr(X,V(me))}function te(me){return h=n,T&&o?W(me):(o=u=n,d)}function je(){h!==n&&ju(h),w=0,o=m=u=h=n}function Re(){return h===n?d:te(Di())}function ze(){var me=Di(),ht=K(me);if(o=arguments,u=this,m=me,ht){if(h===n)return q(m);if(E)return ju(h),h=Pr(X,t),W(m)}return h===n&&(h=Pr(X,t)),d}return ze.cancel=je,ze.flush=Re,ze}var fv=Z(function(e,t){return xu(e,1,t)}),lv=Z(function(e,t,r){return xu(e,st(t)||0,r)});function dv(e){return Pt(e,ee)}function Li(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new tt(l);var r=function(){var o=arguments,u=t?t.apply(this,o):o[0],f=r.cache;if(f.has(u))return f.get(u);var d=e.apply(this,o);return r.cache=f.set(u,d)||f,d};return r.cache=new(Li.Cache||Nt),r}Li.Cache=Nt;function Wi(e){if(typeof e!="function")throw new tt(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function pv(e){return Ic(2,e)}var hv=eg(function(e,t){t=t.length==1&&z(t[0])?le(t[0],qe(H())):le(Ne(t,1),qe(H()));var r=t.length;return Z(function(o){for(var u=-1,f=ke(o.length,r);++u<f;)o[u]=t[u].call(this,o[u]);return He(e,this,o)})}),Ns=Z(function(e,t){var r=zt(t,jn(Ns));return Pt(e,L,n,t,r)}),Lc=Z(function(e,t){var r=zt(t,jn(Lc));return Pt(e,Y,n,t,r)}),gv=kt(function(e,t){return Pt(e,ve,n,n,n,t)});function mv(e,t){if(typeof e!="function")throw new tt(l);return t=t===n?t:J(t),Z(e,t)}function vv(e,t){if(typeof e!="function")throw new tt(l);return t=t==null?0:_e(J(t),0),Z(function(r){var o=r[t],u=Qt(r,0,t);return o&&jt(u,o),He(e,this,u)})}function yv(e,t,r){var o=!0,u=!0;if(typeof e!="function")throw new tt(l);return pe(r)&&(o="leading"in r?!!r.leading:o,u="trailing"in r?!!r.trailing:u),Dc(e,t,{leading:o,maxWait:t,trailing:u})}function _v(e){return Tc(e,1)}function Av(e,t){return Ns(ls(t),e)}function Sv(){if(!arguments.length)return[];var e=arguments[0];return z(e)?e:[e]}function wv(e){return rt(e,k)}function bv(e,t){return t=typeof t=="function"?t:n,rt(e,k,t)}function Cv(e){return rt(e,C|k)}function xv(e,t){return t=typeof t=="function"?t:n,rt(e,C|k,t)}function Ev(e,t){return t==null||Cu(e,t,be(t))}function pt(e,t){return e===t||e!==e&&t!==t}var Nv=ki(Qo),Ov=ki(function(e,t){return e>=t}),An=ku(function(){return arguments}())?ku:function(e){return he(e)&&oe.call(e,"callee")&&!mu.call(e,"callee")},z=_.isArray,Pv=Za?qe(Za):Lh;function We(e){return e!=null&&Bi(e.length)&&!It(e)}function ge(e){return he(e)&&We(e)}function kv(e){return e===!0||e===!1||he(e)&&Me(e)==cr}var en=Kp||Ws,Tv=Xa?qe(Xa):Wh;function Iv(e){return he(e)&&e.nodeType===1&&!kr(e)}function Mv(e){if(e==null)return!0;if(We(e)&&(z(e)||typeof e=="string"||typeof e.splice=="function"||en(e)||zn(e)||An(e)))return!e.length;var t=Te(e);if(t==ct||t==ft)return!e.size;if(Or(e))return!ns(e).length;for(var r in e)if(oe.call(e,r))return!1;return!0}function Fv(e,t){return xr(e,t)}function Rv(e,t,r){r=typeof r=="function"?r:n;var o=r?r(e,t):n;return o===n?xr(e,t,n,r):!!o}function Os(e){if(!he(e))return!1;var t=Me(e);return t==Zr||t==id||typeof e.message=="string"&&typeof e.name=="string"&&!kr(e)}function Dv(e){return typeof e=="number"&&yu(e)}function It(e){if(!pe(e))return!1;var t=Me(e);return t==Xr||t==xa||t==rd||t==sd}function Wc(e){return typeof e=="number"&&e==J(e)}function Bi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Kt}function pe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function he(e){return e!=null&&typeof e=="object"}var Bc=Qa?qe(Qa):Uh;function Lv(e,t){return e===t||ts(e,t,ys(t))}function Wv(e,t,r){return r=typeof r=="function"?r:n,ts(e,t,ys(t),r)}function Bv(e){return Uc(e)&&e!=+e}function Uv(e){if(bg(e))throw new j(a);return Tu(e)}function Gv(e){return e===null}function Hv(e){return e==null}function Uc(e){return typeof e=="number"||he(e)&&Me(e)==lr}function kr(e){if(!he(e)||Me(e)!=xt)return!1;var t=di(e);if(t===null)return!0;var r=oe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ui.call(r)==Wp}var Ps=eu?qe(eu):Gh;function qv(e){return Wc(e)&&e>=-Kt&&e<=Kt}var Gc=tu?qe(tu):Hh;function Ui(e){return typeof e=="string"||!z(e)&&he(e)&&Me(e)==pr}function $e(e){return typeof e=="symbol"||he(e)&&Me(e)==Qr}var zn=nu?qe(nu):qh;function Kv(e){return e===n}function $v(e){return he(e)&&Te(e)==hr}function jv(e){return he(e)&&Me(e)==ud}var zv=ki(rs),Yv=ki(function(e,t){return e<=t});function Hc(e){if(!e)return[];if(We(e))return Ui(e)?lt(e):Le(e);if(vr&&e[vr])return Ep(e[vr]());var t=Te(e),r=t==ct?Ko:t==ft?oi:Yn;return r(e)}function Mt(e){if(!e)return e===0?e:0;if(e=st(e),e===ln||e===-ln){var t=e<0?-1:1;return t*Ql}return e===e?e:0}function J(e){var t=Mt(e),r=t%1;return t===t?r?t-r:t:0}function qc(e){return e?mn(J(e),0,mt):0}function st(e){if(typeof e=="number")return e;if($e(e))return Jr;if(pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=uu(e);var r=Pd.test(e);return r||Td.test(e)?cp(e.slice(2),r?2:8):Od.test(e)?Jr:+e}function Kc(e){return yt(e,Be(e))}function Jv(e){return e?mn(J(e),-Kt,Kt):e===0?e:0}function ie(e){return e==null?"":Ke(e)}var Vv=Kn(function(e,t){if(Or(t)||We(t)){yt(t,be(t),e);return}for(var r in t)oe.call(t,r)&&wr(e,r,t[r])}),$c=Kn(function(e,t){yt(t,Be(t),e)}),Gi=Kn(function(e,t,r,o){yt(t,Be(t),e,o)}),Zv=Kn(function(e,t,r,o){yt(t,be(t),e,o)}),Xv=kt(Vo);function Qv(e,t){var r=qn(e);return t==null?r:bu(r,t)}var ey=Z(function(e,t){e=se(e);var r=-1,o=t.length,u=o>2?t[2]:n;for(u&&Fe(t[0],t[1],u)&&(o=1);++r<o;)for(var f=t[r],d=Be(f),h=-1,m=d.length;++h<m;){var w=d[h],b=e[w];(b===n||pt(b,Un[w])&&!oe.call(e,w))&&(e[w]=f[w])}return e}),ty=Z(function(e){return e.push(n,uc),He(jc,n,e)});function ny(e,t){return iu(e,H(t,3),vt)}function ry(e,t){return iu(e,H(t,3),Xo)}function iy(e,t){return e==null?e:Zo(e,H(t,3),Be)}function oy(e,t){return e==null?e:Ou(e,H(t,3),Be)}function sy(e,t){return e&&vt(e,H(t,3))}function ay(e,t){return e&&Xo(e,H(t,3))}function uy(e){return e==null?[]:wi(e,be(e))}function cy(e){return e==null?[]:wi(e,Be(e))}function ks(e,t,r){var o=e==null?n:vn(e,t);return o===n?r:o}function fy(e,t){return e!=null&&lc(e,t,Mh)}function Ts(e,t){return e!=null&&lc(e,t,Fh)}var ly=rc(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=ci.call(t)),e[t]=r},Ms(Ue)),dy=rc(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=ci.call(t)),oe.call(e,t)?e[t].push(r):e[t]=[r]},H),py=Z(Cr);function be(e){return We(e)?Su(e):ns(e)}function Be(e){return We(e)?Su(e,!0):Kh(e)}function hy(e,t){var r={};return t=H(t,3),vt(e,function(o,u,f){Ot(r,t(o,u,f),o)}),r}function gy(e,t){var r={};return t=H(t,3),vt(e,function(o,u,f){Ot(r,u,t(o,u,f))}),r}var my=Kn(function(e,t,r){bi(e,t,r)}),jc=Kn(function(e,t,r,o){bi(e,t,r,o)}),vy=kt(function(e,t){var r={};if(e==null)return r;var o=!1;t=le(t,function(f){return f=Xt(f,e),o||(o=f.length>1),f}),yt(e,ms(e),r),o&&(r=rt(r,C|x|k,lg));for(var u=t.length;u--;)us(r,t[u]);return r});function yy(e,t){return zc(e,Wi(H(t)))}var _y=kt(function(e,t){return e==null?{}:jh(e,t)});function zc(e,t){if(e==null)return{};var r=le(ms(e),function(o){return[o]});return t=H(t),Wu(e,r,function(o,u){return t(o,u[0])})}function Ay(e,t,r){t=Xt(t,e);var o=-1,u=t.length;for(u||(u=1,e=n);++o<u;){var f=e==null?n:e[_t(t[o])];f===n&&(o=u,f=r),e=It(f)?f.call(e):f}return e}function Sy(e,t,r){return e==null?e:Er(e,t,r)}function wy(e,t,r,o){return o=typeof o=="function"?o:n,e==null?e:Er(e,t,r,o)}var Yc=sc(be),Jc=sc(Be);function by(e,t,r){var o=z(e),u=o||en(e)||zn(e);if(t=H(t,4),r==null){var f=e&&e.constructor;u?r=o?new f:[]:pe(e)?r=It(f)?qn(di(e)):{}:r={}}return(u?et:vt)(e,function(d,h,m){return t(r,d,h,m)}),r}function Cy(e,t){return e==null?!0:us(e,t)}function xy(e,t,r){return e==null?e:qu(e,t,ls(r))}function Ey(e,t,r,o){return o=typeof o=="function"?o:n,e==null?e:qu(e,t,ls(r),o)}function Yn(e){return e==null?[]:qo(e,be(e))}function Ny(e){return e==null?[]:qo(e,Be(e))}function Oy(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=st(r),r=r===r?r:0),t!==n&&(t=st(t),t=t===t?t:0),mn(st(e),t,r)}function Py(e,t,r){return t=Mt(t),r===n?(r=t,t=0):r=Mt(r),e=st(e),Rh(e,t,r)}function ky(e,t,r){if(r&&typeof r!="boolean"&&Fe(e,t,r)&&(t=r=n),r===n&&(typeof t=="boolean"?(r=t,t=n):typeof e=="boolean"&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Mt(e),t===n?(t=e,e=0):t=Mt(t)),e>t){var o=e;e=t,t=o}if(r||e%1||t%1){var u=_u();return ke(e+u*(t-e+up("1e-"+((u+"").length-1))),t)}return os(e,t)}var Ty=$n(function(e,t,r){return t=t.toLowerCase(),e+(r?Vc(t):t)});function Vc(e){return Is(ie(e).toLowerCase())}function Zc(e){return e=ie(e),e&&e.replace(Md,Sp).replace(Xd,"")}function Iy(e,t,r){e=ie(e),t=Ke(t);var o=e.length;r=r===n?o:mn(J(r),0,o);var u=r;return r-=t.length,r>=0&&e.slice(r,u)==t}function My(e){return e=ie(e),e&&pd.test(e)?e.replace(Oa,wp):e}function Fy(e){return e=ie(e),e&&_d.test(e)?e.replace(No,"\\$&"):e}var Ry=$n(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),Dy=$n(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Ly=ec("toLowerCase");function Wy(e,t,r){e=ie(e),t=J(t);var o=t?Bn(e):0;if(!t||o>=t)return e;var u=(t-o)/2;return Pi(mi(u),r)+e+Pi(gi(u),r)}function By(e,t,r){e=ie(e),t=J(t);var o=t?Bn(e):0;return t&&o<t?e+Pi(t-o,r):e}function Uy(e,t,r){e=ie(e),t=J(t);var o=t?Bn(e):0;return t&&o<t?Pi(t-o,r)+e:e}function Gy(e,t,r){return r||t==null?t=0:t&&(t=+t),Yp(ie(e).replace(Oo,""),t||0)}function Hy(e,t,r){return(r?Fe(e,t,r):t===n)?t=1:t=J(t),ss(ie(e),t)}function qy(){var e=arguments,t=ie(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Ky=$n(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});function $y(e,t,r){return r&&typeof r!="number"&&Fe(e,t,r)&&(t=r=n),r=r===n?mt:r>>>0,r?(e=ie(e),e&&(typeof t=="string"||t!=null&&!Ps(t))&&(t=Ke(t),!t&&Wn(e))?Qt(lt(e),0,r):e.split(t,r)):[]}var jy=$n(function(e,t,r){return e+(r?" ":"")+Is(t)});function zy(e,t,r){return e=ie(e),r=r==null?0:mn(J(r),0,e.length),t=Ke(t),e.slice(r,r+t.length)==t}function Yy(e,t,r){var o=c.templateSettings;r&&Fe(e,t,r)&&(t=n),e=ie(e),t=Gi({},t,o,ac);var u=Gi({},t.imports,o.imports,ac),f=be(u),d=qo(u,f),h,m,w=0,b=t.interpolate||ei,E="__p += '",T=$o((t.escape||ei).source+"|"+b.source+"|"+(b===Pa?Nd:ei).source+"|"+(t.evaluate||ei).source+"|$","g"),W="//# sourceURL="+(oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rp+"]")+`
`;e.replace(T,function(K,X,te,je,Re,ze){return te||(te=je),E+=e.slice(w,ze).replace(Fd,bp),X&&(h=!0,E+=`' +
__e(`+X+`) +
'`),Re&&(m=!0,E+=`';
`+Re+`;
__p += '`),te&&(E+=`' +
((__t = (`+te+`)) == null ? '' : __t) +
'`),w=ze+K.length,K}),E+=`';
`;var q=oe.call(t,"variable")&&t.variable;if(!q)E=`with (obj) {
`+E+`
}
`;else if(xd.test(q))throw new j(p);E=(m?E.replace(cd,""):E).replace(fd,"$1").replace(ld,"$1;"),E="function("+(q||"obj")+`) {
`+(q?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(h?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+E+`return __p
}`;var V=Qc(function(){return re(f,W+"return "+E).apply(n,d)});if(V.source=E,Os(V))throw V;return V}function Jy(e){return ie(e).toLowerCase()}function Vy(e){return ie(e).toUpperCase()}function Zy(e,t,r){if(e=ie(e),e&&(r||t===n))return uu(e);if(!e||!(t=Ke(t)))return e;var o=lt(e),u=lt(t),f=cu(o,u),d=fu(o,u)+1;return Qt(o,f,d).join("")}function Xy(e,t,r){if(e=ie(e),e&&(r||t===n))return e.slice(0,du(e)+1);if(!e||!(t=Ke(t)))return e;var o=lt(e),u=fu(o,lt(t))+1;return Qt(o,0,u).join("")}function Qy(e,t,r){if(e=ie(e),e&&(r||t===n))return e.replace(Oo,"");if(!e||!(t=Ke(t)))return e;var o=lt(e),u=cu(o,lt(t));return Qt(o,u).join("")}function e_(e,t){var r=fe,o=Pe;if(pe(t)){var u="separator"in t?t.separator:u;r="length"in t?J(t.length):r,o="omission"in t?Ke(t.omission):o}e=ie(e);var f=e.length;if(Wn(e)){var d=lt(e);f=d.length}if(r>=f)return e;var h=r-Bn(o);if(h<1)return o;var m=d?Qt(d,0,h).join(""):e.slice(0,h);if(u===n)return m+o;if(d&&(h+=m.length-h),Ps(u)){if(e.slice(h).search(u)){var w,b=m;for(u.global||(u=$o(u.source,ie(ka.exec(u))+"g")),u.lastIndex=0;w=u.exec(b);)var E=w.index;m=m.slice(0,E===n?h:E)}}else if(e.indexOf(Ke(u),h)!=h){var T=m.lastIndexOf(u);T>-1&&(m=m.slice(0,T))}return m+o}function t_(e){return e=ie(e),e&&dd.test(e)?e.replace(Na,kp):e}var n_=$n(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Is=ec("toUpperCase");function Xc(e,t,r){return e=ie(e),t=r?n:t,t===n?xp(e)?Mp(e):mp(e):e.match(t)||[]}var Qc=Z(function(e,t){try{return He(e,n,t)}catch(r){return Os(r)?r:new j(r)}}),r_=kt(function(e,t){return et(t,function(r){r=_t(r),Ot(e,r,Es(e[r],e))}),e});function i_(e){var t=e==null?0:e.length,r=H();return e=t?le(e,function(o){if(typeof o[1]!="function")throw new tt(l);return[r(o[0]),o[1]]}):[],Z(function(o){for(var u=-1;++u<t;){var f=e[u];if(He(f[0],this,o))return He(f[1],this,o)}})}function o_(e){return kh(rt(e,C))}function Ms(e){return function(){return e}}function s_(e,t){return e==null||e!==e?t:e}var a_=nc(),u_=nc(!0);function Ue(e){return e}function Fs(e){return Iu(typeof e=="function"?e:rt(e,C))}function c_(e){return Fu(rt(e,C))}function f_(e,t){return Ru(e,rt(t,C))}var l_=Z(function(e,t){return function(r){return Cr(r,e,t)}}),d_=Z(function(e,t){return function(r){return Cr(e,r,t)}});function Rs(e,t,r){var o=be(t),u=wi(t,o);r==null&&!(pe(t)&&(u.length||!o.length))&&(r=t,t=e,e=this,u=wi(t,be(t)));var f=!(pe(r)&&"chain"in r)||!!r.chain,d=It(e);return et(u,function(h){var m=t[h];e[h]=m,d&&(e.prototype[h]=function(){var w=this.__chain__;if(f||w){var b=e(this.__wrapped__),E=b.__actions__=Le(this.__actions__);return E.push({func:m,args:arguments,thisArg:e}),b.__chain__=w,b}return m.apply(e,jt([this.value()],arguments))})}),e}function p_(){return we._===this&&(we._=Bp),this}function Ds(){}function h_(e){return e=J(e),Z(function(t){return Du(t,e)})}var g_=ps(le),m_=ps(ru),v_=ps(Wo);function ef(e){return As(e)?Bo(_t(e)):zh(e)}function y_(e){return function(t){return e==null?n:vn(e,t)}}var __=ic(),A_=ic(!0);function Ls(){return[]}function Ws(){return!1}function S_(){return{}}function w_(){return""}function b_(){return!0}function C_(e,t){if(e=J(e),e<1||e>Kt)return[];var r=mt,o=ke(e,mt);t=H(t),e-=mt;for(var u=Ho(o,t);++r<e;)t(r);return u}function x_(e){return z(e)?le(e,_t):$e(e)?[e]:Le(Ac(ie(e)))}function E_(e){var t=++Lp;return ie(e)+t}var N_=Oi(function(e,t){return e+t},0),O_=hs("ceil"),P_=Oi(function(e,t){return e/t},1),k_=hs("floor");function T_(e){return e&&e.length?Si(e,Ue,Qo):n}function I_(e,t){return e&&e.length?Si(e,H(t,2),Qo):n}function M_(e){return su(e,Ue)}function F_(e,t){return su(e,H(t,2))}function R_(e){return e&&e.length?Si(e,Ue,rs):n}function D_(e,t){return e&&e.length?Si(e,H(t,2),rs):n}var L_=Oi(function(e,t){return e*t},1),W_=hs("round"),B_=Oi(function(e,t){return e-t},0);function U_(e){return e&&e.length?Go(e,Ue):0}function G_(e,t){return e&&e.length?Go(e,H(t,2)):0}return c.after=cv,c.ary=Tc,c.assign=Vv,c.assignIn=$c,c.assignInWith=Gi,c.assignWith=Zv,c.at=Xv,c.before=Ic,c.bind=Es,c.bindAll=r_,c.bindKey=Mc,c.castArray=Sv,c.chain=Oc,c.chunk=kg,c.compact=Tg,c.concat=Ig,c.cond=i_,c.conforms=o_,c.constant=Ms,c.countBy=Um,c.create=Qv,c.curry=Fc,c.curryRight=Rc,c.debounce=Dc,c.defaults=ey,c.defaultsDeep=ty,c.defer=fv,c.delay=lv,c.difference=Mg,c.differenceBy=Fg,c.differenceWith=Rg,c.drop=Dg,c.dropRight=Lg,c.dropRightWhile=Wg,c.dropWhile=Bg,c.fill=Ug,c.filter=Hm,c.flatMap=$m,c.flatMapDeep=jm,c.flatMapDepth=zm,c.flatten=Cc,c.flattenDeep=Gg,c.flattenDepth=Hg,c.flip=dv,c.flow=a_,c.flowRight=u_,c.fromPairs=qg,c.functions=uy,c.functionsIn=cy,c.groupBy=Ym,c.initial=$g,c.intersection=jg,c.intersectionBy=zg,c.intersectionWith=Yg,c.invert=ly,c.invertBy=dy,c.invokeMap=Vm,c.iteratee=Fs,c.keyBy=Zm,c.keys=be,c.keysIn=Be,c.map=Ri,c.mapKeys=hy,c.mapValues=gy,c.matches=c_,c.matchesProperty=f_,c.memoize=Li,c.merge=my,c.mergeWith=jc,c.method=l_,c.methodOf=d_,c.mixin=Rs,c.negate=Wi,c.nthArg=h_,c.omit=vy,c.omitBy=yy,c.once=pv,c.orderBy=Xm,c.over=g_,c.overArgs=hv,c.overEvery=m_,c.overSome=v_,c.partial=Ns,c.partialRight=Lc,c.partition=Qm,c.pick=_y,c.pickBy=zc,c.property=ef,c.propertyOf=y_,c.pull=Xg,c.pullAll=Ec,c.pullAllBy=Qg,c.pullAllWith=em,c.pullAt=tm,c.range=__,c.rangeRight=A_,c.rearg=gv,c.reject=nv,c.remove=nm,c.rest=mv,c.reverse=Cs,c.sampleSize=iv,c.set=Sy,c.setWith=wy,c.shuffle=ov,c.slice=rm,c.sortBy=uv,c.sortedUniq=fm,c.sortedUniqBy=lm,c.split=$y,c.spread=vv,c.tail=dm,c.take=pm,c.takeRight=hm,c.takeRightWhile=gm,c.takeWhile=mm,c.tap=Tm,c.throttle=yv,c.thru=Fi,c.toArray=Hc,c.toPairs=Yc,c.toPairsIn=Jc,c.toPath=x_,c.toPlainObject=Kc,c.transform=by,c.unary=_v,c.union=vm,c.unionBy=ym,c.unionWith=_m,c.uniq=Am,c.uniqBy=Sm,c.uniqWith=wm,c.unset=Cy,c.unzip=xs,c.unzipWith=Nc,c.update=xy,c.updateWith=Ey,c.values=Yn,c.valuesIn=Ny,c.without=bm,c.words=Xc,c.wrap=Av,c.xor=Cm,c.xorBy=xm,c.xorWith=Em,c.zip=Nm,c.zipObject=Om,c.zipObjectDeep=Pm,c.zipWith=km,c.entries=Yc,c.entriesIn=Jc,c.extend=$c,c.extendWith=Gi,Rs(c,c),c.add=N_,c.attempt=Qc,c.camelCase=Ty,c.capitalize=Vc,c.ceil=O_,c.clamp=Oy,c.clone=wv,c.cloneDeep=Cv,c.cloneDeepWith=xv,c.cloneWith=bv,c.conformsTo=Ev,c.deburr=Zc,c.defaultTo=s_,c.divide=P_,c.endsWith=Iy,c.eq=pt,c.escape=My,c.escapeRegExp=Fy,c.every=Gm,c.find=qm,c.findIndex=wc,c.findKey=ny,c.findLast=Km,c.findLastIndex=bc,c.findLastKey=ry,c.floor=k_,c.forEach=Pc,c.forEachRight=kc,c.forIn=iy,c.forInRight=oy,c.forOwn=sy,c.forOwnRight=ay,c.get=ks,c.gt=Nv,c.gte=Ov,c.has=fy,c.hasIn=Ts,c.head=xc,c.identity=Ue,c.includes=Jm,c.indexOf=Kg,c.inRange=Py,c.invoke=py,c.isArguments=An,c.isArray=z,c.isArrayBuffer=Pv,c.isArrayLike=We,c.isArrayLikeObject=ge,c.isBoolean=kv,c.isBuffer=en,c.isDate=Tv,c.isElement=Iv,c.isEmpty=Mv,c.isEqual=Fv,c.isEqualWith=Rv,c.isError=Os,c.isFinite=Dv,c.isFunction=It,c.isInteger=Wc,c.isLength=Bi,c.isMap=Bc,c.isMatch=Lv,c.isMatchWith=Wv,c.isNaN=Bv,c.isNative=Uv,c.isNil=Hv,c.isNull=Gv,c.isNumber=Uc,c.isObject=pe,c.isObjectLike=he,c.isPlainObject=kr,c.isRegExp=Ps,c.isSafeInteger=qv,c.isSet=Gc,c.isString=Ui,c.isSymbol=$e,c.isTypedArray=zn,c.isUndefined=Kv,c.isWeakMap=$v,c.isWeakSet=jv,c.join=Jg,c.kebabCase=Ry,c.last=ot,c.lastIndexOf=Vg,c.lowerCase=Dy,c.lowerFirst=Ly,c.lt=zv,c.lte=Yv,c.max=T_,c.maxBy=I_,c.mean=M_,c.meanBy=F_,c.min=R_,c.minBy=D_,c.stubArray=Ls,c.stubFalse=Ws,c.stubObject=S_,c.stubString=w_,c.stubTrue=b_,c.multiply=L_,c.nth=Zg,c.noConflict=p_,c.noop=Ds,c.now=Di,c.pad=Wy,c.padEnd=By,c.padStart=Uy,c.parseInt=Gy,c.random=ky,c.reduce=ev,c.reduceRight=tv,c.repeat=Hy,c.replace=qy,c.result=Ay,c.round=W_,c.runInContext=g,c.sample=rv,c.size=sv,c.snakeCase=Ky,c.some=av,c.sortedIndex=im,c.sortedIndexBy=om,c.sortedIndexOf=sm,c.sortedLastIndex=am,c.sortedLastIndexBy=um,c.sortedLastIndexOf=cm,c.startCase=jy,c.startsWith=zy,c.subtract=B_,c.sum=U_,c.sumBy=G_,c.template=Yy,c.times=C_,c.toFinite=Mt,c.toInteger=J,c.toLength=qc,c.toLower=Jy,c.toNumber=st,c.toSafeInteger=Jv,c.toString=ie,c.toUpper=Vy,c.trim=Zy,c.trimEnd=Xy,c.trimStart=Qy,c.truncate=e_,c.unescape=t_,c.uniqueId=E_,c.upperCase=n_,c.upperFirst=Is,c.each=Pc,c.eachRight=kc,c.first=xc,Rs(c,function(){var e={};return vt(c,function(t,r){oe.call(c.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),c.VERSION=i,et(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){c[e].placeholder=c}),et(["drop","take"],function(e,t){Q.prototype[e]=function(r){r=r===n?1:_e(J(r),0);var o=this.__filtered__&&!t?new Q(this):this.clone();return o.__filtered__?o.__takeCount__=ke(r,o.__takeCount__):o.__views__.push({size:ke(r,mt),type:e+(o.__dir__<0?"Right":"")}),o},Q.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),et(["filter","map","takeWhile"],function(e,t){var r=t+1,o=r==Ca||r==Xl;Q.prototype[e]=function(u){var f=this.clone();return f.__iteratees__.push({iteratee:H(u,3),type:r}),f.__filtered__=f.__filtered__||o,f}}),et(["head","last"],function(e,t){var r="take"+(t?"Right":"");Q.prototype[e]=function(){return this[r](1).value()[0]}}),et(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");Q.prototype[e]=function(){return this.__filtered__?new Q(this):this[r](1)}}),Q.prototype.compact=function(){return this.filter(Ue)},Q.prototype.find=function(e){return this.filter(e).head()},Q.prototype.findLast=function(e){return this.reverse().find(e)},Q.prototype.invokeMap=Z(function(e,t){return typeof e=="function"?new Q(this):this.map(function(r){return Cr(r,e,t)})}),Q.prototype.reject=function(e){return this.filter(Wi(H(e)))},Q.prototype.slice=function(e,t){e=J(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Q(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(t=J(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},Q.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Q.prototype.toArray=function(){return this.take(mt)},vt(Q.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),u=c[o?"take"+(t=="last"?"Right":""):t],f=o||/^find/.test(t);u&&(c.prototype[t]=function(){var d=this.__wrapped__,h=o?[1]:arguments,m=d instanceof Q,w=h[0],b=m||z(d),E=function(X){var te=u.apply(c,jt([X],h));return o&&T?te[0]:te};b&&r&&typeof w=="function"&&w.length!=1&&(m=b=!1);var T=this.__chain__,W=!!this.__actions__.length,q=f&&!T,V=m&&!W;if(!f&&b){d=V?d:new Q(this);var K=e.apply(d,h);return K.__actions__.push({func:Fi,args:[E],thisArg:n}),new nt(K,T)}return q&&V?e.apply(this,h):(K=this.thru(E),q?o?K.value()[0]:K.value():K)})}),et(["pop","push","shift","sort","splice","unshift"],function(e){var t=si[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);c.prototype[e]=function(){var u=arguments;if(o&&!this.__chain__){var f=this.value();return t.apply(z(f)?f:[],u)}return this[r](function(d){return t.apply(z(d)?d:[],u)})}}),vt(Q.prototype,function(e,t){var r=c[t];if(r){var o=r.name+"";oe.call(Hn,o)||(Hn[o]=[]),Hn[o].push({name:t,func:r})}}),Hn[Ni(n,U).name]=[{name:"wrapper",func:n}],Q.prototype.clone=th,Q.prototype.reverse=nh,Q.prototype.value=rh,c.prototype.at=Im,c.prototype.chain=Mm,c.prototype.commit=Fm,c.prototype.next=Rm,c.prototype.plant=Lm,c.prototype.reverse=Wm,c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=Bm,c.prototype.first=c.prototype.head,vr&&(c.prototype[vr]=Dm),c},Yt=Fp();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(we._=Yt,define(function(){return Yt})):dn?((dn.exports=Yt)._=Yt,Fo._=Yt):we._=Yt}).call(ar)});var ql=at((ew,Hl)=>{ut();Hl.exports=de("NeosProjectPackages")().NeosUiI18n});ut();var Tr=class{constructor(i){this.SERIAL_VERSION_UID="d8a5aa78-978e-11e6-ae22-56b6b6499611",this.description=i}};var J_=(n,i="position",s="key")=>{let a=typeof i=="string"?P=>P[i]:i,l={},p={},v={},y={},S={},C={};n.forEach((P,G)=>{let L=P[s]?P[s]:String(G);l[L]=G;let Y=a(P),$=String(Y||G),ve=!1;if($.startsWith("start")){let ee=$.match(/start\s+(\d+)/),fe=ee&&ee[1]?Number(ee[1]):0;v[fe]||(v[fe]=[]),v[fe].push(L)}else if($.startsWith("end")){let ee=$.match(/end\s+(\d+)/),fe=ee&&ee[1]?Number(ee[1]):0;y[fe]||(y[fe]=[]),y[fe].push(L)}else if($.startsWith("before")){let ee=$.match(/before\s+(\S+)(\s+(\d+))?/);if(!ee)ve=!0;else{let fe=ee[1],Pe=ee[3]?Number(ee[3]):0;S[fe]||(S[fe]={}),S[fe][Pe]||(S[fe][Pe]=[]),S[fe][Pe].push(L)}}else if($.startsWith("after")){let ee=$.match(/after\s+(\S+)(\s+(\d+))?/);if(!ee)ve=!0;else{let fe=ee[1],Pe=ee[3]?Number(ee[3]):0;C[fe]||(C[fe]={}),C[fe][Pe]||(C[fe][Pe]=[]),C[fe][Pe].push(L)}}else ve=!0;if(ve){let ee=parseFloat($);(isNaN(ee)||!isFinite(ee))&&(ee=G),p[ee]||(p[ee]=[]),p[ee].push(L)}});let x=[],k=[],I=[],F=[],B=(P,G)=>{let L=Object.keys(P).map(Y=>Number(Y)).sort((Y,$)=>Y-$);return G?L:L.reverse()},U=(P,G)=>{P.forEach(L=>{if(!(F.indexOf(L)>=0)){if(F.push(L),S[L]){let Y=B(S[L],!0);for(let $ of Y)U(S[L][$],G)}if(G.push(L),C[L]){let Y=B(C[L],!1);for(let $ of Y)U(C[L][$],G)}}})};for(let P of B(v,!1))U(v[P],x);for(let P of B(p,!0))U(p[P],k);for(let P of B(y,!0))U(y[P],I);for(let P of Object.keys(S))if(!(F.indexOf(P)>=0))for(let G of B(S[P],!1))U(S[P][G],x);for(let P of Object.keys(C))if(!(F.indexOf(P)>=0))for(let G of B(C[P],!1))U(C[P][G],k);return[...x,...k,...I].map(P=>l[P]).map(P=>n[P])},Bs=J_;var tn=class extends Tr{constructor(i){super(i),this._registry=[]}set(i,s,a=0){if(typeof i!="string")throw new Error("Key must be a string");if(typeof a!="string"&&typeof a!="number")throw new Error("Position must be a string or a number");let l={key:i,value:s};a&&(l.position=a);let p=this._registry.findIndex(v=>v.key===i);return p===-1?this._registry.push(l):this._registry[p]=l,s}get(i){if(typeof i!="string")return console.error("Key must be a string"),null;let s=this._registry.find(a=>a.key===i);return s?s.value:null}_getChildrenWrapped(i){let s=this._registry.filter(a=>a.key.indexOf(i+"/")===0);return Bs(s)}getChildrenAsObject(i){let s={};return this._getChildrenWrapped(i).forEach(a=>{s[a.key]=a.value}),s}getChildren(i){return this._getChildrenWrapped(i).map(s=>s.value)}has(i){return typeof i!="string"?(console.error("Key must be a string"),!1):!!this._registry.find(s=>s.key===i)}_getAllWrapped(){return Bs(this._registry)}getAllAsObject(){let i={};return this._getAllWrapped().forEach(s=>{i[s.key]=s.value}),i}getAllAsList(){return this._getAllWrapped().map(i=>Object.assign({id:i.key},i.value))}};var rf=de("manifest");var Ie=class extends Error{constructor(s,a,l=""){super(s);N(this,"code");N(this,"severity","error");N(this,"externalMessage");this.code=a,this.externalMessage=l}};var of=n=>new Us(n.apiDomain,n.apiKey),Us=class{constructor(i,s){N(this,"apiDomain","");N(this,"apiKey","");N(this,"hasApiKey",()=>this.apiKey!==null&&this.apiKey!=="");N(this,"generate",async(i,s,a={})=>{let p=(await this.fetch(`/api/v1/chat?language=${s}`,{method:"POST",body:JSON.stringify({module:i,platform:"neos",user_input:a})}))?.data?.message?.message;return typeof p=="string"&&p.startsWith('"')&&p.endsWith('"')&&(p=p.substring(1,p.length-1)),p});N(this,"fetch",async(i,s={})=>{if(!this.apiKey)throw new Ie("This feature is not available in the free version.","1688157373215");let a=await fetch(this.apiDomain+i,Object.assign({},s,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`,Accept:"application/json"}})),l=await a.json();if(a.status===401)throw new Ie("The NEOSidekick api key provided is not valid.","1688158193038");if(a.status<200||a.status>=400){let p=l?.message;throw l?.errors&&(p+="<br>"+Object.values(l.errors).join("<br>")),new Ie("An error occurred while asking NEOSidekick.","1688158257149",p)}return l});this.apiDomain=i,this.apiKey=s}};ut();var sf=de("NeosProjectPackages")().NeosUiBackendConnectorDefault,{fetchWithErrorHandling:EA}=de("NeosProjectPackages")().NeosUiBackendConnector;var on=R(Ge());function gt(n){for(var i=arguments.length,s=Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];if(!1)var l,p;throw Error("[Immer] minified error nr: "+n+(s.length?" "+s.map(function(v){return"'"+v+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Jn(n){return!!n&&!!n[Ye]}function wn(n){var i;return!!n&&(function(s){if(!s||typeof s!="object")return!1;var a=Object.getPrototypeOf(s);if(a===null)return!0;var l=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return l===Object||typeof l=="function"&&Function.toString.call(l)===i0}(n)||Array.isArray(n)||!!n[gf]||!!(!((i=n.constructor)===null||i===void 0)&&i[gf])||Vs(n)||Zs(n))}function Mr(n,i,s){s===void 0&&(s=!1),Vn(n)===0?(s?Object.keys:na)(n).forEach(function(a){s&&typeof a=="symbol"||i(a,n[a],n)}):n.forEach(function(a,l){return i(l,a,n)})}function Vn(n){var i=n[Ye];return i?i.i>3?i.i-4:i.i:Array.isArray(n)?1:Vs(n)?2:Zs(n)?3:0}function $s(n,i){return Vn(n)===2?n.has(i):Object.prototype.hasOwnProperty.call(n,i)}function Z_(n,i){return Vn(n)===2?n.get(i):n[i]}function mf(n,i,s){var a=Vn(n);a===2?n.set(i,s):a===3?n.add(s):n[i]=s}function X_(n,i){return n===i?n!==0||1/n==1/i:n!=n&&i!=i}function Vs(n){return n0&&n instanceof Map}function Zs(n){return r0&&n instanceof Set}function Sn(n){return n.o||n.t}function Xs(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var i=o0(n);delete i[Ye];for(var s=na(i),a=0;a<s.length;a++){var l=s[a],p=i[l];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(i[l]={configurable:!0,writable:!0,enumerable:p.enumerable,value:n[l]})}return Object.create(Object.getPrototypeOf(n),i)}function Qs(n,i){return i===void 0&&(i=!1),ea(n)||Jn(n)||!wn(n)||(Vn(n)>1&&(n.set=n.add=n.clear=n.delete=Q_),Object.freeze(n),i&&Mr(n,function(s,a){return Qs(a,!0)},!0)),n}function Q_(){gt(2)}function ea(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function At(n){var i=s0[n];return i||gt(18,n),i}function uf(){return Fr}function Gs(n,i){i&&(At("Patches"),n.u=[],n.s=[],n.v=i)}function qi(n){js(n),n.p.forEach(e0),n.p=null}function js(n){n===Fr&&(Fr=n.l)}function cf(n){return Fr={p:[],l:Fr,h:n,m:!0,_:0}}function e0(n){var i=n[Ye];i.i===0||i.i===1?i.j():i.g=!0}function Hs(n,i){i._=i.p.length;var s=i.p[0],a=n!==void 0&&n!==s;return i.h.O||At("ES5").S(i,n,a),a?(s[Ye].P&&(qi(i),gt(4)),wn(n)&&(n=Ki(i,n),i.l||$i(i,n)),i.u&&At("Patches").M(s[Ye].t,n,i.u,i.s)):n=Ki(i,s,[]),qi(i),i.u&&i.v(i.u,i.s),n!==vf?n:void 0}function Ki(n,i,s){if(ea(i))return i;var a=i[Ye];if(!a)return Mr(i,function(y,S){return ff(n,a,i,y,S,s)},!0),i;if(a.A!==n)return i;if(!a.P)return $i(n,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var l=a.i===4||a.i===5?a.o=Xs(a.k):a.o,p=l,v=!1;a.i===3&&(p=new Set(l),l.clear(),v=!0),Mr(p,function(y,S){return ff(n,a,l,y,S,s,v)}),$i(n,l,!1),s&&n.u&&At("Patches").N(a,s,n.u,n.s)}return a.o}function ff(n,i,s,a,l,p,v){if(Jn(l)){var y=Ki(n,l,p&&i&&i.i!==3&&!$s(i.R,a)?p.concat(a):void 0);if(mf(s,a,y),!Jn(y))return;n.m=!1}else v&&s.add(l);if(wn(l)&&!ea(l)){if(!n.h.D&&n._<1)return;Ki(n,l),i&&i.A.l||$i(n,l)}}function $i(n,i,s){s===void 0&&(s=!1),!n.l&&n.h.D&&n.m&&Qs(i,s)}function qs(n,i){var s=n[Ye];return(s?Sn(s):n)[i]}function lf(n,i){if(i in n)for(var s=Object.getPrototypeOf(n);s;){var a=Object.getOwnPropertyDescriptor(s,i);if(a)return a;s=Object.getPrototypeOf(s)}}function zs(n){n.P||(n.P=!0,n.l&&zs(n.l))}function Ks(n){n.o||(n.o=Xs(n.t))}function Ys(n,i,s){var a=Vs(i)?At("MapSet").F(i,s):Zs(i)?At("MapSet").T(i,s):n.O?function(l,p){var v=Array.isArray(l),y={i:v?1:0,A:p?p.A:uf(),P:!1,I:!1,R:{},l:p,t:l,k:null,o:null,j:null,C:!1},S=y,C=Js;v&&(S=[y],C=Ir);var x=Proxy.revocable(S,C),k=x.revoke,I=x.proxy;return y.k=I,y.j=k,I}(i,s):At("ES5").J(i,s);return(s?s.A:uf()).p.push(a),a}function t0(n){return Jn(n)||gt(22,n),function i(s){if(!wn(s))return s;var a,l=s[Ye],p=Vn(s);if(l){if(!l.P&&(l.i<4||!At("ES5").K(l)))return l.t;l.I=!0,a=df(s,p),l.I=!1}else a=df(s,p);return Mr(a,function(v,y){l&&Z_(l.t,v)===y||mf(a,v,i(y))}),p===3?new Set(a):a}(n)}function df(n,i){switch(i){case 2:return new Map(n);case 3:return Array.from(n)}return Xs(n)}var pf,Fr,ta=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",n0=typeof Map<"u",r0=typeof Set<"u",hf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",vf=ta?Symbol.for("immer-nothing"):((pf={})["immer-nothing"]=!0,pf),gf=ta?Symbol.for("immer-draftable"):"__$immer_draftable",Ye=ta?Symbol.for("immer-state"):"__$immer_state";var i0=""+Object.prototype.constructor,na=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,o0=Object.getOwnPropertyDescriptors||function(n){var i={};return na(n).forEach(function(s){i[s]=Object.getOwnPropertyDescriptor(n,s)}),i},s0={},Js={get:function(n,i){if(i===Ye)return n;var s=Sn(n);if(!$s(s,i))return function(l,p,v){var y,S=lf(p,v);return S?"value"in S?S.value:(y=S.get)===null||y===void 0?void 0:y.call(l.k):void 0}(n,s,i);var a=s[i];return n.I||!wn(a)?a:a===qs(n.t,i)?(Ks(n),n.o[i]=Ys(n.A.h,a,n)):a},has:function(n,i){return i in Sn(n)},ownKeys:function(n){return Reflect.ownKeys(Sn(n))},set:function(n,i,s){var a=lf(Sn(n),i);if(a?.set)return a.set.call(n.k,s),!0;if(!n.P){var l=qs(Sn(n),i),p=l?.[Ye];if(p&&p.t===s)return n.o[i]=s,n.R[i]=!1,!0;if(X_(s,l)&&(s!==void 0||$s(n.t,i)))return!0;Ks(n),zs(n)}return n.o[i]===s&&(s!==void 0||i in n.o)||Number.isNaN(s)&&Number.isNaN(n.o[i])||(n.o[i]=s,n.R[i]=!0),!0},deleteProperty:function(n,i){return qs(n.t,i)!==void 0||i in n.t?(n.R[i]=!1,Ks(n),zs(n)):delete n.R[i],n.o&&delete n.o[i],!0},getOwnPropertyDescriptor:function(n,i){var s=Sn(n),a=Reflect.getOwnPropertyDescriptor(s,i);return a&&{writable:!0,configurable:n.i!==1||i!=="length",enumerable:a.enumerable,value:s[i]}},defineProperty:function(){gt(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){gt(12)}},Ir={};Mr(Js,function(n,i){Ir[n]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),Ir.deleteProperty=function(n,i){return Ir.set.call(this,n,i,void 0)},Ir.set=function(n,i,s){return Js.set.call(this,n[0],i,s,n[0])};var a0=function(){function n(s){var a=this;this.O=hf,this.D=!0,this.produce=function(l,p,v){if(typeof l=="function"&&typeof p!="function"){var y=p;p=l;var S=a;return function(U){var O=this;U===void 0&&(U=y);for(var P=arguments.length,G=Array(P>1?P-1:0),L=1;L<P;L++)G[L-1]=arguments[L];return S.produce(U,function(Y){var $;return($=p).call.apply($,[O,Y].concat(G))})}}var C;if(typeof p!="function"&&gt(6),v!==void 0&&typeof v!="function"&&gt(7),wn(l)){var x=cf(a),k=Ys(a,l,void 0),I=!0;try{C=p(k),I=!1}finally{I?qi(x):js(x)}return typeof Promise<"u"&&C instanceof Promise?C.then(function(U){return Gs(x,v),Hs(U,x)},function(U){throw qi(x),U}):(Gs(x,v),Hs(C,x))}if(!l||typeof l!="object"){if((C=p(l))===void 0&&(C=l),C===vf&&(C=void 0),a.D&&Qs(C,!0),v){var F=[],B=[];At("Patches").M(l,C,F,B),v(F,B)}return C}gt(21,l)},this.produceWithPatches=function(l,p){if(typeof l=="function")return function(C){for(var x=arguments.length,k=Array(x>1?x-1:0),I=1;I<x;I++)k[I-1]=arguments[I];return a.produceWithPatches(C,function(F){return l.apply(void 0,[F].concat(k))})};var v,y,S=a.produce(l,p,function(C,x){v=C,y=x});return typeof Promise<"u"&&S instanceof Promise?S.then(function(C){return[C,v,y]}):[S,v,y]},typeof s?.useProxies=="boolean"&&this.setUseProxies(s.useProxies),typeof s?.autoFreeze=="boolean"&&this.setAutoFreeze(s.autoFreeze)}var i=n.prototype;return i.createDraft=function(s){wn(s)||gt(8),Jn(s)&&(s=t0(s));var a=cf(this),l=Ys(this,s,void 0);return l[Ye].C=!0,js(a),l},i.finishDraft=function(s,a){var l=s&&s[Ye],p=l.A;return Gs(p,a),Hs(void 0,p)},i.setAutoFreeze=function(s){this.D=s},i.setUseProxies=function(s){s&&!hf&&gt(20),this.O=s},i.applyPatches=function(s,a){var l;for(l=a.length-1;l>=0;l--){var p=a[l];if(p.path.length===0&&p.op==="replace"){s=p.value;break}}l>-1&&(a=a.slice(l+1));var v=At("Patches").$;return Jn(s)?v(s,a):this.produce(s,function(y){return v(y,a)})},n}(),Je=new a0,Rr=Je.produce,kA=Je.produceWithPatches.bind(Je),TA=Je.setAutoFreeze.bind(Je),IA=Je.setUseProxies.bind(Je),MA=Je.applyPatches.bind(Je),FA=Je.createDraft.bind(Je),RA=Je.finishDraft.bind(Je),yf=Rr;var Qf=R(Xf());var el=(n,i)=>new va(n,i),va=class{constructor(i,s){N(this,"globalRegistry");N(this,"store");N(this,"guestFrameContentDocument",null);N(this,"nodeTypesRegistry");N(this,"externalService");N(this,"getGuestFrameContentDocument",async()=>{let i=document.getElementsByName("neos-content-main")[0];for(;!i;)await new Promise(s=>setTimeout(s,100)),i=document.getElementsByName("neos-content-main")[0];for(;!i.contentDocument||i.contentDocument.readyState==="loading"||!i?.contentDocument?.title;)await new Promise(s=>setTimeout(s,100));return this.guestFrameContentDocument=i?.contentDocument,this.guestFrameContentDocument});N(this,"getGuestFrameDocumentTitle",async()=>(await this.getGuestFrameContentDocument())?.title);N(this,"getGuestFrameDocumentHtml",async()=>(await this.getGuestFrameContentDocument())?.body?.innerHTML);N(this,"getCurrentDocumentNode",()=>{let i=this.store.getState();return on.selectors.CR.Nodes.documentNodeSelector(i)});N(this,"getCurrentDocumentParentNode",()=>{let i=this.store.getState(),s=this.getCurrentDocumentNode();return on.selectors.CR.Nodes.nodeByContextPath(i)(s.parent)});N(this,"getCurrentDocumentNodeType",()=>{let i=this.getCurrentDocumentNode();return this.globalRegistry.get("@neos-project/neos-ui-contentrepository").get(i?.nodeType)});N(this,"getCurrentDocumentTargetAudience",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.targetAudience;return i?this.processClientEval(i):""});N(this,"getCurrentDocumentPageBriefing",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.pageBriefing;return i?this.processClientEval(i):""});N(this,"getCurrentDocumentFocusKeyword",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.focusKeyword;return i?await this.processClientEval(i):""});N(this,"processClientEval",async(i,s,a)=>{if(typeof i=="string"&&(i.startsWith("SidekickClientEval:")||i.startsWith("ClientEval:")))try{s=s??this.getCurrentDocumentNode();let l=on.selectors.UI.Inspector.transientValues(this.store.getState());s=this.generateNodeForContext(s,l),a=a??this.getCurrentDocumentParentNode();let p=null,v=null;(i.indexOf("documentTitle")!==-1||i.indexOf("documentContent")!==-1)&&(p=await this.getGuestFrameDocumentTitle(),v=await this.getGuestFrameDocumentHtml());let y=this.getImageMetadata,S=(I,F,B)=>this.getAssetProperty("title",I,F,B||""),C=(I,F,B)=>this.getAssetProperty("caption",I,F,B||""),x=Object.getPrototypeOf(async function(){}).constructor;return await new x("node,parentNode,documentTitle,documentContent,AssetUri,AssetTitle,AssetCaption","return "+i.replace("SidekickClientEval:","").replace("ClientEval:",""))(s,a,p,v,y,S,C)}catch(l){throw l instanceof Ie?l:(console.error(l),new Ie('An error occurred while trying to evaluate "'+i+'"',"1694682118365",i))}return i});N(this,"processValueWithClientEval",async(i,s,a)=>{if(typeof i=="string")return this.processClientEval(i,s,a);if(typeof i=="object"&&i!==null)return this.processObjectWithClientEval(i,s,a);if(typeof i=="boolean")return i;if(i===null)return null;if(Array.isArray(i))return Promise.all(i.map(async l=>this.processObjectWithClientEval(l,s,a)))});N(this,"processObjectWithClientEval",async(i,s,a)=>{let l={};return await Promise.all(Object.keys(i).map(async p=>{let v=i[p];l[p]=await this.processValueWithClientEval(v,s,a)})),l});N(this,"getImageMetadata",async i=>{if(!i||!i?.__identity)throw new Ie("The property does not have a valid image.","1694595562191");let{loadImageMetadata:s}=sf.get().endpoints,a,l;try{let v=await s(i?.__identity);a=v?.originalImageResourceUri,l=v?.previewImageResourceUri}catch{throw new Ie("Could not fetch image object.","1694595598880")}if(!a||a==="")throw new Ie("The given image does not have a correct url.","1694595462402");let p=[];return p.push(this.prependConfiguredDomainToImageUri(a)),l&&p.push(this.prependConfiguredDomainToImageUri(l)),p});N(this,"getAssetProperty",async(i,s,a,l="")=>{if(!s||!s?.__identity)return l;try{let v=await(await fetch("/neosidekick/aiassistant/service/imageTitleAndCaption?image="+s?.__identity,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"}})).json();return v[i]||(a?v.filenameCleaned:"")||l}catch{return l}});this.globalRegistry=i,this.store=s,this.nodeTypesRegistry=i.get("@neos-project/neos-ui-contentrepository"),this.externalService=i.get("NEOSidekick.AiAssistant").get("externalService")}prependConfiguredDomainToImageUri(i){let s=this.globalRegistry.get("NEOSidekick.AiAssistant").get("configuration").domain,a=i.replace("http://","").replace("https://","").split("/");return a.shift(),a.unshift(s),a.join("/")}getCurrentlyFocusedNodePathAndProperty(){let i=this.store.getState(),s=this.globalRegistry.get("@neos-project/neos-ui-contentrepository"),a=i?.cr?.nodes?.focused?.contextPaths[0],l=a?on.selectors.CR.Nodes.nodeByContextPath(i)(a):null;return{nodePath:a,node:l,property:i?.ui?.contentCanvas?.currentlyEditedPropertyName,nodeType:l?s.get(l?.nodeType):null,parentNode:l?on.selectors.CR.Nodes.nodesByContextPathSelector(i)[l.parent]:null}}async evaluateNodeTypeConfigurationAndStartGeneration(i,s,a,l,p=!1){if(!a||s[0]==="_")return;let v=a.properties?a.properties[s]:null;try{if(v?.options?.sidekick?.onCreate?.module)throw new Ie("Please do not use options.sidekick.onCreate.module anymore. Read the docs to find out about the new configuration.","1696264259260");if(!v?.options?.sidekick?.module||p&&v?.options?.sidekick?.onCreate&&!await this.processValueWithClientEval(v?.options?.sidekick?.onCreate,i,l))return;if(!v?.ui?.inlineEditable)throw new Ie("You can only generate content on inline editable properties","1688395273728");if(!this.externalService.hasApiKey())throw new Ie("This feature is not available in the free version.","1688157373215")}catch(x){let k=this.globalRegistry.get("i18n");this.store.dispatch(on.actions.UI.FlashMessages.add(x?.code??x?.message,x?.code?k.translate("NEOSidekick.AiAssistant:Error:"+x.code):x?.message,x?.severity??"error"));return}let y=JSON.parse(JSON.stringify(v.options.sidekick)),S=this.globalRegistry.get("NEOSidekick.AiAssistant").get("contentCanvasService"),C=await this.processObjectWithClientEval(y,i,l);S.streamGenerationIntoInlineProperty(i.contextPath,s,C)}generateNodeForContext(i,s){return s?Rr(i,a=>{let l=(0,Qf.default)(s,p=>p?.value);a.properties=Object.assign({},a.properties,l)}):i}};var tl=R(Ge());var nl=(n,i,s)=>new ya(n,i,s),ya=class{constructor(i,s,a){N(this,"globalRegistry");N(this,"store");N(this,"iFrameApiService");N(this,"currentlyHandledNodePath",null);N(this,"streamGenerationIntoInlineProperty",(i,s,a)=>{this.iFrameApiService.callModule({target:{nodePath:i,propertyName:s},...a},()=>this.currentlyHandledNodePath=i)});N(this,"onNodeRemoved",i=>{this.currentlyHandledNodePath===i&&(this.iFrameApiService.cancelCallModule(),this.unsetCurrentlyHandledNodePath())});N(this,"getEditorContent",(i,s)=>this.getPropertyInlineField(i,s)?.ckeditorInstance?.getData());N(this,"getSelectedContent",(i,s)=>{let l=this.getPropertyInlineField(i,s)?.ckeditorInstance;return l?.data.stringify(l.model.getSelectedContent(l.model.document.selection))});N(this,"insertTextIntoInlineEditor",(i,s,a,l)=>{let v=this.getPropertyInlineField(i,s)?.ckeditorInstance,y=v.model.document.selection.getFirstRange();if(l){let S=a.lastIndexOf("</");S+10<a.length&&(S=a.length),a=a.substring(0,S)+"&nbsp;"+a.substring(S)}v.model.change(S=>{let C=v.data.processor.toView(a),x=v.data.toModel(C),k=v.model.insertContent(x,y);v.editing.view.focus(),S.setSelection(k)})});N(this,"handleMessage",i=>{let s=i?.data?.eventName;if(s)switch(s){case"write-content":let{nodePath:a,propertyName:l,value:p,isFinished:v}=i?.data?.data;a&&l&&(console.info(a+": "+p),this.setPropertyValue(a,l,p||"",v||!1),v&&this.handleStreamingFinished());break;case"stopped-generation":this.handleStreamingFinished();break;case"error":let y=i?.data?.data?.message;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+y,"error",y),this.handleStreamingFinished();break;default:let S="Unknown message event: "+i?.data?.eventName;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+S,"error",S),this.handleStreamingFinished()}});N(this,"handleStreamingFinished",()=>{this.resetTypingCaret(),this.unsetCurrentlyHandledNodePath(),this.iFrameApiService.setStreamingFinished()});N(this,"getPropertyInlineField",(i,s)=>document.getElementsByName("neos-content-main")[0]?.contentDocument?.querySelector(`[data-__neos-editable-node-contextpath="${i}"][data-__neos-property="${s}"]`)||void 0);N(this,"setPropertyValue",(i,s,a,l)=>{let p=this.getPropertyInlineField(i,s);if(!p&&l){let y="Could not find inline field for nodePath: "+i+" and propertyName: "+s;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+y,"error",y),this.unsetCurrentlyHandledNodePath();return}if(!p)return;if(!this.store.getState()?.cr?.nodes?.byContextPath.hasOwnProperty(i)){this.handleStreamingFinished();return}p.ckeditorInstance?.setData(a),p.classList.add("typing-caret")});this.globalRegistry=i,this.store=s,this.iFrameApiService=a,this.iFrameApiService.listenToMessages(this.handleMessage)}unsetCurrentlyHandledNodePath(){this.currentlyHandledNodePath=null}resetTypingCaret(){let a=document.getElementsByName("neos-content-main")[0]?.contentDocument?.querySelector(".typing-caret");a&&a.classList.remove("typing-caret")}addFlashMessage(i,s,a="error",l){let p=this.globalRegistry.get("i18n");this.store.dispatch(tl.actions.UI.FlashMessages.add(i,p.translate("NEOSidekick.AiAssistant:Error:"+i,s,{0:l}),a))}};var rl=()=>new _a,_a=class{constructor(){N(this,"isStreaming",!1);N(this,"unsyncedWebContextIsNewPage");N(this,"unsyncedWebContextData");N(this,"callModuleQueue",[]);N(this,"callModule",(i,s)=>{if(this.isStreaming){this.callModuleQueue.push({data:i,onStarted:s});return}this.isStreaming=!0;let a={version:"1.0",eventName:"call-module",data:{platform:"neos",...i}};this.sendMessage(a,s)});N(this,"setStreamingFinished",()=>{this.isStreaming=!1,this.unsyncedWebContextData&&(this.updateWebContext(this.unsyncedWebContextIsNewPage||!1,this.unsyncedWebContextData),this.unsyncedWebContextData=void 0,this.unsyncedWebContextIsNewPage=void 0);let i=this.callModuleQueue.shift();if(i){let{data:s,onStarted:a}=i;this.callModule(s,a)}});N(this,"cancelCallModule",()=>{let i={version:"1.0",eventName:"cancel-call-module"};this.setStreamingFinished(),this.sendMessage(i)});N(this,"updateWebContext",(i,s)=>{if(this.isStreaming){this.unsyncedWebContextIsNewPage=i,this.unsyncedWebContextData=s;return}let a={version:"1.0",eventName:i?"page-changed":"page-updated",data:s};this.sendMessage(a)});N(this,"listenToMessages",i=>{let s=this.getAssistantFrame();s?window.addEventListener("message",a=>{a.source===s.contentWindow&&i(a)}):setTimeout(()=>this.listenToMessages(i),250)});N(this,"sendMessage",(i,s,a=0)=>{let l=this.getAssistantFrame();if(l)console.log("Sending message to frame",i),l.contentWindow?.postMessage(i,"*"),s&&s();else{if(a>20){alert("NEOSidekick AI-Error: Could not load assistant frame, please reload the page or contact support@neosidekick.com.");return}a++,setTimeout(()=>this.sendMessage(i,s),250)}});N(this,"getAssistantFrame",()=>{let i=document.getElementById("neosidekickAssistant");return i?.dataset.hasOwnProperty("loaded")&&i.contentWindow?i:null})}};var uo=R(ol());var J1=(n,i)=>(0,uo.action)("@neosidekick/ai-assistant/UI/ModifyDialog/OPEN",{selectedText:i,fullText:n}),V1=()=>(0,uo.action)("@neosidekick/ai-assistant/UI/ModifyDialog/CANCEL"),Z1=n=>(0,uo.action)("@neosidekick/ai-assistant/UI/ModifyDialog/APPLY",{newText:n}),En={openModal:J1,cancelModal:V1,applyModal:Z1},sl=(n,i)=>yf(n,s=>{switch(i.type){case"@neos/neos-ui/System/INIT":{s.plugins.NEOSidekick={},s.plugins.NEOSidekick.AiAssistant={},s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/OPEN":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!0,s.plugins.NEOSidekick.AiAssistant.fullText=i.payload.fullText,s.plugins.NEOSidekick.AiAssistant.selectedText=i.payload.selectedText;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/CANCEL":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/APPLY":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}}}),co={isModalOpen:n=>n.plugins?.NEOSidekick?.AiAssistant?.isModalOpen,fullText:n=>n.plugins?.NEOSidekick?.AiAssistant?.fullText,selectedText:n=>n.plugins?.NEOSidekick?.AiAssistant?.selectedText};var Tn=R(Aa());var De=R(Ve()),pl=R(Bt()),xe=R(St()),hl=R(wt()),rr=R(Ut()),nr=R(Ge()),gl=R(Aa());var sn=class extends De.Component{constructor(i){super(i),this.state={suggestionsState:"none",suggestions:[]}}renderIcon(i){return i?De.default.createElement(rr.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):De.default.createElement(rr.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}getLanguage(){let{activeContentDimensions:i,frontendConfiguration:s}=this.props;return i.language?i.language[0]:s.defaultLanguage}async fetchSuggestions(i=3){let{externalService:s,contentService:a,addFlashMessage:l,i18nRegistry:p,node:v,parentNode:y,options:S}=this.props,C=S.module,x=S.arguments??{};this.setState({suggestionsState:"is-loading"});try{let k=await a.processObjectWithClientEval(x,v,y);k=Object.keys(k).map(F=>({identifier:F,value:k[F]}));let I=await s.generate(C,this.getLanguage(),k);if(!Array.isArray(I)||I.length===0){if(i===0)throw new Error(p.translate("NEOSidekick.AiAssistant:Editors.FocusKeywordEditor:suggestionsFailed","Could not calculate focus keyword suggestions for the page."));this.fetchSuggestions(i-1);return}this.setState({suggestionsState:"loaded",suggestions:I})}catch(k){this.setState({suggestionsState:"none"}),l(k?.code??k?.message,k?.code?p.translate("NEOSidekick.AiAssistant:Error:"+k.code,k.message,{0:k.externalMessage}):k.message,k?.severity??"error")}}render(){let{value:i,commit:s,i18nRegistry:a}=this.props,{suggestionsState:l,suggestions:p}=this.state,v=`https://app.ahrefs.com/keywords-explorer/google/${this.getLanguage().replace("en","uk")}/overview?keyword=${i}`,y="https://ads.google.com/aw/keywordplanner/plan/keywords/historical";return De.default.createElement("div",{style:{display:"flex",flexDirection:"column"}},De.default.createElement("div",null,De.default.createElement(gl.TextField,{...this.props})),(l==="none"||l==="is-loading")&&De.default.createElement("div",{style:{marginTop:"5px"}},De.default.createElement(rr.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:l==="is-loading"?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:l==="is-loading",onClick:()=>this.fetchSuggestions()},a.translate("NEOSidekick.AiAssistant:Main:calculateWithSidekick","Calculate with Sidekick"),"\xA0",this.renderIcon(l==="is-loading"))),l==="loaded"&&De.default.createElement("div",{style:{padding:"1rem",background:"gray"}},a.translate("NEOSidekick.AiAssistant:Editors.FocusKeywordEditor:suggestionsIntro","Our page content analysis points one of the following phrases as focus keyword. If this does not fit at all, customising the text for SEO could be helpful."),p.map(S=>De.default.createElement(rr.Button,{key:S,className:"neosidekick__editor__suggestion-button",size:"small",style:"lighter",hoverStyle:"brand",onClick:()=>s(S)},S))),(l==="loaded"||i)&&De.default.createElement("p",{style:{marginBottom:"16px"}},a.translate("NEOSidekick.AiAssistant:Editors.FocusKeywordEditor:checkSearchVolume","Check search volume:"),"\xA0",De.default.createElement("a",{href:v,target:"_blank",style:{textDecoration:"underline",color:"white"}},"Ahrefs"),"\xA0|\xA0",De.default.createElement("a",{href:y,target:"_blank",style:{textDecoration:"underline",color:"white"}},"Google")))}};N(sn,"propTypes",{className:xe.default.string,value:xe.default.oneOfType([xe.default.string,xe.default.number]),commit:xe.default.func.isRequired,options:xe.default.object,onKeyPress:xe.default.func,onEnterKey:xe.default.func,id:xe.default.string,activeContentDimensions:xe.default.object.isRequired,node:xe.default.object,parentNode:xe.default.object,i18nRegistry:xe.default.object.isRequired,externalService:xe.default.object.isRequired,contentService:xe.default.object.isRequired,addFlashMessage:xe.default.func.isRequired,frontendConfiguration:xe.default.object}),sn=Ce([(0,hl.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,pl.connect)(n=>{let i=nr.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:nr.selectors.CR.ContentDimensions.active(n),node:i,parentNode:nr.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:nr.actions.UI.FlashMessages.add})],sn);var ir=R(Ve());var bt=R(Ve()),vl=R(Bt()),Oe=R(St()),yl=R(wt()),On=R(Ut()),Nn=R(Ge());var ml={disabled:!1,maxlength:null,readonly:!1,placeholder:"",minRows:2,expandedRows:6},Ze=class extends bt.Component{constructor(s){super(s);N(this,"generateValue",async()=>{let{options:s}=this.props,a=Object.assign({},ml,s);await this.fetch(a.module,a.arguments??{})});N(this,"fetch",async(s,a)=>{let{commit:l,externalService:p,contentService:v,activeContentDimensions:y,addFlashMessage:S,i18nRegistry:C,node:x,parentNode:k,frontendConfiguration:I}=this.props;this.setState({loading:!0});try{a=await v.processObjectWithClientEval(a,x,k),["image_alt_text","alt_tag_generator","image_title"].includes(s)&&a.url&&!a.filename&&(a.filename=a.url[0].substring(a.url[0].lastIndexOf("/")+1)),a=Object.keys(a).map(U=>({identifier:U,value:a[U]}));let F=y.language?y.language[0]:I.defaultLanguage,B=await p.generate(s,F,a);l(B)}catch(F){S(F?.code??F?.message,F?.code?C.translate("NEOSidekick.AiAssistant:Error:"+F.code,F.message,{0:F.externalMessage}):F.message,F?.severity??"error")}finally{this.setState({loading:!1})}});N(this,"autoGenerateIfImageChanged",async s=>{let{node:a,transientValues:l,options:p,commit:v}=this.props,y=p.imagePropertyName;if(!p.autoGenerateIfImageChanged||!y||!l||!l[y])return;let S=s.transientValues?.[y]?s.transientValues?.[y]?.value?.__identity:s.node?.properties?.[y]?.__identity,C=l?.[y]?l?.[y]?.value?.__identity:a?.properties?.[y]?.__identity;S!==C&&(v(""),C&&await this.generateValue())});N(this,"fetchAndUpdatePlaceholderIfReferencedPropertyHasChanged",async s=>{let{node:a,transientValues:l,options:p}=this.props;if(!p?.placeholder?.startsWith("SidekickClientEval"))return;let v=/node\.properties\.(\w+)/g,y=p.placeholder.match(v);if(!y)return;y.map(x=>{let k=x.match(/node\.properties\.(.*)/);return k?k[1]:null}).filter(x=>x!==null).some(x=>l?.[x]!==s.transientValues?.[x]||a?.properties?.[x]!==s.node?.properties?.[x])&&await this.fetchAndUpdatePlaceholder()});N(this,"fetchAndUpdatePlaceholder",async()=>{let{contentService:s,node:a,parentNode:l,options:p}=this.props;s.processClientEval(p.placeholder,a,l).then(v=>this.setState({placeholder:v}))});let a="";s.options?.placeholder?.startsWith("SidekickClientEval")?this.fetchAndUpdatePlaceholder():s.options?.placeholder&&(a=s.i18nRegistry.translate(unescape(s.options.placeholder))),this.state={loading:!1,placeholder:a}}componentDidUpdate(s){this.fetchAndUpdatePlaceholderIfReferencedPropertyHasChanged(s),this.autoGenerateIfImageChanged(s)}renderIcon(s){return s?bt.default.createElement(On.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):bt.default.createElement(On.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}render(){let{id:s,value:a,className:l,commit:p,options:v,i18nRegistry:y}=this.props,{placeholder:S}=this.state,C=Object.assign({},ml,v),x=!C.readonly&&!C.disabled;return bt.default.createElement("div",{style:{display:"flex",flexDirection:"column"},className:l},bt.default.createElement("div",null,bt.default.createElement(On.TextArea,{id:s,value:a,onChange:p,disabled:C.disabled||this.state.loading,maxLength:C.maxlength,readOnly:C.readonly,placeholder:this.state.loading?"":S,minRows:C.minRows,expandedRows:C.expandedRows})),x?bt.default.createElement("div",null,bt.default.createElement(On.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:this.state.loading?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:this.state.loading,onClick:()=>this.generateValue()},y.translate("NEOSidekick.AiAssistant:Main:generateWithSidekick"),"\xA0",this.renderIcon(this.state.loading))):null)}};N(Ze,"propTypes",{className:Oe.default.string,value:Oe.default.oneOfType([Oe.default.string,Oe.default.number]),commit:Oe.default.func.isRequired,options:Oe.default.object,id:Oe.default.string,activeContentDimensions:Oe.default.object.isRequired,node:Oe.default.object,parentNode:Oe.default.object,transientValues:Oe.default.object,i18nRegistry:Oe.default.object.isRequired,externalService:Oe.default.object.isRequired,contentService:Oe.default.object.isRequired,addFlashMessage:Oe.default.func.isRequired,frontendConfiguration:Oe.default.object}),N(Ze,"defaultProps",{options:{}}),Ze=Ce([(0,yl.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,vl.connect)(n=>{let i=Nn.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:Nn.selectors.CR.ContentDimensions.active(n),node:i,transientValues:Nn.selectors.UI.Inspector.transientValues(n),parentNode:Nn.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:Nn.actions.UI.FlashMessages.add})],Ze);function Sa(n,i){return Object.keys(n.options).forEach(s=>{["imagePropertyName","fallbackAssetPropertyName","fallbackToCleanedFilenameIfNothingIsSet","autoGenerateIfImageChanged"].includes(s)||console.warn('[NEOSidekick.AiAssistant]: Image text editor does not support editorOption "'+s+'".')}),Rr(n,s=>{let a=s.options,l=a.imagePropertyName,p=a.fallbackAssetPropertyName,v=a.fallbackToCleanedFilenameIfNothingIsSet!==!1;if(a=a||{},a.autoGenerateIfImageChanged=a.autoGenerateIfImageChanged!==!1,a.module=a.module||i,l)a.arguments=a.arguments||{},a.arguments.url=a.arguments.url||`SidekickClientEval: AssetUri(node.properties.${l})`;else throw console.warn("[NEOSidekick.AiAssistant]: Could not find inspector editors registry."),console.warn("[NEOSidekick.AiAssistant]: Skipping registration of InspectorEditor..."),new Error("imagePropertyName is required");if(p){let y=v?"true":"false";switch(p){case"title":a.placeholder=a.placeholder||`SidekickClientEval: AssetTitle(node.properties.${l}, ${y})`;break;case"caption":a.placeholder=a.placeholder||`SidekickClientEval: AssetCaption(node.properties.${l}, ${y})`;break}}})}var Br=class extends ir.Component{render(){return this.props.options?.imagePropertyName?ir.default.createElement(Ze,{...Sa(this.props,"image_alt_text")}):ir.default.createElement("div",{style:{background:"#ff460d",color:"#fff",padding:"8px"}},"Incorrect YAML Configuration: ImageAltTextEditor requires an editorOption ",ir.default.createElement("i",null,"imagePropertyName"))}};var or=R(Ve());var Ur=class extends or.Component{render(){return this.props.options?.imagePropertyName?or.default.createElement(Ze,{...Sa(this.props,"image_title")}):or.default.createElement("div",{style:{background:"#ff460d",color:"#fff",padding:"8px"}},"Incorrect YAML Configuration: ImageTitleEditor requires an editorOption ",or.default.createElement("i",null,"imagePropertyName"))}};var Ct=R(Ve()),_l=R(Bt()),Ae=R(St()),Al=R(wt()),kn=R(Ut()),Pn=R(Ge());var X1={autoFocus:!1,disabled:!1,maxlength:null,readonly:!1},Gt=class extends Ct.PureComponent{constructor(s){super(s);N(this,"fetch",async(s,a)=>{let{commit:l,externalService:p,contentService:v,activeContentDimensions:y,addFlashMessage:S,i18nRegistry:C,node:x,parentNode:k,frontendConfiguration:I}=this.props;this.setState({loading:!0});try{a=await v.processObjectWithClientEval(a,x,k),["image_alt_text","alt_tag_generator"].includes(s)&&a.url&&!a.filename&&(a.filename=a.url[0].substring(a.url[0].lastIndexOf("/")+1)),a=Object.keys(a).map(U=>({identifier:U,value:a[U]}));let F=y.language?y.language[0]:I.defaultLanguage,B=await p.generate(s,F,a);l(B)}catch(F){S(F?.code??F?.message,F?.code?C.translate("NEOSidekick.AiAssistant:Error:"+F.code,F.message,{0:F.externalMessage}):F.message,F?.severity??"error")}finally{this.setState({loading:!1})}});N(this,"fetchAndUpdatePlaceholderIfReferencedPropertyHasChanged",async s=>{let{node:a,transientValues:l,options:p}=this.props;if(!p?.placeholder?.startsWith("SidekickClientEval"))return;let v=/node\.properties\.(\w+)/g,y=p.placeholder.match(v);if(!y)return;y.map(x=>{let k=x.match(/node\.properties\.(.*)/);return k?k[1]:null}).filter(x=>x!==null).some(x=>l?.[x]!==s.transientValues?.[x]||a?.properties?.[x]!==s.node?.properties?.[x])&&await this.fetchAndUpdatePlaceholder()});N(this,"fetchAndUpdatePlaceholder",async()=>{let{contentService:s,node:a,parentNode:l,options:p}=this.props;s.processClientEval(p.placeholder,a,l).then(v=>this.setState({placeholder:v}))});let a="";s.options?.placeholder?.startsWith("SidekickClientEval")?this.fetchAndUpdatePlaceholder():s.options?.placeholder&&(a=s.i18nRegistry.translate(unescape(s.options.placeholder))),this.state={loading:!1,placeholder:a}}componentDidUpdate(s){this.fetchAndUpdatePlaceholderIfReferencedPropertyHasChanged(s)}renderIcon(s){return s?Ct.default.createElement(kn.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):Ct.default.createElement(kn.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}render(){let{id:s,value:a,className:l,commit:p,options:v,i18nRegistry:y,onKeyPress:S,onEnterKey:C}=this.props,{placeholder:x}=this.state,k=Object.assign({},X1,v),I=!k.readonly&&!k.disabled;return Ct.default.createElement("div",{style:{display:"flex",flexDirection:"column"},className:l},Ct.default.createElement("div",null,Ct.default.createElement(kn.TextInput,{id:s,autoFocus:k.autoFocus,value:a===null?"":a,onChange:p,disabled:k.disabled||this.state.loading,maxLength:k.maxlength,readOnly:k.readonly,placeholder:x,onKeyPress:S,onEnterKey:C})),I?Ct.default.createElement("div",{style:{marginTop:"4px"}},Ct.default.createElement(kn.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:this.state.loading?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:this.state.loading,onClick:()=>this.fetch(k.module,k.arguments??{})},y.translate("NEOSidekick.AiAssistant:Main:generateWithSidekick"),"\xA0",this.renderIcon(this.state.loading))):null)}};N(Gt,"propTypes",{className:Ae.default.string,value:Ae.default.oneOfType([Ae.default.string,Ae.default.number]),commit:Ae.default.func.isRequired,options:Ae.default.object,onKeyPress:Ae.default.func,onEnterKey:Ae.default.func,id:Ae.default.string,activeContentDimensions:Ae.default.object.isRequired,node:Ae.default.object,parentNode:Ae.default.object,transientValues:Ae.default.object,i18nRegistry:Ae.default.object.isRequired,externalService:Ae.default.object.isRequired,contentService:Ae.default.object.isRequired,addFlashMessage:Ae.default.func.isRequired,frontendConfiguration:Ae.default.object}),N(Gt,"defaultProps",{options:{}}),Gt=Ce([(0,Al.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,_l.connect)(n=>{let i=Pn.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:Pn.selectors.CR.ContentDimensions.active(n),node:i,transientValues:Pn.selectors.UI.Inspector.transientValues(n),parentNode:Pn.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:Pn.actions.UI.FlashMessages.add})],Gt);var Sl=(n,i)=>{let s=n.get("inspector").get("editors");if(!s){console.warn("[NEOSidekick.AiAssistant]: Could not find inspector editors registry."),console.warn("[NEOSidekick.AiAssistant]: Skipping registration of InspectorEditor...");return}s.set("NEOSidekick.AiAssistant/Inspector/Editors/FocusKeywordEditor",{component:i?sn:Tn.TextField}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/ImageAltTextEditor",{component:i?Br:Tn.TextArea}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/ImageTitleEditor",{component:i?Ur:Tn.TextArea}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/MagicTextFieldEditor",{component:i?Gt:Tn.TextField}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/MagicTextAreaEditor",{component:i?Ze:Tn.TextArea})};var Xe=R(Ve()),Gr=R(Ut());var fo=R(Ve()),wl=R(Bt()),sr=R(St()),bl=R(Ge()),Cl=R(wt());var Ht=class extends fo.PureComponent{getUri(){let{configuration:i,activeContentDimensions:s,interfaceLanguage:a}=this.props,l=new URL(`${i.apiDomain}/chat/`);return l.searchParams.append("contentLanguage",s.language?s.language[0]:i.defaultLanguage),l.searchParams.append("interfaceLanguage",a),l.searchParams.append("userId",i.userId),l.searchParams.append("plattform","neos"),l.searchParams.append("domain",i.domain),l.searchParams.append("siteName",i.siteName),i?.referrer&&l.searchParams.append("referral",i?.referrer),i?.apiKey&&l.searchParams.append("apikey",i?.apiKey),l}render(){let{className:i}=this.props;return fo.default.createElement("iframe",{id:"neosidekickAssistant",className:i,src:this.getUri().toString(),allow:"clipboard-write",onLoad:s=>s.target.dataset.loaded="true"})}};N(Ht,"propTypes",{configuration:sr.default.object.isRequired,i18nRegistry:sr.default.object.isRequired,activeContentDimensions:sr.default.object.isRequired,interfaceLanguage:sr.default.string.isRequired,className:sr.default.string}),Ht=Ce([(0,Cl.neos)(n=>({configuration:n.get("NEOSidekick.AiAssistant").get("configuration"),i18nRegistry:n.get("i18n")})),(0,wl.connect)(n=>({activeContentDimensions:bl.selectors.CR.ContentDimensions.active(n),interfaceLanguage:n.user?.preferences?.interfaceLanguage}),{})],Ht);var xl=(n,i)=>{let s=n.get("containers"),a=s.get("App");if(!i.chatSidebarEnabled){s.set("Modals/SidekickIFrame",()=>Xe.default.createElement(Ht,{className:"neosidekick__frame--hidden"}));return}let l=p=>{let v=localStorage.getItem("NEOSidekick")?JSON.parse(localStorage.getItem("NEOSidekick")):{open:!0,fullscreen:!1},[y,S]=Xe.default.useState(v?.open),C=U=>{S(U),v.open=U,localStorage.setItem("NEOSidekick",JSON.stringify(v))},[x,k]=Xe.default.useState(v?.fullscreen),I=U=>{k(U),v.fullscreen=U,localStorage.setItem("NEOSidekick",JSON.stringify(v))},F=(U,O,P)=>U?Xe.default.createElement(Gr.IconButton,{icon:O?"compress":"expand",onClick:P}):"",B=(U,O,P)=>O?"":Xe.default.createElement(Gr.IconButton,{icon:U?"chevron-circle-right":"chevron-circle-left",onClick:P});return Xe.default.createElement("div",{className:`neosidekick_appWrapper ${y?"neosidekick_appWrapper--sidebar-open":""}  ${x?"neosidekick_appWrapper--sidebar-fullscreen":""}`},Xe.default.createElement(a,{...p}),Xe.default.createElement("div",{className:"neosidekick_sideBar"},Xe.default.createElement("div",{className:"neosidekick_sideBar__title"},Xe.default.createElement(Gr.Headline,{className:`neosidekick_sideBar__title-headline ${y?"neosidekick_sideBar__title-headline--open":""}`},"AI Sidekick"),Xe.default.createElement("div",null,F(y,x,()=>I(!x)),B(y,x,()=>C(!y)))),Xe.default.createElement(Ht,{className:`neosidekick_sideBar__frame ${y?"neosidekick_sideBar__frame--open":""}`})))};s.set("App",l)};var qr=R(Ge()),Ml=R(lo());var Nl=R(lo()),po=R(Ge()),Ol=(n,i)=>function*(){yield(0,Nl.takeEvery)(po.actionTypes.ServerFeedback.HANDLE_SERVER_FEEDBACK,function*(s){s.payload.feedbackEnvelope.feedbacks.forEach(a=>{if(a.type!=="Neos.Neos.Ui:NodeCreated")return;let p=a.payload.contextPath.split("@")[0],v=i.getState(),y=po.selectors.CR.Nodes.nodesByContextPathSelector(v),S=n.get("@neos-project/neos-ui-contentrepository"),C=n.get("NEOSidekick.AiAssistant").get("contentService");Object.keys(y).forEach(x=>{if(!x.split("@")[0].startsWith(p))return;let I=y[x],F=y[I.parent],B=S.get(I.nodeType);Object.keys(B.properties).forEach(U=>{C.evaluateNodeTypeConfigurationAndStartGeneration(I,U,B,F,!0)})})})})};var Pl=R(lo()),kl=R(Ge()),Tl=(n,i)=>function*(){yield(0,Pl.takeEvery)(kl.actionTypes.CR.Nodes.REMOVE,function*(s){n.get("NEOSidekick.AiAssistant").get("contentCanvasService").onNodeRemoved(s.payload)})};var Fl=R(Il());var Rl=(n,i,s,a)=>{let l=!1,p=(0,Fl.debounce)((S,C)=>s.updateWebContext(S,C),500),v=function*(){yield(0,Ml.takeLatest)([qr.actionTypes.UI.ContentCanvas.SET_SRC,qr.actionTypes.UI.ContentCanvas.RELOAD,qr.actionTypes.CR.Nodes.MERGE],async function*(S){S.type===qr.actionTypes.UI.ContentCanvas.SET_SRC&&(l=!0);let C=n.get("@neos-project/neos-ui-contentrepository"),x=i.getState(),k=x?.ui?.contentCanvas?.previewUrl,I=a.getCurrentDocumentNode(),F=I?.contextPath,B=Object.values(x?.cr?.nodes?.byContextPath||{}).filter(O=>{let P=C.getRole("document");if(!P)throw new Error("Document role is not loaded!");let G=C.getSubTypesOf(P);return F&&O.contextPath.indexOf(F.split("@")[0])===0&&(O.contextPath===F||!G.includes(O.nodeType))}),U={url:k,title:I?.properties?.title||await a.getGuestFrameDocumentTitle(),content:await a.getGuestFrameDocumentHtml(),structuredContent:B,targetAudience:await a.getCurrentDocumentTargetAudience(),pageBriefing:await a.getCurrentDocumentPageBriefing(),focusKeyword:await a.getCurrentDocumentFocusKeyword()};p(l,U),l=!1})},y=n.get("sagas");y.set("NEOSidekick.AiAssistant/watchDocumentNodeChange",{saga:v}),y.set("NEOSidekick.AiAssistant/watchNodeCreated",{saga:Ol(n,i)}),y.set("NEOSidekick.AiAssistant/watchNodeRemoved",{saga:Tl(n,i)})};var Kr=R(Ve()),Dl=R(Bt()),ho=R(St()),go=R(Ut()),Ll=R(wt()),Wl=R(Ge());var an=class extends Kr.PureComponent{constructor(){super(...arguments);N(this,"state",{show:!1,enabled:!0});N(this,"evaluateFocusedNodeAndPropertyAndShowButton",(s=5)=>{let{nodeType:a,property:l}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty();if(!a||!l){if(s===0)return;setTimeout(()=>this.evaluateFocusedNodeAndPropertyAndShowButton(s-1),100);return}let p=a.properties[l];this.setState({show:p?.ui?.inlineEditable===!0&&p?.options?.sidekick?.module!==void 0})});N(this,"onClick",async()=>{let{addFlashMessage:s,i18nRegistry:a,contentService:l}=this.props;try{this.setState({enabled:!1});let{node:p,nodeType:v,parentNode:y,property:S}=l.getCurrentlyFocusedNodePathAndProperty();await l.evaluateNodeTypeConfigurationAndStartGeneration(p,S,v,y)}catch(p){s(p?.code??p?.message,p?.code?a.translate("NEOSidekick.AiAssistant:Error:"+p.code,p.message,{0:p.externalMessage}):p.message,p?.severity??"error")}finally{setTimeout(()=>{this.setState({enabled:!0})},2500)}})}componentDidMount(){this.evaluateFocusedNodeAndPropertyAndShowButton()}render(){let{i18nRegistry:s}=this.props;return this.state.show?Kr.default.createElement(go.Button,{disabled:!this.state.enabled,style:"transparent",hoverStyle:"brand",onClick:this.onClick,isActive:!!this.props.isActive,title:s.translate("NEOSidekick.AiAssistant:Main:generate")},Kr.default.createElement(go.Icon,{icon:"magic",fixedWidth:!0,padded:"right"}),s.translate("NEOSidekick.AiAssistant:Main:generate")):""}};N(an,"propTypes",{contentService:ho.default.object.isRequired,i18nRegistry:ho.default.object.isRequired,addFlashMessage:ho.default.func.isRequired}),an=Ce([(0,Ll.neos)(n=>({contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),i18nRegistry:n.get("i18n")})),(0,Dl.connect)(()=>{},{addFlashMessage:Wl.actions.UI.FlashMessages.add})],an);var $r=R(Ve()),In=R(St()),Bl=R(Ut()),Ul=R(wt()),Gl=R(Bt());var wa=R(Ge());var un=class extends $r.PureComponent{constructor(){super(...arguments);N(this,"handleOpen",()=>{let{focusedNodePath:s,currentlyEditedPropertyName:a}=this.props,l=this.props.contentCanvasService.getEditorContent(s,a),p=this.props.contentCanvasService.getSelectedContent(s,a);this.props.openModal(l,p)})}render(){let{i18nRegistry:s}=this.props;return $r.default.createElement("div",null,$r.default.createElement(Bl.Button,{className:"button",style:"transparent",hoverStyle:"brand",onClick:this.handleOpen,title:s.translate("NEOSidekick.AiAssistant:Main:title","Mit AI bearbeiten")},"AI"))}};N(un,"propTypes",{contentService:In.default.object.isRequired,contentCanvasService:In.default.object.isRequired,i18nRegistry:In.default.object.isRequired,openModal:In.default.func.isRequired,focusedNodePath:In.default.string,currentlyEditedPropertyName:In.default.string}),un=Ce([(0,Ul.neos)(n=>({contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService"),i18nRegistry:n.get("i18n")})),(0,Gl.connect)(n=>({focusedNodePath:wa.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:wa.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n)}),{openModal:En.openModal})],un);var M=R(Ve()),Ee=R(St()),$l=R(Bt()),jl=R(wt()),ne=R(Ut()),Se=R(ql()),Mn=R(Ge());var ur=R(Ve()),jr=R(St()),Kl=R(wt());var qt=class extends ur.PureComponent{constructor(s){super(s);N(this,"elementRef");N(this,"editorInstance");N(this,"lastValue");this.elementRef=ur.default.createRef()}componentDidUpdate(s){if(s.value!==this.props.value&&this.lastValue!==this.props.value){if(!this.editorInstance){let a=this.elementRef.current;if(this.editorInstance=a?.querySelector(".ck-content")?.ckeditorInstance,!this.editorInstance)return}this.editorInstance.setData(this.props.value),this.lastValue=this.props.value}}render(){let{secondaryEditorsRegistry:s}=this.props,{component:a}=s.get("Neos.Neos/Inspector/Secondary/Editors/CKEditorWrap");return ur.default.createElement("div",{className:"neosidekick__ck-editor"+(this.props.disabled?" neosidekick__ck-editor--disabled":""),ref:this.elementRef},ur.default.createElement(a,{onChange:l=>{this.lastValue!==l&&(this.lastValue=l,this.props.onChange&&this.props.onChange(l))},value:this.props.value,options:Object.assign({},this.props.options,{disabled:!0})}))}};N(qt,"propTypes",{value:jr.default.string.isRequired,onChange:jr.default.func,options:jr.default.object,disabled:jr.default.bool}),qt=Ce([(0,Kl.neos)(n=>({secondaryEditorsRegistry:n.get("inspector").get("secondaryEditors")}))],qt);var cn=class extends M.PureComponent{constructor(s){super(s);N(this,"handleCancel",()=>{this.props.cancelModal(),this.setState({generatedText:"",generationState:"empty"})});N(this,"handleApply",()=>{this.props.applyModal();let{focusedNodePath:s,currentlyEditedPropertyName:a}=this.props,l=this.props.selectedText.endsWith(" ")||this.props.selectedText.endsWith("&nbsp;");this.props.contentCanvasService.insertTextIntoInlineEditor(s,a,this.state.generatedText,l),this.setState({generatedText:"",generationState:"empty"})});N(this,"handleGenerate",async(s,a="default")=>{this.setState({generationModificationType:s,generationWritingStyle:a}),s!=="custom"&&this.setState({customPromptIsVisible:!1}),this.state.generationState==="loading"&&this.props.iFrameApiService.cancelCallModule();let{customPrompt:l}=this.state,{fullText:p,selectedText:v}=this.props,y=this.getPropertyConfiguration().ui?.inline?.editorOptions?.formatting,S=Object.keys(y).filter(I=>y[I]).map(I=>({a:"link",b:"bold",i:"italic",ol:"ordered list",ul:"unordered list"})[I]||I).join(", "),C,x;switch(s){case"configured":let I=this.getConfiguredSidekick();if(I.onCreate?.module){this.addFlashMessage("1696264259260","Please do not use options.sidekick.onCreate.module anymore. Read the docs to find out about the new configuration.","error");return}let{node:F,parentNode:B}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty(),U=await this.props.contentService.processObjectWithClientEval(I,F,B);C=U.module,x=U.arguments||{};break;case"intro":C="custom_prompt",x={customPrompt:"Write a two sentence introduction for the current page.",allowedMarkdownFormattingOptions:S};break;case"page_conclusion":C="page_conclusion_writer",x={allowedMarkdownFormattingOptions:S};break;case"custom":if(!l||l.length<5){this.addFlashMessage("1696264259270","Please write a few words about how to change the text.","error");return}v&&v.length?(C="modify_selected_text",x={fullText:p,selectedText:v,modificationType:s,allowedMarkdownFormattingOptions:S,customPrompt:l,writingStyle:a}):(C="custom_prompt",x={customPrompt:l,allowedMarkdownFormattingOptions:S});break;default:C="modify_selected_text",x={fullText:p,selectedText:v,modificationType:s,allowedMarkdownFormattingOptions:S,customPrompt:l,writingStyle:a};break}this.setState({generatedText:"",generationState:"loading"});let k={target:{modalTarget:!0},module:C,arguments:x};this.props.iFrameApiService.callModule(k)});N(this,"handleRegenerate",async()=>this.handleGenerate(this.state.generationModificationType,this.state.generationWritingStyle||"default"));this.state={customPromptIsVisible:this.props.configuration.modifyTextModalPreferCustomPrompt,customPrompt:"",writingStyles:[{value:"",label:"Loading..."}],generatedText:"",generationState:"empty"}}getLanguage(){let{activeContentDimensions:s,configuration:a}=this.props;return s.language?s.language[0]:a.defaultLanguage}getPropertyConfiguration(){let{node:s,nodeTypesRegistry:a}=this.props,l=s?a.get(s?.nodeType):null,{property:p}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty();return!s||!l||!p?null:l?.properties?l?.properties[p]:null}getConfiguredSidekick(){return this.getPropertyConfiguration()?.options?.sidekick}componentDidMount(){let s=this.getLanguage();this.props.externalService.fetch("/api/v1/writing-styles?language="+s).then(a=>{let l=a.data.filter(p=>p.identifier!=="default"&&p.allowed_languages.includes(s));this.setState({writingStyles:l.map(p=>({value:p.identifier,label:p.label}))})}),this.props.iFrameApiService.listenToMessages(a=>{if(a.data?.data?.modalTarget)switch(a?.data?.eventName){case"write-content":let{value:l,isFinished:p}=a.data?.data;this.setState({generatedText:l||""}),p&&(this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished());break;case"stopped-generation":this.setState({generationState:"finished"});break;case"error":let v=a?.data?.data?.message;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+v,"error",v),this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished();break;default:let y="Unknown message event: "+a?.data?.eventName;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+y,"error",y),this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished()}}),window.addEventListener("keydown",a=>{a.key==="Enter"&&a.target===document.getElementById("neosidekickAiModifyPromptTextarea")&&this.handleGenerate("custom")})}componentDidUpdate(s){s.isOpen&&!this.props.isOpen&&this.state.generationState==="loading"&&this.props.iFrameApiService.cancelCallModule(),!s.isOpen&&this.props.isOpen&&this.setState({customPromptIsVisible:this.props.configuration.modifyTextModalPreferCustomPrompt,customPrompt:"",generatedText:"",generationState:"empty",generationModificationType:void 0,generationWritingStyle:void 0})}addFlashMessage(s,a,l="error",p){this.props.addFlashMessage(s,this.props.i18nRegistry.translate("NEOSidekick.AiAssistant:Error:"+s,a,{0:p}),l)}renderTitle(){return M.default.createElement("div",null,M.default.createElement("svg",{className:"sidekick-icon","enable-background":"new 0 0 245 245",viewBox:"0 0 245 245"},M.default.createElement("path",{d:"m72.6 75.3 5.3-2.6m-18.5-30.7",fill:"#fff"}),M.default.createElement("circle",{cx:"64.7",cy:"50.5",fill:"#fff",r:"9.4"}),M.default.createElement("path",{d:"m68 59.1 7.5 15.2",fill:"none",stroke:"#fff","stroke-miterlimit":"10","stroke-width":"4.9606"}),M.default.createElement("path",{d:"m170.1 72.7 5.3 2.6m13.2-33.3",fill:"#fff"}),M.default.createElement("circle",{cx:"183.4",cy:"50.5",fill:"#fff",r:"9.4"}),M.default.createElement("path",{d:"m180.1 59.1-7.5 15.2",fill:"none",stroke:"#fff","stroke-miterlimit":"10","stroke-width":"4.9606"}),M.default.createElement("path",{d:"m123.6 60c38.1 0 69 31 69 69s-31 69-69 69-69-31-69-69 31-69 69-69m0-8.5c-42.8 0-77.5 34.7-77.5 77.5s34.7 77.5 77.5 77.5 77.5-34.7 77.5-77.5-34.6-77.5-77.5-77.5z",fill:"#fff"}),M.default.createElement("circle",{cx:"97",cy:"123.5",fill:"#fff",r:"9.1"}),M.default.createElement("g",{fill:"none",stroke:"#fff","stroke-miterlimit":"10"},M.default.createElement("path",{d:"m164.2 137.9h-80c-7.8 0-14.1-6.3-14.1-14.1v-.3c0-7.8 6.3-14.1 14.1-14.1h80c7.8 0 14.1 6.3 14.1 14.1v.3c0 7.8-6.4 14.1-14.1 14.1z","stroke-width":"9.0714"}),M.default.createElement("path",{d:"m52.4 153.9h-17.5c-4.1 0-7.4-3.2-7.4-7.2v-34.2c0-3.9 3.4-7.2 7.4-7.2h17.5","stroke-width":"8.5039"}),M.default.createElement("path",{d:"m193.1 153.9h17.5c4.1 0 7.4-3.2 7.4-7.2v-34.2c0-3.9-3.4-7.2-7.4-7.2h-17.5","stroke-width":"8.5039"}),M.default.createElement("path",{d:"m104.1 165.1s18.1 18.1 39 .5","stroke-linecap":"round","stroke-width":"8.5039"}))),this.props.selectedText?M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:modify-text-title",fallback:"Revise text"}):M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:create-text-title",fallback:"Generate text with AI"})," (Beta)")}renderCancelAction(){return M.default.createElement(ne.Button,{key:"cancel",style:"lighter",hoverStyle:"brand",onClick:this.handleCancel},M.default.createElement(Se.default,{id:"Neos.Neos:Main:cancel",fallback:"Cancel"}))}renderRegenerateAction(){return this.state.generationState==="finished"?M.default.createElement(ne.Button,{key:"regenerate",style:"lighter",hoverStyle:"warn",onClick:this.handleRegenerate},M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:regenerate-text",fallback:"Regenerate"})):""}renderSaveAction(){return this.state.generationState==="finished"?M.default.createElement(ne.Button,{key:"save",style:"success",hoverStyle:"success",onClick:this.handleApply},this.props.selectedText?M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:apply-modify-text",fallback:"Use text"}):M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:apply-create-text",fallback:"Insert text"})):""}hasSelectedText(){return this.props.selectedText&&this.props.selectedText.trim().length>0}renderConfiguredButton(){return this.getConfiguredSidekick()?.module?M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("configured")},M.default.createElement(ne.Icon,{icon:"hand-sparkles",className:"icon--space-right"}),this.getConfiguredSidekick()?.label||M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:configured-button",fallback:"Configured instruction"})):""}renderCreateButtons(){return M.default.createElement("div",{className:"quickGenerationButtons"},this.renderConfiguredButton(),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("intro")},M.default.createElement(ne.Icon,{icon:"paragraph",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:intro-button",fallback:"Introduction"})),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("page_conclusion")},M.default.createElement(ne.Icon,{icon:"paragraph",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:page-conclusion-button",fallback:"Page Conclusion"})))}renderEditButtons(){let{i18nRegistry:s}=this.props;return M.default.createElement("div",{className:"quickGenerationButtons"},M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("rephrase")},M.default.createElement(ne.Icon,{icon:"redo",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:rephrase-button",fallback:"Rephrase"})),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("longer")},M.default.createElement(ne.Icon,{icon:"expand-alt",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:longer-button-short",fallback:"Longer"})),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("shorter")},M.default.createElement(ne.Icon,{icon:"compress-alt",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:shorter-button-short",fallback:"Shorter"})),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("fix_spelling")},M.default.createElement(ne.Icon,{icon:"spell-check",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:fix-text-button",fallback:"Fix spelling"})),M.default.createElement(ne.Button,{style:this.state.customPromptIsVisible?"brand":"lighter",hoverStyle:"brand",onClick:()=>this.setState({customPromptIsVisible:!this.state.customPromptIsVisible})},M.default.createElement(ne.Icon,{icon:"pen-fancy",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:custom-prompt-button",fallback:"Etwas anderes"})),M.default.createElement("div",{className:"quickGenerationButtons__selectWrapper"},M.default.createElement(ne.SelectBox,{className:"quickGenerationButtons__select",placeholder:s.translate("NEOSidekick.AiAssistant:AiModal:change-tone"),onValueChange:a=>this.handleGenerate("style",a),options:this.state.writingStyles})))}render(){let{selectedText:s,i18nRegistry:a}=this.props,{customPrompt:l,generatedText:p,generationState:v}=this.state,y=JSON.parse(JSON.stringify(this.getPropertyConfiguration()?.ui?.inline?.editorOptions)||"{}");return y.sidekickModifyButton=!1,M.default.createElement(ne.Dialog,{actions:[this.renderCancelAction(),this.renderRegenerateAction(),this.renderSaveAction()],title:this.renderTitle(),onRequestClose:this.handleCancel,isOpen:this.props.isOpen,style:"wide"},M.default.createElement("div",{className:"primaryColumn"},this.hasSelectedText()?M.default.createElement("div",{className:"originalText"},M.default.createElement(ne.Label,null,M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:selected-text",fallback:"Selected Text"}),":"),M.default.createElement(qt,{value:s,options:y,disabled:!0})):"",this.hasSelectedText()?this.renderEditButtons():"",!this.hasSelectedText()||this.state.customPromptIsVisible?M.default.createElement("div",{className:"promptRow"},M.default.createElement(ne.TextArea,{autoFocus:!0,id:"neosidekickAiModifyPromptTextarea",placeholder:this.hasSelectedText()?a.translate("NEOSidekick.AiAssistant:AiModal:custom-prompt-modify-placeholder","How should the text be changed?"):a.translate("NEOSidekick.AiAssistant:AiModal:custom-prompt-create-placeholder","Which text should I write?"),onChange:S=>this.setState({customPrompt:S}),minRows:2,expandedRows:2}),M.default.createElement(ne.Button,{className:"promptRow__button",disabled:!l,style:l&&v=="empty"?"success":"lighter",hoverStyle:"success",onClick:()=>this.handleGenerate("custom")},M.default.createElement(ne.Icon,{icon:"magic",className:"icon--space-right"}),M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:Main:generate",fallback:"Generate"}))):"",this.hasSelectedText()?"":this.renderCreateButtons(),v==="empty"?"":M.default.createElement("div",{className:"result"},M.default.createElement(ne.Label,null,M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:new-text",fallback:"New Text"}),":"),M.default.createElement(qt,{onChange:S=>this.setState({generatedText:S}),value:p,options:y}),M.default.createElement("i",{className:"result__notice"},M.default.createElement(Se.default,{id:"NEOSidekick.AiAssistant:AiModal:disclaimer",fallback:"GenAI models can make mistakes. Check important information."})))))}};N(cn,"propTypes",{iFrameApiService:Ee.default.object.isRequired,contentService:Ee.default.object.isRequired,contentCanvasService:Ee.default.object.isRequired,externalService:Ee.default.object.isRequired,i18nRegistry:Ee.default.object.isRequired,nodeTypesRegistry:Ee.default.object.isRequired,configuration:Ee.default.object.isRequired,isOpen:Ee.default.bool,focusedNodePath:Ee.default.string,currentlyEditedPropertyName:Ee.default.string,fullText:Ee.default.string,selectedText:Ee.default.string,activeContentDimensions:Ee.default.object,node:Ee.default.object,cancelModal:Ee.default.func.isRequired,applyModal:Ee.default.func.isRequired,addFlashMessage:Ee.default.func.isRequired}),cn=Ce([(0,jl.neos)(n=>({iFrameApiService:n.get("NEOSidekick.AiAssistant").get("iFrameApiService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),i18nRegistry:n.get("i18n"),nodeTypesRegistry:n.get("@neos-project/neos-ui-contentrepository"),configuration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,$l.connect)(n=>({isOpen:co.isModalOpen(n),focusedNodePath:Mn.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:Mn.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n),fullText:co.fullText(n),selectedText:co.selectedText(n),activeContentDimensions:Mn.selectors.CR.ContentDimensions.active(n),node:Mn.selectors.CR.Nodes.focusedSelector(n)}),{cancelModal:En.cancelModal,applyModal:En.applyModal,addFlashMessage:Mn.actions.UI.FlashMessages.add})],cn);var Yr=R(Ve()),zr=R(St()),zl=R(Bt()),ba=R(Ge()),Yl=R(wt()),Jl=R(Ut());var fn=class extends Yr.PureComponent{constructor(){super(...arguments);N(this,"handleOpen",()=>{let{focusedNodePath:s,currentlyEditedPropertyName:a}=this.props,l=this.props.contentCanvasService.getEditorContent(s,a),p=this.props.contentCanvasService.getSelectedContent(s,a);this.props.openModal(l,p)})}render(){let{currentlyEditedPropertyName:s,i18nRegistry:a}=this.props;return Yr.default.createElement(Jl.Button,{id:"neos-InlineToolbar-AiModify",disabled:!s,className:this.props.className,style:"transparent",hoverStyle:"brand",onClick:this.handleOpen,title:a.translate("NEOSidekick.AiAssistant:Main:title","Mit AI bearbeiten")},Yr.default.createElement("strong",null,"AI"))}};N(fn,"propTypes",{className:zr.default.string,i18nRegistry:zr.default.object.isRequired,focusedNodePath:zr.default.string,currentlyEditedPropertyName:zr.default.string}),fn=Ce([(0,Yl.neos)(n=>({nodeTypesRegistry:n.get("@neos-project/neos-ui-contentrepository"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService")})),(0,zl.connect)(n=>({focusedNodePath:ba.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:ba.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n)}),{openModal:En.openModal})],fn);var Vl=n=>{let s=n.get("ckEditor5").get("richtextToolbar");s.set("NEOSidekick.AiAssistant:ModifyButton",{component:un,isVisible:p=>p?.sidekickModifyButton!==!1},"start"),s.set("NEOSidekick.AiAssistant:generate",{component:an,isVisible:()=>!0},"end"),n.get("containers").set("Modals/AiModal",cn),n.get("@neos-project/neos-ui-guest-frame").set("NodeToolbar/Buttons/AiModify",fn,"after NodeToolbar/Buttons/AddNode")};rf("NEOSidekick.AiAssistant",{},(n,{store:i,frontendConfiguration:s})=>{let a=s["NEOSidekick.AiAssistant"];if(Sl(n,a?.enabled),!a?.enabled)return;if(!a.hasOwnProperty("defaultLanguage")||!a.defaultLanguage){console.error("Could not initialize AiAssistant: defaultLanguage is not configured correctly, see README.");return}n.get("reducers").set("NEOSidekick.AiAssistant",{reducer:sl}),n.set("NEOSidekick.AiAssistant",new tn(""));let l=n.get("NEOSidekick.AiAssistant");l.set("configuration",a);let p=of(a);l.set("externalService",p);let v=el(n,i);l.set("contentService",v);let y=rl();l.set("iFrameApiService",y);let S=nl(n,i,y);l.set("contentCanvasService",S),xl(n,a),Rl(n,i,y,v),Vl(n)});})();
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
//# sourceMappingURL=Plugin.js.map
