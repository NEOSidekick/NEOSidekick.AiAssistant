"use strict";(()=>{var S_=Object.create;var Ni=Object.defineProperty;var Hc=Object.getOwnPropertyDescriptor;var w_=Object.getOwnPropertyNames;var b_=Object.getPrototypeOf,x_=Object.prototype.hasOwnProperty;var C_=(n,i,s)=>i in n?Ni(n,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[i]=s;var O_=(n,i)=>()=>(n&&(i=n(n=0)),i);var nt=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports);var E_=(n,i,s,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of w_(i))!x_.call(n,l)&&l!==s&&Ni(n,l,{get:()=>i[l],enumerable:!(u=Hc(i,l))||u.enumerable});return n};var G=(n,i,s)=>(s=n!=null?S_(b_(n)):{},E_(i||!n||!n.__esModule?Ni(s,"default",{value:n,enumerable:!0}):s,n));var Be=(n,i,s,u)=>{for(var l=u>1?void 0:u?Hc(i,s):i,p=n.length-1,y;p>=0;p--)(y=n[p])&&(l=(u?y(i,s,l):y(l))||l);return u&&l&&Ni(i,s,l),l};var N=(n,i,s)=>(C_(n,typeof i!="symbol"?i+"":i,s),s);function de(n){return(...i)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${n}`])return window["@Neos:HostPluginAPI"][`@${n}`](...i);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var rt=O_(()=>{});var it=nt((fA,zc)=>{rt();zc.exports=de("NeosProjectPackages")().NeosUiReduxStore});var Wf=nt((Or,qn)=>{var G_=200,H_="Expected a function",ta="__lodash_hash_undefined__",Bi=1,$n=2,hf=1/0,gf=9007199254740991,Ii="[object Arguments]",Ys="[object Array]",vf="[object Boolean]",mf="[object Date]",yf="[object Error]",_f="[object Function]",K_="[object GeneratorFunction]",Ri="[object Map]",Af="[object Number]",Kn="[object Object]",of="[object Promise]",Sf="[object RegExp]",Fi="[object Set]",wf="[object String]",bf="[object Symbol]",Js="[object WeakMap]",xf="[object ArrayBuffer]",Mi="[object DataView]",q_="[object Float32Array]",$_="[object Float64Array]",z_="[object Int8Array]",j_="[object Int16Array]",Y_="[object Int32Array]",J_="[object Uint8Array]",Z_="[object Uint8ClampedArray]",X_="[object Uint16Array]",Q_="[object Uint32Array]",V_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,e0=/^\w*$/,t0=/^\./,n0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r0=/[\\^$.*+?()[\]{}|]/g,i0=/\\(\\)?/g,o0=/^\[object .+?Constructor\]$/,s0=/^(?:0|[1-9]\d*)$/,ce={};ce[q_]=ce[$_]=ce[z_]=ce[j_]=ce[Y_]=ce[J_]=ce[Z_]=ce[X_]=ce[Q_]=!0;ce[Ii]=ce[Ys]=ce[xf]=ce[vf]=ce[Mi]=ce[mf]=ce[yf]=ce[_f]=ce[Ri]=ce[Af]=ce[Kn]=ce[Sf]=ce[Fi]=ce[wf]=ce[Js]=!1;var Cf=typeof global=="object"&&global&&global.Object===Object&&global,a0=typeof self=="object"&&self&&self.Object===Object&&self,Xt=Cf||a0||Function("return this")(),Of=typeof Or=="object"&&Or&&!Or.nodeType&&Or,sf=Of&&typeof qn=="object"&&qn&&!qn.nodeType&&qn,u0=sf&&sf.exports===Of,af=u0&&Cf.process,uf=function(){try{return af&&af.binding("util")}catch{}}(),cf=uf&&uf.isTypedArray;function c0(n,i){for(var s=-1,u=n?n.length:0;++s<u;)if(i(n[s],s,n))return!0;return!1}function f0(n){return function(i){return i?.[n]}}function l0(n,i){for(var s=-1,u=Array(n);++s<n;)u[s]=i(s);return u}function d0(n){return function(i){return n(i)}}function p0(n,i){return n?.[i]}function Zs(n){var i=!1;if(n!=null&&typeof n.toString!="function")try{i=!!(n+"")}catch{}return i}function h0(n){var i=-1,s=Array(n.size);return n.forEach(function(u,l){s[++i]=[l,u]}),s}function g0(n,i){return function(s){return n(i(s))}}function v0(n){var i=-1,s=Array(n.size);return n.forEach(function(u){s[++i]=u}),s}var m0=Array.prototype,y0=Function.prototype,Ui=Object.prototype,zs=Xt["__core-js_shared__"],ff=function(){var n=/[^.]+$/.exec(zs&&zs.keys&&zs.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Ef=y0.toString,Tt=Ui.hasOwnProperty,zn=Ui.toString,_0=RegExp("^"+Ef.call(Tt).replace(r0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lf=Xt.Symbol,df=Xt.Uint8Array,A0=Ui.propertyIsEnumerable,S0=m0.splice,w0=g0(Object.keys,Object),Xs=jn(Xt,"DataView"),Er=jn(Xt,"Map"),Qs=jn(Xt,"Promise"),Vs=jn(Xt,"Set"),ea=jn(Xt,"WeakMap"),Nr=jn(Object,"create"),b0=_n(Xs),x0=_n(Er),C0=_n(Qs),O0=_n(Vs),E0=_n(ea),Di=lf?lf.prototype:void 0,js=Di?Di.valueOf:void 0,pf=Di?Di.toString:void 0;function mn(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function N0(){this.__data__=Nr?Nr(null):{}}function P0(n){return this.has(n)&&delete this.__data__[n]}function T0(n){var i=this.__data__;if(Nr){var s=i[n];return s===ta?void 0:s}return Tt.call(i,n)?i[n]:void 0}function k0(n){var i=this.__data__;return Nr?i[n]!==void 0:Tt.call(i,n)}function I0(n,i){var s=this.__data__;return s[n]=Nr&&i===void 0?ta:i,this}mn.prototype.clear=N0;mn.prototype.delete=P0;mn.prototype.get=T0;mn.prototype.has=k0;mn.prototype.set=I0;function kt(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function R0(){this.__data__=[]}function F0(n){var i=this.__data__,s=Gi(i,n);if(s<0)return!1;var u=i.length-1;return s==u?i.pop():S0.call(i,s,1),!0}function M0(n){var i=this.__data__,s=Gi(i,n);return s<0?void 0:i[s][1]}function D0(n){return Gi(this.__data__,n)>-1}function L0(n,i){var s=this.__data__,u=Gi(s,n);return u<0?s.push([n,i]):s[u][1]=i,this}kt.prototype.clear=R0;kt.prototype.delete=F0;kt.prototype.get=M0;kt.prototype.has=D0;kt.prototype.set=L0;function It(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function W0(){this.__data__={hash:new mn,map:new(Er||kt),string:new mn}}function B0(n){return Hi(this,n).delete(n)}function U0(n){return Hi(this,n).get(n)}function G0(n){return Hi(this,n).has(n)}function H0(n,i){return Hi(this,n).set(n,i),this}It.prototype.clear=W0;It.prototype.delete=B0;It.prototype.get=U0;It.prototype.has=G0;It.prototype.set=H0;function Li(n){var i=-1,s=n?n.length:0;for(this.__data__=new It;++i<s;)this.add(n[i])}function K0(n){return this.__data__.set(n,ta),this}function q0(n){return this.__data__.has(n)}Li.prototype.add=Li.prototype.push=K0;Li.prototype.has=q0;function Pt(n){this.__data__=new kt(n)}function $0(){this.__data__=new kt}function z0(n){return this.__data__.delete(n)}function j0(n){return this.__data__.get(n)}function Y0(n){return this.__data__.has(n)}function J0(n,i){var s=this.__data__;if(s instanceof kt){var u=s.__data__;if(!Er||u.length<G_-1)return u.push([n,i]),this;s=this.__data__=new It(u)}return s.set(n,i),this}Pt.prototype.clear=$0;Pt.prototype.delete=z0;Pt.prototype.get=j0;Pt.prototype.has=Y0;Pt.prototype.set=J0;function Z0(n,i){var s=yn(n)||Mf(n)?l0(n.length,String):[],u=s.length,l=!!u;for(var p in n)(i||Tt.call(n,p))&&!(l&&(p=="length"||kf(p,u)))&&s.push(p);return s}function Gi(n,i){for(var s=n.length;s--;)if(Ff(n[s][0],i))return s;return-1}var X0=l1();function Q0(n,i){return n&&X0(n,i,Wi)}function Nf(n,i){i=Ki(i,n)?[i]:Pf(i);for(var s=0,u=i.length;n!=null&&s<u;)n=n[qi(i[s++])];return s&&s==u?n:void 0}function V0(n){return zn.call(n)}function e1(n,i){return n!=null&&i in Object(n)}function na(n,i,s,u,l){return n===i?!0:n==null||i==null||!$i(n)&&!zi(i)?n!==n&&i!==i:t1(n,i,na,s,u,l)}function t1(n,i,s,u,l,p){var y=yn(n),A=yn(i),C=Ys,x=Ys;y||(C=Zt(n),C=C==Ii?Kn:C),A||(x=Zt(i),x=x==Ii?Kn:x);var P=C==Kn&&!Zs(n),W=x==Kn&&!Zs(i),I=C==x;if(I&&!P)return p||(p=new Pt),y||S1(n)?Tf(n,i,s,u,l,p):d1(n,i,C,s,u,l,p);if(!(l&$n)){var F=P&&Tt.call(n,"__wrapped__"),U=W&&Tt.call(i,"__wrapped__");if(F||U){var D=F?n.value():n,O=U?i.value():i;return p||(p=new Pt),s(D,O,u,l,p)}}return I?(p||(p=new Pt),p1(n,i,s,u,l,p)):!1}function n1(n,i,s,u){var l=s.length,p=l,y=!u;if(n==null)return!p;for(n=Object(n);l--;){var A=s[l];if(y&&A[2]?A[1]!==n[A[0]]:!(A[0]in n))return!1}for(;++l<p;){A=s[l];var C=A[0],x=n[C],P=A[1];if(y&&A[2]){if(x===void 0&&!(C in n))return!1}else{var W=new Pt;if(u)var I=u(x,P,C,n,i,W);if(!(I===void 0?na(P,x,u,Bi|$n,W):I))return!1}}return!0}function r1(n){if(!$i(n)||m1(n))return!1;var i=Lf(n)||Zs(n)?_0:o0;return i.test(_n(n))}function i1(n){return zi(n)&&ia(n.length)&&!!ce[zn.call(n)]}function o1(n){return typeof n=="function"?n:n==null?O1:typeof n=="object"?yn(n)?u1(n[0],n[1]):a1(n):E1(n)}function s1(n){if(!y1(n))return w0(n);var i=[];for(var s in Object(n))Tt.call(n,s)&&s!="constructor"&&i.push(s);return i}function a1(n){var i=h1(n);return i.length==1&&i[0][2]?Rf(i[0][0],i[0][1]):function(s){return s===n||n1(s,n,i)}}function u1(n,i){return Ki(n)&&If(i)?Rf(qi(n),i):function(s){var u=b1(s,n);return u===void 0&&u===i?x1(s,n):na(i,u,void 0,Bi|$n)}}function c1(n){return function(i){return Nf(i,n)}}function f1(n){if(typeof n=="string")return n;if(oa(n))return pf?pf.call(n):"";var i=n+"";return i=="0"&&1/n==-hf?"-0":i}function Pf(n){return yn(n)?n:_1(n)}function l1(n){return function(i,s,u){for(var l=-1,p=Object(i),y=u(i),A=y.length;A--;){var C=y[n?A:++l];if(s(p[C],C,p)===!1)break}return i}}function Tf(n,i,s,u,l,p){var y=l&$n,A=n.length,C=i.length;if(A!=C&&!(y&&C>A))return!1;var x=p.get(n);if(x&&p.get(i))return x==i;var P=-1,W=!0,I=l&Bi?new Li:void 0;for(p.set(n,i),p.set(i,n);++P<A;){var F=n[P],U=i[P];if(u)var D=y?u(U,F,P,i,n,p):u(F,U,P,n,i,p);if(D!==void 0){if(D)continue;W=!1;break}if(I){if(!c0(i,function(O,E){if(!I.has(E)&&(F===O||s(F,O,u,l,p)))return I.add(E)})){W=!1;break}}else if(!(F===U||s(F,U,u,l,p))){W=!1;break}}return p.delete(n),p.delete(i),W}function d1(n,i,s,u,l,p,y){switch(s){case Mi:if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case xf:return!(n.byteLength!=i.byteLength||!u(new df(n),new df(i)));case vf:case mf:case Af:return Ff(+n,+i);case yf:return n.name==i.name&&n.message==i.message;case Sf:case wf:return n==i+"";case Ri:var A=h0;case Fi:var C=p&$n;if(A||(A=v0),n.size!=i.size&&!C)return!1;var x=y.get(n);if(x)return x==i;p|=Bi,y.set(n,i);var P=Tf(A(n),A(i),u,l,p,y);return y.delete(n),P;case bf:if(js)return js.call(n)==js.call(i)}return!1}function p1(n,i,s,u,l,p){var y=l&$n,A=Wi(n),C=A.length,x=Wi(i),P=x.length;if(C!=P&&!y)return!1;for(var W=C;W--;){var I=A[W];if(!(y?I in i:Tt.call(i,I)))return!1}var F=p.get(n);if(F&&p.get(i))return F==i;var U=!0;p.set(n,i),p.set(i,n);for(var D=y;++W<C;){I=A[W];var O=n[I],E=i[I];if(u)var L=y?u(E,O,I,i,n,p):u(O,E,I,n,i,p);if(!(L===void 0?O===E||s(O,E,u,l,p):L)){U=!1;break}D||(D=I=="constructor")}if(U&&!D){var R=n.constructor,Y=i.constructor;R!=Y&&"constructor"in n&&"constructor"in i&&!(typeof R=="function"&&R instanceof R&&typeof Y=="function"&&Y instanceof Y)&&(U=!1)}return p.delete(n),p.delete(i),U}function Hi(n,i){var s=n.__data__;return v1(i)?s[typeof i=="string"?"string":"hash"]:s.map}function h1(n){for(var i=Wi(n),s=i.length;s--;){var u=i[s],l=n[u];i[s]=[u,l,If(l)]}return i}function jn(n,i){var s=p0(n,i);return r1(s)?s:void 0}var Zt=V0;(Xs&&Zt(new Xs(new ArrayBuffer(1)))!=Mi||Er&&Zt(new Er)!=Ri||Qs&&Zt(Qs.resolve())!=of||Vs&&Zt(new Vs)!=Fi||ea&&Zt(new ea)!=Js)&&(Zt=function(n){var i=zn.call(n),s=i==Kn?n.constructor:void 0,u=s?_n(s):void 0;if(u)switch(u){case b0:return Mi;case x0:return Ri;case C0:return of;case O0:return Fi;case E0:return Js}return i});function g1(n,i,s){i=Ki(i,n)?[i]:Pf(i);for(var u,l=-1,y=i.length;++l<y;){var p=qi(i[l]);if(!(u=n!=null&&s(n,p)))break;n=n[p]}if(u)return u;var y=n?n.length:0;return!!y&&ia(y)&&kf(p,y)&&(yn(n)||Mf(n))}function kf(n,i){return i=i??gf,!!i&&(typeof n=="number"||s0.test(n))&&n>-1&&n%1==0&&n<i}function Ki(n,i){if(yn(n))return!1;var s=typeof n;return s=="number"||s=="symbol"||s=="boolean"||n==null||oa(n)?!0:e0.test(n)||!V_.test(n)||i!=null&&n in Object(i)}function v1(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function m1(n){return!!ff&&ff in n}function y1(n){var i=n&&n.constructor,s=typeof i=="function"&&i.prototype||Ui;return n===s}function If(n){return n===n&&!$i(n)}function Rf(n,i){return function(s){return s==null?!1:s[n]===i&&(i!==void 0||n in Object(s))}}var _1=ra(function(n){n=w1(n);var i=[];return t0.test(n)&&i.push(""),n.replace(n0,function(s,u,l,p){i.push(l?p.replace(i0,"$1"):u||s)}),i});function qi(n){if(typeof n=="string"||oa(n))return n;var i=n+"";return i=="0"&&1/n==-hf?"-0":i}function _n(n){if(n!=null){try{return Ef.call(n)}catch{}try{return n+""}catch{}}return""}function ra(n,i){if(typeof n!="function"||i&&typeof i!="function")throw new TypeError(H_);var s=function(){var u=arguments,l=i?i.apply(this,u):u[0],p=s.cache;if(p.has(l))return p.get(l);var y=n.apply(this,u);return s.cache=p.set(l,y),y};return s.cache=new(ra.Cache||It),s}ra.Cache=It;function Ff(n,i){return n===i||n!==n&&i!==i}function Mf(n){return A1(n)&&Tt.call(n,"callee")&&(!A0.call(n,"callee")||zn.call(n)==Ii)}var yn=Array.isArray;function Df(n){return n!=null&&ia(n.length)&&!Lf(n)}function A1(n){return zi(n)&&Df(n)}function Lf(n){var i=$i(n)?zn.call(n):"";return i==_f||i==K_}function ia(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=gf}function $i(n){var i=typeof n;return!!n&&(i=="object"||i=="function")}function zi(n){return!!n&&typeof n=="object"}function oa(n){return typeof n=="symbol"||zi(n)&&zn.call(n)==bf}var S1=cf?d0(cf):i1;function w1(n){return n==null?"":f1(n)}function b1(n,i,s){var u=n==null?void 0:Nf(n,i);return u===void 0?s:u}function x1(n,i){return n!=null&&g1(n,i,e1)}function Wi(n){return Df(n)?Z0(n):s1(n)}function C1(n,i){var s={};return i=o1(i,3),Q0(n,function(u,l,p){s[l]=i(u,l,p)}),s}function O1(n){return n}function E1(n){return Ki(n)?f0(qi(n)):c1(n)}qn.exports=C1});var $f=nt((ji,qf)=>{(function(n,i){typeof ji=="object"&&typeof qf<"u"?i(ji):typeof define=="function"&&define.amd?define(["exports"],i):i((n=n||self).TypesafeActions={})})(ji,function(n){"use strict";function i(O){return O==null}function s(O){throw new Error("Argument "+O+" is empty.")}function u(O){return typeof O=="function"&&"getType"in O}function l(O){throw new Error("Argument "+O+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function p(O,E){if(O==null)throw new Error("Argument contains array with empty element at index "+E);if(O.getType==null)throw new Error("Argument contains array with invalid element at index "+E+', it should be an action-creator instance from "typesafe-actions"')}function y(O){return typeof O=="string"||typeof O=="symbol"}function A(O){return!y(O)}function C(O){throw new Error("Argument "+O+" is invalid, it should be an action type of type: string | symbol")}function x(O,E){if(O==null)throw new Error("Argument contains array with empty element at index "+E);if(typeof O!="string"&&typeof O!="symbol")throw new Error("Argument contains array with invalid element at index "+E+", it should be of type: string | symbol")}function P(O,E,L,R){return i(O)&&s(1),A(O)&&l(1),{type:O,payload:E,meta:L,error:R}}function W(O,E){return i(O)&&s(1),A(O)&&C(1),Object.assign(function(){var L=E?.apply(void 0,arguments);return Object.assign({type:O},L)},{getType:function(){return O},toString:function(){return O}})}function I(O,E,L){return i(O)&&s(1),A(O)&&C(1),function(){return W(O,function(){var R=arguments.length<=0?void 0:arguments[0],Y=arguments.length<=1?void 0:arguments[1];return E==null&&L==null||(R=E?.apply(void 0,arguments),Y=L?.apply(void 0,arguments)),Object.assign({},R!==void 0&&{payload:R},{},Y!==void 0&&{meta:Y})})}}function F(O){return i(O)&&s(1),u(O)||l(1),O.getType()}function U(O,E){i(O)&&s(1),A(O)&&C(1);var L=E!=null?E(O):function(){return{type:O}};return Object.assign(L,{getType:function(){return O},toString:function(){return O}})}var D={createAction:function(O,E){var L=E==null?function(){return P(O)}:E(P.bind(null,O));return Object.assign(L,{getType:function(){return O},toString:function(){return O}})},createCustomAction:U,createStandardAction:function(O){return i(O)&&s(1),A(O)&&C(1),Object.assign(function(){return U(O,function(E){return function(L,R){return{type:E,payload:L,meta:R}}})},{map:function(E){return U(O,function(L){return function(R,Y){return Object.assign(E(R,Y),{type:L})}})}})}};n.action=P,n.createAction=I,n.createAsyncAction=function(O,E,L,R){return function(){var Y=[O,E,L,R].map(function($,me){return Array.isArray($)?I($[0],$[1],$[2])():typeof $=="string"||typeof $=="symbol"?I($)():void(me<3&&function(ee){throw new Error("Argument "+ee+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(me))});return{request:Y[0],success:Y[1],failure:Y[2],cancel:Y[3]}}},n.createCustomAction=W,n.createReducer=function O(E,L){L===void 0&&(L={});var R=Object.assign({},L),Y=function($,me){var ee=Array.isArray($)?$:[$],fe={};return ee.map(function(Oe,ro){return u(Oe)?F(Oe):y(Oe)?Oe:function(io){throw new Error("Argument "+io+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(ro+1)}).forEach(function(Oe){return fe[Oe]=me}),O(E,Object.assign({},R,{},fe))};return Object.assign(function($,me){if($===void 0&&($=E),R.hasOwnProperty(me.type)){var ee=R[me.type];if(typeof ee!="function")throw Error('Reducer under "'+me.type+'" key is not a valid reducer');return ee($,me)}return $},{handlers:Object.assign({},R),handleAction:Y,handleType:Y})},n.deprecated=D,n.getType=F,n.isActionOf=function(O,E){i(O)&&s(1);var L=Array.isArray(O)?O:[O];L.forEach(p);var R=function(Y){return L.some(function($){return Y.type===$.getType()})};return E===void 0?R:R(E)},n.isOfType=function(O,E){i(O)&&s(1);var L=Array.isArray(O)?O:[O];L.forEach(x);var R=function(Y){return L.includes(Y.type)};return E===void 0?R:R(E)}})});var Yf=nt((kA,jf)=>{rt();jf.exports=de("NeosProjectPackages")().NeosUiEditors});var Rt=nt((RA,Jf)=>{rt();Jf.exports=de("vendor")().React});var An=nt((MA,Zf)=>{rt();Zf.exports=de("vendor")().reactRedux});var Vt=nt((LA,Xf)=>{rt();Xf.exports=de("vendor")().PropTypes});var en=nt((BA,Qf)=>{rt();Qf.exports=de("NeosProjectPackages")().NeosUiDecorators});var Sn=nt((GA,Vf)=>{rt();Vf.exports=de("NeosProjectPackages")().ReactUiComponents});var Qi=nt((iS,cl)=>{rt();cl.exports=de("vendor")().reduxSagaEffects});var gl=nt((Xn,kr)=>{(function(){var n,i="4.17.21",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",p="Invalid `variable` option passed into `_.template`",y="__lodash_hash_undefined__",A=500,C="__lodash_placeholder__",x=1,P=2,W=4,I=1,F=2,U=1,D=2,O=4,E=8,L=16,R=32,Y=64,$=128,me=256,ee=512,fe=30,Oe="...",ro=800,io=16,fa=1,Tl=2,kl=3,on=1/0,Wt=9007199254740991,Il=17976931348623157e292,Mr=0/0,dt=4294967295,Rl=dt-1,Fl=dt>>>1,Ml=[["ary",$],["bind",U],["bindKey",D],["curry",E],["curryRight",L],["flip",ee],["partial",R],["partialRight",Y],["rearg",me]],On="[object Arguments]",Dr="[object Array]",Dl="[object AsyncFunction]",er="[object Boolean]",tr="[object Date]",Ll="[object DOMException]",Lr="[object Error]",Wr="[object Function]",la="[object GeneratorFunction]",ot="[object Map]",nr="[object Number]",Wl="[object Null]",_t="[object Object]",da="[object Promise]",Bl="[object Proxy]",rr="[object RegExp]",st="[object Set]",ir="[object String]",Br="[object Symbol]",Ul="[object Undefined]",or="[object WeakMap]",Gl="[object WeakSet]",sr="[object ArrayBuffer]",En="[object DataView]",oo="[object Float32Array]",so="[object Float64Array]",ao="[object Int8Array]",uo="[object Int16Array]",co="[object Int32Array]",fo="[object Uint8Array]",lo="[object Uint8ClampedArray]",po="[object Uint16Array]",ho="[object Uint32Array]",Hl=/\b__p \+= '';/g,Kl=/\b(__p \+=) '' \+/g,ql=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pa=/&(?:amp|lt|gt|quot|#39);/g,ha=/[&<>"']/g,$l=RegExp(pa.source),zl=RegExp(ha.source),jl=/<%-([\s\S]+?)%>/g,Yl=/<%([\s\S]+?)%>/g,ga=/<%=([\s\S]+?)%>/g,Jl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zl=/^\w*$/,Xl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,go=/[\\^$.*+?()[\]{}|]/g,Ql=RegExp(go.source),vo=/^\s+/,Vl=/\s/,ed=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,td=/\{\n\/\* \[wrapped with (.+)\] \*/,nd=/,? & /,rd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,id=/[()=,{}\[\]\/\s]/,od=/\\(\\)?/g,sd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,va=/\w*$/,ad=/^[-+]0x[0-9a-f]+$/i,ud=/^0b[01]+$/i,cd=/^\[object .+?Constructor\]$/,fd=/^0o[0-7]+$/i,ld=/^(?:0|[1-9]\d*)$/,dd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ur=/($^)/,pd=/['\n\r\u2028\u2029\\]/g,Gr="\\ud800-\\udfff",hd="\\u0300-\\u036f",gd="\\ufe20-\\ufe2f",vd="\\u20d0-\\u20ff",ma=hd+gd+vd,ya="\\u2700-\\u27bf",_a="a-z\\xdf-\\xf6\\xf8-\\xff",md="\\xac\\xb1\\xd7\\xf7",yd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_d="\\u2000-\\u206f",Ad=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Aa="A-Z\\xc0-\\xd6\\xd8-\\xde",Sa="\\ufe0e\\ufe0f",wa=md+yd+_d+Ad,mo="['\u2019]",Sd="["+Gr+"]",ba="["+wa+"]",Hr="["+ma+"]",xa="\\d+",wd="["+ya+"]",Ca="["+_a+"]",Oa="[^"+Gr+wa+xa+ya+_a+Aa+"]",yo="\\ud83c[\\udffb-\\udfff]",bd="(?:"+Hr+"|"+yo+")",Ea="[^"+Gr+"]",_o="(?:\\ud83c[\\udde6-\\uddff]){2}",Ao="[\\ud800-\\udbff][\\udc00-\\udfff]",Nn="["+Aa+"]",Na="\\u200d",Pa="(?:"+Ca+"|"+Oa+")",xd="(?:"+Nn+"|"+Oa+")",Ta="(?:"+mo+"(?:d|ll|m|re|s|t|ve))?",ka="(?:"+mo+"(?:D|LL|M|RE|S|T|VE))?",Ia=bd+"?",Ra="["+Sa+"]?",Cd="(?:"+Na+"(?:"+[Ea,_o,Ao].join("|")+")"+Ra+Ia+")*",Od="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ed="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fa=Ra+Ia+Cd,Nd="(?:"+[wd,_o,Ao].join("|")+")"+Fa,Pd="(?:"+[Ea+Hr+"?",Hr,_o,Ao,Sd].join("|")+")",Td=RegExp(mo,"g"),kd=RegExp(Hr,"g"),So=RegExp(yo+"(?="+yo+")|"+Pd+Fa,"g"),Id=RegExp([Nn+"?"+Ca+"+"+Ta+"(?="+[ba,Nn,"$"].join("|")+")",xd+"+"+ka+"(?="+[ba,Nn+Pa,"$"].join("|")+")",Nn+"?"+Pa+"+"+Ta,Nn+"+"+ka,Ed,Od,xa,Nd].join("|"),"g"),Rd=RegExp("["+Na+Gr+ma+Sa+"]"),Fd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Md=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Dd=-1,ue={};ue[oo]=ue[so]=ue[ao]=ue[uo]=ue[co]=ue[fo]=ue[lo]=ue[po]=ue[ho]=!0,ue[On]=ue[Dr]=ue[sr]=ue[er]=ue[En]=ue[tr]=ue[Lr]=ue[Wr]=ue[ot]=ue[nr]=ue[_t]=ue[rr]=ue[st]=ue[ir]=ue[or]=!1;var ae={};ae[On]=ae[Dr]=ae[sr]=ae[En]=ae[er]=ae[tr]=ae[oo]=ae[so]=ae[ao]=ae[uo]=ae[co]=ae[ot]=ae[nr]=ae[_t]=ae[rr]=ae[st]=ae[ir]=ae[Br]=ae[fo]=ae[lo]=ae[po]=ae[ho]=!0,ae[Lr]=ae[Wr]=ae[or]=!1;var Ld={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Wd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ud={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gd=parseFloat,Hd=parseInt,Ma=typeof global=="object"&&global&&global.Object===Object&&global,Kd=typeof self=="object"&&self&&self.Object===Object&&self,Ae=Ma||Kd||Function("return this")(),wo=typeof Xn=="object"&&Xn&&!Xn.nodeType&&Xn,sn=wo&&typeof kr=="object"&&kr&&!kr.nodeType&&kr,Da=sn&&sn.exports===wo,bo=Da&&Ma.process,Ye=function(){try{var g=sn&&sn.require&&sn.require("util").types;return g||bo&&bo.binding&&bo.binding("util")}catch{}}(),La=Ye&&Ye.isArrayBuffer,Wa=Ye&&Ye.isDate,Ba=Ye&&Ye.isMap,Ua=Ye&&Ye.isRegExp,Ga=Ye&&Ye.isSet,Ha=Ye&&Ye.isTypedArray;function Ue(g,_,m){switch(m.length){case 0:return g.call(_);case 1:return g.call(_,m[0]);case 2:return g.call(_,m[0],m[1]);case 3:return g.call(_,m[0],m[1],m[2])}return g.apply(_,m)}function qd(g,_,m,k){for(var z=-1,ne=g==null?0:g.length;++z<ne;){var ye=g[z];_(k,ye,m(ye),g)}return k}function Je(g,_){for(var m=-1,k=g==null?0:g.length;++m<k&&_(g[m],m,g)!==!1;);return g}function $d(g,_){for(var m=g==null?0:g.length;m--&&_(g[m],m,g)!==!1;);return g}function Ka(g,_){for(var m=-1,k=g==null?0:g.length;++m<k;)if(!_(g[m],m,g))return!1;return!0}function Bt(g,_){for(var m=-1,k=g==null?0:g.length,z=0,ne=[];++m<k;){var ye=g[m];_(ye,m,g)&&(ne[z++]=ye)}return ne}function Kr(g,_){var m=g==null?0:g.length;return!!m&&Pn(g,_,0)>-1}function xo(g,_,m){for(var k=-1,z=g==null?0:g.length;++k<z;)if(m(_,g[k]))return!0;return!1}function le(g,_){for(var m=-1,k=g==null?0:g.length,z=Array(k);++m<k;)z[m]=_(g[m],m,g);return z}function Ut(g,_){for(var m=-1,k=_.length,z=g.length;++m<k;)g[z+m]=_[m];return g}function Co(g,_,m,k){var z=-1,ne=g==null?0:g.length;for(k&&ne&&(m=g[++z]);++z<ne;)m=_(m,g[z],z,g);return m}function zd(g,_,m,k){var z=g==null?0:g.length;for(k&&z&&(m=g[--z]);z--;)m=_(m,g[z],z,g);return m}function Oo(g,_){for(var m=-1,k=g==null?0:g.length;++m<k;)if(_(g[m],m,g))return!0;return!1}var jd=Eo("length");function Yd(g){return g.split("")}function Jd(g){return g.match(rd)||[]}function qa(g,_,m){var k;return m(g,function(z,ne,ye){if(_(z,ne,ye))return k=ne,!1}),k}function qr(g,_,m,k){for(var z=g.length,ne=m+(k?1:-1);k?ne--:++ne<z;)if(_(g[ne],ne,g))return ne;return-1}function Pn(g,_,m){return _===_?ap(g,_,m):qr(g,$a,m)}function Zd(g,_,m,k){for(var z=m-1,ne=g.length;++z<ne;)if(k(g[z],_))return z;return-1}function $a(g){return g!==g}function za(g,_){var m=g==null?0:g.length;return m?Po(g,_)/m:Mr}function Eo(g){return function(_){return _==null?n:_[g]}}function No(g){return function(_){return g==null?n:g[_]}}function ja(g,_,m,k,z){return z(g,function(ne,ye,se){m=k?(k=!1,ne):_(m,ne,ye,se)}),m}function Xd(g,_){var m=g.length;for(g.sort(_);m--;)g[m]=g[m].value;return g}function Po(g,_){for(var m,k=-1,z=g.length;++k<z;){var ne=_(g[k]);ne!==n&&(m=m===n?ne:m+ne)}return m}function To(g,_){for(var m=-1,k=Array(g);++m<g;)k[m]=_(m);return k}function Qd(g,_){return le(_,function(m){return[m,g[m]]})}function Ya(g){return g&&g.slice(0,Qa(g)+1).replace(vo,"")}function Ge(g){return function(_){return g(_)}}function ko(g,_){return le(_,function(m){return g[m]})}function ar(g,_){return g.has(_)}function Ja(g,_){for(var m=-1,k=g.length;++m<k&&Pn(_,g[m],0)>-1;);return m}function Za(g,_){for(var m=g.length;m--&&Pn(_,g[m],0)>-1;);return m}function Vd(g,_){for(var m=g.length,k=0;m--;)g[m]===_&&++k;return k}var ep=No(Ld),tp=No(Wd);function np(g){return"\\"+Ud[g]}function rp(g,_){return g==null?n:g[_]}function Tn(g){return Rd.test(g)}function ip(g){return Fd.test(g)}function op(g){for(var _,m=[];!(_=g.next()).done;)m.push(_.value);return m}function Io(g){var _=-1,m=Array(g.size);return g.forEach(function(k,z){m[++_]=[z,k]}),m}function Xa(g,_){return function(m){return g(_(m))}}function Gt(g,_){for(var m=-1,k=g.length,z=0,ne=[];++m<k;){var ye=g[m];(ye===_||ye===C)&&(g[m]=C,ne[z++]=m)}return ne}function $r(g){var _=-1,m=Array(g.size);return g.forEach(function(k){m[++_]=k}),m}function sp(g){var _=-1,m=Array(g.size);return g.forEach(function(k){m[++_]=[k,k]}),m}function ap(g,_,m){for(var k=m-1,z=g.length;++k<z;)if(g[k]===_)return k;return-1}function up(g,_,m){for(var k=m+1;k--;)if(g[k]===_)return k;return k}function kn(g){return Tn(g)?fp(g):jd(g)}function at(g){return Tn(g)?lp(g):Yd(g)}function Qa(g){for(var _=g.length;_--&&Vl.test(g.charAt(_)););return _}var cp=No(Bd);function fp(g){for(var _=So.lastIndex=0;So.test(g);)++_;return _}function lp(g){return g.match(So)||[]}function dp(g){return g.match(Id)||[]}var pp=function g(_){_=_==null?Ae:Ht.defaults(Ae.Object(),_,Ht.pick(Ae,Md));var m=_.Array,k=_.Date,z=_.Error,ne=_.Function,ye=_.Math,se=_.Object,Ro=_.RegExp,hp=_.String,Ze=_.TypeError,zr=m.prototype,gp=ne.prototype,In=se.prototype,jr=_["__core-js_shared__"],Yr=gp.toString,oe=In.hasOwnProperty,vp=0,Va=function(){var e=/[^.]+$/.exec(jr&&jr.keys&&jr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Jr=In.toString,mp=Yr.call(se),yp=Ae._,_p=Ro("^"+Yr.call(oe).replace(go,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zr=Da?_.Buffer:n,Kt=_.Symbol,Xr=_.Uint8Array,eu=Zr?Zr.allocUnsafe:n,Qr=Xa(se.getPrototypeOf,se),tu=se.create,nu=In.propertyIsEnumerable,Vr=zr.splice,ru=Kt?Kt.isConcatSpreadable:n,ur=Kt?Kt.iterator:n,an=Kt?Kt.toStringTag:n,ei=function(){try{var e=dn(se,"defineProperty");return e({},"",{}),e}catch{}}(),Ap=_.clearTimeout!==Ae.clearTimeout&&_.clearTimeout,Sp=k&&k.now!==Ae.Date.now&&k.now,wp=_.setTimeout!==Ae.setTimeout&&_.setTimeout,ti=ye.ceil,ni=ye.floor,Fo=se.getOwnPropertySymbols,bp=Zr?Zr.isBuffer:n,iu=_.isFinite,xp=zr.join,Cp=Xa(se.keys,se),_e=ye.max,Ee=ye.min,Op=k.now,Ep=_.parseInt,ou=ye.random,Np=zr.reverse,Mo=dn(_,"DataView"),cr=dn(_,"Map"),Do=dn(_,"Promise"),Rn=dn(_,"Set"),fr=dn(_,"WeakMap"),lr=dn(se,"create"),ri=fr&&new fr,Fn={},Pp=pn(Mo),Tp=pn(cr),kp=pn(Do),Ip=pn(Rn),Rp=pn(fr),ii=Kt?Kt.prototype:n,dr=ii?ii.valueOf:n,su=ii?ii.toString:n;function c(e){if(he(e)&&!j(e)&&!(e instanceof V)){if(e instanceof Xe)return e;if(oe.call(e,"__wrapped__"))return ac(e)}return new Xe(e)}var Mn=function(){function e(){}return function(t){if(!pe(t))return{};if(tu)return tu(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function oi(){}function Xe(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}c.templateSettings={escape:jl,evaluate:Yl,interpolate:ga,variable:"",imports:{_:c}},c.prototype=oi.prototype,c.prototype.constructor=c,Xe.prototype=Mn(oi.prototype),Xe.prototype.constructor=Xe;function V(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=dt,this.__views__=[]}function Fp(){var e=new V(this.__wrapped__);return e.__actions__=Me(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Me(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Me(this.__views__),e}function Mp(){if(this.__filtered__){var e=new V(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Dp(){var e=this.__wrapped__.value(),t=this.__dir__,r=j(e),o=t<0,a=r?e.length:0,f=Yh(0,a,this.__views__),d=f.start,h=f.end,v=h-d,S=o?h:d-1,w=this.__iteratees__,b=w.length,T=0,M=Ee(v,this.__takeCount__);if(!r||!o&&a==v&&M==v)return Tu(e,this.__actions__);var K=[];e:for(;v--&&T<M;){S+=t;for(var Z=-1,q=e[S];++Z<b;){var Q=w[Z],te=Q.iteratee,qe=Q.type,Re=te(q);if(qe==Tl)q=Re;else if(!Re){if(qe==fa)continue e;break e}}K[T++]=q}return K}V.prototype=Mn(oi.prototype),V.prototype.constructor=V;function un(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Lp(){this.__data__=lr?lr(null):{},this.size=0}function Wp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Bp(e){var t=this.__data__;if(lr){var r=t[e];return r===y?n:r}return oe.call(t,e)?t[e]:n}function Up(e){var t=this.__data__;return lr?t[e]!==n:oe.call(t,e)}function Gp(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=lr&&t===n?y:t,this}un.prototype.clear=Lp,un.prototype.delete=Wp,un.prototype.get=Bp,un.prototype.has=Up,un.prototype.set=Gp;function At(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Hp(){this.__data__=[],this.size=0}function Kp(e){var t=this.__data__,r=si(t,e);if(r<0)return!1;var o=t.length-1;return r==o?t.pop():Vr.call(t,r,1),--this.size,!0}function qp(e){var t=this.__data__,r=si(t,e);return r<0?n:t[r][1]}function $p(e){return si(this.__data__,e)>-1}function zp(e,t){var r=this.__data__,o=si(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}At.prototype.clear=Hp,At.prototype.delete=Kp,At.prototype.get=qp,At.prototype.has=$p,At.prototype.set=zp;function St(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function jp(){this.size=0,this.__data__={hash:new un,map:new(cr||At),string:new un}}function Yp(e){var t=yi(this,e).delete(e);return this.size-=t?1:0,t}function Jp(e){return yi(this,e).get(e)}function Zp(e){return yi(this,e).has(e)}function Xp(e,t){var r=yi(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}St.prototype.clear=jp,St.prototype.delete=Yp,St.prototype.get=Jp,St.prototype.has=Zp,St.prototype.set=Xp;function cn(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new St;++t<r;)this.add(e[t])}function Qp(e){return this.__data__.set(e,y),this}function Vp(e){return this.__data__.has(e)}cn.prototype.add=cn.prototype.push=Qp,cn.prototype.has=Vp;function ut(e){var t=this.__data__=new At(e);this.size=t.size}function eh(){this.__data__=new At,this.size=0}function th(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function nh(e){return this.__data__.get(e)}function rh(e){return this.__data__.has(e)}function ih(e,t){var r=this.__data__;if(r instanceof At){var o=r.__data__;if(!cr||o.length<s-1)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new St(o)}return r.set(e,t),this.size=r.size,this}ut.prototype.clear=eh,ut.prototype.delete=th,ut.prototype.get=nh,ut.prototype.has=rh,ut.prototype.set=ih;function au(e,t){var r=j(e),o=!r&&hn(e),a=!r&&!o&&Yt(e),f=!r&&!o&&!a&&Bn(e),d=r||o||a||f,h=d?To(e.length,hp):[],v=h.length;for(var S in e)(t||oe.call(e,S))&&!(d&&(S=="length"||a&&(S=="offset"||S=="parent")||f&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||Ct(S,v)))&&h.push(S);return h}function uu(e){var t=e.length;return t?e[jo(0,t-1)]:n}function oh(e,t){return _i(Me(e),fn(t,0,e.length))}function sh(e){return _i(Me(e))}function Lo(e,t,r){(r!==n&&!ct(e[t],r)||r===n&&!(t in e))&&wt(e,t,r)}function pr(e,t,r){var o=e[t];(!(oe.call(e,t)&&ct(o,r))||r===n&&!(t in e))&&wt(e,t,r)}function si(e,t){for(var r=e.length;r--;)if(ct(e[r][0],t))return r;return-1}function ah(e,t,r,o){return qt(e,function(a,f,d){t(o,a,r(a),d)}),o}function cu(e,t){return e&&ht(t,Se(t),e)}function uh(e,t){return e&&ht(t,Le(t),e)}function wt(e,t,r){t=="__proto__"&&ei?ei(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Wo(e,t){for(var r=-1,o=t.length,a=m(o),f=e==null;++r<o;)a[r]=f?n:ys(e,t[r]);return a}function fn(e,t,r){return e===e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function Qe(e,t,r,o,a,f){var d,h=t&x,v=t&P,S=t&W;if(r&&(d=a?r(e,o,a,f):r(e)),d!==n)return d;if(!pe(e))return e;var w=j(e);if(w){if(d=Zh(e),!h)return Me(e,d)}else{var b=Ne(e),T=b==Wr||b==la;if(Yt(e))return Ru(e,h);if(b==_t||b==On||T&&!a){if(d=v||T?{}:Qu(e),!h)return v?Bh(e,uh(d,e)):Wh(e,cu(d,e))}else{if(!ae[b])return a?e:{};d=Xh(e,b,h)}}f||(f=new ut);var M=f.get(e);if(M)return M;f.set(e,d),Ec(e)?e.forEach(function(q){d.add(Qe(q,t,r,q,e,f))}):Cc(e)&&e.forEach(function(q,Q){d.set(Q,Qe(q,t,r,Q,e,f))});var K=S?v?is:rs:v?Le:Se,Z=w?n:K(e);return Je(Z||e,function(q,Q){Z&&(Q=q,q=e[Q]),pr(d,Q,Qe(q,t,r,Q,e,f))}),d}function ch(e){var t=Se(e);return function(r){return fu(r,e,t)}}function fu(e,t,r){var o=r.length;if(e==null)return!o;for(e=se(e);o--;){var a=r[o],f=t[a],d=e[a];if(d===n&&!(a in e)||!f(d))return!1}return!0}function lu(e,t,r){if(typeof e!="function")throw new Ze(l);return Ar(function(){e.apply(n,r)},t)}function hr(e,t,r,o){var a=-1,f=Kr,d=!0,h=e.length,v=[],S=t.length;if(!h)return v;r&&(t=le(t,Ge(r))),o?(f=xo,d=!1):t.length>=s&&(f=ar,d=!1,t=new cn(t));e:for(;++a<h;){var w=e[a],b=r==null?w:r(w);if(w=o||w!==0?w:0,d&&b===b){for(var T=S;T--;)if(t[T]===b)continue e;v.push(w)}else f(t,b,o)||v.push(w)}return v}var qt=Wu(pt),du=Wu(Uo,!0);function fh(e,t){var r=!0;return qt(e,function(o,a,f){return r=!!t(o,a,f),r}),r}function ai(e,t,r){for(var o=-1,a=e.length;++o<a;){var f=e[o],d=t(f);if(d!=null&&(h===n?d===d&&!Ke(d):r(d,h)))var h=d,v=f}return v}function lh(e,t,r,o){var a=e.length;for(r=J(r),r<0&&(r=-r>a?0:a+r),o=o===n||o>a?a:J(o),o<0&&(o+=a),o=r>o?0:Pc(o);r<o;)e[r++]=t;return e}function pu(e,t){var r=[];return qt(e,function(o,a,f){t(o,a,f)&&r.push(o)}),r}function xe(e,t,r,o,a){var f=-1,d=e.length;for(r||(r=Vh),a||(a=[]);++f<d;){var h=e[f];t>0&&r(h)?t>1?xe(h,t-1,r,o,a):Ut(a,h):o||(a[a.length]=h)}return a}var Bo=Bu(),hu=Bu(!0);function pt(e,t){return e&&Bo(e,t,Se)}function Uo(e,t){return e&&hu(e,t,Se)}function ui(e,t){return Bt(t,function(r){return Ot(e[r])})}function ln(e,t){t=zt(t,e);for(var r=0,o=t.length;e!=null&&r<o;)e=e[gt(t[r++])];return r&&r==o?e:n}function gu(e,t,r){var o=t(e);return j(e)?o:Ut(o,r(e))}function ke(e){return e==null?e===n?Ul:Wl:an&&an in se(e)?jh(e):sg(e)}function Go(e,t){return e>t}function dh(e,t){return e!=null&&oe.call(e,t)}function ph(e,t){return e!=null&&t in se(e)}function hh(e,t,r){return e>=Ee(t,r)&&e<_e(t,r)}function Ho(e,t,r){for(var o=r?xo:Kr,a=e[0].length,f=e.length,d=f,h=m(f),v=1/0,S=[];d--;){var w=e[d];d&&t&&(w=le(w,Ge(t))),v=Ee(w.length,v),h[d]=!r&&(t||a>=120&&w.length>=120)?new cn(d&&w):n}w=e[0];var b=-1,T=h[0];e:for(;++b<a&&S.length<v;){var M=w[b],K=t?t(M):M;if(M=r||M!==0?M:0,!(T?ar(T,K):o(S,K,r))){for(d=f;--d;){var Z=h[d];if(!(Z?ar(Z,K):o(e[d],K,r)))continue e}T&&T.push(K),S.push(M)}}return S}function gh(e,t,r,o){return pt(e,function(a,f,d){t(o,r(a),f,d)}),o}function gr(e,t,r){t=zt(t,e),e=nc(e,t);var o=e==null?e:e[gt(et(t))];return o==null?n:Ue(o,e,r)}function vu(e){return he(e)&&ke(e)==On}function vh(e){return he(e)&&ke(e)==sr}function mh(e){return he(e)&&ke(e)==tr}function vr(e,t,r,o,a){return e===t?!0:e==null||t==null||!he(e)&&!he(t)?e!==e&&t!==t:yh(e,t,r,o,vr,a)}function yh(e,t,r,o,a,f){var d=j(e),h=j(t),v=d?Dr:Ne(e),S=h?Dr:Ne(t);v=v==On?_t:v,S=S==On?_t:S;var w=v==_t,b=S==_t,T=v==S;if(T&&Yt(e)){if(!Yt(t))return!1;d=!0,w=!1}if(T&&!w)return f||(f=new ut),d||Bn(e)?Ju(e,t,r,o,a,f):$h(e,t,v,r,o,a,f);if(!(r&I)){var M=w&&oe.call(e,"__wrapped__"),K=b&&oe.call(t,"__wrapped__");if(M||K){var Z=M?e.value():e,q=K?t.value():t;return f||(f=new ut),a(Z,q,r,o,f)}}return T?(f||(f=new ut),zh(e,t,r,o,a,f)):!1}function _h(e){return he(e)&&Ne(e)==ot}function Ko(e,t,r,o){var a=r.length,f=a,d=!o;if(e==null)return!f;for(e=se(e);a--;){var h=r[a];if(d&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++a<f;){h=r[a];var v=h[0],S=e[v],w=h[1];if(d&&h[2]){if(S===n&&!(v in e))return!1}else{var b=new ut;if(o)var T=o(S,w,v,e,t,b);if(!(T===n?vr(w,S,I|F,o,b):T))return!1}}return!0}function mu(e){if(!pe(e)||tg(e))return!1;var t=Ot(e)?_p:cd;return t.test(pn(e))}function Ah(e){return he(e)&&ke(e)==rr}function Sh(e){return he(e)&&Ne(e)==st}function wh(e){return he(e)&&Ci(e.length)&&!!ue[ke(e)]}function yu(e){return typeof e=="function"?e:e==null?We:typeof e=="object"?j(e)?Su(e[0],e[1]):Au(e):Uc(e)}function qo(e){if(!_r(e))return Cp(e);var t=[];for(var r in se(e))oe.call(e,r)&&r!="constructor"&&t.push(r);return t}function bh(e){if(!pe(e))return og(e);var t=_r(e),r=[];for(var o in e)o=="constructor"&&(t||!oe.call(e,o))||r.push(o);return r}function $o(e,t){return e<t}function _u(e,t){var r=-1,o=De(e)?m(e.length):[];return qt(e,function(a,f,d){o[++r]=t(a,f,d)}),o}function Au(e){var t=ss(e);return t.length==1&&t[0][2]?ec(t[0][0],t[0][1]):function(r){return r===e||Ko(r,e,t)}}function Su(e,t){return us(e)&&Vu(t)?ec(gt(e),t):function(r){var o=ys(r,e);return o===n&&o===t?_s(r,e):vr(t,o,I|F)}}function ci(e,t,r,o,a){e!==t&&Bo(t,function(f,d){if(a||(a=new ut),pe(f))xh(e,t,d,r,ci,o,a);else{var h=o?o(fs(e,d),f,d+"",e,t,a):n;h===n&&(h=f),Lo(e,d,h)}},Le)}function xh(e,t,r,o,a,f,d){var h=fs(e,r),v=fs(t,r),S=d.get(v);if(S){Lo(e,r,S);return}var w=f?f(h,v,r+"",e,t,d):n,b=w===n;if(b){var T=j(v),M=!T&&Yt(v),K=!T&&!M&&Bn(v);w=v,T||M||K?j(h)?w=h:ge(h)?w=Me(h):M?(b=!1,w=Ru(v,!0)):K?(b=!1,w=Fu(v,!0)):w=[]:Sr(v)||hn(v)?(w=h,hn(h)?w=Tc(h):(!pe(h)||Ot(h))&&(w=Qu(v))):b=!1}b&&(d.set(v,w),a(w,v,o,f,d),d.delete(v)),Lo(e,r,w)}function wu(e,t){var r=e.length;if(r)return t+=t<0?r:0,Ct(t,r)?e[t]:n}function bu(e,t,r){t.length?t=le(t,function(f){return j(f)?function(d){return ln(d,f.length===1?f[0]:f)}:f}):t=[We];var o=-1;t=le(t,Ge(H()));var a=_u(e,function(f,d,h){var v=le(t,function(S){return S(f)});return{criteria:v,index:++o,value:f}});return Xd(a,function(f,d){return Lh(f,d,r)})}function Ch(e,t){return xu(e,t,function(r,o){return _s(e,o)})}function xu(e,t,r){for(var o=-1,a=t.length,f={};++o<a;){var d=t[o],h=ln(e,d);r(h,d)&&mr(f,zt(d,e),h)}return f}function Oh(e){return function(t){return ln(t,e)}}function zo(e,t,r,o){var a=o?Zd:Pn,f=-1,d=t.length,h=e;for(e===t&&(t=Me(t)),r&&(h=le(e,Ge(r)));++f<d;)for(var v=0,S=t[f],w=r?r(S):S;(v=a(h,w,v,o))>-1;)h!==e&&Vr.call(h,v,1),Vr.call(e,v,1);return e}function Cu(e,t){for(var r=e?t.length:0,o=r-1;r--;){var a=t[r];if(r==o||a!==f){var f=a;Ct(a)?Vr.call(e,a,1):Zo(e,a)}}return e}function jo(e,t){return e+ni(ou()*(t-e+1))}function Eh(e,t,r,o){for(var a=-1,f=_e(ti((t-e)/(r||1)),0),d=m(f);f--;)d[o?f:++a]=e,e+=r;return d}function Yo(e,t){var r="";if(!e||t<1||t>Wt)return r;do t%2&&(r+=e),t=ni(t/2),t&&(e+=e);while(t);return r}function X(e,t){return ls(tc(e,t,We),e+"")}function Nh(e){return uu(Un(e))}function Ph(e,t){var r=Un(e);return _i(r,fn(t,0,r.length))}function mr(e,t,r,o){if(!pe(e))return e;t=zt(t,e);for(var a=-1,f=t.length,d=f-1,h=e;h!=null&&++a<f;){var v=gt(t[a]),S=r;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(a!=d){var w=h[v];S=o?o(w,v,h):n,S===n&&(S=pe(w)?w:Ct(t[a+1])?[]:{})}pr(h,v,S),h=h[v]}return e}var Ou=ri?function(e,t){return ri.set(e,t),e}:We,Th=ei?function(e,t){return ei(e,"toString",{configurable:!0,enumerable:!1,value:Ss(t),writable:!0})}:We;function kh(e){return _i(Un(e))}function Ve(e,t,r){var o=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var f=m(a);++o<a;)f[o]=e[o+t];return f}function Ih(e,t){var r;return qt(e,function(o,a,f){return r=t(o,a,f),!r}),!!r}function fi(e,t,r){var o=0,a=e==null?o:e.length;if(typeof t=="number"&&t===t&&a<=Fl){for(;o<a;){var f=o+a>>>1,d=e[f];d!==null&&!Ke(d)&&(r?d<=t:d<t)?o=f+1:a=f}return a}return Jo(e,t,We,r)}function Jo(e,t,r,o){var a=0,f=e==null?0:e.length;if(f===0)return 0;t=r(t);for(var d=t!==t,h=t===null,v=Ke(t),S=t===n;a<f;){var w=ni((a+f)/2),b=r(e[w]),T=b!==n,M=b===null,K=b===b,Z=Ke(b);if(d)var q=o||K;else S?q=K&&(o||T):h?q=K&&T&&(o||!M):v?q=K&&T&&!M&&(o||!Z):M||Z?q=!1:q=o?b<=t:b<t;q?a=w+1:f=w}return Ee(f,Rl)}function Eu(e,t){for(var r=-1,o=e.length,a=0,f=[];++r<o;){var d=e[r],h=t?t(d):d;if(!r||!ct(h,v)){var v=h;f[a++]=d===0?0:d}}return f}function Nu(e){return typeof e=="number"?e:Ke(e)?Mr:+e}function He(e){if(typeof e=="string")return e;if(j(e))return le(e,He)+"";if(Ke(e))return su?su.call(e):"";var t=e+"";return t=="0"&&1/e==-on?"-0":t}function $t(e,t,r){var o=-1,a=Kr,f=e.length,d=!0,h=[],v=h;if(r)d=!1,a=xo;else if(f>=s){var S=t?null:Kh(e);if(S)return $r(S);d=!1,a=ar,v=new cn}else v=t?[]:h;e:for(;++o<f;){var w=e[o],b=t?t(w):w;if(w=r||w!==0?w:0,d&&b===b){for(var T=v.length;T--;)if(v[T]===b)continue e;t&&v.push(b),h.push(w)}else a(v,b,r)||(v!==h&&v.push(b),h.push(w))}return h}function Zo(e,t){return t=zt(t,e),e=nc(e,t),e==null||delete e[gt(et(t))]}function Pu(e,t,r,o){return mr(e,t,r(ln(e,t)),o)}function li(e,t,r,o){for(var a=e.length,f=o?a:-1;(o?f--:++f<a)&&t(e[f],f,e););return r?Ve(e,o?0:f,o?f+1:a):Ve(e,o?f+1:0,o?a:f)}function Tu(e,t){var r=e;return r instanceof V&&(r=r.value()),Co(t,function(o,a){return a.func.apply(a.thisArg,Ut([o],a.args))},r)}function Xo(e,t,r){var o=e.length;if(o<2)return o?$t(e[0]):[];for(var a=-1,f=m(o);++a<o;)for(var d=e[a],h=-1;++h<o;)h!=a&&(f[a]=hr(f[a]||d,e[h],t,r));return $t(xe(f,1),t,r)}function ku(e,t,r){for(var o=-1,a=e.length,f=t.length,d={};++o<a;){var h=o<f?t[o]:n;r(d,e[o],h)}return d}function Qo(e){return ge(e)?e:[]}function Vo(e){return typeof e=="function"?e:We}function zt(e,t){return j(e)?e:us(e,t)?[e]:sc(re(e))}var Rh=X;function jt(e,t,r){var o=e.length;return r=r===n?o:r,!t&&r>=o?e:Ve(e,t,r)}var Iu=Ap||function(e){return Ae.clearTimeout(e)};function Ru(e,t){if(t)return e.slice();var r=e.length,o=eu?eu(r):new e.constructor(r);return e.copy(o),o}function es(e){var t=new e.constructor(e.byteLength);return new Xr(t).set(new Xr(e)),t}function Fh(e,t){var r=t?es(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Mh(e){var t=new e.constructor(e.source,va.exec(e));return t.lastIndex=e.lastIndex,t}function Dh(e){return dr?se(dr.call(e)):{}}function Fu(e,t){var r=t?es(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Mu(e,t){if(e!==t){var r=e!==n,o=e===null,a=e===e,f=Ke(e),d=t!==n,h=t===null,v=t===t,S=Ke(t);if(!h&&!S&&!f&&e>t||f&&d&&v&&!h&&!S||o&&d&&v||!r&&v||!a)return 1;if(!o&&!f&&!S&&e<t||S&&r&&a&&!o&&!f||h&&r&&a||!d&&a||!v)return-1}return 0}function Lh(e,t,r){for(var o=-1,a=e.criteria,f=t.criteria,d=a.length,h=r.length;++o<d;){var v=Mu(a[o],f[o]);if(v){if(o>=h)return v;var S=r[o];return v*(S=="desc"?-1:1)}}return e.index-t.index}function Du(e,t,r,o){for(var a=-1,f=e.length,d=r.length,h=-1,v=t.length,S=_e(f-d,0),w=m(v+S),b=!o;++h<v;)w[h]=t[h];for(;++a<d;)(b||a<f)&&(w[r[a]]=e[a]);for(;S--;)w[h++]=e[a++];return w}function Lu(e,t,r,o){for(var a=-1,f=e.length,d=-1,h=r.length,v=-1,S=t.length,w=_e(f-h,0),b=m(w+S),T=!o;++a<w;)b[a]=e[a];for(var M=a;++v<S;)b[M+v]=t[v];for(;++d<h;)(T||a<f)&&(b[M+r[d]]=e[a++]);return b}function Me(e,t){var r=-1,o=e.length;for(t||(t=m(o));++r<o;)t[r]=e[r];return t}function ht(e,t,r,o){var a=!r;r||(r={});for(var f=-1,d=t.length;++f<d;){var h=t[f],v=o?o(r[h],e[h],h,r,e):n;v===n&&(v=e[h]),a?wt(r,h,v):pr(r,h,v)}return r}function Wh(e,t){return ht(e,as(e),t)}function Bh(e,t){return ht(e,Zu(e),t)}function di(e,t){return function(r,o){var a=j(r)?qd:ah,f=t?t():{};return a(r,e,H(o,2),f)}}function Dn(e){return X(function(t,r){var o=-1,a=r.length,f=a>1?r[a-1]:n,d=a>2?r[2]:n;for(f=e.length>3&&typeof f=="function"?(a--,f):n,d&&Ie(r[0],r[1],d)&&(f=a<3?n:f,a=1),t=se(t);++o<a;){var h=r[o];h&&e(t,h,o,f)}return t})}function Wu(e,t){return function(r,o){if(r==null)return r;if(!De(r))return e(r,o);for(var a=r.length,f=t?a:-1,d=se(r);(t?f--:++f<a)&&o(d[f],f,d)!==!1;);return r}}function Bu(e){return function(t,r,o){for(var a=-1,f=se(t),d=o(t),h=d.length;h--;){var v=d[e?h:++a];if(r(f[v],v,f)===!1)break}return t}}function Uh(e,t,r){var o=t&U,a=yr(e);function f(){var d=this&&this!==Ae&&this instanceof f?a:e;return d.apply(o?r:this,arguments)}return f}function Uu(e){return function(t){t=re(t);var r=Tn(t)?at(t):n,o=r?r[0]:t.charAt(0),a=r?jt(r,1).join(""):t.slice(1);return o[e]()+a}}function Ln(e){return function(t){return Co(Wc(Lc(t).replace(Td,"")),e,"")}}function yr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Mn(e.prototype),o=e.apply(r,t);return pe(o)?o:r}}function Gh(e,t,r){var o=yr(e);function a(){for(var f=arguments.length,d=m(f),h=f,v=Wn(a);h--;)d[h]=arguments[h];var S=f<3&&d[0]!==v&&d[f-1]!==v?[]:Gt(d,v);if(f-=S.length,f<r)return $u(e,t,pi,a.placeholder,n,d,S,n,n,r-f);var w=this&&this!==Ae&&this instanceof a?o:e;return Ue(w,this,d)}return a}function Gu(e){return function(t,r,o){var a=se(t);if(!De(t)){var f=H(r,3);t=Se(t),r=function(h){return f(a[h],h,a)}}var d=e(t,r,o);return d>-1?a[f?t[d]:d]:n}}function Hu(e){return xt(function(t){var r=t.length,o=r,a=Xe.prototype.thru;for(e&&t.reverse();o--;){var f=t[o];if(typeof f!="function")throw new Ze(l);if(a&&!d&&mi(f)=="wrapper")var d=new Xe([],!0)}for(o=d?o:r;++o<r;){f=t[o];var h=mi(f),v=h=="wrapper"?os(f):n;v&&cs(v[0])&&v[1]==($|E|R|me)&&!v[4].length&&v[9]==1?d=d[mi(v[0])].apply(d,v[3]):d=f.length==1&&cs(f)?d[h]():d.thru(f)}return function(){var S=arguments,w=S[0];if(d&&S.length==1&&j(w))return d.plant(w).value();for(var b=0,T=r?t[b].apply(this,S):w;++b<r;)T=t[b].call(this,T);return T}})}function pi(e,t,r,o,a,f,d,h,v,S){var w=t&$,b=t&U,T=t&D,M=t&(E|L),K=t&ee,Z=T?n:yr(e);function q(){for(var Q=arguments.length,te=m(Q),qe=Q;qe--;)te[qe]=arguments[qe];if(M)var Re=Wn(q),$e=Vd(te,Re);if(o&&(te=Du(te,o,a,M)),f&&(te=Lu(te,f,d,M)),Q-=$e,M&&Q<S){var ve=Gt(te,Re);return $u(e,t,pi,q.placeholder,r,te,ve,h,v,S-Q)}var ft=b?r:this,Nt=T?ft[e]:e;return Q=te.length,h?te=ag(te,h):K&&Q>1&&te.reverse(),w&&v<Q&&(te.length=v),this&&this!==Ae&&this instanceof q&&(Nt=Z||yr(Nt)),Nt.apply(ft,te)}return q}function Ku(e,t){return function(r,o){return gh(r,e,t(o),{})}}function hi(e,t){return function(r,o){var a;if(r===n&&o===n)return t;if(r!==n&&(a=r),o!==n){if(a===n)return o;typeof r=="string"||typeof o=="string"?(r=He(r),o=He(o)):(r=Nu(r),o=Nu(o)),a=e(r,o)}return a}}function ts(e){return xt(function(t){return t=le(t,Ge(H())),X(function(r){var o=this;return e(t,function(a){return Ue(a,o,r)})})})}function gi(e,t){t=t===n?" ":He(t);var r=t.length;if(r<2)return r?Yo(t,e):t;var o=Yo(t,ti(e/kn(t)));return Tn(t)?jt(at(o),0,e).join(""):o.slice(0,e)}function Hh(e,t,r,o){var a=t&U,f=yr(e);function d(){for(var h=-1,v=arguments.length,S=-1,w=o.length,b=m(w+v),T=this&&this!==Ae&&this instanceof d?f:e;++S<w;)b[S]=o[S];for(;v--;)b[S++]=arguments[++h];return Ue(T,a?r:this,b)}return d}function qu(e){return function(t,r,o){return o&&typeof o!="number"&&Ie(t,r,o)&&(r=o=n),t=Et(t),r===n?(r=t,t=0):r=Et(r),o=o===n?t<r?1:-1:Et(o),Eh(t,r,o,e)}}function vi(e){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=tt(t),r=tt(r)),e(t,r)}}function $u(e,t,r,o,a,f,d,h,v,S){var w=t&E,b=w?d:n,T=w?n:d,M=w?f:n,K=w?n:f;t|=w?R:Y,t&=~(w?Y:R),t&O||(t&=~(U|D));var Z=[e,t,a,M,b,K,T,h,v,S],q=r.apply(n,Z);return cs(e)&&rc(q,Z),q.placeholder=o,ic(q,e,t)}function ns(e){var t=ye[e];return function(r,o){if(r=tt(r),o=o==null?0:Ee(J(o),292),o&&iu(r)){var a=(re(r)+"e").split("e"),f=t(a[0]+"e"+(+a[1]+o));return a=(re(f)+"e").split("e"),+(a[0]+"e"+(+a[1]-o))}return t(r)}}var Kh=Rn&&1/$r(new Rn([,-0]))[1]==on?function(e){return new Rn(e)}:xs;function zu(e){return function(t){var r=Ne(t);return r==ot?Io(t):r==st?sp(t):Qd(t,e(t))}}function bt(e,t,r,o,a,f,d,h){var v=t&D;if(!v&&typeof e!="function")throw new Ze(l);var S=o?o.length:0;if(S||(t&=~(R|Y),o=a=n),d=d===n?d:_e(J(d),0),h=h===n?h:J(h),S-=a?a.length:0,t&Y){var w=o,b=a;o=a=n}var T=v?n:os(e),M=[e,t,r,o,a,w,b,f,d,h];if(T&&ig(M,T),e=M[0],t=M[1],r=M[2],o=M[3],a=M[4],h=M[9]=M[9]===n?v?0:e.length:_e(M[9]-S,0),!h&&t&(E|L)&&(t&=~(E|L)),!t||t==U)var K=Uh(e,t,r);else t==E||t==L?K=Gh(e,t,h):(t==R||t==(U|R))&&!a.length?K=Hh(e,t,r,o):K=pi.apply(n,M);var Z=T?Ou:rc;return ic(Z(K,M),e,t)}function ju(e,t,r,o){return e===n||ct(e,In[r])&&!oe.call(o,r)?t:e}function Yu(e,t,r,o,a,f){return pe(e)&&pe(t)&&(f.set(t,e),ci(e,t,n,Yu,f),f.delete(t)),e}function qh(e){return Sr(e)?n:e}function Ju(e,t,r,o,a,f){var d=r&I,h=e.length,v=t.length;if(h!=v&&!(d&&v>h))return!1;var S=f.get(e),w=f.get(t);if(S&&w)return S==t&&w==e;var b=-1,T=!0,M=r&F?new cn:n;for(f.set(e,t),f.set(t,e);++b<h;){var K=e[b],Z=t[b];if(o)var q=d?o(Z,K,b,t,e,f):o(K,Z,b,e,t,f);if(q!==n){if(q)continue;T=!1;break}if(M){if(!Oo(t,function(Q,te){if(!ar(M,te)&&(K===Q||a(K,Q,r,o,f)))return M.push(te)})){T=!1;break}}else if(!(K===Z||a(K,Z,r,o,f))){T=!1;break}}return f.delete(e),f.delete(t),T}function $h(e,t,r,o,a,f,d){switch(r){case En:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case sr:return!(e.byteLength!=t.byteLength||!f(new Xr(e),new Xr(t)));case er:case tr:case nr:return ct(+e,+t);case Lr:return e.name==t.name&&e.message==t.message;case rr:case ir:return e==t+"";case ot:var h=Io;case st:var v=o&I;if(h||(h=$r),e.size!=t.size&&!v)return!1;var S=d.get(e);if(S)return S==t;o|=F,d.set(e,t);var w=Ju(h(e),h(t),o,a,f,d);return d.delete(e),w;case Br:if(dr)return dr.call(e)==dr.call(t)}return!1}function zh(e,t,r,o,a,f){var d=r&I,h=rs(e),v=h.length,S=rs(t),w=S.length;if(v!=w&&!d)return!1;for(var b=v;b--;){var T=h[b];if(!(d?T in t:oe.call(t,T)))return!1}var M=f.get(e),K=f.get(t);if(M&&K)return M==t&&K==e;var Z=!0;f.set(e,t),f.set(t,e);for(var q=d;++b<v;){T=h[b];var Q=e[T],te=t[T];if(o)var qe=d?o(te,Q,T,t,e,f):o(Q,te,T,e,t,f);if(!(qe===n?Q===te||a(Q,te,r,o,f):qe)){Z=!1;break}q||(q=T=="constructor")}if(Z&&!q){var Re=e.constructor,$e=t.constructor;Re!=$e&&"constructor"in e&&"constructor"in t&&!(typeof Re=="function"&&Re instanceof Re&&typeof $e=="function"&&$e instanceof $e)&&(Z=!1)}return f.delete(e),f.delete(t),Z}function xt(e){return ls(tc(e,n,fc),e+"")}function rs(e){return gu(e,Se,as)}function is(e){return gu(e,Le,Zu)}var os=ri?function(e){return ri.get(e)}:xs;function mi(e){for(var t=e.name+"",r=Fn[t],o=oe.call(Fn,t)?r.length:0;o--;){var a=r[o],f=a.func;if(f==null||f==e)return a.name}return t}function Wn(e){var t=oe.call(c,"placeholder")?c:e;return t.placeholder}function H(){var e=c.iteratee||ws;return e=e===ws?yu:e,arguments.length?e(arguments[0],arguments[1]):e}function yi(e,t){var r=e.__data__;return eg(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ss(e){for(var t=Se(e),r=t.length;r--;){var o=t[r],a=e[o];t[r]=[o,a,Vu(a)]}return t}function dn(e,t){var r=rp(e,t);return mu(r)?r:n}function jh(e){var t=oe.call(e,an),r=e[an];try{e[an]=n;var o=!0}catch{}var a=Jr.call(e);return o&&(t?e[an]=r:delete e[an]),a}var as=Fo?function(e){return e==null?[]:(e=se(e),Bt(Fo(e),function(t){return nu.call(e,t)}))}:Cs,Zu=Fo?function(e){for(var t=[];e;)Ut(t,as(e)),e=Qr(e);return t}:Cs,Ne=ke;(Mo&&Ne(new Mo(new ArrayBuffer(1)))!=En||cr&&Ne(new cr)!=ot||Do&&Ne(Do.resolve())!=da||Rn&&Ne(new Rn)!=st||fr&&Ne(new fr)!=or)&&(Ne=function(e){var t=ke(e),r=t==_t?e.constructor:n,o=r?pn(r):"";if(o)switch(o){case Pp:return En;case Tp:return ot;case kp:return da;case Ip:return st;case Rp:return or}return t});function Yh(e,t,r){for(var o=-1,a=r.length;++o<a;){var f=r[o],d=f.size;switch(f.type){case"drop":e+=d;break;case"dropRight":t-=d;break;case"take":t=Ee(t,e+d);break;case"takeRight":e=_e(e,t-d);break}}return{start:e,end:t}}function Jh(e){var t=e.match(td);return t?t[1].split(nd):[]}function Xu(e,t,r){t=zt(t,e);for(var o=-1,a=t.length,f=!1;++o<a;){var d=gt(t[o]);if(!(f=e!=null&&r(e,d)))break;e=e[d]}return f||++o!=a?f:(a=e==null?0:e.length,!!a&&Ci(a)&&Ct(d,a)&&(j(e)||hn(e)))}function Zh(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&oe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function Qu(e){return typeof e.constructor=="function"&&!_r(e)?Mn(Qr(e)):{}}function Xh(e,t,r){var o=e.constructor;switch(t){case sr:return es(e);case er:case tr:return new o(+e);case En:return Fh(e,r);case oo:case so:case ao:case uo:case co:case fo:case lo:case po:case ho:return Fu(e,r);case ot:return new o;case nr:case ir:return new o(e);case rr:return Mh(e);case st:return new o;case Br:return Dh(e)}}function Qh(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(ed,`{
/* [wrapped with `+t+`] */
`)}function Vh(e){return j(e)||hn(e)||!!(ru&&e&&e[ru])}function Ct(e,t){var r=typeof e;return t=t??Wt,!!t&&(r=="number"||r!="symbol"&&ld.test(e))&&e>-1&&e%1==0&&e<t}function Ie(e,t,r){if(!pe(r))return!1;var o=typeof t;return(o=="number"?De(r)&&Ct(t,r.length):o=="string"&&t in r)?ct(r[t],e):!1}function us(e,t){if(j(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Ke(e)?!0:Zl.test(e)||!Jl.test(e)||t!=null&&e in se(t)}function eg(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function cs(e){var t=mi(e),r=c[t];if(typeof r!="function"||!(t in V.prototype))return!1;if(e===r)return!0;var o=os(r);return!!o&&e===o[0]}function tg(e){return!!Va&&Va in e}var ng=jr?Ot:Os;function _r(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||In;return e===r}function Vu(e){return e===e&&!pe(e)}function ec(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==n||e in se(r))}}function rg(e){var t=bi(e,function(o){return r.size===A&&r.clear(),o}),r=t.cache;return t}function ig(e,t){var r=e[1],o=t[1],a=r|o,f=a<(U|D|$),d=o==$&&r==E||o==$&&r==me&&e[7].length<=t[8]||o==($|me)&&t[7].length<=t[8]&&r==E;if(!(f||d))return e;o&U&&(e[2]=t[2],a|=r&U?0:O);var h=t[3];if(h){var v=e[3];e[3]=v?Du(v,h,t[4]):h,e[4]=v?Gt(e[3],C):t[4]}return h=t[5],h&&(v=e[5],e[5]=v?Lu(v,h,t[6]):h,e[6]=v?Gt(e[5],C):t[6]),h=t[7],h&&(e[7]=h),o&$&&(e[8]=e[8]==null?t[8]:Ee(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function og(e){var t=[];if(e!=null)for(var r in se(e))t.push(r);return t}function sg(e){return Jr.call(e)}function tc(e,t,r){return t=_e(t===n?e.length-1:t,0),function(){for(var o=arguments,a=-1,f=_e(o.length-t,0),d=m(f);++a<f;)d[a]=o[t+a];a=-1;for(var h=m(t+1);++a<t;)h[a]=o[a];return h[t]=r(d),Ue(e,this,h)}}function nc(e,t){return t.length<2?e:ln(e,Ve(t,0,-1))}function ag(e,t){for(var r=e.length,o=Ee(t.length,r),a=Me(e);o--;){var f=t[o];e[o]=Ct(f,r)?a[f]:n}return e}function fs(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var rc=oc(Ou),Ar=wp||function(e,t){return Ae.setTimeout(e,t)},ls=oc(Th);function ic(e,t,r){var o=t+"";return ls(e,Qh(o,ug(Jh(o),r)))}function oc(e){var t=0,r=0;return function(){var o=Op(),a=io-(o-r);if(r=o,a>0){if(++t>=ro)return arguments[0]}else t=0;return e.apply(n,arguments)}}function _i(e,t){var r=-1,o=e.length,a=o-1;for(t=t===n?o:t;++r<t;){var f=jo(r,a),d=e[f];e[f]=e[r],e[r]=d}return e.length=t,e}var sc=rg(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Xl,function(r,o,a,f){t.push(a?f.replace(od,"$1"):o||r)}),t});function gt(e){if(typeof e=="string"||Ke(e))return e;var t=e+"";return t=="0"&&1/e==-on?"-0":t}function pn(e){if(e!=null){try{return Yr.call(e)}catch{}try{return e+""}catch{}}return""}function ug(e,t){return Je(Ml,function(r){var o="_."+r[0];t&r[1]&&!Kr(e,o)&&e.push(o)}),e.sort()}function ac(e){if(e instanceof V)return e.clone();var t=new Xe(e.__wrapped__,e.__chain__);return t.__actions__=Me(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function cg(e,t,r){(r?Ie(e,t,r):t===n)?t=1:t=_e(J(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var a=0,f=0,d=m(ti(o/t));a<o;)d[f++]=Ve(e,a,a+=t);return d}function fg(e){for(var t=-1,r=e==null?0:e.length,o=0,a=[];++t<r;){var f=e[t];f&&(a[o++]=f)}return a}function lg(){var e=arguments.length;if(!e)return[];for(var t=m(e-1),r=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Ut(j(r)?Me(r):[r],xe(t,1))}var dg=X(function(e,t){return ge(e)?hr(e,xe(t,1,ge,!0)):[]}),pg=X(function(e,t){var r=et(t);return ge(r)&&(r=n),ge(e)?hr(e,xe(t,1,ge,!0),H(r,2)):[]}),hg=X(function(e,t){var r=et(t);return ge(r)&&(r=n),ge(e)?hr(e,xe(t,1,ge,!0),n,r):[]});function gg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),Ve(e,t<0?0:t,o)):[]}function vg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),t=o-t,Ve(e,0,t<0?0:t)):[]}function mg(e,t){return e&&e.length?li(e,H(t,3),!0,!0):[]}function yg(e,t){return e&&e.length?li(e,H(t,3),!0):[]}function _g(e,t,r,o){var a=e==null?0:e.length;return a?(r&&typeof r!="number"&&Ie(e,t,r)&&(r=0,o=a),lh(e,t,r,o)):[]}function uc(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=r==null?0:J(r);return a<0&&(a=_e(o+a,0)),qr(e,H(t,3),a)}function cc(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=o-1;return r!==n&&(a=J(r),a=r<0?_e(o+a,0):Ee(a,o-1)),qr(e,H(t,3),a,!0)}function fc(e){var t=e==null?0:e.length;return t?xe(e,1):[]}function Ag(e){var t=e==null?0:e.length;return t?xe(e,on):[]}function Sg(e,t){var r=e==null?0:e.length;return r?(t=t===n?1:J(t),xe(e,t)):[]}function wg(e){for(var t=-1,r=e==null?0:e.length,o={};++t<r;){var a=e[t];o[a[0]]=a[1]}return o}function lc(e){return e&&e.length?e[0]:n}function bg(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=r==null?0:J(r);return a<0&&(a=_e(o+a,0)),Pn(e,t,a)}function xg(e){var t=e==null?0:e.length;return t?Ve(e,0,-1):[]}var Cg=X(function(e){var t=le(e,Qo);return t.length&&t[0]===e[0]?Ho(t):[]}),Og=X(function(e){var t=et(e),r=le(e,Qo);return t===et(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Ho(r,H(t,2)):[]}),Eg=X(function(e){var t=et(e),r=le(e,Qo);return t=typeof t=="function"?t:n,t&&r.pop(),r.length&&r[0]===e[0]?Ho(r,n,t):[]});function Ng(e,t){return e==null?"":xp.call(e,t)}function et(e){var t=e==null?0:e.length;return t?e[t-1]:n}function Pg(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=o;return r!==n&&(a=J(r),a=a<0?_e(o+a,0):Ee(a,o-1)),t===t?up(e,t,a):qr(e,$a,a,!0)}function Tg(e,t){return e&&e.length?wu(e,J(t)):n}var kg=X(dc);function dc(e,t){return e&&e.length&&t&&t.length?zo(e,t):e}function Ig(e,t,r){return e&&e.length&&t&&t.length?zo(e,t,H(r,2)):e}function Rg(e,t,r){return e&&e.length&&t&&t.length?zo(e,t,n,r):e}var Fg=xt(function(e,t){var r=e==null?0:e.length,o=Wo(e,t);return Cu(e,le(t,function(a){return Ct(a,r)?+a:a}).sort(Mu)),o});function Mg(e,t){var r=[];if(!(e&&e.length))return r;var o=-1,a=[],f=e.length;for(t=H(t,3);++o<f;){var d=e[o];t(d,o,e)&&(r.push(d),a.push(o))}return Cu(e,a),r}function ds(e){return e==null?e:Np.call(e)}function Dg(e,t,r){var o=e==null?0:e.length;return o?(r&&typeof r!="number"&&Ie(e,t,r)?(t=0,r=o):(t=t==null?0:J(t),r=r===n?o:J(r)),Ve(e,t,r)):[]}function Lg(e,t){return fi(e,t)}function Wg(e,t,r){return Jo(e,t,H(r,2))}function Bg(e,t){var r=e==null?0:e.length;if(r){var o=fi(e,t);if(o<r&&ct(e[o],t))return o}return-1}function Ug(e,t){return fi(e,t,!0)}function Gg(e,t,r){return Jo(e,t,H(r,2),!0)}function Hg(e,t){var r=e==null?0:e.length;if(r){var o=fi(e,t,!0)-1;if(ct(e[o],t))return o}return-1}function Kg(e){return e&&e.length?Eu(e):[]}function qg(e,t){return e&&e.length?Eu(e,H(t,2)):[]}function $g(e){var t=e==null?0:e.length;return t?Ve(e,1,t):[]}function zg(e,t,r){return e&&e.length?(t=r||t===n?1:J(t),Ve(e,0,t<0?0:t)):[]}function jg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),t=o-t,Ve(e,t<0?0:t,o)):[]}function Yg(e,t){return e&&e.length?li(e,H(t,3),!1,!0):[]}function Jg(e,t){return e&&e.length?li(e,H(t,3)):[]}var Zg=X(function(e){return $t(xe(e,1,ge,!0))}),Xg=X(function(e){var t=et(e);return ge(t)&&(t=n),$t(xe(e,1,ge,!0),H(t,2))}),Qg=X(function(e){var t=et(e);return t=typeof t=="function"?t:n,$t(xe(e,1,ge,!0),n,t)});function Vg(e){return e&&e.length?$t(e):[]}function ev(e,t){return e&&e.length?$t(e,H(t,2)):[]}function tv(e,t){return t=typeof t=="function"?t:n,e&&e.length?$t(e,n,t):[]}function ps(e){if(!(e&&e.length))return[];var t=0;return e=Bt(e,function(r){if(ge(r))return t=_e(r.length,t),!0}),To(t,function(r){return le(e,Eo(r))})}function pc(e,t){if(!(e&&e.length))return[];var r=ps(e);return t==null?r:le(r,function(o){return Ue(t,n,o)})}var nv=X(function(e,t){return ge(e)?hr(e,t):[]}),rv=X(function(e){return Xo(Bt(e,ge))}),iv=X(function(e){var t=et(e);return ge(t)&&(t=n),Xo(Bt(e,ge),H(t,2))}),ov=X(function(e){var t=et(e);return t=typeof t=="function"?t:n,Xo(Bt(e,ge),n,t)}),sv=X(ps);function av(e,t){return ku(e||[],t||[],pr)}function uv(e,t){return ku(e||[],t||[],mr)}var cv=X(function(e){var t=e.length,r=t>1?e[t-1]:n;return r=typeof r=="function"?(e.pop(),r):n,pc(e,r)});function hc(e){var t=c(e);return t.__chain__=!0,t}function fv(e,t){return t(e),e}function Ai(e,t){return t(e)}var lv=xt(function(e){var t=e.length,r=t?e[0]:0,o=this.__wrapped__,a=function(f){return Wo(f,e)};return t>1||this.__actions__.length||!(o instanceof V)||!Ct(r)?this.thru(a):(o=o.slice(r,+r+(t?1:0)),o.__actions__.push({func:Ai,args:[a],thisArg:n}),new Xe(o,this.__chain__).thru(function(f){return t&&!f.length&&f.push(n),f}))});function dv(){return hc(this)}function pv(){return new Xe(this.value(),this.__chain__)}function hv(){this.__values__===n&&(this.__values__=Nc(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function gv(){return this}function vv(e){for(var t,r=this;r instanceof oi;){var o=ac(r);o.__index__=0,o.__values__=n,t?a.__wrapped__=o:t=o;var a=o;r=r.__wrapped__}return a.__wrapped__=e,t}function mv(){var e=this.__wrapped__;if(e instanceof V){var t=e;return this.__actions__.length&&(t=new V(this)),t=t.reverse(),t.__actions__.push({func:Ai,args:[ds],thisArg:n}),new Xe(t,this.__chain__)}return this.thru(ds)}function yv(){return Tu(this.__wrapped__,this.__actions__)}var _v=di(function(e,t,r){oe.call(e,r)?++e[r]:wt(e,r,1)});function Av(e,t,r){var o=j(e)?Ka:fh;return r&&Ie(e,t,r)&&(t=n),o(e,H(t,3))}function Sv(e,t){var r=j(e)?Bt:pu;return r(e,H(t,3))}var wv=Gu(uc),bv=Gu(cc);function xv(e,t){return xe(Si(e,t),1)}function Cv(e,t){return xe(Si(e,t),on)}function Ov(e,t,r){return r=r===n?1:J(r),xe(Si(e,t),r)}function gc(e,t){var r=j(e)?Je:qt;return r(e,H(t,3))}function vc(e,t){var r=j(e)?$d:du;return r(e,H(t,3))}var Ev=di(function(e,t,r){oe.call(e,r)?e[r].push(t):wt(e,r,[t])});function Nv(e,t,r,o){e=De(e)?e:Un(e),r=r&&!o?J(r):0;var a=e.length;return r<0&&(r=_e(a+r,0)),Oi(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&Pn(e,t,r)>-1}var Pv=X(function(e,t,r){var o=-1,a=typeof t=="function",f=De(e)?m(e.length):[];return qt(e,function(d){f[++o]=a?Ue(t,d,r):gr(d,t,r)}),f}),Tv=di(function(e,t,r){wt(e,r,t)});function Si(e,t){var r=j(e)?le:_u;return r(e,H(t,3))}function kv(e,t,r,o){return e==null?[]:(j(t)||(t=t==null?[]:[t]),r=o?n:r,j(r)||(r=r==null?[]:[r]),bu(e,t,r))}var Iv=di(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});function Rv(e,t,r){var o=j(e)?Co:ja,a=arguments.length<3;return o(e,H(t,4),r,a,qt)}function Fv(e,t,r){var o=j(e)?zd:ja,a=arguments.length<3;return o(e,H(t,4),r,a,du)}function Mv(e,t){var r=j(e)?Bt:pu;return r(e,xi(H(t,3)))}function Dv(e){var t=j(e)?uu:Nh;return t(e)}function Lv(e,t,r){(r?Ie(e,t,r):t===n)?t=1:t=J(t);var o=j(e)?oh:Ph;return o(e,t)}function Wv(e){var t=j(e)?sh:kh;return t(e)}function Bv(e){if(e==null)return 0;if(De(e))return Oi(e)?kn(e):e.length;var t=Ne(e);return t==ot||t==st?e.size:qo(e).length}function Uv(e,t,r){var o=j(e)?Oo:Ih;return r&&Ie(e,t,r)&&(t=n),o(e,H(t,3))}var Gv=X(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Ie(e,t[0],t[1])?t=[]:r>2&&Ie(t[0],t[1],t[2])&&(t=[t[0]]),bu(e,xe(t,1),[])}),wi=Sp||function(){return Ae.Date.now()};function Hv(e,t){if(typeof t!="function")throw new Ze(l);return e=J(e),function(){if(--e<1)return t.apply(this,arguments)}}function mc(e,t,r){return t=r?n:t,t=e&&t==null?e.length:t,bt(e,$,n,n,n,n,t)}function yc(e,t){var r;if(typeof t!="function")throw new Ze(l);return e=J(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var hs=X(function(e,t,r){var o=U;if(r.length){var a=Gt(r,Wn(hs));o|=R}return bt(e,o,t,r,a)}),_c=X(function(e,t,r){var o=U|D;if(r.length){var a=Gt(r,Wn(_c));o|=R}return bt(t,o,e,r,a)});function Ac(e,t,r){t=r?n:t;var o=bt(e,E,n,n,n,n,n,t);return o.placeholder=Ac.placeholder,o}function Sc(e,t,r){t=r?n:t;var o=bt(e,L,n,n,n,n,n,t);return o.placeholder=Sc.placeholder,o}function wc(e,t,r){var o,a,f,d,h,v,S=0,w=!1,b=!1,T=!0;if(typeof e!="function")throw new Ze(l);t=tt(t)||0,pe(r)&&(w=!!r.leading,b="maxWait"in r,f=b?_e(tt(r.maxWait)||0,t):f,T="trailing"in r?!!r.trailing:T);function M(ve){var ft=o,Nt=a;return o=a=n,S=ve,d=e.apply(Nt,ft),d}function K(ve){return S=ve,h=Ar(Q,t),w?M(ve):d}function Z(ve){var ft=ve-v,Nt=ve-S,Gc=t-ft;return b?Ee(Gc,f-Nt):Gc}function q(ve){var ft=ve-v,Nt=ve-S;return v===n||ft>=t||ft<0||b&&Nt>=f}function Q(){var ve=wi();if(q(ve))return te(ve);h=Ar(Q,Z(ve))}function te(ve){return h=n,T&&o?M(ve):(o=a=n,d)}function qe(){h!==n&&Iu(h),S=0,o=v=a=h=n}function Re(){return h===n?d:te(wi())}function $e(){var ve=wi(),ft=q(ve);if(o=arguments,a=this,v=ve,ft){if(h===n)return K(v);if(b)return Iu(h),h=Ar(Q,t),M(v)}return h===n&&(h=Ar(Q,t)),d}return $e.cancel=qe,$e.flush=Re,$e}var Kv=X(function(e,t){return lu(e,1,t)}),qv=X(function(e,t,r){return lu(e,tt(t)||0,r)});function $v(e){return bt(e,ee)}function bi(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Ze(l);var r=function(){var o=arguments,a=t?t.apply(this,o):o[0],f=r.cache;if(f.has(a))return f.get(a);var d=e.apply(this,o);return r.cache=f.set(a,d)||f,d};return r.cache=new(bi.Cache||St),r}bi.Cache=St;function xi(e){if(typeof e!="function")throw new Ze(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function zv(e){return yc(2,e)}var jv=Rh(function(e,t){t=t.length==1&&j(t[0])?le(t[0],Ge(H())):le(xe(t,1),Ge(H()));var r=t.length;return X(function(o){for(var a=-1,f=Ee(o.length,r);++a<f;)o[a]=t[a].call(this,o[a]);return Ue(e,this,o)})}),gs=X(function(e,t){var r=Gt(t,Wn(gs));return bt(e,R,n,t,r)}),bc=X(function(e,t){var r=Gt(t,Wn(bc));return bt(e,Y,n,t,r)}),Yv=xt(function(e,t){return bt(e,me,n,n,n,t)});function Jv(e,t){if(typeof e!="function")throw new Ze(l);return t=t===n?t:J(t),X(e,t)}function Zv(e,t){if(typeof e!="function")throw new Ze(l);return t=t==null?0:_e(J(t),0),X(function(r){var o=r[t],a=jt(r,0,t);return o&&Ut(a,o),Ue(e,this,a)})}function Xv(e,t,r){var o=!0,a=!0;if(typeof e!="function")throw new Ze(l);return pe(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),wc(e,t,{leading:o,maxWait:t,trailing:a})}function Qv(e){return mc(e,1)}function Vv(e,t){return gs(Vo(t),e)}function em(){if(!arguments.length)return[];var e=arguments[0];return j(e)?e:[e]}function tm(e){return Qe(e,W)}function nm(e,t){return t=typeof t=="function"?t:n,Qe(e,W,t)}function rm(e){return Qe(e,x|W)}function im(e,t){return t=typeof t=="function"?t:n,Qe(e,x|W,t)}function om(e,t){return t==null||fu(e,t,Se(t))}function ct(e,t){return e===t||e!==e&&t!==t}var sm=vi(Go),am=vi(function(e,t){return e>=t}),hn=vu(function(){return arguments}())?vu:function(e){return he(e)&&oe.call(e,"callee")&&!nu.call(e,"callee")},j=m.isArray,um=La?Ge(La):vh;function De(e){return e!=null&&Ci(e.length)&&!Ot(e)}function ge(e){return he(e)&&De(e)}function cm(e){return e===!0||e===!1||he(e)&&ke(e)==er}var Yt=bp||Os,fm=Wa?Ge(Wa):mh;function lm(e){return he(e)&&e.nodeType===1&&!Sr(e)}function dm(e){if(e==null)return!0;if(De(e)&&(j(e)||typeof e=="string"||typeof e.splice=="function"||Yt(e)||Bn(e)||hn(e)))return!e.length;var t=Ne(e);if(t==ot||t==st)return!e.size;if(_r(e))return!qo(e).length;for(var r in e)if(oe.call(e,r))return!1;return!0}function pm(e,t){return vr(e,t)}function hm(e,t,r){r=typeof r=="function"?r:n;var o=r?r(e,t):n;return o===n?vr(e,t,n,r):!!o}function vs(e){if(!he(e))return!1;var t=ke(e);return t==Lr||t==Ll||typeof e.message=="string"&&typeof e.name=="string"&&!Sr(e)}function gm(e){return typeof e=="number"&&iu(e)}function Ot(e){if(!pe(e))return!1;var t=ke(e);return t==Wr||t==la||t==Dl||t==Bl}function xc(e){return typeof e=="number"&&e==J(e)}function Ci(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Wt}function pe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function he(e){return e!=null&&typeof e=="object"}var Cc=Ba?Ge(Ba):_h;function vm(e,t){return e===t||Ko(e,t,ss(t))}function mm(e,t,r){return r=typeof r=="function"?r:n,Ko(e,t,ss(t),r)}function ym(e){return Oc(e)&&e!=+e}function _m(e){if(ng(e))throw new z(u);return mu(e)}function Am(e){return e===null}function Sm(e){return e==null}function Oc(e){return typeof e=="number"||he(e)&&ke(e)==nr}function Sr(e){if(!he(e)||ke(e)!=_t)return!1;var t=Qr(e);if(t===null)return!0;var r=oe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Yr.call(r)==mp}var ms=Ua?Ge(Ua):Ah;function wm(e){return xc(e)&&e>=-Wt&&e<=Wt}var Ec=Ga?Ge(Ga):Sh;function Oi(e){return typeof e=="string"||!j(e)&&he(e)&&ke(e)==ir}function Ke(e){return typeof e=="symbol"||he(e)&&ke(e)==Br}var Bn=Ha?Ge(Ha):wh;function bm(e){return e===n}function xm(e){return he(e)&&Ne(e)==or}function Cm(e){return he(e)&&ke(e)==Gl}var Om=vi($o),Em=vi(function(e,t){return e<=t});function Nc(e){if(!e)return[];if(De(e))return Oi(e)?at(e):Me(e);if(ur&&e[ur])return op(e[ur]());var t=Ne(e),r=t==ot?Io:t==st?$r:Un;return r(e)}function Et(e){if(!e)return e===0?e:0;if(e=tt(e),e===on||e===-on){var t=e<0?-1:1;return t*Il}return e===e?e:0}function J(e){var t=Et(e),r=t%1;return t===t?r?t-r:t:0}function Pc(e){return e?fn(J(e),0,dt):0}function tt(e){if(typeof e=="number")return e;if(Ke(e))return Mr;if(pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ya(e);var r=ud.test(e);return r||fd.test(e)?Hd(e.slice(2),r?2:8):ad.test(e)?Mr:+e}function Tc(e){return ht(e,Le(e))}function Nm(e){return e?fn(J(e),-Wt,Wt):e===0?e:0}function re(e){return e==null?"":He(e)}var Pm=Dn(function(e,t){if(_r(t)||De(t)){ht(t,Se(t),e);return}for(var r in t)oe.call(t,r)&&pr(e,r,t[r])}),kc=Dn(function(e,t){ht(t,Le(t),e)}),Ei=Dn(function(e,t,r,o){ht(t,Le(t),e,o)}),Tm=Dn(function(e,t,r,o){ht(t,Se(t),e,o)}),km=xt(Wo);function Im(e,t){var r=Mn(e);return t==null?r:cu(r,t)}var Rm=X(function(e,t){e=se(e);var r=-1,o=t.length,a=o>2?t[2]:n;for(a&&Ie(t[0],t[1],a)&&(o=1);++r<o;)for(var f=t[r],d=Le(f),h=-1,v=d.length;++h<v;){var S=d[h],w=e[S];(w===n||ct(w,In[S])&&!oe.call(e,S))&&(e[S]=f[S])}return e}),Fm=X(function(e){return e.push(n,Yu),Ue(Ic,n,e)});function Mm(e,t){return qa(e,H(t,3),pt)}function Dm(e,t){return qa(e,H(t,3),Uo)}function Lm(e,t){return e==null?e:Bo(e,H(t,3),Le)}function Wm(e,t){return e==null?e:hu(e,H(t,3),Le)}function Bm(e,t){return e&&pt(e,H(t,3))}function Um(e,t){return e&&Uo(e,H(t,3))}function Gm(e){return e==null?[]:ui(e,Se(e))}function Hm(e){return e==null?[]:ui(e,Le(e))}function ys(e,t,r){var o=e==null?n:ln(e,t);return o===n?r:o}function Km(e,t){return e!=null&&Xu(e,t,dh)}function _s(e,t){return e!=null&&Xu(e,t,ph)}var qm=Ku(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=Jr.call(t)),e[t]=r},Ss(We)),$m=Ku(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=Jr.call(t)),oe.call(e,t)?e[t].push(r):e[t]=[r]},H),zm=X(gr);function Se(e){return De(e)?au(e):qo(e)}function Le(e){return De(e)?au(e,!0):bh(e)}function jm(e,t){var r={};return t=H(t,3),pt(e,function(o,a,f){wt(r,t(o,a,f),o)}),r}function Ym(e,t){var r={};return t=H(t,3),pt(e,function(o,a,f){wt(r,a,t(o,a,f))}),r}var Jm=Dn(function(e,t,r){ci(e,t,r)}),Ic=Dn(function(e,t,r,o){ci(e,t,r,o)}),Zm=xt(function(e,t){var r={};if(e==null)return r;var o=!1;t=le(t,function(f){return f=zt(f,e),o||(o=f.length>1),f}),ht(e,is(e),r),o&&(r=Qe(r,x|P|W,qh));for(var a=t.length;a--;)Zo(r,t[a]);return r});function Xm(e,t){return Rc(e,xi(H(t)))}var Qm=xt(function(e,t){return e==null?{}:Ch(e,t)});function Rc(e,t){if(e==null)return{};var r=le(is(e),function(o){return[o]});return t=H(t),xu(e,r,function(o,a){return t(o,a[0])})}function Vm(e,t,r){t=zt(t,e);var o=-1,a=t.length;for(a||(a=1,e=n);++o<a;){var f=e==null?n:e[gt(t[o])];f===n&&(o=a,f=r),e=Ot(f)?f.call(e):f}return e}function ey(e,t,r){return e==null?e:mr(e,t,r)}function ty(e,t,r,o){return o=typeof o=="function"?o:n,e==null?e:mr(e,t,r,o)}var Fc=zu(Se),Mc=zu(Le);function ny(e,t,r){var o=j(e),a=o||Yt(e)||Bn(e);if(t=H(t,4),r==null){var f=e&&e.constructor;a?r=o?new f:[]:pe(e)?r=Ot(f)?Mn(Qr(e)):{}:r={}}return(a?Je:pt)(e,function(d,h,v){return t(r,d,h,v)}),r}function ry(e,t){return e==null?!0:Zo(e,t)}function iy(e,t,r){return e==null?e:Pu(e,t,Vo(r))}function oy(e,t,r,o){return o=typeof o=="function"?o:n,e==null?e:Pu(e,t,Vo(r),o)}function Un(e){return e==null?[]:ko(e,Se(e))}function sy(e){return e==null?[]:ko(e,Le(e))}function ay(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=tt(r),r=r===r?r:0),t!==n&&(t=tt(t),t=t===t?t:0),fn(tt(e),t,r)}function uy(e,t,r){return t=Et(t),r===n?(r=t,t=0):r=Et(r),e=tt(e),hh(e,t,r)}function cy(e,t,r){if(r&&typeof r!="boolean"&&Ie(e,t,r)&&(t=r=n),r===n&&(typeof t=="boolean"?(r=t,t=n):typeof e=="boolean"&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Et(e),t===n?(t=e,e=0):t=Et(t)),e>t){var o=e;e=t,t=o}if(r||e%1||t%1){var a=ou();return Ee(e+a*(t-e+Gd("1e-"+((a+"").length-1))),t)}return jo(e,t)}var fy=Ln(function(e,t,r){return t=t.toLowerCase(),e+(r?Dc(t):t)});function Dc(e){return As(re(e).toLowerCase())}function Lc(e){return e=re(e),e&&e.replace(dd,ep).replace(kd,"")}function ly(e,t,r){e=re(e),t=He(t);var o=e.length;r=r===n?o:fn(J(r),0,o);var a=r;return r-=t.length,r>=0&&e.slice(r,a)==t}function dy(e){return e=re(e),e&&zl.test(e)?e.replace(ha,tp):e}function py(e){return e=re(e),e&&Ql.test(e)?e.replace(go,"\\$&"):e}var hy=Ln(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),gy=Ln(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),vy=Uu("toLowerCase");function my(e,t,r){e=re(e),t=J(t);var o=t?kn(e):0;if(!t||o>=t)return e;var a=(t-o)/2;return gi(ni(a),r)+e+gi(ti(a),r)}function yy(e,t,r){e=re(e),t=J(t);var o=t?kn(e):0;return t&&o<t?e+gi(t-o,r):e}function _y(e,t,r){e=re(e),t=J(t);var o=t?kn(e):0;return t&&o<t?gi(t-o,r)+e:e}function Ay(e,t,r){return r||t==null?t=0:t&&(t=+t),Ep(re(e).replace(vo,""),t||0)}function Sy(e,t,r){return(r?Ie(e,t,r):t===n)?t=1:t=J(t),Yo(re(e),t)}function wy(){var e=arguments,t=re(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var by=Ln(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});function xy(e,t,r){return r&&typeof r!="number"&&Ie(e,t,r)&&(t=r=n),r=r===n?dt:r>>>0,r?(e=re(e),e&&(typeof t=="string"||t!=null&&!ms(t))&&(t=He(t),!t&&Tn(e))?jt(at(e),0,r):e.split(t,r)):[]}var Cy=Ln(function(e,t,r){return e+(r?" ":"")+As(t)});function Oy(e,t,r){return e=re(e),r=r==null?0:fn(J(r),0,e.length),t=He(t),e.slice(r,r+t.length)==t}function Ey(e,t,r){var o=c.templateSettings;r&&Ie(e,t,r)&&(t=n),e=re(e),t=Ei({},t,o,ju);var a=Ei({},t.imports,o.imports,ju),f=Se(a),d=ko(a,f),h,v,S=0,w=t.interpolate||Ur,b="__p += '",T=Ro((t.escape||Ur).source+"|"+w.source+"|"+(w===ga?sd:Ur).source+"|"+(t.evaluate||Ur).source+"|$","g"),M="//# sourceURL="+(oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Dd+"]")+`
`;e.replace(T,function(q,Q,te,qe,Re,$e){return te||(te=qe),b+=e.slice(S,$e).replace(pd,np),Q&&(h=!0,b+=`' +
__e(`+Q+`) +
'`),Re&&(v=!0,b+=`';
`+Re+`;
__p += '`),te&&(b+=`' +
((__t = (`+te+`)) == null ? '' : __t) +
'`),S=$e+q.length,q}),b+=`';
`;var K=oe.call(t,"variable")&&t.variable;if(!K)b=`with (obj) {
`+b+`
}
`;else if(id.test(K))throw new z(p);b=(v?b.replace(Hl,""):b).replace(Kl,"$1").replace(ql,"$1;"),b="function("+(K||"obj")+`) {
`+(K?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(h?", __e = _.escape":"")+(v?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var Z=Bc(function(){return ne(f,M+"return "+b).apply(n,d)});if(Z.source=b,vs(Z))throw Z;return Z}function Ny(e){return re(e).toLowerCase()}function Py(e){return re(e).toUpperCase()}function Ty(e,t,r){if(e=re(e),e&&(r||t===n))return Ya(e);if(!e||!(t=He(t)))return e;var o=at(e),a=at(t),f=Ja(o,a),d=Za(o,a)+1;return jt(o,f,d).join("")}function ky(e,t,r){if(e=re(e),e&&(r||t===n))return e.slice(0,Qa(e)+1);if(!e||!(t=He(t)))return e;var o=at(e),a=Za(o,at(t))+1;return jt(o,0,a).join("")}function Iy(e,t,r){if(e=re(e),e&&(r||t===n))return e.replace(vo,"");if(!e||!(t=He(t)))return e;var o=at(e),a=Ja(o,at(t));return jt(o,a).join("")}function Ry(e,t){var r=fe,o=Oe;if(pe(t)){var a="separator"in t?t.separator:a;r="length"in t?J(t.length):r,o="omission"in t?He(t.omission):o}e=re(e);var f=e.length;if(Tn(e)){var d=at(e);f=d.length}if(r>=f)return e;var h=r-kn(o);if(h<1)return o;var v=d?jt(d,0,h).join(""):e.slice(0,h);if(a===n)return v+o;if(d&&(h+=v.length-h),ms(a)){if(e.slice(h).search(a)){var S,w=v;for(a.global||(a=Ro(a.source,re(va.exec(a))+"g")),a.lastIndex=0;S=a.exec(w);)var b=S.index;v=v.slice(0,b===n?h:b)}}else if(e.indexOf(He(a),h)!=h){var T=v.lastIndexOf(a);T>-1&&(v=v.slice(0,T))}return v+o}function Fy(e){return e=re(e),e&&$l.test(e)?e.replace(pa,cp):e}var My=Ln(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),As=Uu("toUpperCase");function Wc(e,t,r){return e=re(e),t=r?n:t,t===n?ip(e)?dp(e):Jd(e):e.match(t)||[]}var Bc=X(function(e,t){try{return Ue(e,n,t)}catch(r){return vs(r)?r:new z(r)}}),Dy=xt(function(e,t){return Je(t,function(r){r=gt(r),wt(e,r,hs(e[r],e))}),e});function Ly(e){var t=e==null?0:e.length,r=H();return e=t?le(e,function(o){if(typeof o[1]!="function")throw new Ze(l);return[r(o[0]),o[1]]}):[],X(function(o){for(var a=-1;++a<t;){var f=e[a];if(Ue(f[0],this,o))return Ue(f[1],this,o)}})}function Wy(e){return ch(Qe(e,x))}function Ss(e){return function(){return e}}function By(e,t){return e==null||e!==e?t:e}var Uy=Hu(),Gy=Hu(!0);function We(e){return e}function ws(e){return yu(typeof e=="function"?e:Qe(e,x))}function Hy(e){return Au(Qe(e,x))}function Ky(e,t){return Su(e,Qe(t,x))}var qy=X(function(e,t){return function(r){return gr(r,e,t)}}),$y=X(function(e,t){return function(r){return gr(e,r,t)}});function bs(e,t,r){var o=Se(t),a=ui(t,o);r==null&&!(pe(t)&&(a.length||!o.length))&&(r=t,t=e,e=this,a=ui(t,Se(t)));var f=!(pe(r)&&"chain"in r)||!!r.chain,d=Ot(e);return Je(a,function(h){var v=t[h];e[h]=v,d&&(e.prototype[h]=function(){var S=this.__chain__;if(f||S){var w=e(this.__wrapped__),b=w.__actions__=Me(this.__actions__);return b.push({func:v,args:arguments,thisArg:e}),w.__chain__=S,w}return v.apply(e,Ut([this.value()],arguments))})}),e}function zy(){return Ae._===this&&(Ae._=yp),this}function xs(){}function jy(e){return e=J(e),X(function(t){return wu(t,e)})}var Yy=ts(le),Jy=ts(Ka),Zy=ts(Oo);function Uc(e){return us(e)?Eo(gt(e)):Oh(e)}function Xy(e){return function(t){return e==null?n:ln(e,t)}}var Qy=qu(),Vy=qu(!0);function Cs(){return[]}function Os(){return!1}function e_(){return{}}function t_(){return""}function n_(){return!0}function r_(e,t){if(e=J(e),e<1||e>Wt)return[];var r=dt,o=Ee(e,dt);t=H(t),e-=dt;for(var a=To(o,t);++r<e;)t(r);return a}function i_(e){return j(e)?le(e,gt):Ke(e)?[e]:Me(sc(re(e)))}function o_(e){var t=++vp;return re(e)+t}var s_=hi(function(e,t){return e+t},0),a_=ns("ceil"),u_=hi(function(e,t){return e/t},1),c_=ns("floor");function f_(e){return e&&e.length?ai(e,We,Go):n}function l_(e,t){return e&&e.length?ai(e,H(t,2),Go):n}function d_(e){return za(e,We)}function p_(e,t){return za(e,H(t,2))}function h_(e){return e&&e.length?ai(e,We,$o):n}function g_(e,t){return e&&e.length?ai(e,H(t,2),$o):n}var v_=hi(function(e,t){return e*t},1),m_=ns("round"),y_=hi(function(e,t){return e-t},0);function __(e){return e&&e.length?Po(e,We):0}function A_(e,t){return e&&e.length?Po(e,H(t,2)):0}return c.after=Hv,c.ary=mc,c.assign=Pm,c.assignIn=kc,c.assignInWith=Ei,c.assignWith=Tm,c.at=km,c.before=yc,c.bind=hs,c.bindAll=Dy,c.bindKey=_c,c.castArray=em,c.chain=hc,c.chunk=cg,c.compact=fg,c.concat=lg,c.cond=Ly,c.conforms=Wy,c.constant=Ss,c.countBy=_v,c.create=Im,c.curry=Ac,c.curryRight=Sc,c.debounce=wc,c.defaults=Rm,c.defaultsDeep=Fm,c.defer=Kv,c.delay=qv,c.difference=dg,c.differenceBy=pg,c.differenceWith=hg,c.drop=gg,c.dropRight=vg,c.dropRightWhile=mg,c.dropWhile=yg,c.fill=_g,c.filter=Sv,c.flatMap=xv,c.flatMapDeep=Cv,c.flatMapDepth=Ov,c.flatten=fc,c.flattenDeep=Ag,c.flattenDepth=Sg,c.flip=$v,c.flow=Uy,c.flowRight=Gy,c.fromPairs=wg,c.functions=Gm,c.functionsIn=Hm,c.groupBy=Ev,c.initial=xg,c.intersection=Cg,c.intersectionBy=Og,c.intersectionWith=Eg,c.invert=qm,c.invertBy=$m,c.invokeMap=Pv,c.iteratee=ws,c.keyBy=Tv,c.keys=Se,c.keysIn=Le,c.map=Si,c.mapKeys=jm,c.mapValues=Ym,c.matches=Hy,c.matchesProperty=Ky,c.memoize=bi,c.merge=Jm,c.mergeWith=Ic,c.method=qy,c.methodOf=$y,c.mixin=bs,c.negate=xi,c.nthArg=jy,c.omit=Zm,c.omitBy=Xm,c.once=zv,c.orderBy=kv,c.over=Yy,c.overArgs=jv,c.overEvery=Jy,c.overSome=Zy,c.partial=gs,c.partialRight=bc,c.partition=Iv,c.pick=Qm,c.pickBy=Rc,c.property=Uc,c.propertyOf=Xy,c.pull=kg,c.pullAll=dc,c.pullAllBy=Ig,c.pullAllWith=Rg,c.pullAt=Fg,c.range=Qy,c.rangeRight=Vy,c.rearg=Yv,c.reject=Mv,c.remove=Mg,c.rest=Jv,c.reverse=ds,c.sampleSize=Lv,c.set=ey,c.setWith=ty,c.shuffle=Wv,c.slice=Dg,c.sortBy=Gv,c.sortedUniq=Kg,c.sortedUniqBy=qg,c.split=xy,c.spread=Zv,c.tail=$g,c.take=zg,c.takeRight=jg,c.takeRightWhile=Yg,c.takeWhile=Jg,c.tap=fv,c.throttle=Xv,c.thru=Ai,c.toArray=Nc,c.toPairs=Fc,c.toPairsIn=Mc,c.toPath=i_,c.toPlainObject=Tc,c.transform=ny,c.unary=Qv,c.union=Zg,c.unionBy=Xg,c.unionWith=Qg,c.uniq=Vg,c.uniqBy=ev,c.uniqWith=tv,c.unset=ry,c.unzip=ps,c.unzipWith=pc,c.update=iy,c.updateWith=oy,c.values=Un,c.valuesIn=sy,c.without=nv,c.words=Wc,c.wrap=Vv,c.xor=rv,c.xorBy=iv,c.xorWith=ov,c.zip=sv,c.zipObject=av,c.zipObjectDeep=uv,c.zipWith=cv,c.entries=Fc,c.entriesIn=Mc,c.extend=kc,c.extendWith=Ei,bs(c,c),c.add=s_,c.attempt=Bc,c.camelCase=fy,c.capitalize=Dc,c.ceil=a_,c.clamp=ay,c.clone=tm,c.cloneDeep=rm,c.cloneDeepWith=im,c.cloneWith=nm,c.conformsTo=om,c.deburr=Lc,c.defaultTo=By,c.divide=u_,c.endsWith=ly,c.eq=ct,c.escape=dy,c.escapeRegExp=py,c.every=Av,c.find=wv,c.findIndex=uc,c.findKey=Mm,c.findLast=bv,c.findLastIndex=cc,c.findLastKey=Dm,c.floor=c_,c.forEach=gc,c.forEachRight=vc,c.forIn=Lm,c.forInRight=Wm,c.forOwn=Bm,c.forOwnRight=Um,c.get=ys,c.gt=sm,c.gte=am,c.has=Km,c.hasIn=_s,c.head=lc,c.identity=We,c.includes=Nv,c.indexOf=bg,c.inRange=uy,c.invoke=zm,c.isArguments=hn,c.isArray=j,c.isArrayBuffer=um,c.isArrayLike=De,c.isArrayLikeObject=ge,c.isBoolean=cm,c.isBuffer=Yt,c.isDate=fm,c.isElement=lm,c.isEmpty=dm,c.isEqual=pm,c.isEqualWith=hm,c.isError=vs,c.isFinite=gm,c.isFunction=Ot,c.isInteger=xc,c.isLength=Ci,c.isMap=Cc,c.isMatch=vm,c.isMatchWith=mm,c.isNaN=ym,c.isNative=_m,c.isNil=Sm,c.isNull=Am,c.isNumber=Oc,c.isObject=pe,c.isObjectLike=he,c.isPlainObject=Sr,c.isRegExp=ms,c.isSafeInteger=wm,c.isSet=Ec,c.isString=Oi,c.isSymbol=Ke,c.isTypedArray=Bn,c.isUndefined=bm,c.isWeakMap=xm,c.isWeakSet=Cm,c.join=Ng,c.kebabCase=hy,c.last=et,c.lastIndexOf=Pg,c.lowerCase=gy,c.lowerFirst=vy,c.lt=Om,c.lte=Em,c.max=f_,c.maxBy=l_,c.mean=d_,c.meanBy=p_,c.min=h_,c.minBy=g_,c.stubArray=Cs,c.stubFalse=Os,c.stubObject=e_,c.stubString=t_,c.stubTrue=n_,c.multiply=v_,c.nth=Tg,c.noConflict=zy,c.noop=xs,c.now=wi,c.pad=my,c.padEnd=yy,c.padStart=_y,c.parseInt=Ay,c.random=cy,c.reduce=Rv,c.reduceRight=Fv,c.repeat=Sy,c.replace=wy,c.result=Vm,c.round=m_,c.runInContext=g,c.sample=Dv,c.size=Bv,c.snakeCase=by,c.some=Uv,c.sortedIndex=Lg,c.sortedIndexBy=Wg,c.sortedIndexOf=Bg,c.sortedLastIndex=Ug,c.sortedLastIndexBy=Gg,c.sortedLastIndexOf=Hg,c.startCase=Cy,c.startsWith=Oy,c.subtract=y_,c.sum=__,c.sumBy=A_,c.template=Ey,c.times=r_,c.toFinite=Et,c.toInteger=J,c.toLength=Pc,c.toLower=Ny,c.toNumber=tt,c.toSafeInteger=Nm,c.toString=re,c.toUpper=Py,c.trim=Ty,c.trimEnd=ky,c.trimStart=Iy,c.truncate=Ry,c.unescape=Fy,c.uniqueId=o_,c.upperCase=My,c.upperFirst=As,c.each=gc,c.eachRight=vc,c.first=lc,bs(c,function(){var e={};return pt(c,function(t,r){oe.call(c.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),c.VERSION=i,Je(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){c[e].placeholder=c}),Je(["drop","take"],function(e,t){V.prototype[e]=function(r){r=r===n?1:_e(J(r),0);var o=this.__filtered__&&!t?new V(this):this.clone();return o.__filtered__?o.__takeCount__=Ee(r,o.__takeCount__):o.__views__.push({size:Ee(r,dt),type:e+(o.__dir__<0?"Right":"")}),o},V.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),Je(["filter","map","takeWhile"],function(e,t){var r=t+1,o=r==fa||r==kl;V.prototype[e]=function(a){var f=this.clone();return f.__iteratees__.push({iteratee:H(a,3),type:r}),f.__filtered__=f.__filtered__||o,f}}),Je(["head","last"],function(e,t){var r="take"+(t?"Right":"");V.prototype[e]=function(){return this[r](1).value()[0]}}),Je(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");V.prototype[e]=function(){return this.__filtered__?new V(this):this[r](1)}}),V.prototype.compact=function(){return this.filter(We)},V.prototype.find=function(e){return this.filter(e).head()},V.prototype.findLast=function(e){return this.reverse().find(e)},V.prototype.invokeMap=X(function(e,t){return typeof e=="function"?new V(this):this.map(function(r){return gr(r,e,t)})}),V.prototype.reject=function(e){return this.filter(xi(H(e)))},V.prototype.slice=function(e,t){e=J(e);var r=this;return r.__filtered__&&(e>0||t<0)?new V(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(t=J(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},V.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},V.prototype.toArray=function(){return this.take(dt)},pt(V.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=c[o?"take"+(t=="last"?"Right":""):t],f=o||/^find/.test(t);a&&(c.prototype[t]=function(){var d=this.__wrapped__,h=o?[1]:arguments,v=d instanceof V,S=h[0],w=v||j(d),b=function(Q){var te=a.apply(c,Ut([Q],h));return o&&T?te[0]:te};w&&r&&typeof S=="function"&&S.length!=1&&(v=w=!1);var T=this.__chain__,M=!!this.__actions__.length,K=f&&!T,Z=v&&!M;if(!f&&w){d=Z?d:new V(this);var q=e.apply(d,h);return q.__actions__.push({func:Ai,args:[b],thisArg:n}),new Xe(q,T)}return K&&Z?e.apply(this,h):(q=this.thru(b),K?o?q.value()[0]:q.value():q)})}),Je(["pop","push","shift","sort","splice","unshift"],function(e){var t=zr[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);c.prototype[e]=function(){var a=arguments;if(o&&!this.__chain__){var f=this.value();return t.apply(j(f)?f:[],a)}return this[r](function(d){return t.apply(j(d)?d:[],a)})}}),pt(V.prototype,function(e,t){var r=c[t];if(r){var o=r.name+"";oe.call(Fn,o)||(Fn[o]=[]),Fn[o].push({name:t,func:r})}}),Fn[pi(n,D).name]=[{name:"wrapper",func:n}],V.prototype.clone=Fp,V.prototype.reverse=Mp,V.prototype.value=Dp,c.prototype.at=lv,c.prototype.chain=dv,c.prototype.commit=pv,c.prototype.next=hv,c.prototype.plant=vv,c.prototype.reverse=mv,c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=yv,c.prototype.first=c.prototype.head,ur&&(c.prototype[ur]=gv),c},Ht=pp();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ae._=Ht,define(function(){return Ht})):sn?((sn.exports=Ht)._=Ht,wo._=Ht):Ae._=Ht}).call(Xn)});var Cl=nt((_S,xl)=>{rt();xl.exports=de("NeosProjectPackages")().NeosUiI18n});rt();var wr=class{constructor(i){this.SERIAL_VERSION_UID="d8a5aa78-978e-11e6-ae22-56b6b6499611",this.description=i}};var N_=(n,i="position",s="key")=>{let u=typeof i=="string"?E=>E[i]:i,l={},p={},y={},A={},C={},x={};n.forEach((E,L)=>{let R=E[s]?E[s]:String(L);l[R]=L;let Y=u(E),$=String(Y||L),me=!1;if($.startsWith("start")){let ee=$.match(/start\s+(\d+)/),fe=ee&&ee[1]?Number(ee[1]):0;y[fe]||(y[fe]=[]),y[fe].push(R)}else if($.startsWith("end")){let ee=$.match(/end\s+(\d+)/),fe=ee&&ee[1]?Number(ee[1]):0;A[fe]||(A[fe]=[]),A[fe].push(R)}else if($.startsWith("before")){let ee=$.match(/before\s+(\S+)(\s+(\d+))?/);if(!ee)me=!0;else{let fe=ee[1],Oe=ee[3]?Number(ee[3]):0;C[fe]||(C[fe]={}),C[fe][Oe]||(C[fe][Oe]=[]),C[fe][Oe].push(R)}}else if($.startsWith("after")){let ee=$.match(/after\s+(\S+)(\s+(\d+))?/);if(!ee)me=!0;else{let fe=ee[1],Oe=ee[3]?Number(ee[3]):0;x[fe]||(x[fe]={}),x[fe][Oe]||(x[fe][Oe]=[]),x[fe][Oe].push(R)}}else me=!0;if(me){let ee=parseFloat($);(isNaN(ee)||!isFinite(ee))&&(ee=L),p[ee]||(p[ee]=[]),p[ee].push(R)}});let P=[],W=[],I=[],F=[],U=(E,L)=>{let R=Object.keys(E).map(Y=>Number(Y)).sort((Y,$)=>Y-$);return L?R:R.reverse()},D=(E,L)=>{E.forEach(R=>{if(!(F.indexOf(R)>=0)){if(F.push(R),C[R]){let Y=U(C[R],!0);for(let $ of Y)D(C[R][$],L)}if(L.push(R),x[R]){let Y=U(x[R],!1);for(let $ of Y)D(x[R][$],L)}}})};for(let E of U(y,!1))D(y[E],P);for(let E of U(p,!0))D(p[E],W);for(let E of U(A,!0))D(A[E],I);for(let E of Object.keys(C))if(!(F.indexOf(E)>=0))for(let L of U(C[E],!1))D(C[E][L],P);for(let E of Object.keys(x))if(!(F.indexOf(E)>=0))for(let L of U(x[E],!1))D(x[E][L],W);return[...P,...W,...I].map(E=>l[E]).map(E=>n[E])},Es=N_;var Jt=class extends wr{constructor(i){super(i),this._registry=[]}set(i,s,u=0){if(typeof i!="string")throw new Error("Key must be a string");if(typeof u!="string"&&typeof u!="number")throw new Error("Position must be a string or a number");let l={key:i,value:s};u&&(l.position=u);let p=this._registry.findIndex(y=>y.key===i);return p===-1?this._registry.push(l):this._registry[p]=l,s}get(i){if(typeof i!="string")return console.error("Key must be a string"),null;let s=this._registry.find(u=>u.key===i);return s?s.value:null}_getChildrenWrapped(i){let s=this._registry.filter(u=>u.key.indexOf(i+"/")===0);return Es(s)}getChildrenAsObject(i){let s={};return this._getChildrenWrapped(i).forEach(u=>{s[u.key]=u.value}),s}getChildren(i){return this._getChildrenWrapped(i).map(s=>s.value)}has(i){return typeof i!="string"?(console.error("Key must be a string"),!1):!!this._registry.find(s=>s.key===i)}_getAllWrapped(){return Es(this._registry)}getAllAsObject(){let i={};return this._getAllWrapped().forEach(s=>{i[s.key]=s.value}),i}getAllAsList(){return this._getAllWrapped().map(i=>Object.assign({id:i.key},i.value))}};var Kc=de("manifest");var Pe=class extends Error{constructor(s,u,l=""){super(s);N(this,"code");N(this,"severity","error");N(this,"externalMessage");this.code=u,this.externalMessage=l}};var qc=n=>new Ns(n.apiDomain,n.apiKey),Ns=class{constructor(i,s){N(this,"apiDomain","");N(this,"apiKey","");N(this,"hasApiKey",()=>this.apiKey!==null&&this.apiKey!=="");N(this,"generate",async(i,s,u={})=>{let p=(await this.fetch(`/api/v1/chat?language=${s}`,{method:"POST",body:JSON.stringify({module:i,platform:"neos",user_input:u})}))?.data?.message?.message;return p.startsWith('"')&&p.endsWith('"')&&(p=p.substring(1,p.length-1)),p});N(this,"fetch",async(i,s={})=>{if(!this.apiKey)throw new Pe("This feature is not available in the free version.","1688157373215");let u=await fetch(this.apiDomain+i,Object.assign({},s,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`,Accept:"application/json"}})),l=await u.json();if(u.status===401)throw new Pe("The NEOSidekick api key provided is not valid.","1688158193038");if(u.status<200||u.status>=400)throw new Pe("An error occurred while asking NEOSidekick.","1688158257149",l?.message);return l});this.apiDomain=i,this.apiKey=s}};rt();var $c=de("NeosProjectPackages")().NeosUiBackendConnectorDefault,{fetchWithErrorHandling:aA}=de("NeosProjectPackages")().NeosUiBackendConnector;var Qt=G(it());function lt(n){for(var i=arguments.length,s=Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];if(!1)var l,p;throw Error("[Immer] minified error nr: "+n+(s.length?" "+s.map(function(y){return"'"+y+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Gn(n){return!!n&&!!n[ze]}function vn(n){var i;return!!n&&(function(s){if(!s||typeof s!="object")return!1;var u=Object.getPrototypeOf(s);if(u===null)return!0;var l=Object.hasOwnProperty.call(u,"constructor")&&u.constructor;return l===Object||typeof l=="function"&&Function.toString.call(l)===L_}(n)||Array.isArray(n)||!!n[ef]||!!(!((i=n.constructor)===null||i===void 0)&&i[ef])||Ws(n)||Bs(n))}function xr(n,i,s){s===void 0&&(s=!1),Hn(n)===0?(s?Object.keys:qs)(n).forEach(function(u){s&&typeof u=="symbol"||i(u,n[u],n)}):n.forEach(function(u,l){return i(l,u,n)})}function Hn(n){var i=n[ze];return i?i.i>3?i.i-4:i.i:Array.isArray(n)?1:Ws(n)?2:Bs(n)?3:0}function Rs(n,i){return Hn(n)===2?n.has(i):Object.prototype.hasOwnProperty.call(n,i)}function T_(n,i){return Hn(n)===2?n.get(i):n[i]}function tf(n,i,s){var u=Hn(n);u===2?n.set(i,s):u===3?n.add(s):n[i]=s}function k_(n,i){return n===i?n!==0||1/n==1/i:n!=n&&i!=i}function Ws(n){return M_&&n instanceof Map}function Bs(n){return D_&&n instanceof Set}function gn(n){return n.o||n.t}function Us(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var i=W_(n);delete i[ze];for(var s=qs(i),u=0;u<s.length;u++){var l=s[u],p=i[l];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(i[l]={configurable:!0,writable:!0,enumerable:p.enumerable,value:n[l]})}return Object.create(Object.getPrototypeOf(n),i)}function Gs(n,i){return i===void 0&&(i=!1),Hs(n)||Gn(n)||!vn(n)||(Hn(n)>1&&(n.set=n.add=n.clear=n.delete=I_),Object.freeze(n),i&&xr(n,function(s,u){return Gs(u,!0)},!0)),n}function I_(){lt(2)}function Hs(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function vt(n){var i=B_[n];return i||lt(18,n),i}function jc(){return Cr}function Ps(n,i){i&&(vt("Patches"),n.u=[],n.s=[],n.v=i)}function Pi(n){Fs(n),n.p.forEach(R_),n.p=null}function Fs(n){n===Cr&&(Cr=n.l)}function Yc(n){return Cr={p:[],l:Cr,h:n,m:!0,_:0}}function R_(n){var i=n[ze];i.i===0||i.i===1?i.j():i.g=!0}function Ts(n,i){i._=i.p.length;var s=i.p[0],u=n!==void 0&&n!==s;return i.h.O||vt("ES5").S(i,n,u),u?(s[ze].P&&(Pi(i),lt(4)),vn(n)&&(n=Ti(i,n),i.l||ki(i,n)),i.u&&vt("Patches").M(s[ze].t,n,i.u,i.s)):n=Ti(i,s,[]),Pi(i),i.u&&i.v(i.u,i.s),n!==nf?n:void 0}function Ti(n,i,s){if(Hs(i))return i;var u=i[ze];if(!u)return xr(i,function(A,C){return Jc(n,u,i,A,C,s)},!0),i;if(u.A!==n)return i;if(!u.P)return ki(n,u.t,!0),u.t;if(!u.I){u.I=!0,u.A._--;var l=u.i===4||u.i===5?u.o=Us(u.k):u.o,p=l,y=!1;u.i===3&&(p=new Set(l),l.clear(),y=!0),xr(p,function(A,C){return Jc(n,u,l,A,C,s,y)}),ki(n,l,!1),s&&n.u&&vt("Patches").N(u,s,n.u,n.s)}return u.o}function Jc(n,i,s,u,l,p,y){if(Gn(l)){var A=Ti(n,l,p&&i&&i.i!==3&&!Rs(i.R,u)?p.concat(u):void 0);if(tf(s,u,A),!Gn(A))return;n.m=!1}else y&&s.add(l);if(vn(l)&&!Hs(l)){if(!n.h.D&&n._<1)return;Ti(n,l),i&&i.A.l||ki(n,l)}}function ki(n,i,s){s===void 0&&(s=!1),!n.l&&n.h.D&&n.m&&Gs(i,s)}function ks(n,i){var s=n[ze];return(s?gn(s):n)[i]}function Zc(n,i){if(i in n)for(var s=Object.getPrototypeOf(n);s;){var u=Object.getOwnPropertyDescriptor(s,i);if(u)return u;s=Object.getPrototypeOf(s)}}function Ms(n){n.P||(n.P=!0,n.l&&Ms(n.l))}function Is(n){n.o||(n.o=Us(n.t))}function Ds(n,i,s){var u=Ws(i)?vt("MapSet").F(i,s):Bs(i)?vt("MapSet").T(i,s):n.O?function(l,p){var y=Array.isArray(l),A={i:y?1:0,A:p?p.A:jc(),P:!1,I:!1,R:{},l:p,t:l,k:null,o:null,j:null,C:!1},C=A,x=Ls;y&&(C=[A],x=br);var P=Proxy.revocable(C,x),W=P.revoke,I=P.proxy;return A.k=I,A.j=W,I}(i,s):vt("ES5").J(i,s);return(s?s.A:jc()).p.push(u),u}function F_(n){return Gn(n)||lt(22,n),function i(s){if(!vn(s))return s;var u,l=s[ze],p=Hn(s);if(l){if(!l.P&&(l.i<4||!vt("ES5").K(l)))return l.t;l.I=!0,u=Xc(s,p),l.I=!1}else u=Xc(s,p);return xr(u,function(y,A){l&&T_(l.t,y)===A||tf(u,y,i(A))}),p===3?new Set(u):u}(n)}function Xc(n,i){switch(i){case 2:return new Map(n);case 3:return Array.from(n)}return Us(n)}var Qc,Cr,Ks=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",M_=typeof Map<"u",D_=typeof Set<"u",Vc=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",nf=Ks?Symbol.for("immer-nothing"):((Qc={})["immer-nothing"]=!0,Qc),ef=Ks?Symbol.for("immer-draftable"):"__$immer_draftable",ze=Ks?Symbol.for("immer-state"):"__$immer_state";var L_=""+Object.prototype.constructor,qs=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,W_=Object.getOwnPropertyDescriptors||function(n){var i={};return qs(n).forEach(function(s){i[s]=Object.getOwnPropertyDescriptor(n,s)}),i},B_={},Ls={get:function(n,i){if(i===ze)return n;var s=gn(n);if(!Rs(s,i))return function(l,p,y){var A,C=Zc(p,y);return C?"value"in C?C.value:(A=C.get)===null||A===void 0?void 0:A.call(l.k):void 0}(n,s,i);var u=s[i];return n.I||!vn(u)?u:u===ks(n.t,i)?(Is(n),n.o[i]=Ds(n.A.h,u,n)):u},has:function(n,i){return i in gn(n)},ownKeys:function(n){return Reflect.ownKeys(gn(n))},set:function(n,i,s){var u=Zc(gn(n),i);if(u?.set)return u.set.call(n.k,s),!0;if(!n.P){var l=ks(gn(n),i),p=l?.[ze];if(p&&p.t===s)return n.o[i]=s,n.R[i]=!1,!0;if(k_(s,l)&&(s!==void 0||Rs(n.t,i)))return!0;Is(n),Ms(n)}return n.o[i]===s&&(s!==void 0||i in n.o)||Number.isNaN(s)&&Number.isNaN(n.o[i])||(n.o[i]=s,n.R[i]=!0),!0},deleteProperty:function(n,i){return ks(n.t,i)!==void 0||i in n.t?(n.R[i]=!1,Is(n),Ms(n)):delete n.R[i],n.o&&delete n.o[i],!0},getOwnPropertyDescriptor:function(n,i){var s=gn(n),u=Reflect.getOwnPropertyDescriptor(s,i);return u&&{writable:!0,configurable:n.i!==1||i!=="length",enumerable:u.enumerable,value:s[i]}},defineProperty:function(){lt(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){lt(12)}},br={};xr(Ls,function(n,i){br[n]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),br.deleteProperty=function(n,i){return br.set.call(this,n,i,void 0)},br.set=function(n,i,s){return Ls.set.call(this,n[0],i,s,n[0])};var U_=function(){function n(s){var u=this;this.O=Vc,this.D=!0,this.produce=function(l,p,y){if(typeof l=="function"&&typeof p!="function"){var A=p;p=l;var C=u;return function(D){var O=this;D===void 0&&(D=A);for(var E=arguments.length,L=Array(E>1?E-1:0),R=1;R<E;R++)L[R-1]=arguments[R];return C.produce(D,function(Y){var $;return($=p).call.apply($,[O,Y].concat(L))})}}var x;if(typeof p!="function"&&lt(6),y!==void 0&&typeof y!="function"&&lt(7),vn(l)){var P=Yc(u),W=Ds(u,l,void 0),I=!0;try{x=p(W),I=!1}finally{I?Pi(P):Fs(P)}return typeof Promise<"u"&&x instanceof Promise?x.then(function(D){return Ps(P,y),Ts(D,P)},function(D){throw Pi(P),D}):(Ps(P,y),Ts(x,P))}if(!l||typeof l!="object"){if((x=p(l))===void 0&&(x=l),x===nf&&(x=void 0),u.D&&Gs(x,!0),y){var F=[],U=[];vt("Patches").M(l,x,F,U),y(F,U)}return x}lt(21,l)},this.produceWithPatches=function(l,p){if(typeof l=="function")return function(x){for(var P=arguments.length,W=Array(P>1?P-1:0),I=1;I<P;I++)W[I-1]=arguments[I];return u.produceWithPatches(x,function(F){return l.apply(void 0,[F].concat(W))})};var y,A,C=u.produce(l,p,function(x,P){y=x,A=P});return typeof Promise<"u"&&C instanceof Promise?C.then(function(x){return[x,y,A]}):[C,y,A]},typeof s?.useProxies=="boolean"&&this.setUseProxies(s.useProxies),typeof s?.autoFreeze=="boolean"&&this.setAutoFreeze(s.autoFreeze)}var i=n.prototype;return i.createDraft=function(s){vn(s)||lt(8),Gn(s)&&(s=F_(s));var u=Yc(this),l=Ds(this,s,void 0);return l[ze].C=!0,Fs(u),l},i.finishDraft=function(s,u){var l=s&&s[ze],p=l.A;return Ps(p,u),Ts(void 0,p)},i.setAutoFreeze=function(s){this.D=s},i.setUseProxies=function(s){s&&!Vc&&lt(20),this.O=s},i.applyPatches=function(s,u){var l;for(l=u.length-1;l>=0;l--){var p=u[l];if(p.path.length===0&&p.op==="replace"){s=p.value;break}}l>-1&&(u=u.slice(l+1));var y=vt("Patches").$;return Gn(s)?y(s,u):this.produce(s,function(A){return y(A,u)})},n}(),je=new U_,$s=je.produce,lA=je.produceWithPatches.bind(je),dA=je.setAutoFreeze.bind(je),pA=je.setUseProxies.bind(je),hA=je.applyPatches.bind(je),gA=je.createDraft.bind(je),vA=je.finishDraft.bind(je),rf=$s;var Bf=G(Wf());var Uf=(n,i)=>new sa(n,i),sa=class{constructor(i,s){N(this,"globalRegistry");N(this,"store");N(this,"guestFrameContentDocument",null);N(this,"nodeTypesRegistry");N(this,"externalService");N(this,"getGuestFrameContentDocument",()=>{let i=document.getElementsByName("neos-content-main")[0];return this.guestFrameContentDocument=i?.contentDocument,this.guestFrameContentDocument});N(this,"getGuestFrameDocumentTitle",()=>this.getGuestFrameContentDocument()?.title);N(this,"getGuestFrameDocumentHtml",()=>this.getGuestFrameContentDocument()?.body?.innerHTML);N(this,"getCurrentDocumentNode",()=>{let i=this.store.getState();return Qt.selectors.CR.Nodes.documentNodeSelector(i)});N(this,"getCurrentDocumentParentNode",()=>{let i=this.store.getState(),s=this.getCurrentDocumentNode();return Qt.selectors.CR.Nodes.nodeByContextPath(i)(s.parent)});N(this,"getCurrentDocumentNodeType",()=>{let i=this.getCurrentDocumentNode();return this.globalRegistry.get("@neos-project/neos-ui-contentrepository").get(i?.nodeType)});N(this,"getCurrentDocumentTargetAudience",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.targetAudience;return i?this.processClientEval(i):""});N(this,"getCurrentDocumentPageBriefing",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.pageBriefing;return i?this.processClientEval(i):""});N(this,"getCurrentDocumentFocusKeyword",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.focusKeyword;return i?await this.processClientEval(i):""});N(this,"processClientEval",async(i,s,u)=>{if(typeof i=="string"&&(i.startsWith("SidekickClientEval:")||i.startsWith("ClientEval:")))try{s=s??this.getCurrentDocumentNode();let l=Qt.selectors.UI.Inspector.transientValues(this.store.getState());s=this.generateNodeForContext(s,l),u=u??this.getCurrentDocumentParentNode();let p=this.getGuestFrameDocumentTitle(),y=this.getGuestFrameDocumentHtml(),A=this.getImageMetadata,C=Object.getPrototypeOf(async function(){}).constructor;return await new C("node,parentNode,documentTitle,documentContent,AssetUri","return "+i.replace("SidekickClientEval:","").replace("ClientEval:",""))(s,u,p,y,A)}catch(l){throw l instanceof Pe?l:(console.error(l),new Pe('An error occurred while trying to evaluate "'+i+'"',"1694682118365",i))}return i});N(this,"processValueWithClientEval",async(i,s,u)=>{if(typeof i=="string")return this.processClientEval(i,s,u);if(typeof i=="object"&&i!==null)return this.processObjectWithClientEval(i,s,u);if(i===null)return null;if(Array.isArray(i))return Promise.all(i.map(async l=>this.processObjectWithClientEval(l,s,u)))});N(this,"processObjectWithClientEval",async(i,s,u)=>{let l={};return await Promise.all(Object.keys(i).map(async p=>{let y=i[p];l[p]=await this.processValueWithClientEval(y,s,u)})),l});N(this,"getImageMetadata",async i=>{if(!i||!i?.__identity)throw new Pe("The property does not have a valid image.","1694595562191");let{loadImageMetadata:s}=$c.get().endpoints,u,l;try{let y=await s(i?.__identity);u=y?.originalImageResourceUri,l=y?.previewImageResourceUri}catch{throw new Pe("Could not fetch image object.","1694595598880")}if(!u||u==="")throw new Pe("The given image does not have a correct url.","1694595462402");let p=[];return p.push(this.prependConfiguredDomainToImageUri(u)),l&&p.push(this.prependConfiguredDomainToImageUri(l)),p});this.globalRegistry=i,this.store=s,this.nodeTypesRegistry=i.get("@neos-project/neos-ui-contentrepository"),this.externalService=i.get("NEOSidekick.AiAssistant").get("externalService")}prependConfiguredDomainToImageUri(i){let s=this.globalRegistry.get("NEOSidekick.AiAssistant").get("configuration").domain,u=i.replace("http://","").replace("https://","").split("/");return u.shift(),u.unshift(s),u.join("/")}getCurrentlyFocusedNodePathAndProperty(){let i=this.store.getState(),s=this.globalRegistry.get("@neos-project/neos-ui-contentrepository"),u=i?.cr?.nodes?.focused?.contextPaths[0],l=u?Qt.selectors.CR.Nodes.nodeByContextPath(i)(u):null;return{nodePath:u,node:l,property:i?.ui?.contentCanvas?.currentlyEditedPropertyName,nodeType:l?s.get(l?.nodeType):null,parentNode:l?Qt.selectors.CR.Nodes.nodesByContextPathSelector(i)[l.parent]:null}}async evaluateNodeTypeConfigurationAndStartGeneration(i,s,u,l,p=!1){if(!u||s[0]==="_")return;let y=u.properties?u.properties[s]:null;try{if(y?.options?.sidekick?.onCreate?.module)throw new Pe("Please do not use options.sidekick.onCreate.module anymore. Read the docs to find out about the new configuration.","1696264259260");if(!y?.options?.sidekick?.module||p&&y?.options?.sidekick?.onCreate!==!0)return;if(!y?.ui?.inlineEditable)throw new Pe("You can only generate content on inline editable properties","1688395273728");if(!this.externalService.hasApiKey())throw new Pe("This feature is not available in the free version.","1688157373215")}catch(P){let W=this.globalRegistry.get("i18n");this.store.dispatch(Qt.actions.UI.FlashMessages.add(P?.code??P?.message,P?.code?W.translate("NEOSidekick.AiAssistant:Error:"+P.code):P?.message,P?.severity??"error"));return}let A=JSON.parse(JSON.stringify(y.options.sidekick)),C=this.globalRegistry.get("NEOSidekick.AiAssistant").get("contentCanvasService"),x=await this.processObjectWithClientEval(A,i,l);C.streamGenerationIntoInlineProperty(i.contextPath,s,x)}generateNodeForContext(i,s){return s?$s(i,u=>{let l=(0,Bf.default)(s,p=>p?.value);u.properties=Object.assign({},u.properties,l)}):i}};var Gf=G(it());var Hf=(n,i,s)=>new aa(n,i,s),aa=class{constructor(i,s,u){N(this,"globalRegistry");N(this,"store");N(this,"iFrameApiService");N(this,"currentlyHandledNodePath",null);N(this,"streamGenerationIntoInlineProperty",(i,s,u)=>{this.iFrameApiService.callModule({target:{nodePath:i,propertyName:s},...u},()=>this.currentlyHandledNodePath=i)});N(this,"onNodeRemoved",i=>{this.currentlyHandledNodePath===i&&(this.iFrameApiService.cancelCallModule(),this.unsetCurrentlyHandledNodePath())});N(this,"getEditorContent",(i,s)=>this.getPropertyInlineField(i,s)?.ckeditorInstance?.getData());N(this,"getSelectedContent",(i,s)=>{let l=this.getPropertyInlineField(i,s)?.ckeditorInstance;return l?.data.stringify(l.model.getSelectedContent(l.model.document.selection))});N(this,"insertTextIntoInlineEditor",(i,s,u)=>{let p=this.getPropertyInlineField(i,s)?.ckeditorInstance,y=p.model.document.selection.getFirstRange();p.model.change(A=>{let C=p.data.processor.toView(u),x=p.data.toModel(C),P=p.model.insertContent(x,y);p.editing.view.focus(),A.setSelection(P)})});N(this,"handleMessage",i=>{switch(i?.data?.eventName){case"write-content":let{nodePath:s,propertyName:u,value:l,isFinished:p}=i?.data?.data;s&&u&&(console.info(s+": "+l),this.setPropertyValue(s,u,l||"",p||!1),p&&this.handleStreamingFinished());break;case"stopped-generation":this.handleStreamingFinished();break;case"error":let y=i?.data?.data?.message;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+y,"error",y),this.handleStreamingFinished();break;default:let A="Unknown message event: "+i?.data?.eventName;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+A,"error",A),this.handleStreamingFinished()}});N(this,"handleStreamingFinished",()=>{this.resetTypingCaret(),this.unsetCurrentlyHandledNodePath(),this.iFrameApiService.setStreamingFinished()});N(this,"getPropertyInlineField",(i,s)=>document.getElementsByName("neos-content-main")[0]?.contentDocument?.querySelector(`[data-__neos-editable-node-contextpath="${i}"][data-__neos-property="${s}"]`)||void 0);N(this,"setPropertyValue",(i,s,u,l)=>{let p=this.getPropertyInlineField(i,s);if(!p&&l){let A="Could not find inline field for nodePath: "+i+" and propertyName: "+s;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+A,"error",A),this.unsetCurrentlyHandledNodePath();return}if(!p)return;if(!this.store.getState()?.cr?.nodes?.byContextPath.hasOwnProperty(i)){this.handleStreamingFinished();return}p.ckeditorInstance?.setData(u),p.classList.add("typing-caret")});this.globalRegistry=i,this.store=s,this.iFrameApiService=u,this.iFrameApiService.listenToMessages(this.handleMessage)}unsetCurrentlyHandledNodePath(){this.currentlyHandledNodePath=null}resetTypingCaret(){let u=document.getElementsByName("neos-content-main")[0]?.contentDocument?.querySelector(".typing-caret");u&&u.classList.remove("typing-caret")}addFlashMessage(i,s,u="error",l){let p=this.globalRegistry.get("i18n");this.store.dispatch(Gf.actions.UI.FlashMessages.add(i,p.translate("NEOSidekick.AiAssistant:Error:"+i,s,{0:l}),u))}};var Kf=()=>new ua,ua=class{constructor(){N(this,"isStreaming",!1);N(this,"unsyncedWebContextIsNewPage");N(this,"unsyncedWebContextData");N(this,"callModuleQueue",[]);N(this,"callModule",(i,s)=>{if(this.isStreaming){this.callModuleQueue.push({data:i,onStarted:s});return}this.isStreaming=!0;let u={version:"1.0",eventName:"call-module",data:{platform:"neos",...i}};this.sendMessage(u,s)});N(this,"setStreamingFinished",()=>{this.isStreaming=!1,this.unsyncedWebContextData&&(this.updateWebContext(this.unsyncedWebContextIsNewPage||!1,this.unsyncedWebContextData),this.unsyncedWebContextData=void 0,this.unsyncedWebContextIsNewPage=void 0);let i=this.callModuleQueue.shift();if(i){let{data:s,onStarted:u}=i;this.callModule(s,u)}});N(this,"cancelCallModule",()=>{let i={version:"1.0",eventName:"cancel-call-module"};this.setStreamingFinished(),this.sendMessage(i)});N(this,"updateWebContext",(i,s)=>{if(this.isStreaming){this.unsyncedWebContextIsNewPage=i,this.unsyncedWebContextData=s;return}let u={version:"1.0",eventName:i?"page-changed":"page-updated",data:s};this.sendMessage(u)});N(this,"listenToMessages",i=>{let s=this.getAssistantFrame();s?window.addEventListener("message",u=>{u.source===s.contentWindow&&i(u)}):setTimeout(()=>this.listenToMessages(i),250)});N(this,"sendMessage",(i,s,u=0)=>{let l=this.getAssistantFrame();if(l)console.log("Sending message to frame",i),l.contentWindow?.postMessage(i,"*"),s&&s();else{if(u>20){alert("NEOSidekick AI-Error: Could not load assistant frame, please reload the page or contact support@neosidekick.com.");return}u++,setTimeout(()=>this.sendMessage(i,s),250)}});N(this,"getAssistantFrame",()=>{let i=document.getElementById("neosidekickAssistant");return i?.dataset.hasOwnProperty("loaded")&&i.contentWindow?i:null})}};var Yi=G($f());var N1=(n,i)=>(0,Yi.action)("@neosidekick/ai-assistant/UI/ModifyDialog/OPEN",{selectedText:i,fullText:n}),P1=()=>(0,Yi.action)("@neosidekick/ai-assistant/UI/ModifyDialog/CANCEL"),T1=n=>(0,Yi.action)("@neosidekick/ai-assistant/UI/ModifyDialog/APPLY",{newText:n}),Pr={openModal:N1,cancelModal:P1,applyModal:T1},zf=(n,i)=>rf(n,s=>{switch(i.type){case"@neos/neos-ui/System/INIT":{s.plugins.NEOSidekick={},s.plugins.NEOSidekick.AiAssistant={},s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/OPEN":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!0,s.plugins.NEOSidekick.AiAssistant.fullText=i.payload.fullText,s.plugins.NEOSidekick.AiAssistant.selectedText=i.payload.selectedText;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/CANCEL":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/APPLY":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}}}),Ji={isModalOpen:n=>n.plugins?.NEOSidekick?.AiAssistant?.isModalOpen,fullText:n=>n.plugins?.NEOSidekick?.AiAssistant?.fullText,selectedText:n=>n.plugins?.NEOSidekick?.AiAssistant?.selectedText};var Zi=G(Yf());var mt=G(Rt()),el=G(An()),we=G(Vt()),tl=G(en()),wn=G(Sn()),Yn=G(it());var k1={autoFocus:!1,disabled:!1,maxlength:null,readonly:!1},Ft=class extends mt.Component{constructor(){super(...arguments);N(this,"state",{loading:!1});N(this,"fetch",async(s,u)=>{let{commit:l,externalService:p,contentService:y,activeContentDimensions:A,addFlashMessage:C,i18nRegistry:x,node:P,parentNode:W,frontendConfiguration:I}=this.props;this.setState({loading:!0});try{u=await y.processObjectWithClientEval(u,P,W),u=Object.keys(u).map(D=>({identifier:D,value:u[D]}));let F=A.language?A.language[0]:I.defaultLanguage,U=await p.generate(s,F,u);l(U)}catch(F){C(F?.code??F?.message,F?.code?x.translate("NEOSidekick.AiAssistant:Error:"+F.code,F.message,{0:F.externalMessage}):F.message,F?.severity??"error")}finally{this.setState({loading:!1})}})}renderIcon(s){return s?mt.default.createElement(wn.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):mt.default.createElement(wn.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}render(){let{id:s,value:u,className:l,commit:p,options:y,i18nRegistry:A,onKeyPress:C,onEnterKey:x}=this.props,P=y&&y.placeholder&&A.translate(unescape(y.placeholder)),W=Object.assign({},k1,y),I=!W.readonly&&!W.disabled;return mt.default.createElement("div",{style:{display:"flex",flexDirection:"column"},className:l},mt.default.createElement("div",null,mt.default.createElement(wn.TextInput,{id:s,value:u,onChange:p,disabled:W.disabled||this.state.loading,maxLength:W.maxlength,readOnly:W.readonly,placeholder:P,onKeyPress:C,onEnterKey:x})),I?mt.default.createElement("div",{style:{marginTop:"4px"}},mt.default.createElement(wn.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:this.state.loading?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:this.state.loading,onClick:()=>this.fetch(W.module,W.arguments??{})},A.translate("NEOSidekick.AiAssistant:Main:generateWithSidekick"),"\xA0",this.renderIcon(this.state.loading))):null)}};N(Ft,"propTypes",{className:we.default.string,value:we.default.oneOfType([we.default.string,we.default.number]),commit:we.default.func.isRequired,options:we.default.object,onKeyPress:we.default.func,onEnterKey:we.default.func,id:we.default.string,activeContentDimensions:we.default.object.isRequired,node:we.default.object,parentNode:we.default.object,i18nRegistry:we.default.object.isRequired,externalService:we.default.object.isRequired,contentService:we.default.object.isRequired,addFlashMessage:we.default.func.isRequired,frontendConfiguration:we.default.object}),N(Ft,"defaultProps",{options:{}}),Ft=Be([(0,tl.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,el.connect)(n=>{let i=Yn.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:Yn.selectors.CR.ContentDimensions.active(n),node:i,parentNode:Yn.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:Yn.actions.UI.FlashMessages.add})],Ft);var yt=G(Rt()),nl=G(An()),Te=G(Vt()),rl=G(en()),bn=G(Sn()),Jn=G(it());var I1={disabled:!1,maxlength:null,readonly:!1,placeholder:"",minRows:2,expandedRows:6},Mt=class extends yt.Component{constructor(s){super(s);N(this,"fetch",async(s,u)=>{let{commit:l,externalService:p,contentService:y,activeContentDimensions:A,addFlashMessage:C,i18nRegistry:x,node:P,parentNode:W,frontendConfiguration:I}=this.props;this.setState({loading:!0});try{u=await y.processObjectWithClientEval(u,P,W),u=Object.keys(u).map(D=>({identifier:D,value:u[D]}));let F=A.language?A.language[0]:I.defaultLanguage,U=await p.generate(s,F,u);l(U)}catch(F){C(F?.code??F?.message,F?.code?x.translate("NEOSidekick.AiAssistant:Error:"+F.code,F.message,{0:F.externalMessage}):F.message,F?.severity??"error")}finally{this.setState({loading:!1})}});this.state={loading:!1}}renderIcon(s){return s?yt.default.createElement(bn.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):yt.default.createElement(bn.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}render(){let{id:s,value:u,className:l,commit:p,options:y,i18nRegistry:A}=this.props,C=y&&y.placeholder&&A.translate(unescape(y.placeholder)),x=Object.assign({},I1,y),P=!x.readonly&&!x.disabled;return yt.default.createElement("div",{style:{display:"flex",flexDirection:"column"},className:l},yt.default.createElement("div",null,yt.default.createElement(bn.TextArea,{id:s,value:u,onChange:p,disabled:x.disabled||this.state.loading,maxLength:x.maxlength,readOnly:x.readonly,placeholder:C,minRows:x.minRows,expandedRows:x.expandedRows})),P?yt.default.createElement("div",null,yt.default.createElement(bn.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:this.state.loading?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:this.state.loading,onClick:()=>this.fetch(x.module,x.arguments??{})},A.translate("NEOSidekick.AiAssistant:Main:generateWithSidekick"),"\xA0",this.renderIcon(this.state.loading))):null)}};N(Mt,"propTypes",{className:Te.default.string,value:Te.default.oneOfType([Te.default.string,Te.default.number]),commit:Te.default.func.isRequired,options:Te.default.object,id:Te.default.string,activeContentDimensions:Te.default.object.isRequired,node:Te.default.object,parentNode:Te.default.object,i18nRegistry:Te.default.object.isRequired,externalService:Te.default.object.isRequired,contentService:Te.default.object.isRequired,addFlashMessage:Te.default.func.isRequired,frontendConfiguration:Te.default.object}),N(Mt,"defaultProps",{options:{}}),Mt=Be([(0,rl.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,nl.connect)(n=>{let i=Jn.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:Jn.selectors.CR.ContentDimensions.active(n),node:i,parentNode:Jn.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:Jn.actions.UI.FlashMessages.add})],Mt);var il=(n,i)=>{let s=n.get("inspector").get("editors");s.set("NEOSidekick.AiAssistant/Inspector/Editors/MagicTextFieldEditor",{component:i?Ft:Zi.TextField}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/MagicTextAreaEditor",{component:i?Mt:Zi.TextArea})};var Fe=G(Rt()),Tr=G(Sn());var Xi=G(Rt()),ol=G(An()),Zn=G(Vt()),sl=G(it()),al=G(en());var Dt=class extends Xi.PureComponent{getUri(){let{configuration:i,activeContentDimensions:s,interfaceLanguage:u}=this.props,l=new URL(`${i.apiDomain}/chat/`);return l.searchParams.append("contentLanguage",s.language?s.language[0]:i.defaultLanguage),l.searchParams.append("interfaceLanguage",u),l.searchParams.append("userId",i.userId),l.searchParams.append("plattform","neos"),l.searchParams.append("domain",i.domain),l.searchParams.append("siteName",i.siteName),i?.referrer&&l.searchParams.append("referral",i?.referrer),i?.apiKey&&l.searchParams.append("apikey",i?.apiKey),l}render(){let{className:i}=this.props;return Xi.default.createElement("iframe",{id:"neosidekickAssistant",className:i,src:this.getUri().toString(),allow:"clipboard-write",onLoad:s=>s.target.dataset.loaded="true"})}};N(Dt,"propTypes",{configuration:Zn.default.object.isRequired,i18nRegistry:Zn.default.object.isRequired,activeContentDimensions:Zn.default.object.isRequired,interfaceLanguage:Zn.default.string.isRequired,className:Zn.default.string}),Dt=Be([(0,al.neos)(n=>({configuration:n.get("NEOSidekick.AiAssistant").get("configuration"),i18nRegistry:n.get("i18n")})),(0,ol.connect)(n=>({activeContentDimensions:sl.selectors.CR.ContentDimensions.active(n),interfaceLanguage:n.user?.preferences?.interfaceLanguage}),{})],Dt);var ul=(n,i)=>{let s=n.get("containers"),u=s.get("App");if(!i.chatSidebarEnabled){s.set("App",p=>Fe.default.createElement("div",null,Fe.default.createElement(u,{...p}),Fe.default.createElement(Dt,{className:"neosidekick__frame--hidden"})));return}let l=p=>{let y=localStorage.getItem("NEOSidekick")?JSON.parse(localStorage.getItem("NEOSidekick")):{open:!0,fullscreen:!1},[A,C]=Fe.default.useState(y?.open),x=D=>{C(D),y.open=D,localStorage.setItem("NEOSidekick",JSON.stringify(y))},[P,W]=Fe.default.useState(y?.fullscreen),I=D=>{W(D),y.fullscreen=D,localStorage.setItem("NEOSidekick",JSON.stringify(y))},F=(D,O,E)=>D?Fe.default.createElement(Tr.IconButton,{icon:O?"compress":"expand",onClick:E}):"",U=(D,O,E)=>O?"":Fe.default.createElement(Tr.IconButton,{icon:D?"chevron-circle-right":"chevron-circle-left",onClick:E});return Fe.default.createElement("div",{className:`neosidekick_appWrapper ${A?"neosidekick_appWrapper--sidebar-open":""}  ${P?"neosidekick_appWrapper--sidebar-fullscreen":""}`},Fe.default.createElement(u,{...p}),Fe.default.createElement("div",{className:"neosidekick_sideBar"},Fe.default.createElement("div",{className:"neosidekick_sideBar__title"},Fe.default.createElement(Tr.Headline,{className:`neosidekick_sideBar__title-headline ${A?"neosidekick_sideBar__title-headline--open":""}`},"AI Sidekick"),Fe.default.createElement("div",null,F(A,P,()=>I(!P)),U(A,P,()=>x(!A)))),Fe.default.createElement(Dt,{className:`neosidekick_sideBar__frame ${A?"neosidekick_sideBar__frame--open":""}`})))};s.set("App",l)};var Ir=G(it()),vl=G(Qi());var fl=G(Qi()),Vi=G(it()),ll=(n,i)=>function*(){yield(0,fl.takeEvery)(Vi.actionTypes.ServerFeedback.HANDLE_SERVER_FEEDBACK,function*(s){s.payload.feedbackEnvelope.feedbacks.forEach(u=>{if(u.type!=="Neos.Neos.Ui:NodeCreated")return;let p=u.payload.contextPath.split("@")[0],y=i.getState(),A=Vi.selectors.CR.Nodes.nodesByContextPathSelector(y),C=n.get("@neos-project/neos-ui-contentrepository"),x=n.get("NEOSidekick.AiAssistant").get("contentService");Object.keys(A).forEach(P=>{if(!P.split("@")[0].startsWith(p))return;let I=A[P],F=A[I.parent],U=C.get(I.nodeType);Object.keys(U.properties).forEach(D=>{x.evaluateNodeTypeConfigurationAndStartGeneration(I,D,U,F,!0)})})})})};var dl=G(Qi()),pl=G(it()),hl=(n,i)=>function*(){yield(0,dl.takeEvery)(pl.actionTypes.CR.Nodes.REMOVE,function*(s){n.get("NEOSidekick.AiAssistant").get("contentCanvasService").onNodeRemoved(s.payload)})};var ml=G(gl());function R1(n){return new Promise(i=>setTimeout(i,n))}var yl=(n,i,s,u)=>{let l=!1,p=(0,ml.debounce)((C,x)=>s.updateWebContext(C,x),500),y=function*(){yield(0,vl.takeLatest)([Ir.actionTypes.UI.ContentCanvas.SET_SRC,Ir.actionTypes.UI.ContentCanvas.RELOAD,Ir.actionTypes.CR.Nodes.MERGE],async function*(C){C.type===Ir.actionTypes.UI.ContentCanvas.SET_SRC&&(l=!0),yield R1(500);let x=n.get("@neos-project/neos-ui-contentrepository"),P=i.getState(),W=P?.ui?.contentCanvas?.previewUrl,I=u.getCurrentDocumentNode(),F=I?.contextPath,U=Object.values(P?.cr?.nodes?.byContextPath||{}).filter(O=>{let E=x.getRole("document");if(!E)throw new Error("Document role is not loaded!");let L=x.getSubTypesOf(E);return F&&O.contextPath.indexOf(F.split("@")[0])===0&&(O.contextPath===F||!L.includes(O.nodeType))}),D={url:W,title:I?.properties?.title||u.getGuestFrameDocumentTitle(),content:u.getGuestFrameDocumentHtml(),structuredContent:U,targetAudience:await u.getCurrentDocumentTargetAudience(),pageBriefing:await u.getCurrentDocumentPageBriefing(),focusKeyword:await u.getCurrentDocumentFocusKeyword()};p(l,D),l=!1})},A=n.get("sagas");A.set("NEOSidekick.AiAssistant/watchDocumentNodeChange",{saga:y}),A.set("NEOSidekick.AiAssistant/watchNodeCreated",{saga:ll(n,i)}),A.set("NEOSidekick.AiAssistant/watchNodeRemoved",{saga:hl(n,i)})};var Rr=G(Rt()),_l=G(An()),eo=G(Vt()),to=G(Sn()),Al=G(en()),Sl=G(it());var tn=class extends Rr.PureComponent{constructor(){super(...arguments);N(this,"state",{show:!1,enabled:!0});N(this,"evaluateFocusedNodeAndPropertyAndShowButton",(s=5)=>{let{nodeType:u,property:l}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty();if(!u||!l){if(s===0)return;setTimeout(()=>this.evaluateFocusedNodeAndPropertyAndShowButton(s-1),100);return}let p=u.properties[l];this.setState({show:p?.ui?.inlineEditable===!0&&p?.options?.sidekick?.module!==void 0})});N(this,"onClick",async()=>{let{addFlashMessage:s,i18nRegistry:u,contentService:l}=this.props;try{this.setState({enabled:!1});let{node:p,nodeType:y,parentNode:A,property:C}=l.getCurrentlyFocusedNodePathAndProperty();await l.evaluateNodeTypeConfigurationAndStartGeneration(p,C,y,A)}catch(p){s(p?.code??p?.message,p?.code?u.translate("NEOSidekick.AiAssistant:Error:"+p.code,p.message,{0:p.externalMessage}):p.message,p?.severity??"error")}finally{setTimeout(()=>{this.setState({enabled:!0})},2500)}})}componentDidMount(){this.evaluateFocusedNodeAndPropertyAndShowButton()}render(){let{i18nRegistry:s}=this.props;return this.state.show?Rr.default.createElement(to.Button,{disabled:!this.state.enabled,style:"transparent",hoverStyle:"brand",onClick:this.onClick,isActive:!!this.props.isActive,title:s.translate("NEOSidekick.AiAssistant:Main:generate")},Rr.default.createElement(to.Icon,{icon:"magic",fixedWidth:!0,padded:"right"}),s.translate("NEOSidekick.AiAssistant:Main:generate")):""}};N(tn,"propTypes",{contentService:eo.default.object.isRequired,i18nRegistry:eo.default.object.isRequired,addFlashMessage:eo.default.func.isRequired}),tn=Be([(0,Al.neos)(n=>({contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),i18nRegistry:n.get("i18n")})),(0,_l.connect)(()=>{},{addFlashMessage:Sl.actions.UI.FlashMessages.add})],tn);var Qn=G(Rt()),xn=G(Vt()),no=G(Sn()),wl=G(en()),bl=G(An());var ca=G(it());var nn=class extends Qn.PureComponent{constructor(){super(...arguments);N(this,"handleOpen",()=>{let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props,l=this.props.contentCanvasService.getEditorContent(s,u),p=this.props.contentCanvasService.getSelectedContent(s,u);this.props.openModal(l,p)})}render(){let{i18nRegistry:s}=this.props;return Qn.default.createElement("div",null,Qn.default.createElement(no.Button,{className:"button",style:"transparent",hoverStyle:"brand",onClick:this.handleOpen,title:s.translate("NEOSidekick.AiAssistant:Main:title","Mit AI bearbeiten")},"AI",Qn.default.createElement(no.Icon,{icon:"magic",fixedWidth:!0,padded:"left"})))}};N(nn,"propTypes",{contentService:xn.default.object.isRequired,contentCanvasService:xn.default.object.isRequired,i18nRegistry:xn.default.object.isRequired,openModal:xn.default.func.isRequired,focusedNodePath:xn.default.string,currentlyEditedPropertyName:xn.default.string}),nn=Be([(0,wl.neos)(n=>({contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService"),i18nRegistry:n.get("i18n")})),(0,bl.connect)(n=>({focusedNodePath:ca.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:ca.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n)}),{openModal:Pr.openModal})],nn);var B=G(Rt()),be=G(Vt()),El=G(An()),Nl=G(en()),ie=G(Sn()),Ce=G(Cl()),Cn=G(it());var Vn=G(Rt()),Fr=G(Vt()),Ol=G(en());var Lt=class extends Vn.PureComponent{constructor(s){super(s);N(this,"elementRef");N(this,"editorInstance");N(this,"lastValue");this.elementRef=Vn.default.createRef()}componentDidUpdate(s){if(s.value!==this.props.value&&this.lastValue!==this.props.value){if(!this.editorInstance){let u=this.elementRef.current;if(this.editorInstance=u?.querySelector(".ck-content")?.ckeditorInstance,!this.editorInstance)return}this.editorInstance.setData(this.props.value),this.lastValue=this.props.value}}render(){let{secondaryEditorsRegistry:s}=this.props,{component:u}=s.get("Neos.Neos/Inspector/Secondary/Editors/CKEditorWrap");return Vn.default.createElement("div",{className:"neosidekick__ck-editor"+(this.props.disabled?" neosidekick__ck-editor--disabled":""),ref:this.elementRef},Vn.default.createElement(u,{onChange:l=>{this.lastValue!==l&&(this.lastValue=l,this.props.onChange&&this.props.onChange(l))},value:this.props.value,options:Object.assign({},this.props.options,{disabled:!0})}))}};N(Lt,"propTypes",{value:Fr.default.string.isRequired,onChange:Fr.default.func,options:Fr.default.object,disabled:Fr.default.bool}),Lt=Be([(0,Ol.neos)(n=>({secondaryEditorsRegistry:n.get("inspector").get("secondaryEditors")}))],Lt);var rn=class extends B.PureComponent{constructor(s){super(s);N(this,"handleCancel",()=>{this.props.cancelModal(),this.setState({generatedText:"",generationState:"empty"})});N(this,"handleApply",()=>{this.props.applyModal();let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props;this.props.contentCanvasService.insertTextIntoInlineEditor(s,u,this.state.generatedText),this.setState({generatedText:"",generationState:"empty"})});N(this,"handleGenerate",async(s,u="default")=>{this.state.generationState==="loading"&&this.props.iFrameApiService.cancelCallModule();let{customPrompt:l}=this.state,{fullText:p,selectedText:y}=this.props,A=this.getPropertyConfiguration().ui?.inline?.editorOptions?.formatting,C=Object.keys(A).filter(I=>A[I]).map(I=>({a:"link",b:"bold",i:"italic",ol:"ordered list",ul:"unordered list"})[I]||I).join(", "),x,P;switch(s){case"configured":let I=this.getConfiguredSidekick();if(I.onCreate?.module){this.addFlashMessage("1696264259260","Please do not use options.sidekick.onCreate.module anymore. Read the docs to find out about the new configuration.","error");return}let{node:F,parentNode:U}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty(),D=await this.props.contentService.processObjectWithClientEval(I,F,U);x=D.module,P=D.arguments||{};break;case"intro":x="free_conversation",P={content:"Write a two sentence introduction for the current page.",allowedMarkdownFormattingOptions:C};break;case"page_conclusion":x="page_conclusion_writer",P={allowedMarkdownFormattingOptions:C};break;case"custom":if(!l||l.length<5){this.addFlashMessage("1696264259270","Please write a few words about how to change the text.","error");return}y&&y.length?(x="modify_selected_text",P={fullText:p,selectedText:y,modificationType:s,allowedMarkdownFormattingOptions:C,customPrompt:l,writingStyle:u}):(x="free_conversation",P={content:"Please create additional content for the current page. "+l,allowedMarkdownFormattingOptions:C});break;default:x="modify_selected_text",P={fullText:p,selectedText:y,modificationType:s,allowedMarkdownFormattingOptions:C,customPrompt:l,writingStyle:u};break}this.setState({generatedText:"",generationState:"loading"});let W={target:{modalTarget:!0},module:x,arguments:P};this.props.iFrameApiService.callModule(W)});this.state={customPrompt:"",writingStyles:[{value:"",label:"Loading..."}],generatedText:"",generationState:"empty"}}getLanguage(){let{activeContentDimensions:s,configuration:u}=this.props;return s.language?s.language[0]:u.defaultLanguage}getPropertyConfiguration(){let{node:s,nodeTypesRegistry:u}=this.props,l=s?u.get(s?.nodeType):null,{property:p}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty();return!s||!l||!p?null:l?.properties?l?.properties[p]:null}getConfiguredSidekick(){return this.getPropertyConfiguration()?.options?.sidekick}componentDidMount(){let s=this.getLanguage();this.props.externalService.fetch("/api/v1/writing-styles?language="+s).then(u=>{let l=u.data.filter(p=>p.identifier!=="default"&&p.allowed_languages.includes(s));this.setState({writingStyles:l.map(p=>({value:p.identifier,label:p.label}))})}),this.props.iFrameApiService.listenToMessages(u=>{if(u.data?.data?.modalTarget)switch(u?.data?.eventName){case"write-content":let{value:l,isFinished:p}=u.data?.data;this.setState({generatedText:l||""}),p&&(this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished());break;case"stopped-generation":this.setState({generationState:"finished"});break;case"error":let y=u?.data?.data?.message;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+y,"error",y),this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished();break;default:let A="Unknown message event: "+u?.data?.eventName;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+A,"error",A),this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished()}}),window.addEventListener("keydown",u=>{u.key==="Enter"&&u.target===document.getElementById("neosidekickAiModifyPromptTextarea")&&this.handleGenerate("custom")})}componentDidUpdate(s){s.isOpen&&!this.props.isOpen&&this.state.generationState==="loading"&&this.props.iFrameApiService.cancelCallModule(),!s.isOpen&&this.props.isOpen&&this.setState({customPrompt:"",generatedText:"",generationState:"empty"})}addFlashMessage(s,u,l="error",p){this.props.addFlashMessage(s,this.props.i18nRegistry.translate("NEOSidekick.AiAssistant:Error:"+s,u,{0:p}),l)}renderTitle(){return B.default.createElement("div",null,B.default.createElement(ie.Icon,{icon:"magic",className:"icon--space-right-large"}),this.props.selectedText?B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:modify-text-title",fallback:"Revise text"}):B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:create-text-title",fallback:"Create text"})," (Beta)")}renderCancelAction(){return B.default.createElement(ie.Button,{key:"cancel",style:"lighter",hoverStyle:"brand",onClick:this.handleCancel},B.default.createElement(Ce.default,{id:"Neos.Neos:Main:cancel",fallback:"Cancel"}))}renderSaveAction(){return this.state.generationState==="finished"?B.default.createElement(ie.Button,{key:"save",style:"success",hoverStyle:"success",onClick:this.handleApply},this.props.selectedText?B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:apply-modify-text",fallback:"Use text"}):B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:apply-create-text",fallback:"Insert text"})):""}hasSelectedText(){return this.props.selectedText&&this.props.selectedText.trim().length>0}renderConfiguredButton(){return this.getConfiguredSidekick()?.module?B.default.createElement(ie.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("configured")},B.default.createElement(ie.Icon,{icon:"hand-sparkles",className:"icon--space-right"}),this.getConfiguredSidekick()?.label||B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:configured-button",fallback:"Configured instruction"})):""}renderCreateButtons(){return B.default.createElement("div",{className:"quickGenerationButtons"},this.renderConfiguredButton(),B.default.createElement(ie.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("intro")},B.default.createElement(ie.Icon,{icon:"paragraph",className:"icon--space-right"}),B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:intro-button",fallback:"Introduction"})),B.default.createElement(ie.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("page_conclusion")},B.default.createElement(ie.Icon,{icon:"paragraph",className:"icon--space-right"}),B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:page-conclusion-button",fallback:"Page Conclusion"})))}renderEditButtons(){let{i18nRegistry:s}=this.props;return B.default.createElement("div",{className:"quickGenerationButtons"},B.default.createElement(ie.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("rephrase")},B.default.createElement(ie.Icon,{icon:"redo",className:"icon--space-right"}),B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:rephrase-button",fallback:"Rephrase"})),B.default.createElement(ie.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("longer")},B.default.createElement(ie.Icon,{icon:"expand-alt",className:"icon--space-right"}),B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:longer-button",fallback:"Make it longer"})),B.default.createElement(ie.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("shorter")},B.default.createElement(ie.Icon,{icon:"compress-alt",className:"icon--space-right"}),B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:shorter-button",fallback:"Make it shorter"})),B.default.createElement(ie.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("fix_spelling")},B.default.createElement(ie.Icon,{icon:"spell-check",className:"icon--space-right"}),B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:fix-text-button",fallback:"Fix spelling & grammar"})),B.default.createElement("div",{className:"quickGenerationButtons__selectWrapper"},B.default.createElement(ie.SelectBox,{className:"quickGenerationButtons__select",placeholder:s.translate("NEOSidekick.AiAssistant:AiModal:change-tone"),onValueChange:u=>this.handleGenerate("style",u),options:this.state.writingStyles})))}render(){let{selectedText:s,i18nRegistry:u}=this.props,{customPrompt:l,generatedText:p,generationState:y}=this.state,A=JSON.parse(JSON.stringify(this.getPropertyConfiguration()?.ui?.inline?.editorOptions)||"{}");return A.sidekickModifyButton=!1,B.default.createElement(ie.Dialog,{actions:[this.renderCancelAction(),this.renderSaveAction()],title:this.renderTitle(),onRequestClose:this.handleCancel,isOpen:this.props.isOpen,style:"wide"},B.default.createElement("div",{className:"primaryColumn"},this.hasSelectedText()?B.default.createElement("div",{className:"originalText"},B.default.createElement(ie.Label,null,B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:selected-text",fallback:"Selected Text"}),":"),B.default.createElement(Lt,{value:s,options:A,disabled:!0})):"",B.default.createElement("div",{className:"promptRow"},B.default.createElement(ie.TextArea,{autoFocus:!0,id:"neosidekickAiModifyPromptTextarea",placeholder:this.hasSelectedText()?u.translate("NEOSidekick.AiAssistant:AiModal:custom-prompt-modify-placeholder","How should the text be changed?"):u.translate("NEOSidekick.AiAssistant:AiModal:custom-prompt-create-placeholder","Which text should I write?"),onChange:C=>this.setState({customPrompt:C}),minRows:2,expandedRows:2}),B.default.createElement(ie.Button,{className:"promptRow__button",disabled:!l,style:l&&y=="empty"?"success":"lighter",hoverStyle:"success",onClick:()=>this.handleGenerate("custom")},B.default.createElement(ie.Icon,{icon:"magic",className:"icon--space-right"}),B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:Main:generate",fallback:"Generate"}))),this.hasSelectedText()?this.renderEditButtons():this.renderCreateButtons(),y==="empty"?"":B.default.createElement("div",{className:"result"},B.default.createElement(ie.Label,null,B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:new-text",fallback:"New Text"}),":"),B.default.createElement(Lt,{onChange:C=>this.setState({generatedText:C}),value:p,options:A}),B.default.createElement("i",{className:"result__notice"},B.default.createElement(Ce.default,{id:"NEOSidekick.AiAssistant:AiModal:disclaimer",fallback:"GenAI models can make mistakes. Check important information."})))))}};N(rn,"propTypes",{iFrameApiService:be.default.object.isRequired,contentService:be.default.object.isRequired,contentCanvasService:be.default.object.isRequired,externalService:be.default.object.isRequired,i18nRegistry:be.default.object.isRequired,nodeTypesRegistry:be.default.object.isRequired,configuration:be.default.object.isRequired,isOpen:be.default.bool,focusedNodePath:be.default.string,currentlyEditedPropertyName:be.default.string,fullText:be.default.string,selectedText:be.default.string,activeContentDimensions:be.default.object,node:be.default.object,cancelModal:be.default.func.isRequired,applyModal:be.default.func.isRequired,addFlashMessage:be.default.func.isRequired}),rn=Be([(0,Nl.neos)(n=>({iFrameApiService:n.get("NEOSidekick.AiAssistant").get("iFrameApiService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),i18nRegistry:n.get("i18n"),nodeTypesRegistry:n.get("@neos-project/neos-ui-contentrepository"),configuration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,El.connect)(n=>({isOpen:Ji.isModalOpen(n),focusedNodePath:Cn.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:Cn.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n),fullText:Ji.fullText(n),selectedText:Ji.selectedText(n),activeContentDimensions:Cn.selectors.CR.ContentDimensions.active(n),node:Cn.selectors.CR.Nodes.focusedSelector(n)}),{cancelModal:Pr.cancelModal,applyModal:Pr.applyModal,addFlashMessage:Cn.actions.UI.FlashMessages.add})],rn);var Pl=n=>{let s=n.get("ckEditor5").get("richtextToolbar");s.set("NEOSidekick.AiAssistant:ModifyButton",{component:nn,isVisible:l=>l?.sidekickModifyButton!==!1},"start"),s.set("NEOSidekick.AiAssistant:generate",{component:tn,isVisible:()=>!0},"end"),n.get("containers").set("Modals/AiModal",rn)};Kc("NEOSidekick.AiAssistant",{},(n,{store:i,frontendConfiguration:s})=>{let u=s["NEOSidekick.AiAssistant"];if(il(n,u?.enabled),!u?.enabled)return;if(!u.hasOwnProperty("defaultLanguage")||!u.defaultLanguage){console.error("Could not initialize AiAssistant: defaultLanguage is not configured correctly, see README.");return}n.get("reducers").set("NEOSidekick.AiAssistant",{reducer:zf}),n.set("NEOSidekick.AiAssistant",new Jt(""));let l=n.get("NEOSidekick.AiAssistant");l.set("configuration",u);let p=qc(u);l.set("externalService",p);let y=Uf(n,i);l.set("contentService",y);let A=Kf();l.set("iFrameApiService",A);let C=Hf(n,i,A);l.set("contentCanvasService",C),ul(n,u),yl(n,i,A,y),Pl(n)});})();
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
//# sourceMappingURL=Plugin.js.map
