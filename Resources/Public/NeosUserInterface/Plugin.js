"use strict";(()=>{var S_=Object.create;var Ni=Object.defineProperty;var Gc=Object.getOwnPropertyDescriptor;var w_=Object.getOwnPropertyNames;var b_=Object.getPrototypeOf,x_=Object.prototype.hasOwnProperty;var C_=(n,i,s)=>i in n?Ni(n,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[i]=s;var O_=(n,i)=>()=>(n&&(i=n(n=0)),i);var nt=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports);var E_=(n,i,s,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of w_(i))!x_.call(n,l)&&l!==s&&Ni(n,l,{get:()=>i[l],enumerable:!(u=Gc(i,l))||u.enumerable});return n};var G=(n,i,s)=>(s=n!=null?S_(b_(n)):{},E_(i||!n||!n.__esModule?Ni(s,"default",{value:n,enumerable:!0}):s,n));var Be=(n,i,s,u)=>{for(var l=u>1?void 0:u?Gc(i,s):i,h=n.length-1,v;h>=0;h--)(v=n[h])&&(l=(u?v(i,s,l):v(l))||l);return u&&l&&Ni(i,s,l),l};var N=(n,i,s)=>(C_(n,typeof i!="symbol"?i+"":i,s),s);function de(n){return(...i)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${n}`])return window["@Neos:HostPluginAPI"][`@${n}`](...i);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var rt=O_(()=>{});var it=nt((fA,$c)=>{rt();$c.exports=de("NeosProjectPackages")().NeosUiReduxStore});var Lf=nt((Cr,qn)=>{var G_=200,H_="Expected a function",ea="__lodash_hash_undefined__",Bi=1,$n=2,pf=1/0,hf=9007199254740991,Ii="[object Arguments]",js="[object Array]",gf="[object Boolean]",mf="[object Date]",vf="[object Error]",yf="[object Function]",K_="[object GeneratorFunction]",Mi="[object Map]",_f="[object Number]",Kn="[object Object]",rf="[object Promise]",Af="[object RegExp]",Fi="[object Set]",Sf="[object String]",wf="[object Symbol]",Ys="[object WeakMap]",bf="[object ArrayBuffer]",Ri="[object DataView]",q_="[object Float32Array]",$_="[object Float64Array]",z_="[object Int8Array]",j_="[object Int16Array]",Y_="[object Int32Array]",J_="[object Uint8Array]",Z_="[object Uint8ClampedArray]",X_="[object Uint16Array]",Q_="[object Uint32Array]",V_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,e0=/^\w*$/,t0=/^\./,n0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r0=/[\\^$.*+?()[\]{}|]/g,i0=/\\(\\)?/g,o0=/^\[object .+?Constructor\]$/,s0=/^(?:0|[1-9]\d*)$/,ce={};ce[q_]=ce[$_]=ce[z_]=ce[j_]=ce[Y_]=ce[J_]=ce[Z_]=ce[X_]=ce[Q_]=!0;ce[Ii]=ce[js]=ce[bf]=ce[gf]=ce[Ri]=ce[mf]=ce[vf]=ce[yf]=ce[Mi]=ce[_f]=ce[Kn]=ce[Af]=ce[Fi]=ce[Sf]=ce[Ys]=!1;var xf=typeof global=="object"&&global&&global.Object===Object&&global,a0=typeof self=="object"&&self&&self.Object===Object&&self,Xt=xf||a0||Function("return this")(),Cf=typeof Cr=="object"&&Cr&&!Cr.nodeType&&Cr,of=Cf&&typeof qn=="object"&&qn&&!qn.nodeType&&qn,u0=of&&of.exports===Cf,sf=u0&&xf.process,af=function(){try{return sf&&sf.binding("util")}catch{}}(),uf=af&&af.isTypedArray;function c0(n,i){for(var s=-1,u=n?n.length:0;++s<u;)if(i(n[s],s,n))return!0;return!1}function f0(n){return function(i){return i?.[n]}}function l0(n,i){for(var s=-1,u=Array(n);++s<n;)u[s]=i(s);return u}function d0(n){return function(i){return n(i)}}function p0(n,i){return n?.[i]}function Js(n){var i=!1;if(n!=null&&typeof n.toString!="function")try{i=!!(n+"")}catch{}return i}function h0(n){var i=-1,s=Array(n.size);return n.forEach(function(u,l){s[++i]=[l,u]}),s}function g0(n,i){return function(s){return n(i(s))}}function m0(n){var i=-1,s=Array(n.size);return n.forEach(function(u){s[++i]=u}),s}var v0=Array.prototype,y0=Function.prototype,Ui=Object.prototype,$s=Xt["__core-js_shared__"],cf=function(){var n=/[^.]+$/.exec($s&&$s.keys&&$s.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Of=y0.toString,Tt=Ui.hasOwnProperty,zn=Ui.toString,_0=RegExp("^"+Of.call(Tt).replace(r0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ff=Xt.Symbol,lf=Xt.Uint8Array,A0=Ui.propertyIsEnumerable,S0=v0.splice,w0=g0(Object.keys,Object),Zs=jn(Xt,"DataView"),Or=jn(Xt,"Map"),Xs=jn(Xt,"Promise"),Qs=jn(Xt,"Set"),Vs=jn(Xt,"WeakMap"),Er=jn(Object,"create"),b0=_n(Zs),x0=_n(Or),C0=_n(Xs),O0=_n(Qs),E0=_n(Vs),Di=ff?ff.prototype:void 0,zs=Di?Di.valueOf:void 0,df=Di?Di.toString:void 0;function vn(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function N0(){this.__data__=Er?Er(null):{}}function P0(n){return this.has(n)&&delete this.__data__[n]}function T0(n){var i=this.__data__;if(Er){var s=i[n];return s===ea?void 0:s}return Tt.call(i,n)?i[n]:void 0}function k0(n){var i=this.__data__;return Er?i[n]!==void 0:Tt.call(i,n)}function I0(n,i){var s=this.__data__;return s[n]=Er&&i===void 0?ea:i,this}vn.prototype.clear=N0;vn.prototype.delete=P0;vn.prototype.get=T0;vn.prototype.has=k0;vn.prototype.set=I0;function kt(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function M0(){this.__data__=[]}function F0(n){var i=this.__data__,s=Gi(i,n);if(s<0)return!1;var u=i.length-1;return s==u?i.pop():S0.call(i,s,1),!0}function R0(n){var i=this.__data__,s=Gi(i,n);return s<0?void 0:i[s][1]}function D0(n){return Gi(this.__data__,n)>-1}function L0(n,i){var s=this.__data__,u=Gi(s,n);return u<0?s.push([n,i]):s[u][1]=i,this}kt.prototype.clear=M0;kt.prototype.delete=F0;kt.prototype.get=R0;kt.prototype.has=D0;kt.prototype.set=L0;function It(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function W0(){this.__data__={hash:new vn,map:new(Or||kt),string:new vn}}function B0(n){return Hi(this,n).delete(n)}function U0(n){return Hi(this,n).get(n)}function G0(n){return Hi(this,n).has(n)}function H0(n,i){return Hi(this,n).set(n,i),this}It.prototype.clear=W0;It.prototype.delete=B0;It.prototype.get=U0;It.prototype.has=G0;It.prototype.set=H0;function Li(n){var i=-1,s=n?n.length:0;for(this.__data__=new It;++i<s;)this.add(n[i])}function K0(n){return this.__data__.set(n,ea),this}function q0(n){return this.__data__.has(n)}Li.prototype.add=Li.prototype.push=K0;Li.prototype.has=q0;function Pt(n){this.__data__=new kt(n)}function $0(){this.__data__=new kt}function z0(n){return this.__data__.delete(n)}function j0(n){return this.__data__.get(n)}function Y0(n){return this.__data__.has(n)}function J0(n,i){var s=this.__data__;if(s instanceof kt){var u=s.__data__;if(!Or||u.length<G_-1)return u.push([n,i]),this;s=this.__data__=new It(u)}return s.set(n,i),this}Pt.prototype.clear=$0;Pt.prototype.delete=z0;Pt.prototype.get=j0;Pt.prototype.has=Y0;Pt.prototype.set=J0;function Z0(n,i){var s=yn(n)||Ff(n)?l0(n.length,String):[],u=s.length,l=!!u;for(var h in n)(i||Tt.call(n,h))&&!(l&&(h=="length"||Tf(h,u)))&&s.push(h);return s}function Gi(n,i){for(var s=n.length;s--;)if(Mf(n[s][0],i))return s;return-1}var X0=l1();function Q0(n,i){return n&&X0(n,i,Wi)}function Ef(n,i){i=Ki(i,n)?[i]:Nf(i);for(var s=0,u=i.length;n!=null&&s<u;)n=n[qi(i[s++])];return s&&s==u?n:void 0}function V0(n){return zn.call(n)}function e1(n,i){return n!=null&&i in Object(n)}function ta(n,i,s,u,l){return n===i?!0:n==null||i==null||!$i(n)&&!zi(i)?n!==n&&i!==i:t1(n,i,ta,s,u,l)}function t1(n,i,s,u,l,h){var v=yn(n),A=yn(i),b=js,C=js;v||(b=Zt(n),b=b==Ii?Kn:b),A||(C=Zt(i),C=C==Ii?Kn:C);var P=b==Kn&&!Js(n),L=C==Kn&&!Js(i),M=b==C;if(M&&!P)return h||(h=new Pt),v||S1(n)?Pf(n,i,s,u,l,h):d1(n,i,b,s,u,l,h);if(!(l&$n)){var R=P&&Tt.call(n,"__wrapped__"),U=L&&Tt.call(i,"__wrapped__");if(R||U){var W=R?n.value():n,O=U?i.value():i;return h||(h=new Pt),s(W,O,u,l,h)}}return M?(h||(h=new Pt),p1(n,i,s,u,l,h)):!1}function n1(n,i,s,u){var l=s.length,h=l,v=!u;if(n==null)return!h;for(n=Object(n);l--;){var A=s[l];if(v&&A[2]?A[1]!==n[A[0]]:!(A[0]in n))return!1}for(;++l<h;){A=s[l];var b=A[0],C=n[b],P=A[1];if(v&&A[2]){if(C===void 0&&!(b in n))return!1}else{var L=new Pt;if(u)var M=u(C,P,b,n,i,L);if(!(M===void 0?ta(P,C,u,Bi|$n,L):M))return!1}}return!0}function r1(n){if(!$i(n)||v1(n))return!1;var i=Df(n)||Js(n)?_0:o0;return i.test(_n(n))}function i1(n){return zi(n)&&ra(n.length)&&!!ce[zn.call(n)]}function o1(n){return typeof n=="function"?n:n==null?O1:typeof n=="object"?yn(n)?u1(n[0],n[1]):a1(n):E1(n)}function s1(n){if(!y1(n))return w0(n);var i=[];for(var s in Object(n))Tt.call(n,s)&&s!="constructor"&&i.push(s);return i}function a1(n){var i=h1(n);return i.length==1&&i[0][2]?If(i[0][0],i[0][1]):function(s){return s===n||n1(s,n,i)}}function u1(n,i){return Ki(n)&&kf(i)?If(qi(n),i):function(s){var u=b1(s,n);return u===void 0&&u===i?x1(s,n):ta(i,u,void 0,Bi|$n)}}function c1(n){return function(i){return Ef(i,n)}}function f1(n){if(typeof n=="string")return n;if(ia(n))return df?df.call(n):"";var i=n+"";return i=="0"&&1/n==-pf?"-0":i}function Nf(n){return yn(n)?n:_1(n)}function l1(n){return function(i,s,u){for(var l=-1,h=Object(i),v=u(i),A=v.length;A--;){var b=v[n?A:++l];if(s(h[b],b,h)===!1)break}return i}}function Pf(n,i,s,u,l,h){var v=l&$n,A=n.length,b=i.length;if(A!=b&&!(v&&b>A))return!1;var C=h.get(n);if(C&&h.get(i))return C==i;var P=-1,L=!0,M=l&Bi?new Li:void 0;for(h.set(n,i),h.set(i,n);++P<A;){var R=n[P],U=i[P];if(u)var W=v?u(U,R,P,i,n,h):u(R,U,P,n,i,h);if(W!==void 0){if(W)continue;L=!1;break}if(M){if(!c0(i,function(O,E){if(!M.has(E)&&(R===O||s(R,O,u,l,h)))return M.add(E)})){L=!1;break}}else if(!(R===U||s(R,U,u,l,h))){L=!1;break}}return h.delete(n),h.delete(i),L}function d1(n,i,s,u,l,h,v){switch(s){case Ri:if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case bf:return!(n.byteLength!=i.byteLength||!u(new lf(n),new lf(i)));case gf:case mf:case _f:return Mf(+n,+i);case vf:return n.name==i.name&&n.message==i.message;case Af:case Sf:return n==i+"";case Mi:var A=h0;case Fi:var b=h&$n;if(A||(A=m0),n.size!=i.size&&!b)return!1;var C=v.get(n);if(C)return C==i;h|=Bi,v.set(n,i);var P=Pf(A(n),A(i),u,l,h,v);return v.delete(n),P;case wf:if(zs)return zs.call(n)==zs.call(i)}return!1}function p1(n,i,s,u,l,h){var v=l&$n,A=Wi(n),b=A.length,C=Wi(i),P=C.length;if(b!=P&&!v)return!1;for(var L=b;L--;){var M=A[L];if(!(v?M in i:Tt.call(i,M)))return!1}var R=h.get(n);if(R&&h.get(i))return R==i;var U=!0;h.set(n,i),h.set(i,n);for(var W=v;++L<b;){M=A[L];var O=n[M],E=i[M];if(u)var B=v?u(E,O,M,i,n,h):u(O,E,M,n,i,h);if(!(B===void 0?O===E||s(O,E,u,l,h):B)){U=!1;break}W||(W=M=="constructor")}if(U&&!W){var F=n.constructor,Y=i.constructor;F!=Y&&"constructor"in n&&"constructor"in i&&!(typeof F=="function"&&F instanceof F&&typeof Y=="function"&&Y instanceof Y)&&(U=!1)}return h.delete(n),h.delete(i),U}function Hi(n,i){var s=n.__data__;return m1(i)?s[typeof i=="string"?"string":"hash"]:s.map}function h1(n){for(var i=Wi(n),s=i.length;s--;){var u=i[s],l=n[u];i[s]=[u,l,kf(l)]}return i}function jn(n,i){var s=p0(n,i);return r1(s)?s:void 0}var Zt=V0;(Zs&&Zt(new Zs(new ArrayBuffer(1)))!=Ri||Or&&Zt(new Or)!=Mi||Xs&&Zt(Xs.resolve())!=rf||Qs&&Zt(new Qs)!=Fi||Vs&&Zt(new Vs)!=Ys)&&(Zt=function(n){var i=zn.call(n),s=i==Kn?n.constructor:void 0,u=s?_n(s):void 0;if(u)switch(u){case b0:return Ri;case x0:return Mi;case C0:return rf;case O0:return Fi;case E0:return Ys}return i});function g1(n,i,s){i=Ki(i,n)?[i]:Nf(i);for(var u,l=-1,v=i.length;++l<v;){var h=qi(i[l]);if(!(u=n!=null&&s(n,h)))break;n=n[h]}if(u)return u;var v=n?n.length:0;return!!v&&ra(v)&&Tf(h,v)&&(yn(n)||Ff(n))}function Tf(n,i){return i=i??hf,!!i&&(typeof n=="number"||s0.test(n))&&n>-1&&n%1==0&&n<i}function Ki(n,i){if(yn(n))return!1;var s=typeof n;return s=="number"||s=="symbol"||s=="boolean"||n==null||ia(n)?!0:e0.test(n)||!V_.test(n)||i!=null&&n in Object(i)}function m1(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function v1(n){return!!cf&&cf in n}function y1(n){var i=n&&n.constructor,s=typeof i=="function"&&i.prototype||Ui;return n===s}function kf(n){return n===n&&!$i(n)}function If(n,i){return function(s){return s==null?!1:s[n]===i&&(i!==void 0||n in Object(s))}}var _1=na(function(n){n=w1(n);var i=[];return t0.test(n)&&i.push(""),n.replace(n0,function(s,u,l,h){i.push(l?h.replace(i0,"$1"):u||s)}),i});function qi(n){if(typeof n=="string"||ia(n))return n;var i=n+"";return i=="0"&&1/n==-pf?"-0":i}function _n(n){if(n!=null){try{return Of.call(n)}catch{}try{return n+""}catch{}}return""}function na(n,i){if(typeof n!="function"||i&&typeof i!="function")throw new TypeError(H_);var s=function(){var u=arguments,l=i?i.apply(this,u):u[0],h=s.cache;if(h.has(l))return h.get(l);var v=n.apply(this,u);return s.cache=h.set(l,v),v};return s.cache=new(na.Cache||It),s}na.Cache=It;function Mf(n,i){return n===i||n!==n&&i!==i}function Ff(n){return A1(n)&&Tt.call(n,"callee")&&(!A0.call(n,"callee")||zn.call(n)==Ii)}var yn=Array.isArray;function Rf(n){return n!=null&&ra(n.length)&&!Df(n)}function A1(n){return zi(n)&&Rf(n)}function Df(n){var i=$i(n)?zn.call(n):"";return i==yf||i==K_}function ra(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=hf}function $i(n){var i=typeof n;return!!n&&(i=="object"||i=="function")}function zi(n){return!!n&&typeof n=="object"}function ia(n){return typeof n=="symbol"||zi(n)&&zn.call(n)==wf}var S1=uf?d0(uf):i1;function w1(n){return n==null?"":f1(n)}function b1(n,i,s){var u=n==null?void 0:Ef(n,i);return u===void 0?s:u}function x1(n,i){return n!=null&&g1(n,i,e1)}function Wi(n){return Rf(n)?Z0(n):s1(n)}function C1(n,i){var s={};return i=o1(i,3),Q0(n,function(u,l,h){s[l]=i(u,l,h)}),s}function O1(n){return n}function E1(n){return Ki(n)?f0(qi(n)):c1(n)}qn.exports=C1});var qf=nt((ji,Kf)=>{(function(n,i){typeof ji=="object"&&typeof Kf<"u"?i(ji):typeof define=="function"&&define.amd?define(["exports"],i):i((n=n||self).TypesafeActions={})})(ji,function(n){"use strict";function i(O){return O==null}function s(O){throw new Error("Argument "+O+" is empty.")}function u(O){return typeof O=="function"&&"getType"in O}function l(O){throw new Error("Argument "+O+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function h(O,E){if(O==null)throw new Error("Argument contains array with empty element at index "+E);if(O.getType==null)throw new Error("Argument contains array with invalid element at index "+E+', it should be an action-creator instance from "typesafe-actions"')}function v(O){return typeof O=="string"||typeof O=="symbol"}function A(O){return!v(O)}function b(O){throw new Error("Argument "+O+" is invalid, it should be an action type of type: string | symbol")}function C(O,E){if(O==null)throw new Error("Argument contains array with empty element at index "+E);if(typeof O!="string"&&typeof O!="symbol")throw new Error("Argument contains array with invalid element at index "+E+", it should be of type: string | symbol")}function P(O,E,B,F){return i(O)&&s(1),A(O)&&l(1),{type:O,payload:E,meta:B,error:F}}function L(O,E){return i(O)&&s(1),A(O)&&b(1),Object.assign(function(){var B=E?.apply(void 0,arguments);return Object.assign({type:O},B)},{getType:function(){return O},toString:function(){return O}})}function M(O,E,B){return i(O)&&s(1),A(O)&&b(1),function(){return L(O,function(){var F=arguments.length<=0?void 0:arguments[0],Y=arguments.length<=1?void 0:arguments[1];return E==null&&B==null||(F=E?.apply(void 0,arguments),Y=B?.apply(void 0,arguments)),Object.assign({},F!==void 0&&{payload:F},{},Y!==void 0&&{meta:Y})})}}function R(O){return i(O)&&s(1),u(O)||l(1),O.getType()}function U(O,E){i(O)&&s(1),A(O)&&b(1);var B=E!=null?E(O):function(){return{type:O}};return Object.assign(B,{getType:function(){return O},toString:function(){return O}})}var W={createAction:function(O,E){var B=E==null?function(){return P(O)}:E(P.bind(null,O));return Object.assign(B,{getType:function(){return O},toString:function(){return O}})},createCustomAction:U,createStandardAction:function(O){return i(O)&&s(1),A(O)&&b(1),Object.assign(function(){return U(O,function(E){return function(B,F){return{type:E,payload:B,meta:F}}})},{map:function(E){return U(O,function(B){return function(F,Y){return Object.assign(E(F,Y),{type:B})}})}})}};n.action=P,n.createAction=M,n.createAsyncAction=function(O,E,B,F){return function(){var Y=[O,E,B,F].map(function($,ve){return Array.isArray($)?M($[0],$[1],$[2])():typeof $=="string"||typeof $=="symbol"?M($)():void(ve<3&&function(ee){throw new Error("Argument "+ee+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(ve))});return{request:Y[0],success:Y[1],failure:Y[2],cancel:Y[3]}}},n.createCustomAction=L,n.createReducer=function O(E,B){B===void 0&&(B={});var F=Object.assign({},B),Y=function($,ve){var ee=Array.isArray($)?$:[$],fe={};return ee.map(function(Oe,no){return u(Oe)?R(Oe):v(Oe)?Oe:function(ro){throw new Error("Argument "+ro+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(no+1)}).forEach(function(Oe){return fe[Oe]=ve}),O(E,Object.assign({},F,{},fe))};return Object.assign(function($,ve){if($===void 0&&($=E),F.hasOwnProperty(ve.type)){var ee=F[ve.type];if(typeof ee!="function")throw Error('Reducer under "'+ve.type+'" key is not a valid reducer');return ee($,ve)}return $},{handlers:Object.assign({},F),handleAction:Y,handleType:Y})},n.deprecated=W,n.getType=R,n.isActionOf=function(O,E){i(O)&&s(1);var B=Array.isArray(O)?O:[O];B.forEach(h);var F=function(Y){return B.some(function($){return Y.type===$.getType()})};return E===void 0?F:F(E)},n.isOfType=function(O,E){i(O)&&s(1);var B=Array.isArray(O)?O:[O];B.forEach(C);var F=function(Y){return B.includes(Y.type)};return E===void 0?F:F(E)}})});var jf=nt((kA,zf)=>{rt();zf.exports=de("NeosProjectPackages")().NeosUiEditors});var Mt=nt((MA,Yf)=>{rt();Yf.exports=de("vendor")().React});var An=nt((RA,Jf)=>{rt();Jf.exports=de("vendor")().reactRedux});var Vt=nt((LA,Zf)=>{rt();Zf.exports=de("vendor")().PropTypes});var en=nt((BA,Xf)=>{rt();Xf.exports=de("NeosProjectPackages")().NeosUiDecorators});var Sn=nt((GA,Qf)=>{rt();Qf.exports=de("NeosProjectPackages")().ReactUiComponents});var Qi=nt((iS,ul)=>{rt();ul.exports=de("vendor")().reduxSagaEffects});var hl=nt((Xn,Tr)=>{(function(){var n,i="4.17.21",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",h="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",A=500,b="__lodash_placeholder__",C=1,P=2,L=4,M=1,R=2,U=1,W=2,O=4,E=8,B=16,F=32,Y=64,$=128,ve=256,ee=512,fe=30,Oe="...",no=800,ro=16,ca=1,Tl=2,kl=3,on=1/0,Wt=9007199254740991,Il=17976931348623157e292,Rr=0/0,dt=4294967295,Ml=dt-1,Fl=dt>>>1,Rl=[["ary",$],["bind",U],["bindKey",W],["curry",E],["curryRight",B],["flip",ee],["partial",F],["partialRight",Y],["rearg",ve]],On="[object Arguments]",Dr="[object Array]",Dl="[object AsyncFunction]",Vn="[object Boolean]",er="[object Date]",Ll="[object DOMException]",Lr="[object Error]",Wr="[object Function]",fa="[object GeneratorFunction]",ot="[object Map]",tr="[object Number]",Wl="[object Null]",_t="[object Object]",la="[object Promise]",Bl="[object Proxy]",nr="[object RegExp]",st="[object Set]",rr="[object String]",Br="[object Symbol]",Ul="[object Undefined]",ir="[object WeakMap]",Gl="[object WeakSet]",or="[object ArrayBuffer]",En="[object DataView]",io="[object Float32Array]",oo="[object Float64Array]",so="[object Int8Array]",ao="[object Int16Array]",uo="[object Int32Array]",co="[object Uint8Array]",fo="[object Uint8ClampedArray]",lo="[object Uint16Array]",po="[object Uint32Array]",Hl=/\b__p \+= '';/g,Kl=/\b(__p \+=) '' \+/g,ql=/(__e\(.*?\)|\b__t\)) \+\n'';/g,da=/&(?:amp|lt|gt|quot|#39);/g,pa=/[&<>"']/g,$l=RegExp(da.source),zl=RegExp(pa.source),jl=/<%-([\s\S]+?)%>/g,Yl=/<%([\s\S]+?)%>/g,ha=/<%=([\s\S]+?)%>/g,Jl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zl=/^\w*$/,Xl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ho=/[\\^$.*+?()[\]{}|]/g,Ql=RegExp(ho.source),go=/^\s+/,Vl=/\s/,ed=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,td=/\{\n\/\* \[wrapped with (.+)\] \*/,nd=/,? & /,rd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,id=/[()=,{}\[\]\/\s]/,od=/\\(\\)?/g,sd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ga=/\w*$/,ad=/^[-+]0x[0-9a-f]+$/i,ud=/^0b[01]+$/i,cd=/^\[object .+?Constructor\]$/,fd=/^0o[0-7]+$/i,ld=/^(?:0|[1-9]\d*)$/,dd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ur=/($^)/,pd=/['\n\r\u2028\u2029\\]/g,Gr="\\ud800-\\udfff",hd="\\u0300-\\u036f",gd="\\ufe20-\\ufe2f",md="\\u20d0-\\u20ff",ma=hd+gd+md,va="\\u2700-\\u27bf",ya="a-z\\xdf-\\xf6\\xf8-\\xff",vd="\\xac\\xb1\\xd7\\xf7",yd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_d="\\u2000-\\u206f",Ad=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_a="A-Z\\xc0-\\xd6\\xd8-\\xde",Aa="\\ufe0e\\ufe0f",Sa=vd+yd+_d+Ad,mo="['\u2019]",Sd="["+Gr+"]",wa="["+Sa+"]",Hr="["+ma+"]",ba="\\d+",wd="["+va+"]",xa="["+ya+"]",Ca="[^"+Gr+Sa+ba+va+ya+_a+"]",vo="\\ud83c[\\udffb-\\udfff]",bd="(?:"+Hr+"|"+vo+")",Oa="[^"+Gr+"]",yo="(?:\\ud83c[\\udde6-\\uddff]){2}",_o="[\\ud800-\\udbff][\\udc00-\\udfff]",Nn="["+_a+"]",Ea="\\u200d",Na="(?:"+xa+"|"+Ca+")",xd="(?:"+Nn+"|"+Ca+")",Pa="(?:"+mo+"(?:d|ll|m|re|s|t|ve))?",Ta="(?:"+mo+"(?:D|LL|M|RE|S|T|VE))?",ka=bd+"?",Ia="["+Aa+"]?",Cd="(?:"+Ea+"(?:"+[Oa,yo,_o].join("|")+")"+Ia+ka+")*",Od="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ed="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ma=Ia+ka+Cd,Nd="(?:"+[wd,yo,_o].join("|")+")"+Ma,Pd="(?:"+[Oa+Hr+"?",Hr,yo,_o,Sd].join("|")+")",Td=RegExp(mo,"g"),kd=RegExp(Hr,"g"),Ao=RegExp(vo+"(?="+vo+")|"+Pd+Ma,"g"),Id=RegExp([Nn+"?"+xa+"+"+Pa+"(?="+[wa,Nn,"$"].join("|")+")",xd+"+"+Ta+"(?="+[wa,Nn+Na,"$"].join("|")+")",Nn+"?"+Na+"+"+Pa,Nn+"+"+Ta,Ed,Od,ba,Nd].join("|"),"g"),Md=RegExp("["+Ea+Gr+ma+Aa+"]"),Fd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Rd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Dd=-1,ue={};ue[io]=ue[oo]=ue[so]=ue[ao]=ue[uo]=ue[co]=ue[fo]=ue[lo]=ue[po]=!0,ue[On]=ue[Dr]=ue[or]=ue[Vn]=ue[En]=ue[er]=ue[Lr]=ue[Wr]=ue[ot]=ue[tr]=ue[_t]=ue[nr]=ue[st]=ue[rr]=ue[ir]=!1;var ae={};ae[On]=ae[Dr]=ae[or]=ae[En]=ae[Vn]=ae[er]=ae[io]=ae[oo]=ae[so]=ae[ao]=ae[uo]=ae[ot]=ae[tr]=ae[_t]=ae[nr]=ae[st]=ae[rr]=ae[Br]=ae[co]=ae[fo]=ae[lo]=ae[po]=!0,ae[Lr]=ae[Wr]=ae[ir]=!1;var Ld={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Wd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ud={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gd=parseFloat,Hd=parseInt,Fa=typeof global=="object"&&global&&global.Object===Object&&global,Kd=typeof self=="object"&&self&&self.Object===Object&&self,Se=Fa||Kd||Function("return this")(),So=typeof Xn=="object"&&Xn&&!Xn.nodeType&&Xn,sn=So&&typeof Tr=="object"&&Tr&&!Tr.nodeType&&Tr,Ra=sn&&sn.exports===So,wo=Ra&&Fa.process,Ye=function(){try{var g=sn&&sn.require&&sn.require("util").types;return g||wo&&wo.binding&&wo.binding("util")}catch{}}(),Da=Ye&&Ye.isArrayBuffer,La=Ye&&Ye.isDate,Wa=Ye&&Ye.isMap,Ba=Ye&&Ye.isRegExp,Ua=Ye&&Ye.isSet,Ga=Ye&&Ye.isTypedArray;function Ue(g,_,y){switch(y.length){case 0:return g.call(_);case 1:return g.call(_,y[0]);case 2:return g.call(_,y[0],y[1]);case 3:return g.call(_,y[0],y[1],y[2])}return g.apply(_,y)}function qd(g,_,y,I){for(var z=-1,re=g==null?0:g.length;++z<re;){var ye=g[z];_(I,ye,y(ye),g)}return I}function Je(g,_){for(var y=-1,I=g==null?0:g.length;++y<I&&_(g[y],y,g)!==!1;);return g}function $d(g,_){for(var y=g==null?0:g.length;y--&&_(g[y],y,g)!==!1;);return g}function Ha(g,_){for(var y=-1,I=g==null?0:g.length;++y<I;)if(!_(g[y],y,g))return!1;return!0}function Bt(g,_){for(var y=-1,I=g==null?0:g.length,z=0,re=[];++y<I;){var ye=g[y];_(ye,y,g)&&(re[z++]=ye)}return re}function Kr(g,_){var y=g==null?0:g.length;return!!y&&Pn(g,_,0)>-1}function bo(g,_,y){for(var I=-1,z=g==null?0:g.length;++I<z;)if(y(_,g[I]))return!0;return!1}function le(g,_){for(var y=-1,I=g==null?0:g.length,z=Array(I);++y<I;)z[y]=_(g[y],y,g);return z}function Ut(g,_){for(var y=-1,I=_.length,z=g.length;++y<I;)g[z+y]=_[y];return g}function xo(g,_,y,I){var z=-1,re=g==null?0:g.length;for(I&&re&&(y=g[++z]);++z<re;)y=_(y,g[z],z,g);return y}function zd(g,_,y,I){var z=g==null?0:g.length;for(I&&z&&(y=g[--z]);z--;)y=_(y,g[z],z,g);return y}function Co(g,_){for(var y=-1,I=g==null?0:g.length;++y<I;)if(_(g[y],y,g))return!0;return!1}var jd=Oo("length");function Yd(g){return g.split("")}function Jd(g){return g.match(rd)||[]}function Ka(g,_,y){var I;return y(g,function(z,re,ye){if(_(z,re,ye))return I=re,!1}),I}function qr(g,_,y,I){for(var z=g.length,re=y+(I?1:-1);I?re--:++re<z;)if(_(g[re],re,g))return re;return-1}function Pn(g,_,y){return _===_?ap(g,_,y):qr(g,qa,y)}function Zd(g,_,y,I){for(var z=y-1,re=g.length;++z<re;)if(I(g[z],_))return z;return-1}function qa(g){return g!==g}function $a(g,_){var y=g==null?0:g.length;return y?No(g,_)/y:Rr}function Oo(g){return function(_){return _==null?n:_[g]}}function Eo(g){return function(_){return g==null?n:g[_]}}function za(g,_,y,I,z){return z(g,function(re,ye,se){y=I?(I=!1,re):_(y,re,ye,se)}),y}function Xd(g,_){var y=g.length;for(g.sort(_);y--;)g[y]=g[y].value;return g}function No(g,_){for(var y,I=-1,z=g.length;++I<z;){var re=_(g[I]);re!==n&&(y=y===n?re:y+re)}return y}function Po(g,_){for(var y=-1,I=Array(g);++y<g;)I[y]=_(y);return I}function Qd(g,_){return le(_,function(y){return[y,g[y]]})}function ja(g){return g&&g.slice(0,Xa(g)+1).replace(go,"")}function Ge(g){return function(_){return g(_)}}function To(g,_){return le(_,function(y){return g[y]})}function sr(g,_){return g.has(_)}function Ya(g,_){for(var y=-1,I=g.length;++y<I&&Pn(_,g[y],0)>-1;);return y}function Ja(g,_){for(var y=g.length;y--&&Pn(_,g[y],0)>-1;);return y}function Vd(g,_){for(var y=g.length,I=0;y--;)g[y]===_&&++I;return I}var ep=Eo(Ld),tp=Eo(Wd);function np(g){return"\\"+Ud[g]}function rp(g,_){return g==null?n:g[_]}function Tn(g){return Md.test(g)}function ip(g){return Fd.test(g)}function op(g){for(var _,y=[];!(_=g.next()).done;)y.push(_.value);return y}function ko(g){var _=-1,y=Array(g.size);return g.forEach(function(I,z){y[++_]=[z,I]}),y}function Za(g,_){return function(y){return g(_(y))}}function Gt(g,_){for(var y=-1,I=g.length,z=0,re=[];++y<I;){var ye=g[y];(ye===_||ye===b)&&(g[y]=b,re[z++]=y)}return re}function $r(g){var _=-1,y=Array(g.size);return g.forEach(function(I){y[++_]=I}),y}function sp(g){var _=-1,y=Array(g.size);return g.forEach(function(I){y[++_]=[I,I]}),y}function ap(g,_,y){for(var I=y-1,z=g.length;++I<z;)if(g[I]===_)return I;return-1}function up(g,_,y){for(var I=y+1;I--;)if(g[I]===_)return I;return I}function kn(g){return Tn(g)?fp(g):jd(g)}function at(g){return Tn(g)?lp(g):Yd(g)}function Xa(g){for(var _=g.length;_--&&Vl.test(g.charAt(_)););return _}var cp=Eo(Bd);function fp(g){for(var _=Ao.lastIndex=0;Ao.test(g);)++_;return _}function lp(g){return g.match(Ao)||[]}function dp(g){return g.match(Id)||[]}var pp=function g(_){_=_==null?Se:Ht.defaults(Se.Object(),_,Ht.pick(Se,Rd));var y=_.Array,I=_.Date,z=_.Error,re=_.Function,ye=_.Math,se=_.Object,Io=_.RegExp,hp=_.String,Ze=_.TypeError,zr=y.prototype,gp=re.prototype,In=se.prototype,jr=_["__core-js_shared__"],Yr=gp.toString,oe=In.hasOwnProperty,mp=0,Qa=function(){var e=/[^.]+$/.exec(jr&&jr.keys&&jr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Jr=In.toString,vp=Yr.call(se),yp=Se._,_p=Io("^"+Yr.call(oe).replace(ho,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zr=Ra?_.Buffer:n,Kt=_.Symbol,Xr=_.Uint8Array,Va=Zr?Zr.allocUnsafe:n,Qr=Za(se.getPrototypeOf,se),eu=se.create,tu=In.propertyIsEnumerable,Vr=zr.splice,nu=Kt?Kt.isConcatSpreadable:n,ar=Kt?Kt.iterator:n,an=Kt?Kt.toStringTag:n,ei=function(){try{var e=dn(se,"defineProperty");return e({},"",{}),e}catch{}}(),Ap=_.clearTimeout!==Se.clearTimeout&&_.clearTimeout,Sp=I&&I.now!==Se.Date.now&&I.now,wp=_.setTimeout!==Se.setTimeout&&_.setTimeout,ti=ye.ceil,ni=ye.floor,Mo=se.getOwnPropertySymbols,bp=Zr?Zr.isBuffer:n,ru=_.isFinite,xp=zr.join,Cp=Za(se.keys,se),_e=ye.max,Ee=ye.min,Op=I.now,Ep=_.parseInt,iu=ye.random,Np=zr.reverse,Fo=dn(_,"DataView"),ur=dn(_,"Map"),Ro=dn(_,"Promise"),Mn=dn(_,"Set"),cr=dn(_,"WeakMap"),fr=dn(se,"create"),ri=cr&&new cr,Fn={},Pp=pn(Fo),Tp=pn(ur),kp=pn(Ro),Ip=pn(Mn),Mp=pn(cr),ii=Kt?Kt.prototype:n,lr=ii?ii.valueOf:n,ou=ii?ii.toString:n;function c(e){if(he(e)&&!j(e)&&!(e instanceof V)){if(e instanceof Xe)return e;if(oe.call(e,"__wrapped__"))return sc(e)}return new Xe(e)}var Rn=function(){function e(){}return function(t){if(!pe(t))return{};if(eu)return eu(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function oi(){}function Xe(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}c.templateSettings={escape:jl,evaluate:Yl,interpolate:ha,variable:"",imports:{_:c}},c.prototype=oi.prototype,c.prototype.constructor=c,Xe.prototype=Rn(oi.prototype),Xe.prototype.constructor=Xe;function V(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=dt,this.__views__=[]}function Fp(){var e=new V(this.__wrapped__);return e.__actions__=Re(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Re(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Re(this.__views__),e}function Rp(){if(this.__filtered__){var e=new V(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Dp(){var e=this.__wrapped__.value(),t=this.__dir__,r=j(e),o=t<0,a=r?e.length:0,f=Yh(0,a,this.__views__),d=f.start,p=f.end,m=p-d,S=o?p:d-1,w=this.__iteratees__,x=w.length,T=0,D=Ee(m,this.__takeCount__);if(!r||!o&&a==m&&D==m)return Pu(e,this.__actions__);var K=[];e:for(;m--&&T<D;){S+=t;for(var Z=-1,q=e[S];++Z<x;){var Q=w[Z],te=Q.iteratee,qe=Q.type,Me=te(q);if(qe==Tl)q=Me;else if(!Me){if(qe==ca)continue e;break e}}K[T++]=q}return K}V.prototype=Rn(oi.prototype),V.prototype.constructor=V;function un(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Lp(){this.__data__=fr?fr(null):{},this.size=0}function Wp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Bp(e){var t=this.__data__;if(fr){var r=t[e];return r===v?n:r}return oe.call(t,e)?t[e]:n}function Up(e){var t=this.__data__;return fr?t[e]!==n:oe.call(t,e)}function Gp(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=fr&&t===n?v:t,this}un.prototype.clear=Lp,un.prototype.delete=Wp,un.prototype.get=Bp,un.prototype.has=Up,un.prototype.set=Gp;function At(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Hp(){this.__data__=[],this.size=0}function Kp(e){var t=this.__data__,r=si(t,e);if(r<0)return!1;var o=t.length-1;return r==o?t.pop():Vr.call(t,r,1),--this.size,!0}function qp(e){var t=this.__data__,r=si(t,e);return r<0?n:t[r][1]}function $p(e){return si(this.__data__,e)>-1}function zp(e,t){var r=this.__data__,o=si(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}At.prototype.clear=Hp,At.prototype.delete=Kp,At.prototype.get=qp,At.prototype.has=$p,At.prototype.set=zp;function St(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function jp(){this.size=0,this.__data__={hash:new un,map:new(ur||At),string:new un}}function Yp(e){var t=yi(this,e).delete(e);return this.size-=t?1:0,t}function Jp(e){return yi(this,e).get(e)}function Zp(e){return yi(this,e).has(e)}function Xp(e,t){var r=yi(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}St.prototype.clear=jp,St.prototype.delete=Yp,St.prototype.get=Jp,St.prototype.has=Zp,St.prototype.set=Xp;function cn(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new St;++t<r;)this.add(e[t])}function Qp(e){return this.__data__.set(e,v),this}function Vp(e){return this.__data__.has(e)}cn.prototype.add=cn.prototype.push=Qp,cn.prototype.has=Vp;function ut(e){var t=this.__data__=new At(e);this.size=t.size}function eh(){this.__data__=new At,this.size=0}function th(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function nh(e){return this.__data__.get(e)}function rh(e){return this.__data__.has(e)}function ih(e,t){var r=this.__data__;if(r instanceof At){var o=r.__data__;if(!ur||o.length<s-1)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new St(o)}return r.set(e,t),this.size=r.size,this}ut.prototype.clear=eh,ut.prototype.delete=th,ut.prototype.get=nh,ut.prototype.has=rh,ut.prototype.set=ih;function su(e,t){var r=j(e),o=!r&&hn(e),a=!r&&!o&&Yt(e),f=!r&&!o&&!a&&Bn(e),d=r||o||a||f,p=d?Po(e.length,hp):[],m=p.length;for(var S in e)(t||oe.call(e,S))&&!(d&&(S=="length"||a&&(S=="offset"||S=="parent")||f&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||Ct(S,m)))&&p.push(S);return p}function au(e){var t=e.length;return t?e[zo(0,t-1)]:n}function oh(e,t){return _i(Re(e),fn(t,0,e.length))}function sh(e){return _i(Re(e))}function Do(e,t,r){(r!==n&&!ct(e[t],r)||r===n&&!(t in e))&&wt(e,t,r)}function dr(e,t,r){var o=e[t];(!(oe.call(e,t)&&ct(o,r))||r===n&&!(t in e))&&wt(e,t,r)}function si(e,t){for(var r=e.length;r--;)if(ct(e[r][0],t))return r;return-1}function ah(e,t,r,o){return qt(e,function(a,f,d){t(o,a,r(a),d)}),o}function uu(e,t){return e&&ht(t,we(t),e)}function uh(e,t){return e&&ht(t,Le(t),e)}function wt(e,t,r){t=="__proto__"&&ei?ei(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Lo(e,t){for(var r=-1,o=t.length,a=y(o),f=e==null;++r<o;)a[r]=f?n:vs(e,t[r]);return a}function fn(e,t,r){return e===e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function Qe(e,t,r,o,a,f){var d,p=t&C,m=t&P,S=t&L;if(r&&(d=a?r(e,o,a,f):r(e)),d!==n)return d;if(!pe(e))return e;var w=j(e);if(w){if(d=Zh(e),!p)return Re(e,d)}else{var x=Ne(e),T=x==Wr||x==fa;if(Yt(e))return Iu(e,p);if(x==_t||x==On||T&&!a){if(d=m||T?{}:Xu(e),!p)return m?Bh(e,uh(d,e)):Wh(e,uu(d,e))}else{if(!ae[x])return a?e:{};d=Xh(e,x,p)}}f||(f=new ut);var D=f.get(e);if(D)return D;f.set(e,d),Oc(e)?e.forEach(function(q){d.add(Qe(q,t,r,q,e,f))}):xc(e)&&e.forEach(function(q,Q){d.set(Q,Qe(q,t,r,Q,e,f))});var K=S?m?rs:ns:m?Le:we,Z=w?n:K(e);return Je(Z||e,function(q,Q){Z&&(Q=q,q=e[Q]),dr(d,Q,Qe(q,t,r,Q,e,f))}),d}function ch(e){var t=we(e);return function(r){return cu(r,e,t)}}function cu(e,t,r){var o=r.length;if(e==null)return!o;for(e=se(e);o--;){var a=r[o],f=t[a],d=e[a];if(d===n&&!(a in e)||!f(d))return!1}return!0}function fu(e,t,r){if(typeof e!="function")throw new Ze(l);return _r(function(){e.apply(n,r)},t)}function pr(e,t,r,o){var a=-1,f=Kr,d=!0,p=e.length,m=[],S=t.length;if(!p)return m;r&&(t=le(t,Ge(r))),o?(f=bo,d=!1):t.length>=s&&(f=sr,d=!1,t=new cn(t));e:for(;++a<p;){var w=e[a],x=r==null?w:r(w);if(w=o||w!==0?w:0,d&&x===x){for(var T=S;T--;)if(t[T]===x)continue e;m.push(w)}else f(t,x,o)||m.push(w)}return m}var qt=Lu(pt),lu=Lu(Bo,!0);function fh(e,t){var r=!0;return qt(e,function(o,a,f){return r=!!t(o,a,f),r}),r}function ai(e,t,r){for(var o=-1,a=e.length;++o<a;){var f=e[o],d=t(f);if(d!=null&&(p===n?d===d&&!Ke(d):r(d,p)))var p=d,m=f}return m}function lh(e,t,r,o){var a=e.length;for(r=J(r),r<0&&(r=-r>a?0:a+r),o=o===n||o>a?a:J(o),o<0&&(o+=a),o=r>o?0:Nc(o);r<o;)e[r++]=t;return e}function du(e,t){var r=[];return qt(e,function(o,a,f){t(o,a,f)&&r.push(o)}),r}function Ce(e,t,r,o,a){var f=-1,d=e.length;for(r||(r=Vh),a||(a=[]);++f<d;){var p=e[f];t>0&&r(p)?t>1?Ce(p,t-1,r,o,a):Ut(a,p):o||(a[a.length]=p)}return a}var Wo=Wu(),pu=Wu(!0);function pt(e,t){return e&&Wo(e,t,we)}function Bo(e,t){return e&&pu(e,t,we)}function ui(e,t){return Bt(t,function(r){return Ot(e[r])})}function ln(e,t){t=zt(t,e);for(var r=0,o=t.length;e!=null&&r<o;)e=e[gt(t[r++])];return r&&r==o?e:n}function hu(e,t,r){var o=t(e);return j(e)?o:Ut(o,r(e))}function ke(e){return e==null?e===n?Ul:Wl:an&&an in se(e)?jh(e):sg(e)}function Uo(e,t){return e>t}function dh(e,t){return e!=null&&oe.call(e,t)}function ph(e,t){return e!=null&&t in se(e)}function hh(e,t,r){return e>=Ee(t,r)&&e<_e(t,r)}function Go(e,t,r){for(var o=r?bo:Kr,a=e[0].length,f=e.length,d=f,p=y(f),m=1/0,S=[];d--;){var w=e[d];d&&t&&(w=le(w,Ge(t))),m=Ee(w.length,m),p[d]=!r&&(t||a>=120&&w.length>=120)?new cn(d&&w):n}w=e[0];var x=-1,T=p[0];e:for(;++x<a&&S.length<m;){var D=w[x],K=t?t(D):D;if(D=r||D!==0?D:0,!(T?sr(T,K):o(S,K,r))){for(d=f;--d;){var Z=p[d];if(!(Z?sr(Z,K):o(e[d],K,r)))continue e}T&&T.push(K),S.push(D)}}return S}function gh(e,t,r,o){return pt(e,function(a,f,d){t(o,r(a),f,d)}),o}function hr(e,t,r){t=zt(t,e),e=tc(e,t);var o=e==null?e:e[gt(et(t))];return o==null?n:Ue(o,e,r)}function gu(e){return he(e)&&ke(e)==On}function mh(e){return he(e)&&ke(e)==or}function vh(e){return he(e)&&ke(e)==er}function gr(e,t,r,o,a){return e===t?!0:e==null||t==null||!he(e)&&!he(t)?e!==e&&t!==t:yh(e,t,r,o,gr,a)}function yh(e,t,r,o,a,f){var d=j(e),p=j(t),m=d?Dr:Ne(e),S=p?Dr:Ne(t);m=m==On?_t:m,S=S==On?_t:S;var w=m==_t,x=S==_t,T=m==S;if(T&&Yt(e)){if(!Yt(t))return!1;d=!0,w=!1}if(T&&!w)return f||(f=new ut),d||Bn(e)?Yu(e,t,r,o,a,f):$h(e,t,m,r,o,a,f);if(!(r&M)){var D=w&&oe.call(e,"__wrapped__"),K=x&&oe.call(t,"__wrapped__");if(D||K){var Z=D?e.value():e,q=K?t.value():t;return f||(f=new ut),a(Z,q,r,o,f)}}return T?(f||(f=new ut),zh(e,t,r,o,a,f)):!1}function _h(e){return he(e)&&Ne(e)==ot}function Ho(e,t,r,o){var a=r.length,f=a,d=!o;if(e==null)return!f;for(e=se(e);a--;){var p=r[a];if(d&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++a<f;){p=r[a];var m=p[0],S=e[m],w=p[1];if(d&&p[2]){if(S===n&&!(m in e))return!1}else{var x=new ut;if(o)var T=o(S,w,m,e,t,x);if(!(T===n?gr(w,S,M|R,o,x):T))return!1}}return!0}function mu(e){if(!pe(e)||tg(e))return!1;var t=Ot(e)?_p:cd;return t.test(pn(e))}function Ah(e){return he(e)&&ke(e)==nr}function Sh(e){return he(e)&&Ne(e)==st}function wh(e){return he(e)&&Ci(e.length)&&!!ue[ke(e)]}function vu(e){return typeof e=="function"?e:e==null?We:typeof e=="object"?j(e)?Au(e[0],e[1]):_u(e):Bc(e)}function Ko(e){if(!yr(e))return Cp(e);var t=[];for(var r in se(e))oe.call(e,r)&&r!="constructor"&&t.push(r);return t}function bh(e){if(!pe(e))return og(e);var t=yr(e),r=[];for(var o in e)o=="constructor"&&(t||!oe.call(e,o))||r.push(o);return r}function qo(e,t){return e<t}function yu(e,t){var r=-1,o=De(e)?y(e.length):[];return qt(e,function(a,f,d){o[++r]=t(a,f,d)}),o}function _u(e){var t=os(e);return t.length==1&&t[0][2]?Vu(t[0][0],t[0][1]):function(r){return r===e||Ho(r,e,t)}}function Au(e,t){return as(e)&&Qu(t)?Vu(gt(e),t):function(r){var o=vs(r,e);return o===n&&o===t?ys(r,e):gr(t,o,M|R)}}function ci(e,t,r,o,a){e!==t&&Wo(t,function(f,d){if(a||(a=new ut),pe(f))xh(e,t,d,r,ci,o,a);else{var p=o?o(cs(e,d),f,d+"",e,t,a):n;p===n&&(p=f),Do(e,d,p)}},Le)}function xh(e,t,r,o,a,f,d){var p=cs(e,r),m=cs(t,r),S=d.get(m);if(S){Do(e,r,S);return}var w=f?f(p,m,r+"",e,t,d):n,x=w===n;if(x){var T=j(m),D=!T&&Yt(m),K=!T&&!D&&Bn(m);w=m,T||D||K?j(p)?w=p:ge(p)?w=Re(p):D?(x=!1,w=Iu(m,!0)):K?(x=!1,w=Mu(m,!0)):w=[]:Ar(m)||hn(m)?(w=p,hn(p)?w=Pc(p):(!pe(p)||Ot(p))&&(w=Xu(m))):x=!1}x&&(d.set(m,w),a(w,m,o,f,d),d.delete(m)),Do(e,r,w)}function Su(e,t){var r=e.length;if(r)return t+=t<0?r:0,Ct(t,r)?e[t]:n}function wu(e,t,r){t.length?t=le(t,function(f){return j(f)?function(d){return ln(d,f.length===1?f[0]:f)}:f}):t=[We];var o=-1;t=le(t,Ge(H()));var a=yu(e,function(f,d,p){var m=le(t,function(S){return S(f)});return{criteria:m,index:++o,value:f}});return Xd(a,function(f,d){return Lh(f,d,r)})}function Ch(e,t){return bu(e,t,function(r,o){return ys(e,o)})}function bu(e,t,r){for(var o=-1,a=t.length,f={};++o<a;){var d=t[o],p=ln(e,d);r(p,d)&&mr(f,zt(d,e),p)}return f}function Oh(e){return function(t){return ln(t,e)}}function $o(e,t,r,o){var a=o?Zd:Pn,f=-1,d=t.length,p=e;for(e===t&&(t=Re(t)),r&&(p=le(e,Ge(r)));++f<d;)for(var m=0,S=t[f],w=r?r(S):S;(m=a(p,w,m,o))>-1;)p!==e&&Vr.call(p,m,1),Vr.call(e,m,1);return e}function xu(e,t){for(var r=e?t.length:0,o=r-1;r--;){var a=t[r];if(r==o||a!==f){var f=a;Ct(a)?Vr.call(e,a,1):Jo(e,a)}}return e}function zo(e,t){return e+ni(iu()*(t-e+1))}function Eh(e,t,r,o){for(var a=-1,f=_e(ti((t-e)/(r||1)),0),d=y(f);f--;)d[o?f:++a]=e,e+=r;return d}function jo(e,t){var r="";if(!e||t<1||t>Wt)return r;do t%2&&(r+=e),t=ni(t/2),t&&(e+=e);while(t);return r}function X(e,t){return fs(ec(e,t,We),e+"")}function Nh(e){return au(Un(e))}function Ph(e,t){var r=Un(e);return _i(r,fn(t,0,r.length))}function mr(e,t,r,o){if(!pe(e))return e;t=zt(t,e);for(var a=-1,f=t.length,d=f-1,p=e;p!=null&&++a<f;){var m=gt(t[a]),S=r;if(m==="__proto__"||m==="constructor"||m==="prototype")return e;if(a!=d){var w=p[m];S=o?o(w,m,p):n,S===n&&(S=pe(w)?w:Ct(t[a+1])?[]:{})}dr(p,m,S),p=p[m]}return e}var Cu=ri?function(e,t){return ri.set(e,t),e}:We,Th=ei?function(e,t){return ei(e,"toString",{configurable:!0,enumerable:!1,value:As(t),writable:!0})}:We;function kh(e){return _i(Un(e))}function Ve(e,t,r){var o=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var f=y(a);++o<a;)f[o]=e[o+t];return f}function Ih(e,t){var r;return qt(e,function(o,a,f){return r=t(o,a,f),!r}),!!r}function fi(e,t,r){var o=0,a=e==null?o:e.length;if(typeof t=="number"&&t===t&&a<=Fl){for(;o<a;){var f=o+a>>>1,d=e[f];d!==null&&!Ke(d)&&(r?d<=t:d<t)?o=f+1:a=f}return a}return Yo(e,t,We,r)}function Yo(e,t,r,o){var a=0,f=e==null?0:e.length;if(f===0)return 0;t=r(t);for(var d=t!==t,p=t===null,m=Ke(t),S=t===n;a<f;){var w=ni((a+f)/2),x=r(e[w]),T=x!==n,D=x===null,K=x===x,Z=Ke(x);if(d)var q=o||K;else S?q=K&&(o||T):p?q=K&&T&&(o||!D):m?q=K&&T&&!D&&(o||!Z):D||Z?q=!1:q=o?x<=t:x<t;q?a=w+1:f=w}return Ee(f,Ml)}function Ou(e,t){for(var r=-1,o=e.length,a=0,f=[];++r<o;){var d=e[r],p=t?t(d):d;if(!r||!ct(p,m)){var m=p;f[a++]=d===0?0:d}}return f}function Eu(e){return typeof e=="number"?e:Ke(e)?Rr:+e}function He(e){if(typeof e=="string")return e;if(j(e))return le(e,He)+"";if(Ke(e))return ou?ou.call(e):"";var t=e+"";return t=="0"&&1/e==-on?"-0":t}function $t(e,t,r){var o=-1,a=Kr,f=e.length,d=!0,p=[],m=p;if(r)d=!1,a=bo;else if(f>=s){var S=t?null:Kh(e);if(S)return $r(S);d=!1,a=sr,m=new cn}else m=t?[]:p;e:for(;++o<f;){var w=e[o],x=t?t(w):w;if(w=r||w!==0?w:0,d&&x===x){for(var T=m.length;T--;)if(m[T]===x)continue e;t&&m.push(x),p.push(w)}else a(m,x,r)||(m!==p&&m.push(x),p.push(w))}return p}function Jo(e,t){return t=zt(t,e),e=tc(e,t),e==null||delete e[gt(et(t))]}function Nu(e,t,r,o){return mr(e,t,r(ln(e,t)),o)}function li(e,t,r,o){for(var a=e.length,f=o?a:-1;(o?f--:++f<a)&&t(e[f],f,e););return r?Ve(e,o?0:f,o?f+1:a):Ve(e,o?f+1:0,o?a:f)}function Pu(e,t){var r=e;return r instanceof V&&(r=r.value()),xo(t,function(o,a){return a.func.apply(a.thisArg,Ut([o],a.args))},r)}function Zo(e,t,r){var o=e.length;if(o<2)return o?$t(e[0]):[];for(var a=-1,f=y(o);++a<o;)for(var d=e[a],p=-1;++p<o;)p!=a&&(f[a]=pr(f[a]||d,e[p],t,r));return $t(Ce(f,1),t,r)}function Tu(e,t,r){for(var o=-1,a=e.length,f=t.length,d={};++o<a;){var p=o<f?t[o]:n;r(d,e[o],p)}return d}function Xo(e){return ge(e)?e:[]}function Qo(e){return typeof e=="function"?e:We}function zt(e,t){return j(e)?e:as(e,t)?[e]:oc(ie(e))}var Mh=X;function jt(e,t,r){var o=e.length;return r=r===n?o:r,!t&&r>=o?e:Ve(e,t,r)}var ku=Ap||function(e){return Se.clearTimeout(e)};function Iu(e,t){if(t)return e.slice();var r=e.length,o=Va?Va(r):new e.constructor(r);return e.copy(o),o}function Vo(e){var t=new e.constructor(e.byteLength);return new Xr(t).set(new Xr(e)),t}function Fh(e,t){var r=t?Vo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Rh(e){var t=new e.constructor(e.source,ga.exec(e));return t.lastIndex=e.lastIndex,t}function Dh(e){return lr?se(lr.call(e)):{}}function Mu(e,t){var r=t?Vo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Fu(e,t){if(e!==t){var r=e!==n,o=e===null,a=e===e,f=Ke(e),d=t!==n,p=t===null,m=t===t,S=Ke(t);if(!p&&!S&&!f&&e>t||f&&d&&m&&!p&&!S||o&&d&&m||!r&&m||!a)return 1;if(!o&&!f&&!S&&e<t||S&&r&&a&&!o&&!f||p&&r&&a||!d&&a||!m)return-1}return 0}function Lh(e,t,r){for(var o=-1,a=e.criteria,f=t.criteria,d=a.length,p=r.length;++o<d;){var m=Fu(a[o],f[o]);if(m){if(o>=p)return m;var S=r[o];return m*(S=="desc"?-1:1)}}return e.index-t.index}function Ru(e,t,r,o){for(var a=-1,f=e.length,d=r.length,p=-1,m=t.length,S=_e(f-d,0),w=y(m+S),x=!o;++p<m;)w[p]=t[p];for(;++a<d;)(x||a<f)&&(w[r[a]]=e[a]);for(;S--;)w[p++]=e[a++];return w}function Du(e,t,r,o){for(var a=-1,f=e.length,d=-1,p=r.length,m=-1,S=t.length,w=_e(f-p,0),x=y(w+S),T=!o;++a<w;)x[a]=e[a];for(var D=a;++m<S;)x[D+m]=t[m];for(;++d<p;)(T||a<f)&&(x[D+r[d]]=e[a++]);return x}function Re(e,t){var r=-1,o=e.length;for(t||(t=y(o));++r<o;)t[r]=e[r];return t}function ht(e,t,r,o){var a=!r;r||(r={});for(var f=-1,d=t.length;++f<d;){var p=t[f],m=o?o(r[p],e[p],p,r,e):n;m===n&&(m=e[p]),a?wt(r,p,m):dr(r,p,m)}return r}function Wh(e,t){return ht(e,ss(e),t)}function Bh(e,t){return ht(e,Ju(e),t)}function di(e,t){return function(r,o){var a=j(r)?qd:ah,f=t?t():{};return a(r,e,H(o,2),f)}}function Dn(e){return X(function(t,r){var o=-1,a=r.length,f=a>1?r[a-1]:n,d=a>2?r[2]:n;for(f=e.length>3&&typeof f=="function"?(a--,f):n,d&&Ie(r[0],r[1],d)&&(f=a<3?n:f,a=1),t=se(t);++o<a;){var p=r[o];p&&e(t,p,o,f)}return t})}function Lu(e,t){return function(r,o){if(r==null)return r;if(!De(r))return e(r,o);for(var a=r.length,f=t?a:-1,d=se(r);(t?f--:++f<a)&&o(d[f],f,d)!==!1;);return r}}function Wu(e){return function(t,r,o){for(var a=-1,f=se(t),d=o(t),p=d.length;p--;){var m=d[e?p:++a];if(r(f[m],m,f)===!1)break}return t}}function Uh(e,t,r){var o=t&U,a=vr(e);function f(){var d=this&&this!==Se&&this instanceof f?a:e;return d.apply(o?r:this,arguments)}return f}function Bu(e){return function(t){t=ie(t);var r=Tn(t)?at(t):n,o=r?r[0]:t.charAt(0),a=r?jt(r,1).join(""):t.slice(1);return o[e]()+a}}function Ln(e){return function(t){return xo(Lc(Dc(t).replace(Td,"")),e,"")}}function vr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Rn(e.prototype),o=e.apply(r,t);return pe(o)?o:r}}function Gh(e,t,r){var o=vr(e);function a(){for(var f=arguments.length,d=y(f),p=f,m=Wn(a);p--;)d[p]=arguments[p];var S=f<3&&d[0]!==m&&d[f-1]!==m?[]:Gt(d,m);if(f-=S.length,f<r)return qu(e,t,pi,a.placeholder,n,d,S,n,n,r-f);var w=this&&this!==Se&&this instanceof a?o:e;return Ue(w,this,d)}return a}function Uu(e){return function(t,r,o){var a=se(t);if(!De(t)){var f=H(r,3);t=we(t),r=function(p){return f(a[p],p,a)}}var d=e(t,r,o);return d>-1?a[f?t[d]:d]:n}}function Gu(e){return xt(function(t){var r=t.length,o=r,a=Xe.prototype.thru;for(e&&t.reverse();o--;){var f=t[o];if(typeof f!="function")throw new Ze(l);if(a&&!d&&vi(f)=="wrapper")var d=new Xe([],!0)}for(o=d?o:r;++o<r;){f=t[o];var p=vi(f),m=p=="wrapper"?is(f):n;m&&us(m[0])&&m[1]==($|E|F|ve)&&!m[4].length&&m[9]==1?d=d[vi(m[0])].apply(d,m[3]):d=f.length==1&&us(f)?d[p]():d.thru(f)}return function(){var S=arguments,w=S[0];if(d&&S.length==1&&j(w))return d.plant(w).value();for(var x=0,T=r?t[x].apply(this,S):w;++x<r;)T=t[x].call(this,T);return T}})}function pi(e,t,r,o,a,f,d,p,m,S){var w=t&$,x=t&U,T=t&W,D=t&(E|B),K=t&ee,Z=T?n:vr(e);function q(){for(var Q=arguments.length,te=y(Q),qe=Q;qe--;)te[qe]=arguments[qe];if(D)var Me=Wn(q),$e=Vd(te,Me);if(o&&(te=Ru(te,o,a,D)),f&&(te=Du(te,f,d,D)),Q-=$e,D&&Q<S){var me=Gt(te,Me);return qu(e,t,pi,q.placeholder,r,te,me,p,m,S-Q)}var ft=x?r:this,Nt=T?ft[e]:e;return Q=te.length,p?te=ag(te,p):K&&Q>1&&te.reverse(),w&&m<Q&&(te.length=m),this&&this!==Se&&this instanceof q&&(Nt=Z||vr(Nt)),Nt.apply(ft,te)}return q}function Hu(e,t){return function(r,o){return gh(r,e,t(o),{})}}function hi(e,t){return function(r,o){var a;if(r===n&&o===n)return t;if(r!==n&&(a=r),o!==n){if(a===n)return o;typeof r=="string"||typeof o=="string"?(r=He(r),o=He(o)):(r=Eu(r),o=Eu(o)),a=e(r,o)}return a}}function es(e){return xt(function(t){return t=le(t,Ge(H())),X(function(r){var o=this;return e(t,function(a){return Ue(a,o,r)})})})}function gi(e,t){t=t===n?" ":He(t);var r=t.length;if(r<2)return r?jo(t,e):t;var o=jo(t,ti(e/kn(t)));return Tn(t)?jt(at(o),0,e).join(""):o.slice(0,e)}function Hh(e,t,r,o){var a=t&U,f=vr(e);function d(){for(var p=-1,m=arguments.length,S=-1,w=o.length,x=y(w+m),T=this&&this!==Se&&this instanceof d?f:e;++S<w;)x[S]=o[S];for(;m--;)x[S++]=arguments[++p];return Ue(T,a?r:this,x)}return d}function Ku(e){return function(t,r,o){return o&&typeof o!="number"&&Ie(t,r,o)&&(r=o=n),t=Et(t),r===n?(r=t,t=0):r=Et(r),o=o===n?t<r?1:-1:Et(o),Eh(t,r,o,e)}}function mi(e){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=tt(t),r=tt(r)),e(t,r)}}function qu(e,t,r,o,a,f,d,p,m,S){var w=t&E,x=w?d:n,T=w?n:d,D=w?f:n,K=w?n:f;t|=w?F:Y,t&=~(w?Y:F),t&O||(t&=~(U|W));var Z=[e,t,a,D,x,K,T,p,m,S],q=r.apply(n,Z);return us(e)&&nc(q,Z),q.placeholder=o,rc(q,e,t)}function ts(e){var t=ye[e];return function(r,o){if(r=tt(r),o=o==null?0:Ee(J(o),292),o&&ru(r)){var a=(ie(r)+"e").split("e"),f=t(a[0]+"e"+(+a[1]+o));return a=(ie(f)+"e").split("e"),+(a[0]+"e"+(+a[1]-o))}return t(r)}}var Kh=Mn&&1/$r(new Mn([,-0]))[1]==on?function(e){return new Mn(e)}:bs;function $u(e){return function(t){var r=Ne(t);return r==ot?ko(t):r==st?sp(t):Qd(t,e(t))}}function bt(e,t,r,o,a,f,d,p){var m=t&W;if(!m&&typeof e!="function")throw new Ze(l);var S=o?o.length:0;if(S||(t&=~(F|Y),o=a=n),d=d===n?d:_e(J(d),0),p=p===n?p:J(p),S-=a?a.length:0,t&Y){var w=o,x=a;o=a=n}var T=m?n:is(e),D=[e,t,r,o,a,w,x,f,d,p];if(T&&ig(D,T),e=D[0],t=D[1],r=D[2],o=D[3],a=D[4],p=D[9]=D[9]===n?m?0:e.length:_e(D[9]-S,0),!p&&t&(E|B)&&(t&=~(E|B)),!t||t==U)var K=Uh(e,t,r);else t==E||t==B?K=Gh(e,t,p):(t==F||t==(U|F))&&!a.length?K=Hh(e,t,r,o):K=pi.apply(n,D);var Z=T?Cu:nc;return rc(Z(K,D),e,t)}function zu(e,t,r,o){return e===n||ct(e,In[r])&&!oe.call(o,r)?t:e}function ju(e,t,r,o,a,f){return pe(e)&&pe(t)&&(f.set(t,e),ci(e,t,n,ju,f),f.delete(t)),e}function qh(e){return Ar(e)?n:e}function Yu(e,t,r,o,a,f){var d=r&M,p=e.length,m=t.length;if(p!=m&&!(d&&m>p))return!1;var S=f.get(e),w=f.get(t);if(S&&w)return S==t&&w==e;var x=-1,T=!0,D=r&R?new cn:n;for(f.set(e,t),f.set(t,e);++x<p;){var K=e[x],Z=t[x];if(o)var q=d?o(Z,K,x,t,e,f):o(K,Z,x,e,t,f);if(q!==n){if(q)continue;T=!1;break}if(D){if(!Co(t,function(Q,te){if(!sr(D,te)&&(K===Q||a(K,Q,r,o,f)))return D.push(te)})){T=!1;break}}else if(!(K===Z||a(K,Z,r,o,f))){T=!1;break}}return f.delete(e),f.delete(t),T}function $h(e,t,r,o,a,f,d){switch(r){case En:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case or:return!(e.byteLength!=t.byteLength||!f(new Xr(e),new Xr(t)));case Vn:case er:case tr:return ct(+e,+t);case Lr:return e.name==t.name&&e.message==t.message;case nr:case rr:return e==t+"";case ot:var p=ko;case st:var m=o&M;if(p||(p=$r),e.size!=t.size&&!m)return!1;var S=d.get(e);if(S)return S==t;o|=R,d.set(e,t);var w=Yu(p(e),p(t),o,a,f,d);return d.delete(e),w;case Br:if(lr)return lr.call(e)==lr.call(t)}return!1}function zh(e,t,r,o,a,f){var d=r&M,p=ns(e),m=p.length,S=ns(t),w=S.length;if(m!=w&&!d)return!1;for(var x=m;x--;){var T=p[x];if(!(d?T in t:oe.call(t,T)))return!1}var D=f.get(e),K=f.get(t);if(D&&K)return D==t&&K==e;var Z=!0;f.set(e,t),f.set(t,e);for(var q=d;++x<m;){T=p[x];var Q=e[T],te=t[T];if(o)var qe=d?o(te,Q,T,t,e,f):o(Q,te,T,e,t,f);if(!(qe===n?Q===te||a(Q,te,r,o,f):qe)){Z=!1;break}q||(q=T=="constructor")}if(Z&&!q){var Me=e.constructor,$e=t.constructor;Me!=$e&&"constructor"in e&&"constructor"in t&&!(typeof Me=="function"&&Me instanceof Me&&typeof $e=="function"&&$e instanceof $e)&&(Z=!1)}return f.delete(e),f.delete(t),Z}function xt(e){return fs(ec(e,n,cc),e+"")}function ns(e){return hu(e,we,ss)}function rs(e){return hu(e,Le,Ju)}var is=ri?function(e){return ri.get(e)}:bs;function vi(e){for(var t=e.name+"",r=Fn[t],o=oe.call(Fn,t)?r.length:0;o--;){var a=r[o],f=a.func;if(f==null||f==e)return a.name}return t}function Wn(e){var t=oe.call(c,"placeholder")?c:e;return t.placeholder}function H(){var e=c.iteratee||Ss;return e=e===Ss?vu:e,arguments.length?e(arguments[0],arguments[1]):e}function yi(e,t){var r=e.__data__;return eg(t)?r[typeof t=="string"?"string":"hash"]:r.map}function os(e){for(var t=we(e),r=t.length;r--;){var o=t[r],a=e[o];t[r]=[o,a,Qu(a)]}return t}function dn(e,t){var r=rp(e,t);return mu(r)?r:n}function jh(e){var t=oe.call(e,an),r=e[an];try{e[an]=n;var o=!0}catch{}var a=Jr.call(e);return o&&(t?e[an]=r:delete e[an]),a}var ss=Mo?function(e){return e==null?[]:(e=se(e),Bt(Mo(e),function(t){return tu.call(e,t)}))}:xs,Ju=Mo?function(e){for(var t=[];e;)Ut(t,ss(e)),e=Qr(e);return t}:xs,Ne=ke;(Fo&&Ne(new Fo(new ArrayBuffer(1)))!=En||ur&&Ne(new ur)!=ot||Ro&&Ne(Ro.resolve())!=la||Mn&&Ne(new Mn)!=st||cr&&Ne(new cr)!=ir)&&(Ne=function(e){var t=ke(e),r=t==_t?e.constructor:n,o=r?pn(r):"";if(o)switch(o){case Pp:return En;case Tp:return ot;case kp:return la;case Ip:return st;case Mp:return ir}return t});function Yh(e,t,r){for(var o=-1,a=r.length;++o<a;){var f=r[o],d=f.size;switch(f.type){case"drop":e+=d;break;case"dropRight":t-=d;break;case"take":t=Ee(t,e+d);break;case"takeRight":e=_e(e,t-d);break}}return{start:e,end:t}}function Jh(e){var t=e.match(td);return t?t[1].split(nd):[]}function Zu(e,t,r){t=zt(t,e);for(var o=-1,a=t.length,f=!1;++o<a;){var d=gt(t[o]);if(!(f=e!=null&&r(e,d)))break;e=e[d]}return f||++o!=a?f:(a=e==null?0:e.length,!!a&&Ci(a)&&Ct(d,a)&&(j(e)||hn(e)))}function Zh(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&oe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function Xu(e){return typeof e.constructor=="function"&&!yr(e)?Rn(Qr(e)):{}}function Xh(e,t,r){var o=e.constructor;switch(t){case or:return Vo(e);case Vn:case er:return new o(+e);case En:return Fh(e,r);case io:case oo:case so:case ao:case uo:case co:case fo:case lo:case po:return Mu(e,r);case ot:return new o;case tr:case rr:return new o(e);case nr:return Rh(e);case st:return new o;case Br:return Dh(e)}}function Qh(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(ed,`{
/* [wrapped with `+t+`] */
`)}function Vh(e){return j(e)||hn(e)||!!(nu&&e&&e[nu])}function Ct(e,t){var r=typeof e;return t=t??Wt,!!t&&(r=="number"||r!="symbol"&&ld.test(e))&&e>-1&&e%1==0&&e<t}function Ie(e,t,r){if(!pe(r))return!1;var o=typeof t;return(o=="number"?De(r)&&Ct(t,r.length):o=="string"&&t in r)?ct(r[t],e):!1}function as(e,t){if(j(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Ke(e)?!0:Zl.test(e)||!Jl.test(e)||t!=null&&e in se(t)}function eg(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function us(e){var t=vi(e),r=c[t];if(typeof r!="function"||!(t in V.prototype))return!1;if(e===r)return!0;var o=is(r);return!!o&&e===o[0]}function tg(e){return!!Qa&&Qa in e}var ng=jr?Ot:Cs;function yr(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||In;return e===r}function Qu(e){return e===e&&!pe(e)}function Vu(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==n||e in se(r))}}function rg(e){var t=bi(e,function(o){return r.size===A&&r.clear(),o}),r=t.cache;return t}function ig(e,t){var r=e[1],o=t[1],a=r|o,f=a<(U|W|$),d=o==$&&r==E||o==$&&r==ve&&e[7].length<=t[8]||o==($|ve)&&t[7].length<=t[8]&&r==E;if(!(f||d))return e;o&U&&(e[2]=t[2],a|=r&U?0:O);var p=t[3];if(p){var m=e[3];e[3]=m?Ru(m,p,t[4]):p,e[4]=m?Gt(e[3],b):t[4]}return p=t[5],p&&(m=e[5],e[5]=m?Du(m,p,t[6]):p,e[6]=m?Gt(e[5],b):t[6]),p=t[7],p&&(e[7]=p),o&$&&(e[8]=e[8]==null?t[8]:Ee(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function og(e){var t=[];if(e!=null)for(var r in se(e))t.push(r);return t}function sg(e){return Jr.call(e)}function ec(e,t,r){return t=_e(t===n?e.length-1:t,0),function(){for(var o=arguments,a=-1,f=_e(o.length-t,0),d=y(f);++a<f;)d[a]=o[t+a];a=-1;for(var p=y(t+1);++a<t;)p[a]=o[a];return p[t]=r(d),Ue(e,this,p)}}function tc(e,t){return t.length<2?e:ln(e,Ve(t,0,-1))}function ag(e,t){for(var r=e.length,o=Ee(t.length,r),a=Re(e);o--;){var f=t[o];e[o]=Ct(f,r)?a[f]:n}return e}function cs(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var nc=ic(Cu),_r=wp||function(e,t){return Se.setTimeout(e,t)},fs=ic(Th);function rc(e,t,r){var o=t+"";return fs(e,Qh(o,ug(Jh(o),r)))}function ic(e){var t=0,r=0;return function(){var o=Op(),a=ro-(o-r);if(r=o,a>0){if(++t>=no)return arguments[0]}else t=0;return e.apply(n,arguments)}}function _i(e,t){var r=-1,o=e.length,a=o-1;for(t=t===n?o:t;++r<t;){var f=zo(r,a),d=e[f];e[f]=e[r],e[r]=d}return e.length=t,e}var oc=rg(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Xl,function(r,o,a,f){t.push(a?f.replace(od,"$1"):o||r)}),t});function gt(e){if(typeof e=="string"||Ke(e))return e;var t=e+"";return t=="0"&&1/e==-on?"-0":t}function pn(e){if(e!=null){try{return Yr.call(e)}catch{}try{return e+""}catch{}}return""}function ug(e,t){return Je(Rl,function(r){var o="_."+r[0];t&r[1]&&!Kr(e,o)&&e.push(o)}),e.sort()}function sc(e){if(e instanceof V)return e.clone();var t=new Xe(e.__wrapped__,e.__chain__);return t.__actions__=Re(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function cg(e,t,r){(r?Ie(e,t,r):t===n)?t=1:t=_e(J(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var a=0,f=0,d=y(ti(o/t));a<o;)d[f++]=Ve(e,a,a+=t);return d}function fg(e){for(var t=-1,r=e==null?0:e.length,o=0,a=[];++t<r;){var f=e[t];f&&(a[o++]=f)}return a}function lg(){var e=arguments.length;if(!e)return[];for(var t=y(e-1),r=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Ut(j(r)?Re(r):[r],Ce(t,1))}var dg=X(function(e,t){return ge(e)?pr(e,Ce(t,1,ge,!0)):[]}),pg=X(function(e,t){var r=et(t);return ge(r)&&(r=n),ge(e)?pr(e,Ce(t,1,ge,!0),H(r,2)):[]}),hg=X(function(e,t){var r=et(t);return ge(r)&&(r=n),ge(e)?pr(e,Ce(t,1,ge,!0),n,r):[]});function gg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),Ve(e,t<0?0:t,o)):[]}function mg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),t=o-t,Ve(e,0,t<0?0:t)):[]}function vg(e,t){return e&&e.length?li(e,H(t,3),!0,!0):[]}function yg(e,t){return e&&e.length?li(e,H(t,3),!0):[]}function _g(e,t,r,o){var a=e==null?0:e.length;return a?(r&&typeof r!="number"&&Ie(e,t,r)&&(r=0,o=a),lh(e,t,r,o)):[]}function ac(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=r==null?0:J(r);return a<0&&(a=_e(o+a,0)),qr(e,H(t,3),a)}function uc(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=o-1;return r!==n&&(a=J(r),a=r<0?_e(o+a,0):Ee(a,o-1)),qr(e,H(t,3),a,!0)}function cc(e){var t=e==null?0:e.length;return t?Ce(e,1):[]}function Ag(e){var t=e==null?0:e.length;return t?Ce(e,on):[]}function Sg(e,t){var r=e==null?0:e.length;return r?(t=t===n?1:J(t),Ce(e,t)):[]}function wg(e){for(var t=-1,r=e==null?0:e.length,o={};++t<r;){var a=e[t];o[a[0]]=a[1]}return o}function fc(e){return e&&e.length?e[0]:n}function bg(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=r==null?0:J(r);return a<0&&(a=_e(o+a,0)),Pn(e,t,a)}function xg(e){var t=e==null?0:e.length;return t?Ve(e,0,-1):[]}var Cg=X(function(e){var t=le(e,Xo);return t.length&&t[0]===e[0]?Go(t):[]}),Og=X(function(e){var t=et(e),r=le(e,Xo);return t===et(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Go(r,H(t,2)):[]}),Eg=X(function(e){var t=et(e),r=le(e,Xo);return t=typeof t=="function"?t:n,t&&r.pop(),r.length&&r[0]===e[0]?Go(r,n,t):[]});function Ng(e,t){return e==null?"":xp.call(e,t)}function et(e){var t=e==null?0:e.length;return t?e[t-1]:n}function Pg(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=o;return r!==n&&(a=J(r),a=a<0?_e(o+a,0):Ee(a,o-1)),t===t?up(e,t,a):qr(e,qa,a,!0)}function Tg(e,t){return e&&e.length?Su(e,J(t)):n}var kg=X(lc);function lc(e,t){return e&&e.length&&t&&t.length?$o(e,t):e}function Ig(e,t,r){return e&&e.length&&t&&t.length?$o(e,t,H(r,2)):e}function Mg(e,t,r){return e&&e.length&&t&&t.length?$o(e,t,n,r):e}var Fg=xt(function(e,t){var r=e==null?0:e.length,o=Lo(e,t);return xu(e,le(t,function(a){return Ct(a,r)?+a:a}).sort(Fu)),o});function Rg(e,t){var r=[];if(!(e&&e.length))return r;var o=-1,a=[],f=e.length;for(t=H(t,3);++o<f;){var d=e[o];t(d,o,e)&&(r.push(d),a.push(o))}return xu(e,a),r}function ls(e){return e==null?e:Np.call(e)}function Dg(e,t,r){var o=e==null?0:e.length;return o?(r&&typeof r!="number"&&Ie(e,t,r)?(t=0,r=o):(t=t==null?0:J(t),r=r===n?o:J(r)),Ve(e,t,r)):[]}function Lg(e,t){return fi(e,t)}function Wg(e,t,r){return Yo(e,t,H(r,2))}function Bg(e,t){var r=e==null?0:e.length;if(r){var o=fi(e,t);if(o<r&&ct(e[o],t))return o}return-1}function Ug(e,t){return fi(e,t,!0)}function Gg(e,t,r){return Yo(e,t,H(r,2),!0)}function Hg(e,t){var r=e==null?0:e.length;if(r){var o=fi(e,t,!0)-1;if(ct(e[o],t))return o}return-1}function Kg(e){return e&&e.length?Ou(e):[]}function qg(e,t){return e&&e.length?Ou(e,H(t,2)):[]}function $g(e){var t=e==null?0:e.length;return t?Ve(e,1,t):[]}function zg(e,t,r){return e&&e.length?(t=r||t===n?1:J(t),Ve(e,0,t<0?0:t)):[]}function jg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),t=o-t,Ve(e,t<0?0:t,o)):[]}function Yg(e,t){return e&&e.length?li(e,H(t,3),!1,!0):[]}function Jg(e,t){return e&&e.length?li(e,H(t,3)):[]}var Zg=X(function(e){return $t(Ce(e,1,ge,!0))}),Xg=X(function(e){var t=et(e);return ge(t)&&(t=n),$t(Ce(e,1,ge,!0),H(t,2))}),Qg=X(function(e){var t=et(e);return t=typeof t=="function"?t:n,$t(Ce(e,1,ge,!0),n,t)});function Vg(e){return e&&e.length?$t(e):[]}function em(e,t){return e&&e.length?$t(e,H(t,2)):[]}function tm(e,t){return t=typeof t=="function"?t:n,e&&e.length?$t(e,n,t):[]}function ds(e){if(!(e&&e.length))return[];var t=0;return e=Bt(e,function(r){if(ge(r))return t=_e(r.length,t),!0}),Po(t,function(r){return le(e,Oo(r))})}function dc(e,t){if(!(e&&e.length))return[];var r=ds(e);return t==null?r:le(r,function(o){return Ue(t,n,o)})}var nm=X(function(e,t){return ge(e)?pr(e,t):[]}),rm=X(function(e){return Zo(Bt(e,ge))}),im=X(function(e){var t=et(e);return ge(t)&&(t=n),Zo(Bt(e,ge),H(t,2))}),om=X(function(e){var t=et(e);return t=typeof t=="function"?t:n,Zo(Bt(e,ge),n,t)}),sm=X(ds);function am(e,t){return Tu(e||[],t||[],dr)}function um(e,t){return Tu(e||[],t||[],mr)}var cm=X(function(e){var t=e.length,r=t>1?e[t-1]:n;return r=typeof r=="function"?(e.pop(),r):n,dc(e,r)});function pc(e){var t=c(e);return t.__chain__=!0,t}function fm(e,t){return t(e),e}function Ai(e,t){return t(e)}var lm=xt(function(e){var t=e.length,r=t?e[0]:0,o=this.__wrapped__,a=function(f){return Lo(f,e)};return t>1||this.__actions__.length||!(o instanceof V)||!Ct(r)?this.thru(a):(o=o.slice(r,+r+(t?1:0)),o.__actions__.push({func:Ai,args:[a],thisArg:n}),new Xe(o,this.__chain__).thru(function(f){return t&&!f.length&&f.push(n),f}))});function dm(){return pc(this)}function pm(){return new Xe(this.value(),this.__chain__)}function hm(){this.__values__===n&&(this.__values__=Ec(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function gm(){return this}function mm(e){for(var t,r=this;r instanceof oi;){var o=sc(r);o.__index__=0,o.__values__=n,t?a.__wrapped__=o:t=o;var a=o;r=r.__wrapped__}return a.__wrapped__=e,t}function vm(){var e=this.__wrapped__;if(e instanceof V){var t=e;return this.__actions__.length&&(t=new V(this)),t=t.reverse(),t.__actions__.push({func:Ai,args:[ls],thisArg:n}),new Xe(t,this.__chain__)}return this.thru(ls)}function ym(){return Pu(this.__wrapped__,this.__actions__)}var _m=di(function(e,t,r){oe.call(e,r)?++e[r]:wt(e,r,1)});function Am(e,t,r){var o=j(e)?Ha:fh;return r&&Ie(e,t,r)&&(t=n),o(e,H(t,3))}function Sm(e,t){var r=j(e)?Bt:du;return r(e,H(t,3))}var wm=Uu(ac),bm=Uu(uc);function xm(e,t){return Ce(Si(e,t),1)}function Cm(e,t){return Ce(Si(e,t),on)}function Om(e,t,r){return r=r===n?1:J(r),Ce(Si(e,t),r)}function hc(e,t){var r=j(e)?Je:qt;return r(e,H(t,3))}function gc(e,t){var r=j(e)?$d:lu;return r(e,H(t,3))}var Em=di(function(e,t,r){oe.call(e,r)?e[r].push(t):wt(e,r,[t])});function Nm(e,t,r,o){e=De(e)?e:Un(e),r=r&&!o?J(r):0;var a=e.length;return r<0&&(r=_e(a+r,0)),Oi(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&Pn(e,t,r)>-1}var Pm=X(function(e,t,r){var o=-1,a=typeof t=="function",f=De(e)?y(e.length):[];return qt(e,function(d){f[++o]=a?Ue(t,d,r):hr(d,t,r)}),f}),Tm=di(function(e,t,r){wt(e,r,t)});function Si(e,t){var r=j(e)?le:yu;return r(e,H(t,3))}function km(e,t,r,o){return e==null?[]:(j(t)||(t=t==null?[]:[t]),r=o?n:r,j(r)||(r=r==null?[]:[r]),wu(e,t,r))}var Im=di(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});function Mm(e,t,r){var o=j(e)?xo:za,a=arguments.length<3;return o(e,H(t,4),r,a,qt)}function Fm(e,t,r){var o=j(e)?zd:za,a=arguments.length<3;return o(e,H(t,4),r,a,lu)}function Rm(e,t){var r=j(e)?Bt:du;return r(e,xi(H(t,3)))}function Dm(e){var t=j(e)?au:Nh;return t(e)}function Lm(e,t,r){(r?Ie(e,t,r):t===n)?t=1:t=J(t);var o=j(e)?oh:Ph;return o(e,t)}function Wm(e){var t=j(e)?sh:kh;return t(e)}function Bm(e){if(e==null)return 0;if(De(e))return Oi(e)?kn(e):e.length;var t=Ne(e);return t==ot||t==st?e.size:Ko(e).length}function Um(e,t,r){var o=j(e)?Co:Ih;return r&&Ie(e,t,r)&&(t=n),o(e,H(t,3))}var Gm=X(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Ie(e,t[0],t[1])?t=[]:r>2&&Ie(t[0],t[1],t[2])&&(t=[t[0]]),wu(e,Ce(t,1),[])}),wi=Sp||function(){return Se.Date.now()};function Hm(e,t){if(typeof t!="function")throw new Ze(l);return e=J(e),function(){if(--e<1)return t.apply(this,arguments)}}function mc(e,t,r){return t=r?n:t,t=e&&t==null?e.length:t,bt(e,$,n,n,n,n,t)}function vc(e,t){var r;if(typeof t!="function")throw new Ze(l);return e=J(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var ps=X(function(e,t,r){var o=U;if(r.length){var a=Gt(r,Wn(ps));o|=F}return bt(e,o,t,r,a)}),yc=X(function(e,t,r){var o=U|W;if(r.length){var a=Gt(r,Wn(yc));o|=F}return bt(t,o,e,r,a)});function _c(e,t,r){t=r?n:t;var o=bt(e,E,n,n,n,n,n,t);return o.placeholder=_c.placeholder,o}function Ac(e,t,r){t=r?n:t;var o=bt(e,B,n,n,n,n,n,t);return o.placeholder=Ac.placeholder,o}function Sc(e,t,r){var o,a,f,d,p,m,S=0,w=!1,x=!1,T=!0;if(typeof e!="function")throw new Ze(l);t=tt(t)||0,pe(r)&&(w=!!r.leading,x="maxWait"in r,f=x?_e(tt(r.maxWait)||0,t):f,T="trailing"in r?!!r.trailing:T);function D(me){var ft=o,Nt=a;return o=a=n,S=me,d=e.apply(Nt,ft),d}function K(me){return S=me,p=_r(Q,t),w?D(me):d}function Z(me){var ft=me-m,Nt=me-S,Uc=t-ft;return x?Ee(Uc,f-Nt):Uc}function q(me){var ft=me-m,Nt=me-S;return m===n||ft>=t||ft<0||x&&Nt>=f}function Q(){var me=wi();if(q(me))return te(me);p=_r(Q,Z(me))}function te(me){return p=n,T&&o?D(me):(o=a=n,d)}function qe(){p!==n&&ku(p),S=0,o=m=a=p=n}function Me(){return p===n?d:te(wi())}function $e(){var me=wi(),ft=q(me);if(o=arguments,a=this,m=me,ft){if(p===n)return K(m);if(x)return ku(p),p=_r(Q,t),D(m)}return p===n&&(p=_r(Q,t)),d}return $e.cancel=qe,$e.flush=Me,$e}var Km=X(function(e,t){return fu(e,1,t)}),qm=X(function(e,t,r){return fu(e,tt(t)||0,r)});function $m(e){return bt(e,ee)}function bi(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Ze(l);var r=function(){var o=arguments,a=t?t.apply(this,o):o[0],f=r.cache;if(f.has(a))return f.get(a);var d=e.apply(this,o);return r.cache=f.set(a,d)||f,d};return r.cache=new(bi.Cache||St),r}bi.Cache=St;function xi(e){if(typeof e!="function")throw new Ze(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function zm(e){return vc(2,e)}var jm=Mh(function(e,t){t=t.length==1&&j(t[0])?le(t[0],Ge(H())):le(Ce(t,1),Ge(H()));var r=t.length;return X(function(o){for(var a=-1,f=Ee(o.length,r);++a<f;)o[a]=t[a].call(this,o[a]);return Ue(e,this,o)})}),hs=X(function(e,t){var r=Gt(t,Wn(hs));return bt(e,F,n,t,r)}),wc=X(function(e,t){var r=Gt(t,Wn(wc));return bt(e,Y,n,t,r)}),Ym=xt(function(e,t){return bt(e,ve,n,n,n,t)});function Jm(e,t){if(typeof e!="function")throw new Ze(l);return t=t===n?t:J(t),X(e,t)}function Zm(e,t){if(typeof e!="function")throw new Ze(l);return t=t==null?0:_e(J(t),0),X(function(r){var o=r[t],a=jt(r,0,t);return o&&Ut(a,o),Ue(e,this,a)})}function Xm(e,t,r){var o=!0,a=!0;if(typeof e!="function")throw new Ze(l);return pe(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),Sc(e,t,{leading:o,maxWait:t,trailing:a})}function Qm(e){return mc(e,1)}function Vm(e,t){return hs(Qo(t),e)}function ev(){if(!arguments.length)return[];var e=arguments[0];return j(e)?e:[e]}function tv(e){return Qe(e,L)}function nv(e,t){return t=typeof t=="function"?t:n,Qe(e,L,t)}function rv(e){return Qe(e,C|L)}function iv(e,t){return t=typeof t=="function"?t:n,Qe(e,C|L,t)}function ov(e,t){return t==null||cu(e,t,we(t))}function ct(e,t){return e===t||e!==e&&t!==t}var sv=mi(Uo),av=mi(function(e,t){return e>=t}),hn=gu(function(){return arguments}())?gu:function(e){return he(e)&&oe.call(e,"callee")&&!tu.call(e,"callee")},j=y.isArray,uv=Da?Ge(Da):mh;function De(e){return e!=null&&Ci(e.length)&&!Ot(e)}function ge(e){return he(e)&&De(e)}function cv(e){return e===!0||e===!1||he(e)&&ke(e)==Vn}var Yt=bp||Cs,fv=La?Ge(La):vh;function lv(e){return he(e)&&e.nodeType===1&&!Ar(e)}function dv(e){if(e==null)return!0;if(De(e)&&(j(e)||typeof e=="string"||typeof e.splice=="function"||Yt(e)||Bn(e)||hn(e)))return!e.length;var t=Ne(e);if(t==ot||t==st)return!e.size;if(yr(e))return!Ko(e).length;for(var r in e)if(oe.call(e,r))return!1;return!0}function pv(e,t){return gr(e,t)}function hv(e,t,r){r=typeof r=="function"?r:n;var o=r?r(e,t):n;return o===n?gr(e,t,n,r):!!o}function gs(e){if(!he(e))return!1;var t=ke(e);return t==Lr||t==Ll||typeof e.message=="string"&&typeof e.name=="string"&&!Ar(e)}function gv(e){return typeof e=="number"&&ru(e)}function Ot(e){if(!pe(e))return!1;var t=ke(e);return t==Wr||t==fa||t==Dl||t==Bl}function bc(e){return typeof e=="number"&&e==J(e)}function Ci(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Wt}function pe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function he(e){return e!=null&&typeof e=="object"}var xc=Wa?Ge(Wa):_h;function mv(e,t){return e===t||Ho(e,t,os(t))}function vv(e,t,r){return r=typeof r=="function"?r:n,Ho(e,t,os(t),r)}function yv(e){return Cc(e)&&e!=+e}function _v(e){if(ng(e))throw new z(u);return mu(e)}function Av(e){return e===null}function Sv(e){return e==null}function Cc(e){return typeof e=="number"||he(e)&&ke(e)==tr}function Ar(e){if(!he(e)||ke(e)!=_t)return!1;var t=Qr(e);if(t===null)return!0;var r=oe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Yr.call(r)==vp}var ms=Ba?Ge(Ba):Ah;function wv(e){return bc(e)&&e>=-Wt&&e<=Wt}var Oc=Ua?Ge(Ua):Sh;function Oi(e){return typeof e=="string"||!j(e)&&he(e)&&ke(e)==rr}function Ke(e){return typeof e=="symbol"||he(e)&&ke(e)==Br}var Bn=Ga?Ge(Ga):wh;function bv(e){return e===n}function xv(e){return he(e)&&Ne(e)==ir}function Cv(e){return he(e)&&ke(e)==Gl}var Ov=mi(qo),Ev=mi(function(e,t){return e<=t});function Ec(e){if(!e)return[];if(De(e))return Oi(e)?at(e):Re(e);if(ar&&e[ar])return op(e[ar]());var t=Ne(e),r=t==ot?ko:t==st?$r:Un;return r(e)}function Et(e){if(!e)return e===0?e:0;if(e=tt(e),e===on||e===-on){var t=e<0?-1:1;return t*Il}return e===e?e:0}function J(e){var t=Et(e),r=t%1;return t===t?r?t-r:t:0}function Nc(e){return e?fn(J(e),0,dt):0}function tt(e){if(typeof e=="number")return e;if(Ke(e))return Rr;if(pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ja(e);var r=ud.test(e);return r||fd.test(e)?Hd(e.slice(2),r?2:8):ad.test(e)?Rr:+e}function Pc(e){return ht(e,Le(e))}function Nv(e){return e?fn(J(e),-Wt,Wt):e===0?e:0}function ie(e){return e==null?"":He(e)}var Pv=Dn(function(e,t){if(yr(t)||De(t)){ht(t,we(t),e);return}for(var r in t)oe.call(t,r)&&dr(e,r,t[r])}),Tc=Dn(function(e,t){ht(t,Le(t),e)}),Ei=Dn(function(e,t,r,o){ht(t,Le(t),e,o)}),Tv=Dn(function(e,t,r,o){ht(t,we(t),e,o)}),kv=xt(Lo);function Iv(e,t){var r=Rn(e);return t==null?r:uu(r,t)}var Mv=X(function(e,t){e=se(e);var r=-1,o=t.length,a=o>2?t[2]:n;for(a&&Ie(t[0],t[1],a)&&(o=1);++r<o;)for(var f=t[r],d=Le(f),p=-1,m=d.length;++p<m;){var S=d[p],w=e[S];(w===n||ct(w,In[S])&&!oe.call(e,S))&&(e[S]=f[S])}return e}),Fv=X(function(e){return e.push(n,ju),Ue(kc,n,e)});function Rv(e,t){return Ka(e,H(t,3),pt)}function Dv(e,t){return Ka(e,H(t,3),Bo)}function Lv(e,t){return e==null?e:Wo(e,H(t,3),Le)}function Wv(e,t){return e==null?e:pu(e,H(t,3),Le)}function Bv(e,t){return e&&pt(e,H(t,3))}function Uv(e,t){return e&&Bo(e,H(t,3))}function Gv(e){return e==null?[]:ui(e,we(e))}function Hv(e){return e==null?[]:ui(e,Le(e))}function vs(e,t,r){var o=e==null?n:ln(e,t);return o===n?r:o}function Kv(e,t){return e!=null&&Zu(e,t,dh)}function ys(e,t){return e!=null&&Zu(e,t,ph)}var qv=Hu(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=Jr.call(t)),e[t]=r},As(We)),$v=Hu(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=Jr.call(t)),oe.call(e,t)?e[t].push(r):e[t]=[r]},H),zv=X(hr);function we(e){return De(e)?su(e):Ko(e)}function Le(e){return De(e)?su(e,!0):bh(e)}function jv(e,t){var r={};return t=H(t,3),pt(e,function(o,a,f){wt(r,t(o,a,f),o)}),r}function Yv(e,t){var r={};return t=H(t,3),pt(e,function(o,a,f){wt(r,a,t(o,a,f))}),r}var Jv=Dn(function(e,t,r){ci(e,t,r)}),kc=Dn(function(e,t,r,o){ci(e,t,r,o)}),Zv=xt(function(e,t){var r={};if(e==null)return r;var o=!1;t=le(t,function(f){return f=zt(f,e),o||(o=f.length>1),f}),ht(e,rs(e),r),o&&(r=Qe(r,C|P|L,qh));for(var a=t.length;a--;)Jo(r,t[a]);return r});function Xv(e,t){return Ic(e,xi(H(t)))}var Qv=xt(function(e,t){return e==null?{}:Ch(e,t)});function Ic(e,t){if(e==null)return{};var r=le(rs(e),function(o){return[o]});return t=H(t),bu(e,r,function(o,a){return t(o,a[0])})}function Vv(e,t,r){t=zt(t,e);var o=-1,a=t.length;for(a||(a=1,e=n);++o<a;){var f=e==null?n:e[gt(t[o])];f===n&&(o=a,f=r),e=Ot(f)?f.call(e):f}return e}function ey(e,t,r){return e==null?e:mr(e,t,r)}function ty(e,t,r,o){return o=typeof o=="function"?o:n,e==null?e:mr(e,t,r,o)}var Mc=$u(we),Fc=$u(Le);function ny(e,t,r){var o=j(e),a=o||Yt(e)||Bn(e);if(t=H(t,4),r==null){var f=e&&e.constructor;a?r=o?new f:[]:pe(e)?r=Ot(f)?Rn(Qr(e)):{}:r={}}return(a?Je:pt)(e,function(d,p,m){return t(r,d,p,m)}),r}function ry(e,t){return e==null?!0:Jo(e,t)}function iy(e,t,r){return e==null?e:Nu(e,t,Qo(r))}function oy(e,t,r,o){return o=typeof o=="function"?o:n,e==null?e:Nu(e,t,Qo(r),o)}function Un(e){return e==null?[]:To(e,we(e))}function sy(e){return e==null?[]:To(e,Le(e))}function ay(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=tt(r),r=r===r?r:0),t!==n&&(t=tt(t),t=t===t?t:0),fn(tt(e),t,r)}function uy(e,t,r){return t=Et(t),r===n?(r=t,t=0):r=Et(r),e=tt(e),hh(e,t,r)}function cy(e,t,r){if(r&&typeof r!="boolean"&&Ie(e,t,r)&&(t=r=n),r===n&&(typeof t=="boolean"?(r=t,t=n):typeof e=="boolean"&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Et(e),t===n?(t=e,e=0):t=Et(t)),e>t){var o=e;e=t,t=o}if(r||e%1||t%1){var a=iu();return Ee(e+a*(t-e+Gd("1e-"+((a+"").length-1))),t)}return zo(e,t)}var fy=Ln(function(e,t,r){return t=t.toLowerCase(),e+(r?Rc(t):t)});function Rc(e){return _s(ie(e).toLowerCase())}function Dc(e){return e=ie(e),e&&e.replace(dd,ep).replace(kd,"")}function ly(e,t,r){e=ie(e),t=He(t);var o=e.length;r=r===n?o:fn(J(r),0,o);var a=r;return r-=t.length,r>=0&&e.slice(r,a)==t}function dy(e){return e=ie(e),e&&zl.test(e)?e.replace(pa,tp):e}function py(e){return e=ie(e),e&&Ql.test(e)?e.replace(ho,"\\$&"):e}var hy=Ln(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),gy=Ln(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),my=Bu("toLowerCase");function vy(e,t,r){e=ie(e),t=J(t);var o=t?kn(e):0;if(!t||o>=t)return e;var a=(t-o)/2;return gi(ni(a),r)+e+gi(ti(a),r)}function yy(e,t,r){e=ie(e),t=J(t);var o=t?kn(e):0;return t&&o<t?e+gi(t-o,r):e}function _y(e,t,r){e=ie(e),t=J(t);var o=t?kn(e):0;return t&&o<t?gi(t-o,r)+e:e}function Ay(e,t,r){return r||t==null?t=0:t&&(t=+t),Ep(ie(e).replace(go,""),t||0)}function Sy(e,t,r){return(r?Ie(e,t,r):t===n)?t=1:t=J(t),jo(ie(e),t)}function wy(){var e=arguments,t=ie(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var by=Ln(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});function xy(e,t,r){return r&&typeof r!="number"&&Ie(e,t,r)&&(t=r=n),r=r===n?dt:r>>>0,r?(e=ie(e),e&&(typeof t=="string"||t!=null&&!ms(t))&&(t=He(t),!t&&Tn(e))?jt(at(e),0,r):e.split(t,r)):[]}var Cy=Ln(function(e,t,r){return e+(r?" ":"")+_s(t)});function Oy(e,t,r){return e=ie(e),r=r==null?0:fn(J(r),0,e.length),t=He(t),e.slice(r,r+t.length)==t}function Ey(e,t,r){var o=c.templateSettings;r&&Ie(e,t,r)&&(t=n),e=ie(e),t=Ei({},t,o,zu);var a=Ei({},t.imports,o.imports,zu),f=we(a),d=To(a,f),p,m,S=0,w=t.interpolate||Ur,x="__p += '",T=Io((t.escape||Ur).source+"|"+w.source+"|"+(w===ha?sd:Ur).source+"|"+(t.evaluate||Ur).source+"|$","g"),D="//# sourceURL="+(oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Dd+"]")+`
`;e.replace(T,function(q,Q,te,qe,Me,$e){return te||(te=qe),x+=e.slice(S,$e).replace(pd,np),Q&&(p=!0,x+=`' +
__e(`+Q+`) +
'`),Me&&(m=!0,x+=`';
`+Me+`;
__p += '`),te&&(x+=`' +
((__t = (`+te+`)) == null ? '' : __t) +
'`),S=$e+q.length,q}),x+=`';
`;var K=oe.call(t,"variable")&&t.variable;if(!K)x=`with (obj) {
`+x+`
}
`;else if(id.test(K))throw new z(h);x=(m?x.replace(Hl,""):x).replace(Kl,"$1").replace(ql,"$1;"),x="function("+(K||"obj")+`) {
`+(K?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(p?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+x+`return __p
}`;var Z=Wc(function(){return re(f,D+"return "+x).apply(n,d)});if(Z.source=x,gs(Z))throw Z;return Z}function Ny(e){return ie(e).toLowerCase()}function Py(e){return ie(e).toUpperCase()}function Ty(e,t,r){if(e=ie(e),e&&(r||t===n))return ja(e);if(!e||!(t=He(t)))return e;var o=at(e),a=at(t),f=Ya(o,a),d=Ja(o,a)+1;return jt(o,f,d).join("")}function ky(e,t,r){if(e=ie(e),e&&(r||t===n))return e.slice(0,Xa(e)+1);if(!e||!(t=He(t)))return e;var o=at(e),a=Ja(o,at(t))+1;return jt(o,0,a).join("")}function Iy(e,t,r){if(e=ie(e),e&&(r||t===n))return e.replace(go,"");if(!e||!(t=He(t)))return e;var o=at(e),a=Ya(o,at(t));return jt(o,a).join("")}function My(e,t){var r=fe,o=Oe;if(pe(t)){var a="separator"in t?t.separator:a;r="length"in t?J(t.length):r,o="omission"in t?He(t.omission):o}e=ie(e);var f=e.length;if(Tn(e)){var d=at(e);f=d.length}if(r>=f)return e;var p=r-kn(o);if(p<1)return o;var m=d?jt(d,0,p).join(""):e.slice(0,p);if(a===n)return m+o;if(d&&(p+=m.length-p),ms(a)){if(e.slice(p).search(a)){var S,w=m;for(a.global||(a=Io(a.source,ie(ga.exec(a))+"g")),a.lastIndex=0;S=a.exec(w);)var x=S.index;m=m.slice(0,x===n?p:x)}}else if(e.indexOf(He(a),p)!=p){var T=m.lastIndexOf(a);T>-1&&(m=m.slice(0,T))}return m+o}function Fy(e){return e=ie(e),e&&$l.test(e)?e.replace(da,cp):e}var Ry=Ln(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),_s=Bu("toUpperCase");function Lc(e,t,r){return e=ie(e),t=r?n:t,t===n?ip(e)?dp(e):Jd(e):e.match(t)||[]}var Wc=X(function(e,t){try{return Ue(e,n,t)}catch(r){return gs(r)?r:new z(r)}}),Dy=xt(function(e,t){return Je(t,function(r){r=gt(r),wt(e,r,ps(e[r],e))}),e});function Ly(e){var t=e==null?0:e.length,r=H();return e=t?le(e,function(o){if(typeof o[1]!="function")throw new Ze(l);return[r(o[0]),o[1]]}):[],X(function(o){for(var a=-1;++a<t;){var f=e[a];if(Ue(f[0],this,o))return Ue(f[1],this,o)}})}function Wy(e){return ch(Qe(e,C))}function As(e){return function(){return e}}function By(e,t){return e==null||e!==e?t:e}var Uy=Gu(),Gy=Gu(!0);function We(e){return e}function Ss(e){return vu(typeof e=="function"?e:Qe(e,C))}function Hy(e){return _u(Qe(e,C))}function Ky(e,t){return Au(e,Qe(t,C))}var qy=X(function(e,t){return function(r){return hr(r,e,t)}}),$y=X(function(e,t){return function(r){return hr(e,r,t)}});function ws(e,t,r){var o=we(t),a=ui(t,o);r==null&&!(pe(t)&&(a.length||!o.length))&&(r=t,t=e,e=this,a=ui(t,we(t)));var f=!(pe(r)&&"chain"in r)||!!r.chain,d=Ot(e);return Je(a,function(p){var m=t[p];e[p]=m,d&&(e.prototype[p]=function(){var S=this.__chain__;if(f||S){var w=e(this.__wrapped__),x=w.__actions__=Re(this.__actions__);return x.push({func:m,args:arguments,thisArg:e}),w.__chain__=S,w}return m.apply(e,Ut([this.value()],arguments))})}),e}function zy(){return Se._===this&&(Se._=yp),this}function bs(){}function jy(e){return e=J(e),X(function(t){return Su(t,e)})}var Yy=es(le),Jy=es(Ha),Zy=es(Co);function Bc(e){return as(e)?Oo(gt(e)):Oh(e)}function Xy(e){return function(t){return e==null?n:ln(e,t)}}var Qy=Ku(),Vy=Ku(!0);function xs(){return[]}function Cs(){return!1}function e_(){return{}}function t_(){return""}function n_(){return!0}function r_(e,t){if(e=J(e),e<1||e>Wt)return[];var r=dt,o=Ee(e,dt);t=H(t),e-=dt;for(var a=Po(o,t);++r<e;)t(r);return a}function i_(e){return j(e)?le(e,gt):Ke(e)?[e]:Re(oc(ie(e)))}function o_(e){var t=++mp;return ie(e)+t}var s_=hi(function(e,t){return e+t},0),a_=ts("ceil"),u_=hi(function(e,t){return e/t},1),c_=ts("floor");function f_(e){return e&&e.length?ai(e,We,Uo):n}function l_(e,t){return e&&e.length?ai(e,H(t,2),Uo):n}function d_(e){return $a(e,We)}function p_(e,t){return $a(e,H(t,2))}function h_(e){return e&&e.length?ai(e,We,qo):n}function g_(e,t){return e&&e.length?ai(e,H(t,2),qo):n}var m_=hi(function(e,t){return e*t},1),v_=ts("round"),y_=hi(function(e,t){return e-t},0);function __(e){return e&&e.length?No(e,We):0}function A_(e,t){return e&&e.length?No(e,H(t,2)):0}return c.after=Hm,c.ary=mc,c.assign=Pv,c.assignIn=Tc,c.assignInWith=Ei,c.assignWith=Tv,c.at=kv,c.before=vc,c.bind=ps,c.bindAll=Dy,c.bindKey=yc,c.castArray=ev,c.chain=pc,c.chunk=cg,c.compact=fg,c.concat=lg,c.cond=Ly,c.conforms=Wy,c.constant=As,c.countBy=_m,c.create=Iv,c.curry=_c,c.curryRight=Ac,c.debounce=Sc,c.defaults=Mv,c.defaultsDeep=Fv,c.defer=Km,c.delay=qm,c.difference=dg,c.differenceBy=pg,c.differenceWith=hg,c.drop=gg,c.dropRight=mg,c.dropRightWhile=vg,c.dropWhile=yg,c.fill=_g,c.filter=Sm,c.flatMap=xm,c.flatMapDeep=Cm,c.flatMapDepth=Om,c.flatten=cc,c.flattenDeep=Ag,c.flattenDepth=Sg,c.flip=$m,c.flow=Uy,c.flowRight=Gy,c.fromPairs=wg,c.functions=Gv,c.functionsIn=Hv,c.groupBy=Em,c.initial=xg,c.intersection=Cg,c.intersectionBy=Og,c.intersectionWith=Eg,c.invert=qv,c.invertBy=$v,c.invokeMap=Pm,c.iteratee=Ss,c.keyBy=Tm,c.keys=we,c.keysIn=Le,c.map=Si,c.mapKeys=jv,c.mapValues=Yv,c.matches=Hy,c.matchesProperty=Ky,c.memoize=bi,c.merge=Jv,c.mergeWith=kc,c.method=qy,c.methodOf=$y,c.mixin=ws,c.negate=xi,c.nthArg=jy,c.omit=Zv,c.omitBy=Xv,c.once=zm,c.orderBy=km,c.over=Yy,c.overArgs=jm,c.overEvery=Jy,c.overSome=Zy,c.partial=hs,c.partialRight=wc,c.partition=Im,c.pick=Qv,c.pickBy=Ic,c.property=Bc,c.propertyOf=Xy,c.pull=kg,c.pullAll=lc,c.pullAllBy=Ig,c.pullAllWith=Mg,c.pullAt=Fg,c.range=Qy,c.rangeRight=Vy,c.rearg=Ym,c.reject=Rm,c.remove=Rg,c.rest=Jm,c.reverse=ls,c.sampleSize=Lm,c.set=ey,c.setWith=ty,c.shuffle=Wm,c.slice=Dg,c.sortBy=Gm,c.sortedUniq=Kg,c.sortedUniqBy=qg,c.split=xy,c.spread=Zm,c.tail=$g,c.take=zg,c.takeRight=jg,c.takeRightWhile=Yg,c.takeWhile=Jg,c.tap=fm,c.throttle=Xm,c.thru=Ai,c.toArray=Ec,c.toPairs=Mc,c.toPairsIn=Fc,c.toPath=i_,c.toPlainObject=Pc,c.transform=ny,c.unary=Qm,c.union=Zg,c.unionBy=Xg,c.unionWith=Qg,c.uniq=Vg,c.uniqBy=em,c.uniqWith=tm,c.unset=ry,c.unzip=ds,c.unzipWith=dc,c.update=iy,c.updateWith=oy,c.values=Un,c.valuesIn=sy,c.without=nm,c.words=Lc,c.wrap=Vm,c.xor=rm,c.xorBy=im,c.xorWith=om,c.zip=sm,c.zipObject=am,c.zipObjectDeep=um,c.zipWith=cm,c.entries=Mc,c.entriesIn=Fc,c.extend=Tc,c.extendWith=Ei,ws(c,c),c.add=s_,c.attempt=Wc,c.camelCase=fy,c.capitalize=Rc,c.ceil=a_,c.clamp=ay,c.clone=tv,c.cloneDeep=rv,c.cloneDeepWith=iv,c.cloneWith=nv,c.conformsTo=ov,c.deburr=Dc,c.defaultTo=By,c.divide=u_,c.endsWith=ly,c.eq=ct,c.escape=dy,c.escapeRegExp=py,c.every=Am,c.find=wm,c.findIndex=ac,c.findKey=Rv,c.findLast=bm,c.findLastIndex=uc,c.findLastKey=Dv,c.floor=c_,c.forEach=hc,c.forEachRight=gc,c.forIn=Lv,c.forInRight=Wv,c.forOwn=Bv,c.forOwnRight=Uv,c.get=vs,c.gt=sv,c.gte=av,c.has=Kv,c.hasIn=ys,c.head=fc,c.identity=We,c.includes=Nm,c.indexOf=bg,c.inRange=uy,c.invoke=zv,c.isArguments=hn,c.isArray=j,c.isArrayBuffer=uv,c.isArrayLike=De,c.isArrayLikeObject=ge,c.isBoolean=cv,c.isBuffer=Yt,c.isDate=fv,c.isElement=lv,c.isEmpty=dv,c.isEqual=pv,c.isEqualWith=hv,c.isError=gs,c.isFinite=gv,c.isFunction=Ot,c.isInteger=bc,c.isLength=Ci,c.isMap=xc,c.isMatch=mv,c.isMatchWith=vv,c.isNaN=yv,c.isNative=_v,c.isNil=Sv,c.isNull=Av,c.isNumber=Cc,c.isObject=pe,c.isObjectLike=he,c.isPlainObject=Ar,c.isRegExp=ms,c.isSafeInteger=wv,c.isSet=Oc,c.isString=Oi,c.isSymbol=Ke,c.isTypedArray=Bn,c.isUndefined=bv,c.isWeakMap=xv,c.isWeakSet=Cv,c.join=Ng,c.kebabCase=hy,c.last=et,c.lastIndexOf=Pg,c.lowerCase=gy,c.lowerFirst=my,c.lt=Ov,c.lte=Ev,c.max=f_,c.maxBy=l_,c.mean=d_,c.meanBy=p_,c.min=h_,c.minBy=g_,c.stubArray=xs,c.stubFalse=Cs,c.stubObject=e_,c.stubString=t_,c.stubTrue=n_,c.multiply=m_,c.nth=Tg,c.noConflict=zy,c.noop=bs,c.now=wi,c.pad=vy,c.padEnd=yy,c.padStart=_y,c.parseInt=Ay,c.random=cy,c.reduce=Mm,c.reduceRight=Fm,c.repeat=Sy,c.replace=wy,c.result=Vv,c.round=v_,c.runInContext=g,c.sample=Dm,c.size=Bm,c.snakeCase=by,c.some=Um,c.sortedIndex=Lg,c.sortedIndexBy=Wg,c.sortedIndexOf=Bg,c.sortedLastIndex=Ug,c.sortedLastIndexBy=Gg,c.sortedLastIndexOf=Hg,c.startCase=Cy,c.startsWith=Oy,c.subtract=y_,c.sum=__,c.sumBy=A_,c.template=Ey,c.times=r_,c.toFinite=Et,c.toInteger=J,c.toLength=Nc,c.toLower=Ny,c.toNumber=tt,c.toSafeInteger=Nv,c.toString=ie,c.toUpper=Py,c.trim=Ty,c.trimEnd=ky,c.trimStart=Iy,c.truncate=My,c.unescape=Fy,c.uniqueId=o_,c.upperCase=Ry,c.upperFirst=_s,c.each=hc,c.eachRight=gc,c.first=fc,ws(c,function(){var e={};return pt(c,function(t,r){oe.call(c.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),c.VERSION=i,Je(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){c[e].placeholder=c}),Je(["drop","take"],function(e,t){V.prototype[e]=function(r){r=r===n?1:_e(J(r),0);var o=this.__filtered__&&!t?new V(this):this.clone();return o.__filtered__?o.__takeCount__=Ee(r,o.__takeCount__):o.__views__.push({size:Ee(r,dt),type:e+(o.__dir__<0?"Right":"")}),o},V.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),Je(["filter","map","takeWhile"],function(e,t){var r=t+1,o=r==ca||r==kl;V.prototype[e]=function(a){var f=this.clone();return f.__iteratees__.push({iteratee:H(a,3),type:r}),f.__filtered__=f.__filtered__||o,f}}),Je(["head","last"],function(e,t){var r="take"+(t?"Right":"");V.prototype[e]=function(){return this[r](1).value()[0]}}),Je(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");V.prototype[e]=function(){return this.__filtered__?new V(this):this[r](1)}}),V.prototype.compact=function(){return this.filter(We)},V.prototype.find=function(e){return this.filter(e).head()},V.prototype.findLast=function(e){return this.reverse().find(e)},V.prototype.invokeMap=X(function(e,t){return typeof e=="function"?new V(this):this.map(function(r){return hr(r,e,t)})}),V.prototype.reject=function(e){return this.filter(xi(H(e)))},V.prototype.slice=function(e,t){e=J(e);var r=this;return r.__filtered__&&(e>0||t<0)?new V(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(t=J(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},V.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},V.prototype.toArray=function(){return this.take(dt)},pt(V.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=c[o?"take"+(t=="last"?"Right":""):t],f=o||/^find/.test(t);a&&(c.prototype[t]=function(){var d=this.__wrapped__,p=o?[1]:arguments,m=d instanceof V,S=p[0],w=m||j(d),x=function(Q){var te=a.apply(c,Ut([Q],p));return o&&T?te[0]:te};w&&r&&typeof S=="function"&&S.length!=1&&(m=w=!1);var T=this.__chain__,D=!!this.__actions__.length,K=f&&!T,Z=m&&!D;if(!f&&w){d=Z?d:new V(this);var q=e.apply(d,p);return q.__actions__.push({func:Ai,args:[x],thisArg:n}),new Xe(q,T)}return K&&Z?e.apply(this,p):(q=this.thru(x),K?o?q.value()[0]:q.value():q)})}),Je(["pop","push","shift","sort","splice","unshift"],function(e){var t=zr[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);c.prototype[e]=function(){var a=arguments;if(o&&!this.__chain__){var f=this.value();return t.apply(j(f)?f:[],a)}return this[r](function(d){return t.apply(j(d)?d:[],a)})}}),pt(V.prototype,function(e,t){var r=c[t];if(r){var o=r.name+"";oe.call(Fn,o)||(Fn[o]=[]),Fn[o].push({name:t,func:r})}}),Fn[pi(n,W).name]=[{name:"wrapper",func:n}],V.prototype.clone=Fp,V.prototype.reverse=Rp,V.prototype.value=Dp,c.prototype.at=lm,c.prototype.chain=dm,c.prototype.commit=pm,c.prototype.next=hm,c.prototype.plant=mm,c.prototype.reverse=vm,c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=ym,c.prototype.first=c.prototype.head,ar&&(c.prototype[ar]=gm),c},Ht=pp();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Se._=Ht,define(function(){return Ht})):sn?((sn.exports=Ht)._=Ht,So._=Ht):Se._=Ht}).call(Xn)});var Cl=nt((AS,xl)=>{rt();xl.exports=de("NeosProjectPackages")().NeosUiI18n});rt();var Sr=class{constructor(i){this.SERIAL_VERSION_UID="d8a5aa78-978e-11e6-ae22-56b6b6499611",this.description=i}};var N_=(n,i="position",s="key")=>{let u=typeof i=="string"?E=>E[i]:i,l={},h={},v={},A={},b={},C={};n.forEach((E,B)=>{let F=E[s]?E[s]:String(B);l[F]=B;let Y=u(E),$=String(Y||B),ve=!1;if($.startsWith("start")){let ee=$.match(/start\s+(\d+)/),fe=ee&&ee[1]?Number(ee[1]):0;v[fe]||(v[fe]=[]),v[fe].push(F)}else if($.startsWith("end")){let ee=$.match(/end\s+(\d+)/),fe=ee&&ee[1]?Number(ee[1]):0;A[fe]||(A[fe]=[]),A[fe].push(F)}else if($.startsWith("before")){let ee=$.match(/before\s+(\S+)(\s+(\d+))?/);if(!ee)ve=!0;else{let fe=ee[1],Oe=ee[3]?Number(ee[3]):0;b[fe]||(b[fe]={}),b[fe][Oe]||(b[fe][Oe]=[]),b[fe][Oe].push(F)}}else if($.startsWith("after")){let ee=$.match(/after\s+(\S+)(\s+(\d+))?/);if(!ee)ve=!0;else{let fe=ee[1],Oe=ee[3]?Number(ee[3]):0;C[fe]||(C[fe]={}),C[fe][Oe]||(C[fe][Oe]=[]),C[fe][Oe].push(F)}}else ve=!0;if(ve){let ee=parseFloat($);(isNaN(ee)||!isFinite(ee))&&(ee=B),h[ee]||(h[ee]=[]),h[ee].push(F)}});let P=[],L=[],M=[],R=[],U=(E,B)=>{let F=Object.keys(E).map(Y=>Number(Y)).sort((Y,$)=>Y-$);return B?F:F.reverse()},W=(E,B)=>{E.forEach(F=>{if(!(R.indexOf(F)>=0)){if(R.push(F),b[F]){let Y=U(b[F],!0);for(let $ of Y)W(b[F][$],B)}if(B.push(F),C[F]){let Y=U(C[F],!1);for(let $ of Y)W(C[F][$],B)}}})};for(let E of U(v,!1))W(v[E],P);for(let E of U(h,!0))W(h[E],L);for(let E of U(A,!0))W(A[E],M);for(let E of Object.keys(b))if(!(R.indexOf(E)>=0))for(let B of U(b[E],!1))W(b[E][B],P);for(let E of Object.keys(C))if(!(R.indexOf(E)>=0))for(let B of U(C[E],!1))W(C[E][B],L);return[...P,...L,...M].map(E=>l[E]).map(E=>n[E])},Os=N_;var Jt=class extends Sr{constructor(i){super(i),this._registry=[]}set(i,s,u=0){if(typeof i!="string")throw new Error("Key must be a string");if(typeof u!="string"&&typeof u!="number")throw new Error("Position must be a string or a number");let l={key:i,value:s};u&&(l.position=u);let h=this._registry.findIndex(v=>v.key===i);return h===-1?this._registry.push(l):this._registry[h]=l,s}get(i){if(typeof i!="string")return console.error("Key must be a string"),null;let s=this._registry.find(u=>u.key===i);return s?s.value:null}_getChildrenWrapped(i){let s=this._registry.filter(u=>u.key.indexOf(i+"/")===0);return Os(s)}getChildrenAsObject(i){let s={};return this._getChildrenWrapped(i).forEach(u=>{s[u.key]=u.value}),s}getChildren(i){return this._getChildrenWrapped(i).map(s=>s.value)}has(i){return typeof i!="string"?(console.error("Key must be a string"),!1):!!this._registry.find(s=>s.key===i)}_getAllWrapped(){return Os(this._registry)}getAllAsObject(){let i={};return this._getAllWrapped().forEach(s=>{i[s.key]=s.value}),i}getAllAsList(){return this._getAllWrapped().map(i=>Object.assign({id:i.key},i.value))}};var Hc=de("manifest");var Pe=class extends Error{constructor(s,u,l=""){super(s);N(this,"code");N(this,"severity","error");N(this,"externalMessage");this.code=u,this.externalMessage=l}};var Kc=n=>new Es(n.apiDomain,n.apiKey),Es=class{constructor(i,s){N(this,"apiDomain","");N(this,"apiKey","");N(this,"hasApiKey",()=>this.apiKey!==null&&this.apiKey!=="");N(this,"generate",async(i,s,u={})=>{let h=(await this.fetch(`/api/v1/chat?language=${s}`,{method:"POST",body:JSON.stringify({module:i,platform:"neos",user_input:u})}))?.data?.message?.message;return h.startsWith('"')&&h.endsWith('"')&&(h=h.substring(1,h.length-1)),h});N(this,"fetch",async(i,s={})=>{if(!this.apiKey)throw new Pe("This feature is not available in the free version.","1688157373215");let u=await fetch(this.apiDomain+i,Object.assign({},s,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`,Accept:"application/json"}})),l=await u.json();if(u.status===401)throw new Pe("The NEOSidekick api key provided is not valid.","1688158193038");if(u.status<200||u.status>=400)throw new Pe("An error occurred while asking NEOSidekick.","1688158257149",l?.message);return l});this.apiDomain=i,this.apiKey=s}};rt();var qc=de("NeosProjectPackages")().NeosUiBackendConnectorDefault,{fetchWithErrorHandling:aA}=de("NeosProjectPackages")().NeosUiBackendConnector;var Qt=G(it());function lt(n){for(var i=arguments.length,s=Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];if(!1)var l,h;throw Error("[Immer] minified error nr: "+n+(s.length?" "+s.map(function(v){return"'"+v+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Gn(n){return!!n&&!!n[ze]}function mn(n){var i;return!!n&&(function(s){if(!s||typeof s!="object")return!1;var u=Object.getPrototypeOf(s);if(u===null)return!0;var l=Object.hasOwnProperty.call(u,"constructor")&&u.constructor;return l===Object||typeof l=="function"&&Function.toString.call(l)===L_}(n)||Array.isArray(n)||!!n[Vc]||!!(!((i=n.constructor)===null||i===void 0)&&i[Vc])||Ls(n)||Ws(n))}function br(n,i,s){s===void 0&&(s=!1),Hn(n)===0?(s?Object.keys:Ks)(n).forEach(function(u){s&&typeof u=="symbol"||i(u,n[u],n)}):n.forEach(function(u,l){return i(l,u,n)})}function Hn(n){var i=n[ze];return i?i.i>3?i.i-4:i.i:Array.isArray(n)?1:Ls(n)?2:Ws(n)?3:0}function Is(n,i){return Hn(n)===2?n.has(i):Object.prototype.hasOwnProperty.call(n,i)}function T_(n,i){return Hn(n)===2?n.get(i):n[i]}function ef(n,i,s){var u=Hn(n);u===2?n.set(i,s):u===3?n.add(s):n[i]=s}function k_(n,i){return n===i?n!==0||1/n==1/i:n!=n&&i!=i}function Ls(n){return R_&&n instanceof Map}function Ws(n){return D_&&n instanceof Set}function gn(n){return n.o||n.t}function Bs(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var i=W_(n);delete i[ze];for(var s=Ks(i),u=0;u<s.length;u++){var l=s[u],h=i[l];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(i[l]={configurable:!0,writable:!0,enumerable:h.enumerable,value:n[l]})}return Object.create(Object.getPrototypeOf(n),i)}function Us(n,i){return i===void 0&&(i=!1),Gs(n)||Gn(n)||!mn(n)||(Hn(n)>1&&(n.set=n.add=n.clear=n.delete=I_),Object.freeze(n),i&&br(n,function(s,u){return Us(u,!0)},!0)),n}function I_(){lt(2)}function Gs(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function mt(n){var i=B_[n];return i||lt(18,n),i}function zc(){return xr}function Ns(n,i){i&&(mt("Patches"),n.u=[],n.s=[],n.v=i)}function Pi(n){Ms(n),n.p.forEach(M_),n.p=null}function Ms(n){n===xr&&(xr=n.l)}function jc(n){return xr={p:[],l:xr,h:n,m:!0,_:0}}function M_(n){var i=n[ze];i.i===0||i.i===1?i.j():i.g=!0}function Ps(n,i){i._=i.p.length;var s=i.p[0],u=n!==void 0&&n!==s;return i.h.O||mt("ES5").S(i,n,u),u?(s[ze].P&&(Pi(i),lt(4)),mn(n)&&(n=Ti(i,n),i.l||ki(i,n)),i.u&&mt("Patches").M(s[ze].t,n,i.u,i.s)):n=Ti(i,s,[]),Pi(i),i.u&&i.v(i.u,i.s),n!==tf?n:void 0}function Ti(n,i,s){if(Gs(i))return i;var u=i[ze];if(!u)return br(i,function(A,b){return Yc(n,u,i,A,b,s)},!0),i;if(u.A!==n)return i;if(!u.P)return ki(n,u.t,!0),u.t;if(!u.I){u.I=!0,u.A._--;var l=u.i===4||u.i===5?u.o=Bs(u.k):u.o,h=l,v=!1;u.i===3&&(h=new Set(l),l.clear(),v=!0),br(h,function(A,b){return Yc(n,u,l,A,b,s,v)}),ki(n,l,!1),s&&n.u&&mt("Patches").N(u,s,n.u,n.s)}return u.o}function Yc(n,i,s,u,l,h,v){if(Gn(l)){var A=Ti(n,l,h&&i&&i.i!==3&&!Is(i.R,u)?h.concat(u):void 0);if(ef(s,u,A),!Gn(A))return;n.m=!1}else v&&s.add(l);if(mn(l)&&!Gs(l)){if(!n.h.D&&n._<1)return;Ti(n,l),i&&i.A.l||ki(n,l)}}function ki(n,i,s){s===void 0&&(s=!1),!n.l&&n.h.D&&n.m&&Us(i,s)}function Ts(n,i){var s=n[ze];return(s?gn(s):n)[i]}function Jc(n,i){if(i in n)for(var s=Object.getPrototypeOf(n);s;){var u=Object.getOwnPropertyDescriptor(s,i);if(u)return u;s=Object.getPrototypeOf(s)}}function Fs(n){n.P||(n.P=!0,n.l&&Fs(n.l))}function ks(n){n.o||(n.o=Bs(n.t))}function Rs(n,i,s){var u=Ls(i)?mt("MapSet").F(i,s):Ws(i)?mt("MapSet").T(i,s):n.O?function(l,h){var v=Array.isArray(l),A={i:v?1:0,A:h?h.A:zc(),P:!1,I:!1,R:{},l:h,t:l,k:null,o:null,j:null,C:!1},b=A,C=Ds;v&&(b=[A],C=wr);var P=Proxy.revocable(b,C),L=P.revoke,M=P.proxy;return A.k=M,A.j=L,M}(i,s):mt("ES5").J(i,s);return(s?s.A:zc()).p.push(u),u}function F_(n){return Gn(n)||lt(22,n),function i(s){if(!mn(s))return s;var u,l=s[ze],h=Hn(s);if(l){if(!l.P&&(l.i<4||!mt("ES5").K(l)))return l.t;l.I=!0,u=Zc(s,h),l.I=!1}else u=Zc(s,h);return br(u,function(v,A){l&&T_(l.t,v)===A||ef(u,v,i(A))}),h===3?new Set(u):u}(n)}function Zc(n,i){switch(i){case 2:return new Map(n);case 3:return Array.from(n)}return Bs(n)}var Xc,xr,Hs=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",R_=typeof Map<"u",D_=typeof Set<"u",Qc=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",tf=Hs?Symbol.for("immer-nothing"):((Xc={})["immer-nothing"]=!0,Xc),Vc=Hs?Symbol.for("immer-draftable"):"__$immer_draftable",ze=Hs?Symbol.for("immer-state"):"__$immer_state";var L_=""+Object.prototype.constructor,Ks=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,W_=Object.getOwnPropertyDescriptors||function(n){var i={};return Ks(n).forEach(function(s){i[s]=Object.getOwnPropertyDescriptor(n,s)}),i},B_={},Ds={get:function(n,i){if(i===ze)return n;var s=gn(n);if(!Is(s,i))return function(l,h,v){var A,b=Jc(h,v);return b?"value"in b?b.value:(A=b.get)===null||A===void 0?void 0:A.call(l.k):void 0}(n,s,i);var u=s[i];return n.I||!mn(u)?u:u===Ts(n.t,i)?(ks(n),n.o[i]=Rs(n.A.h,u,n)):u},has:function(n,i){return i in gn(n)},ownKeys:function(n){return Reflect.ownKeys(gn(n))},set:function(n,i,s){var u=Jc(gn(n),i);if(u?.set)return u.set.call(n.k,s),!0;if(!n.P){var l=Ts(gn(n),i),h=l?.[ze];if(h&&h.t===s)return n.o[i]=s,n.R[i]=!1,!0;if(k_(s,l)&&(s!==void 0||Is(n.t,i)))return!0;ks(n),Fs(n)}return n.o[i]===s&&(s!==void 0||i in n.o)||Number.isNaN(s)&&Number.isNaN(n.o[i])||(n.o[i]=s,n.R[i]=!0),!0},deleteProperty:function(n,i){return Ts(n.t,i)!==void 0||i in n.t?(n.R[i]=!1,ks(n),Fs(n)):delete n.R[i],n.o&&delete n.o[i],!0},getOwnPropertyDescriptor:function(n,i){var s=gn(n),u=Reflect.getOwnPropertyDescriptor(s,i);return u&&{writable:!0,configurable:n.i!==1||i!=="length",enumerable:u.enumerable,value:s[i]}},defineProperty:function(){lt(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){lt(12)}},wr={};br(Ds,function(n,i){wr[n]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),wr.deleteProperty=function(n,i){return wr.set.call(this,n,i,void 0)},wr.set=function(n,i,s){return Ds.set.call(this,n[0],i,s,n[0])};var U_=function(){function n(s){var u=this;this.O=Qc,this.D=!0,this.produce=function(l,h,v){if(typeof l=="function"&&typeof h!="function"){var A=h;h=l;var b=u;return function(W){var O=this;W===void 0&&(W=A);for(var E=arguments.length,B=Array(E>1?E-1:0),F=1;F<E;F++)B[F-1]=arguments[F];return b.produce(W,function(Y){var $;return($=h).call.apply($,[O,Y].concat(B))})}}var C;if(typeof h!="function"&&lt(6),v!==void 0&&typeof v!="function"&&lt(7),mn(l)){var P=jc(u),L=Rs(u,l,void 0),M=!0;try{C=h(L),M=!1}finally{M?Pi(P):Ms(P)}return typeof Promise<"u"&&C instanceof Promise?C.then(function(W){return Ns(P,v),Ps(W,P)},function(W){throw Pi(P),W}):(Ns(P,v),Ps(C,P))}if(!l||typeof l!="object"){if((C=h(l))===void 0&&(C=l),C===tf&&(C=void 0),u.D&&Us(C,!0),v){var R=[],U=[];mt("Patches").M(l,C,R,U),v(R,U)}return C}lt(21,l)},this.produceWithPatches=function(l,h){if(typeof l=="function")return function(C){for(var P=arguments.length,L=Array(P>1?P-1:0),M=1;M<P;M++)L[M-1]=arguments[M];return u.produceWithPatches(C,function(R){return l.apply(void 0,[R].concat(L))})};var v,A,b=u.produce(l,h,function(C,P){v=C,A=P});return typeof Promise<"u"&&b instanceof Promise?b.then(function(C){return[C,v,A]}):[b,v,A]},typeof s?.useProxies=="boolean"&&this.setUseProxies(s.useProxies),typeof s?.autoFreeze=="boolean"&&this.setAutoFreeze(s.autoFreeze)}var i=n.prototype;return i.createDraft=function(s){mn(s)||lt(8),Gn(s)&&(s=F_(s));var u=jc(this),l=Rs(this,s,void 0);return l[ze].C=!0,Ms(u),l},i.finishDraft=function(s,u){var l=s&&s[ze],h=l.A;return Ns(h,u),Ps(void 0,h)},i.setAutoFreeze=function(s){this.D=s},i.setUseProxies=function(s){s&&!Qc&&lt(20),this.O=s},i.applyPatches=function(s,u){var l;for(l=u.length-1;l>=0;l--){var h=u[l];if(h.path.length===0&&h.op==="replace"){s=h.value;break}}l>-1&&(u=u.slice(l+1));var v=mt("Patches").$;return Gn(s)?v(s,u):this.produce(s,function(A){return v(A,u)})},n}(),je=new U_,qs=je.produce,lA=je.produceWithPatches.bind(je),dA=je.setAutoFreeze.bind(je),pA=je.setUseProxies.bind(je),hA=je.applyPatches.bind(je),gA=je.createDraft.bind(je),mA=je.finishDraft.bind(je),nf=qs;var Wf=G(Lf());var Bf=(n,i)=>new oa(n,i),oa=class{constructor(i,s){N(this,"globalRegistry");N(this,"store");N(this,"guestFrameContentDocument",null);N(this,"nodeTypesRegistry");N(this,"externalService");N(this,"getGuestFrameContentDocument",()=>{let i=document.getElementsByName("neos-content-main")[0];return this.guestFrameContentDocument=i?.contentDocument,this.guestFrameContentDocument});N(this,"getGuestFrameDocumentTitle",()=>this.getGuestFrameContentDocument()?.title);N(this,"getGuestFrameDocumentHtml",()=>this.getGuestFrameContentDocument()?.body?.innerHTML);N(this,"getCurrentDocumentNode",()=>{let i=this.store.getState();return Qt.selectors.CR.Nodes.documentNodeSelector(i)});N(this,"getCurrentDocumentParentNode",()=>{let i=this.store.getState(),s=this.getCurrentDocumentNode();return Qt.selectors.CR.Nodes.nodeByContextPath(i)(s.parent)});N(this,"getCurrentDocumentNodeType",()=>{let i=this.getCurrentDocumentNode();return this.globalRegistry.get("@neos-project/neos-ui-contentrepository").get(i?.nodeType)});N(this,"getCurrentDocumentTargetAudience",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.targetAudience;return i?this.processClientEval(i):""});N(this,"getCurrentDocumentPageBriefing",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.pageBriefing;return i?this.processClientEval(i):""});N(this,"getCurrentDocumentFocusKeyword",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.focusKeyword;return i?await this.processClientEval(i):""});N(this,"processClientEval",async(i,s,u)=>{if(typeof i=="string"&&(i.startsWith("SidekickClientEval:")||i.startsWith("ClientEval:")))try{s=s??this.getCurrentDocumentNode();let l=Qt.selectors.UI.Inspector.transientValues(this.store.getState());s=this.generateNodeForContext(s,l),u=u??this.getCurrentDocumentParentNode();let h=this.getGuestFrameDocumentTitle(),v=this.getGuestFrameDocumentHtml(),A=this.getImageMetadata,b=Object.getPrototypeOf(async function(){}).constructor;return await new b("node,parentNode,documentTitle,documentContent,AssetUri","return "+i.replace("SidekickClientEval:","").replace("ClientEval:",""))(s,u,h,v,A)}catch(l){throw l instanceof Pe?l:(console.error(l),new Pe('An error occurred while trying to evaluate "'+i+'"',"1694682118365",i))}return i});N(this,"processValueWithClientEval",async(i,s,u)=>{if(typeof i=="string")return this.processClientEval(i,s,u);if(typeof i=="object"&&i!==null)return this.processObjectWithClientEval(i,s,u);if(i===null)return null;if(Array.isArray(i))return Promise.all(i.map(async l=>this.processObjectWithClientEval(l,s,u)))});N(this,"processObjectWithClientEval",async(i,s,u)=>{let l={};return await Promise.all(Object.keys(i).map(async h=>{let v=i[h];l[h]=await this.processValueWithClientEval(v,s,u)})),l});N(this,"getImageMetadata",async i=>{if(!i||!i?.__identity)throw new Pe("The property does not have a valid image.","1694595562191");let{loadImageMetadata:s}=qc.get().endpoints,u,l;try{let v=await s(i?.__identity);u=v?.originalImageResourceUri,l=v?.previewImageResourceUri}catch{throw new Pe("Could not fetch image object.","1694595598880")}if(!u||u==="")throw new Pe("The given image does not have a correct url.","1694595462402");let h=[];return h.push(this.prependConfiguredDomainToImageUri(u)),l&&h.push(this.prependConfiguredDomainToImageUri(l)),h});this.globalRegistry=i,this.store=s,this.nodeTypesRegistry=i.get("@neos-project/neos-ui-contentrepository"),this.externalService=i.get("NEOSidekick.AiAssistant").get("externalService")}prependConfiguredDomainToImageUri(i){let s=this.globalRegistry.get("NEOSidekick.AiAssistant").get("configuration").domain,u=i.replace("http://","").replace("https://","").split("/");return u.shift(),u.unshift(s),u.join("/")}getCurrentlyFocusedNodePathAndProperty(){let i=this.store.getState(),s=this.globalRegistry.get("@neos-project/neos-ui-contentrepository"),u=i?.cr?.nodes?.focused?.contextPaths[0],l=u?Qt.selectors.CR.Nodes.nodeByContextPath(i)(u):null;return{nodePath:u,node:l,property:i?.ui?.contentCanvas?.currentlyEditedPropertyName,nodeType:l?s.get(l?.nodeType):null,parentNode:l?Qt.selectors.CR.Nodes.nodesByContextPathSelector(i)[l.parent]:null}}async evaluateNodeTypeConfigurationAndStartGeneration(i,s,u,l,h=!1){if(!u||s[0]==="_")return;let v=u.properties?u.properties[s]:null;try{if(v?.options?.sidekick?.onCreate?.module)throw new Pe("Please do not use options.sidekick.onCreate.module anymore. Read the docs to find out about the new configuration.","1696264259260");if(!v?.options?.sidekick?.module||h&&v?.options?.sidekick?.onCreate!==!0)return;if(!v?.ui?.inlineEditable)throw new Pe("You can only generate content on inline editable properties","1688395273728");if(!this.externalService.hasApiKey())throw new Pe("This feature is not available in the free version.","1688157373215")}catch(P){let L=this.globalRegistry.get("i18n");this.store.dispatch(Qt.actions.UI.FlashMessages.add(P?.code??P?.message,P?.code?L.translate("NEOSidekick.AiAssistant:Error:"+P.code):P?.message,P?.severity??"error"));return}let A=JSON.parse(JSON.stringify(v.options.sidekick)),b=this.globalRegistry.get("NEOSidekick.AiAssistant").get("contentCanvasService"),C=await this.processObjectWithClientEval(A,i,l);b.streamGenerationIntoInlineProperty(i.contextPath,s,C)}generateNodeForContext(i,s){return s?qs(i,u=>{let l=(0,Wf.default)(s,h=>h?.value);u.properties=Object.assign({},u.properties,l)}):i}};var Uf=G(it());var Gf=(n,i,s)=>new sa(n,i,s),sa=class{constructor(i,s,u){N(this,"globalRegistry");N(this,"store");N(this,"iFrameApiService");N(this,"currentlyHandledNodePath",null);N(this,"streamGenerationIntoInlineProperty",(i,s,u)=>{this.iFrameApiService.callModule({target:{nodePath:i,propertyName:s},...u},()=>this.currentlyHandledNodePath=i)});N(this,"onNodeRemoved",i=>{this.currentlyHandledNodePath===i&&(this.iFrameApiService.cancelCallModule(),this.unsetCurrentlyHandledNodePath())});N(this,"getEditorContent",(i,s)=>this.getPropertyInlineField(i,s)?.ckeditorInstance?.getData());N(this,"getSelectedContent",(i,s)=>{let l=this.getPropertyInlineField(i,s)?.ckeditorInstance;return l?.data.stringify(l.model.getSelectedContent(l.model.document.selection))});N(this,"insertTextIntoInlineEditor",(i,s,u,l)=>{let v=this.getPropertyInlineField(i,s)?.ckeditorInstance,A=v.model.document.selection.getFirstRange();if(l){let b=u.lastIndexOf("</");b+10<u.length&&(b=u.length),u=u.substring(0,b)+"&nbsp;"+u.substring(b)}v.model.change(b=>{let C=v.data.processor.toView(u),P=v.data.toModel(C),L=v.model.insertContent(P,A);v.editing.view.focus(),b.setSelection(L)})});N(this,"handleMessage",i=>{switch(i?.data?.eventName){case"write-content":let{nodePath:s,propertyName:u,value:l,isFinished:h}=i?.data?.data;s&&u&&(console.info(s+": "+l),this.setPropertyValue(s,u,l||"",h||!1),h&&this.handleStreamingFinished());break;case"stopped-generation":this.handleStreamingFinished();break;case"error":let v=i?.data?.data?.message;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+v,"error",v),this.handleStreamingFinished();break;default:let A="Unknown message event: "+i?.data?.eventName;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+A,"error",A),this.handleStreamingFinished()}});N(this,"handleStreamingFinished",()=>{this.resetTypingCaret(),this.unsetCurrentlyHandledNodePath(),this.iFrameApiService.setStreamingFinished()});N(this,"getPropertyInlineField",(i,s)=>document.getElementsByName("neos-content-main")[0]?.contentDocument?.querySelector(`[data-__neos-editable-node-contextpath="${i}"][data-__neos-property="${s}"]`)||void 0);N(this,"setPropertyValue",(i,s,u,l)=>{let h=this.getPropertyInlineField(i,s);if(!h&&l){let A="Could not find inline field for nodePath: "+i+" and propertyName: "+s;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+A,"error",A),this.unsetCurrentlyHandledNodePath();return}if(!h)return;if(!this.store.getState()?.cr?.nodes?.byContextPath.hasOwnProperty(i)){this.handleStreamingFinished();return}h.ckeditorInstance?.setData(u),h.classList.add("typing-caret")});this.globalRegistry=i,this.store=s,this.iFrameApiService=u,this.iFrameApiService.listenToMessages(this.handleMessage)}unsetCurrentlyHandledNodePath(){this.currentlyHandledNodePath=null}resetTypingCaret(){let u=document.getElementsByName("neos-content-main")[0]?.contentDocument?.querySelector(".typing-caret");u&&u.classList.remove("typing-caret")}addFlashMessage(i,s,u="error",l){let h=this.globalRegistry.get("i18n");this.store.dispatch(Uf.actions.UI.FlashMessages.add(i,h.translate("NEOSidekick.AiAssistant:Error:"+i,s,{0:l}),u))}};var Hf=()=>new aa,aa=class{constructor(){N(this,"isStreaming",!1);N(this,"unsyncedWebContextIsNewPage");N(this,"unsyncedWebContextData");N(this,"callModuleQueue",[]);N(this,"callModule",(i,s)=>{if(this.isStreaming){this.callModuleQueue.push({data:i,onStarted:s});return}this.isStreaming=!0;let u={version:"1.0",eventName:"call-module",data:{platform:"neos",...i}};this.sendMessage(u,s)});N(this,"setStreamingFinished",()=>{this.isStreaming=!1,this.unsyncedWebContextData&&(this.updateWebContext(this.unsyncedWebContextIsNewPage||!1,this.unsyncedWebContextData),this.unsyncedWebContextData=void 0,this.unsyncedWebContextIsNewPage=void 0);let i=this.callModuleQueue.shift();if(i){let{data:s,onStarted:u}=i;this.callModule(s,u)}});N(this,"cancelCallModule",()=>{let i={version:"1.0",eventName:"cancel-call-module"};this.setStreamingFinished(),this.sendMessage(i)});N(this,"updateWebContext",(i,s)=>{if(this.isStreaming){this.unsyncedWebContextIsNewPage=i,this.unsyncedWebContextData=s;return}let u={version:"1.0",eventName:i?"page-changed":"page-updated",data:s};this.sendMessage(u)});N(this,"listenToMessages",i=>{let s=this.getAssistantFrame();s?window.addEventListener("message",u=>{u.source===s.contentWindow&&i(u)}):setTimeout(()=>this.listenToMessages(i),250)});N(this,"sendMessage",(i,s,u=0)=>{let l=this.getAssistantFrame();if(l)console.log("Sending message to frame",i),l.contentWindow?.postMessage(i,"*"),s&&s();else{if(u>20){alert("NEOSidekick AI-Error: Could not load assistant frame, please reload the page or contact support@neosidekick.com.");return}u++,setTimeout(()=>this.sendMessage(i,s),250)}});N(this,"getAssistantFrame",()=>{let i=document.getElementById("neosidekickAssistant");return i?.dataset.hasOwnProperty("loaded")&&i.contentWindow?i:null})}};var Yi=G(qf());var N1=(n,i)=>(0,Yi.action)("@neosidekick/ai-assistant/UI/ModifyDialog/OPEN",{selectedText:i,fullText:n}),P1=()=>(0,Yi.action)("@neosidekick/ai-assistant/UI/ModifyDialog/CANCEL"),T1=n=>(0,Yi.action)("@neosidekick/ai-assistant/UI/ModifyDialog/APPLY",{newText:n}),Nr={openModal:N1,cancelModal:P1,applyModal:T1},$f=(n,i)=>nf(n,s=>{switch(i.type){case"@neos/neos-ui/System/INIT":{s.plugins.NEOSidekick={},s.plugins.NEOSidekick.AiAssistant={},s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/OPEN":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!0,s.plugins.NEOSidekick.AiAssistant.fullText=i.payload.fullText,s.plugins.NEOSidekick.AiAssistant.selectedText=i.payload.selectedText;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/CANCEL":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/APPLY":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}}}),Ji={isModalOpen:n=>n.plugins?.NEOSidekick?.AiAssistant?.isModalOpen,fullText:n=>n.plugins?.NEOSidekick?.AiAssistant?.fullText,selectedText:n=>n.plugins?.NEOSidekick?.AiAssistant?.selectedText};var Zi=G(jf());var vt=G(Mt()),Vf=G(An()),be=G(Vt()),el=G(en()),wn=G(Sn()),Yn=G(it());var k1={autoFocus:!1,disabled:!1,maxlength:null,readonly:!1},Ft=class extends vt.Component{constructor(){super(...arguments);N(this,"state",{loading:!1});N(this,"fetch",async(s,u)=>{let{commit:l,externalService:h,contentService:v,activeContentDimensions:A,addFlashMessage:b,i18nRegistry:C,node:P,parentNode:L,frontendConfiguration:M}=this.props;this.setState({loading:!0});try{u=await v.processObjectWithClientEval(u,P,L),u=Object.keys(u).map(W=>({identifier:W,value:u[W]}));let R=A.language?A.language[0]:M.defaultLanguage,U=await h.generate(s,R,u);l(U)}catch(R){b(R?.code??R?.message,R?.code?C.translate("NEOSidekick.AiAssistant:Error:"+R.code,R.message,{0:R.externalMessage}):R.message,R?.severity??"error")}finally{this.setState({loading:!1})}})}renderIcon(s){return s?vt.default.createElement(wn.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):vt.default.createElement(wn.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}render(){let{id:s,value:u,className:l,commit:h,options:v,i18nRegistry:A,onKeyPress:b,onEnterKey:C}=this.props,P=v&&v.placeholder&&A.translate(unescape(v.placeholder)),L=Object.assign({},k1,v),M=!L.readonly&&!L.disabled;return vt.default.createElement("div",{style:{display:"flex",flexDirection:"column"},className:l},vt.default.createElement("div",null,vt.default.createElement(wn.TextInput,{id:s,value:u,onChange:h,disabled:L.disabled||this.state.loading,maxLength:L.maxlength,readOnly:L.readonly,placeholder:P,onKeyPress:b,onEnterKey:C})),M?vt.default.createElement("div",{style:{marginTop:"4px"}},vt.default.createElement(wn.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:this.state.loading?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:this.state.loading,onClick:()=>this.fetch(L.module,L.arguments??{})},A.translate("NEOSidekick.AiAssistant:Main:generateWithSidekick"),"\xA0",this.renderIcon(this.state.loading))):null)}};N(Ft,"propTypes",{className:be.default.string,value:be.default.oneOfType([be.default.string,be.default.number]),commit:be.default.func.isRequired,options:be.default.object,onKeyPress:be.default.func,onEnterKey:be.default.func,id:be.default.string,activeContentDimensions:be.default.object.isRequired,node:be.default.object,parentNode:be.default.object,i18nRegistry:be.default.object.isRequired,externalService:be.default.object.isRequired,contentService:be.default.object.isRequired,addFlashMessage:be.default.func.isRequired,frontendConfiguration:be.default.object}),N(Ft,"defaultProps",{options:{}}),Ft=Be([(0,el.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,Vf.connect)(n=>{let i=Yn.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:Yn.selectors.CR.ContentDimensions.active(n),node:i,parentNode:Yn.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:Yn.actions.UI.FlashMessages.add})],Ft);var yt=G(Mt()),tl=G(An()),Te=G(Vt()),nl=G(en()),bn=G(Sn()),Jn=G(it());var I1={disabled:!1,maxlength:null,readonly:!1,placeholder:"",minRows:2,expandedRows:6},Rt=class extends yt.Component{constructor(s){super(s);N(this,"fetch",async(s,u)=>{let{commit:l,externalService:h,contentService:v,activeContentDimensions:A,addFlashMessage:b,i18nRegistry:C,node:P,parentNode:L,frontendConfiguration:M}=this.props;this.setState({loading:!0});try{u=await v.processObjectWithClientEval(u,P,L),u=Object.keys(u).map(W=>({identifier:W,value:u[W]}));let R=A.language?A.language[0]:M.defaultLanguage,U=await h.generate(s,R,u);l(U)}catch(R){b(R?.code??R?.message,R?.code?C.translate("NEOSidekick.AiAssistant:Error:"+R.code,R.message,{0:R.externalMessage}):R.message,R?.severity??"error")}finally{this.setState({loading:!1})}});this.state={loading:!1}}renderIcon(s){return s?yt.default.createElement(bn.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):yt.default.createElement(bn.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}render(){let{id:s,value:u,className:l,commit:h,options:v,i18nRegistry:A}=this.props,b=v&&v.placeholder&&A.translate(unescape(v.placeholder)),C=Object.assign({},I1,v),P=!C.readonly&&!C.disabled;return yt.default.createElement("div",{style:{display:"flex",flexDirection:"column"},className:l},yt.default.createElement("div",null,yt.default.createElement(bn.TextArea,{id:s,value:u,onChange:h,disabled:C.disabled||this.state.loading,maxLength:C.maxlength,readOnly:C.readonly,placeholder:b,minRows:C.minRows,expandedRows:C.expandedRows})),P?yt.default.createElement("div",null,yt.default.createElement(bn.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:this.state.loading?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:this.state.loading,onClick:()=>this.fetch(C.module,C.arguments??{})},A.translate("NEOSidekick.AiAssistant:Main:generateWithSidekick"),"\xA0",this.renderIcon(this.state.loading))):null)}};N(Rt,"propTypes",{className:Te.default.string,value:Te.default.oneOfType([Te.default.string,Te.default.number]),commit:Te.default.func.isRequired,options:Te.default.object,id:Te.default.string,activeContentDimensions:Te.default.object.isRequired,node:Te.default.object,parentNode:Te.default.object,i18nRegistry:Te.default.object.isRequired,externalService:Te.default.object.isRequired,contentService:Te.default.object.isRequired,addFlashMessage:Te.default.func.isRequired,frontendConfiguration:Te.default.object}),N(Rt,"defaultProps",{options:{}}),Rt=Be([(0,nl.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,tl.connect)(n=>{let i=Jn.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:Jn.selectors.CR.ContentDimensions.active(n),node:i,parentNode:Jn.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:Jn.actions.UI.FlashMessages.add})],Rt);var rl=(n,i)=>{let s=n.get("inspector").get("editors");s.set("NEOSidekick.AiAssistant/Inspector/Editors/MagicTextFieldEditor",{component:i?Ft:Zi.TextField}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/MagicTextAreaEditor",{component:i?Rt:Zi.TextArea})};var Fe=G(Mt()),Pr=G(Sn());var Xi=G(Mt()),il=G(An()),Zn=G(Vt()),ol=G(it()),sl=G(en());var Dt=class extends Xi.PureComponent{getUri(){let{configuration:i,activeContentDimensions:s,interfaceLanguage:u}=this.props,l=new URL(`${i.apiDomain}/chat/`);return l.searchParams.append("contentLanguage",s.language?s.language[0]:i.defaultLanguage),l.searchParams.append("interfaceLanguage",u),l.searchParams.append("userId",i.userId),l.searchParams.append("plattform","neos"),l.searchParams.append("domain",i.domain),l.searchParams.append("siteName",i.siteName),i?.referrer&&l.searchParams.append("referral",i?.referrer),i?.apiKey&&l.searchParams.append("apikey",i?.apiKey),l}render(){let{className:i}=this.props;return Xi.default.createElement("iframe",{id:"neosidekickAssistant",className:i,src:this.getUri().toString(),allow:"clipboard-write",onLoad:s=>s.target.dataset.loaded="true"})}};N(Dt,"propTypes",{configuration:Zn.default.object.isRequired,i18nRegistry:Zn.default.object.isRequired,activeContentDimensions:Zn.default.object.isRequired,interfaceLanguage:Zn.default.string.isRequired,className:Zn.default.string}),Dt=Be([(0,sl.neos)(n=>({configuration:n.get("NEOSidekick.AiAssistant").get("configuration"),i18nRegistry:n.get("i18n")})),(0,il.connect)(n=>({activeContentDimensions:ol.selectors.CR.ContentDimensions.active(n),interfaceLanguage:n.user?.preferences?.interfaceLanguage}),{})],Dt);var al=(n,i)=>{let s=n.get("containers"),u=s.get("App");if(!i.chatSidebarEnabled){s.set("App",h=>Fe.default.createElement("div",null,Fe.default.createElement(u,{...h}),Fe.default.createElement(Dt,{className:"neosidekick__frame--hidden"})));return}let l=h=>{let v=localStorage.getItem("NEOSidekick")?JSON.parse(localStorage.getItem("NEOSidekick")):{open:!0,fullscreen:!1},[A,b]=Fe.default.useState(v?.open),C=W=>{b(W),v.open=W,localStorage.setItem("NEOSidekick",JSON.stringify(v))},[P,L]=Fe.default.useState(v?.fullscreen),M=W=>{L(W),v.fullscreen=W,localStorage.setItem("NEOSidekick",JSON.stringify(v))},R=(W,O,E)=>W?Fe.default.createElement(Pr.IconButton,{icon:O?"compress":"expand",onClick:E}):"",U=(W,O,E)=>O?"":Fe.default.createElement(Pr.IconButton,{icon:W?"chevron-circle-right":"chevron-circle-left",onClick:E});return Fe.default.createElement("div",{className:`neosidekick_appWrapper ${A?"neosidekick_appWrapper--sidebar-open":""}  ${P?"neosidekick_appWrapper--sidebar-fullscreen":""}`},Fe.default.createElement(u,{...h}),Fe.default.createElement("div",{className:"neosidekick_sideBar"},Fe.default.createElement("div",{className:"neosidekick_sideBar__title"},Fe.default.createElement(Pr.Headline,{className:`neosidekick_sideBar__title-headline ${A?"neosidekick_sideBar__title-headline--open":""}`},"AI Sidekick"),Fe.default.createElement("div",null,R(A,P,()=>M(!P)),U(A,P,()=>C(!A)))),Fe.default.createElement(Dt,{className:`neosidekick_sideBar__frame ${A?"neosidekick_sideBar__frame--open":""}`})))};s.set("App",l)};var kr=G(it()),gl=G(Qi());var cl=G(Qi()),Vi=G(it()),fl=(n,i)=>function*(){yield(0,cl.takeEvery)(Vi.actionTypes.ServerFeedback.HANDLE_SERVER_FEEDBACK,function*(s){s.payload.feedbackEnvelope.feedbacks.forEach(u=>{if(u.type!=="Neos.Neos.Ui:NodeCreated")return;let h=u.payload.contextPath.split("@")[0],v=i.getState(),A=Vi.selectors.CR.Nodes.nodesByContextPathSelector(v),b=n.get("@neos-project/neos-ui-contentrepository"),C=n.get("NEOSidekick.AiAssistant").get("contentService");Object.keys(A).forEach(P=>{if(!P.split("@")[0].startsWith(h))return;let M=A[P],R=A[M.parent],U=b.get(M.nodeType);Object.keys(U.properties).forEach(W=>{C.evaluateNodeTypeConfigurationAndStartGeneration(M,W,U,R,!0)})})})})};var ll=G(Qi()),dl=G(it()),pl=(n,i)=>function*(){yield(0,ll.takeEvery)(dl.actionTypes.CR.Nodes.REMOVE,function*(s){n.get("NEOSidekick.AiAssistant").get("contentCanvasService").onNodeRemoved(s.payload)})};var ml=G(hl());function M1(n){return new Promise(i=>setTimeout(i,n))}var vl=(n,i,s,u)=>{let l=!1,h=(0,ml.debounce)((b,C)=>s.updateWebContext(b,C),500),v=function*(){yield(0,gl.takeLatest)([kr.actionTypes.UI.ContentCanvas.SET_SRC,kr.actionTypes.UI.ContentCanvas.RELOAD,kr.actionTypes.CR.Nodes.MERGE],async function*(b){b.type===kr.actionTypes.UI.ContentCanvas.SET_SRC&&(l=!0),yield M1(500);let C=n.get("@neos-project/neos-ui-contentrepository"),P=i.getState(),L=P?.ui?.contentCanvas?.previewUrl,M=u.getCurrentDocumentNode(),R=M?.contextPath,U=Object.values(P?.cr?.nodes?.byContextPath||{}).filter(O=>{let E=C.getRole("document");if(!E)throw new Error("Document role is not loaded!");let B=C.getSubTypesOf(E);return R&&O.contextPath.indexOf(R.split("@")[0])===0&&(O.contextPath===R||!B.includes(O.nodeType))}),W={url:L,title:M?.properties?.title||u.getGuestFrameDocumentTitle(),content:u.getGuestFrameDocumentHtml(),structuredContent:U,targetAudience:await u.getCurrentDocumentTargetAudience(),pageBriefing:await u.getCurrentDocumentPageBriefing(),focusKeyword:await u.getCurrentDocumentFocusKeyword()};h(l,W),l=!1})},A=n.get("sagas");A.set("NEOSidekick.AiAssistant/watchDocumentNodeChange",{saga:v}),A.set("NEOSidekick.AiAssistant/watchNodeCreated",{saga:fl(n,i)}),A.set("NEOSidekick.AiAssistant/watchNodeRemoved",{saga:pl(n,i)})};var Ir=G(Mt()),yl=G(An()),eo=G(Vt()),to=G(Sn()),_l=G(en()),Al=G(it());var tn=class extends Ir.PureComponent{constructor(){super(...arguments);N(this,"state",{show:!1,enabled:!0});N(this,"evaluateFocusedNodeAndPropertyAndShowButton",(s=5)=>{let{nodeType:u,property:l}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty();if(!u||!l){if(s===0)return;setTimeout(()=>this.evaluateFocusedNodeAndPropertyAndShowButton(s-1),100);return}let h=u.properties[l];this.setState({show:h?.ui?.inlineEditable===!0&&h?.options?.sidekick?.module!==void 0})});N(this,"onClick",async()=>{let{addFlashMessage:s,i18nRegistry:u,contentService:l}=this.props;try{this.setState({enabled:!1});let{node:h,nodeType:v,parentNode:A,property:b}=l.getCurrentlyFocusedNodePathAndProperty();await l.evaluateNodeTypeConfigurationAndStartGeneration(h,b,v,A)}catch(h){s(h?.code??h?.message,h?.code?u.translate("NEOSidekick.AiAssistant:Error:"+h.code,h.message,{0:h.externalMessage}):h.message,h?.severity??"error")}finally{setTimeout(()=>{this.setState({enabled:!0})},2500)}})}componentDidMount(){this.evaluateFocusedNodeAndPropertyAndShowButton()}render(){let{i18nRegistry:s}=this.props;return this.state.show?Ir.default.createElement(to.Button,{disabled:!this.state.enabled,style:"transparent",hoverStyle:"brand",onClick:this.onClick,isActive:!!this.props.isActive,title:s.translate("NEOSidekick.AiAssistant:Main:generate")},Ir.default.createElement(to.Icon,{icon:"magic",fixedWidth:!0,padded:"right"}),s.translate("NEOSidekick.AiAssistant:Main:generate")):""}};N(tn,"propTypes",{contentService:eo.default.object.isRequired,i18nRegistry:eo.default.object.isRequired,addFlashMessage:eo.default.func.isRequired}),tn=Be([(0,_l.neos)(n=>({contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),i18nRegistry:n.get("i18n")})),(0,yl.connect)(()=>{},{addFlashMessage:Al.actions.UI.FlashMessages.add})],tn);var Mr=G(Mt()),xn=G(Vt()),Sl=G(Sn()),wl=G(en()),bl=G(An());var ua=G(it());var nn=class extends Mr.PureComponent{constructor(){super(...arguments);N(this,"handleOpen",()=>{let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props,l=this.props.contentCanvasService.getEditorContent(s,u),h=this.props.contentCanvasService.getSelectedContent(s,u);this.props.openModal(l,h)})}render(){let{i18nRegistry:s}=this.props;return Mr.default.createElement("div",null,Mr.default.createElement(Sl.Button,{className:"button",style:"transparent",hoverStyle:"brand",onClick:this.handleOpen,title:s.translate("NEOSidekick.AiAssistant:Main:title","Mit AI bearbeiten")},"AI"))}};N(nn,"propTypes",{contentService:xn.default.object.isRequired,contentCanvasService:xn.default.object.isRequired,i18nRegistry:xn.default.object.isRequired,openModal:xn.default.func.isRequired,focusedNodePath:xn.default.string,currentlyEditedPropertyName:xn.default.string}),nn=Be([(0,wl.neos)(n=>({contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService"),i18nRegistry:n.get("i18n")})),(0,bl.connect)(n=>({focusedNodePath:ua.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:ua.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n)}),{openModal:Nr.openModal})],nn);var k=G(Mt()),xe=G(Vt()),El=G(An()),Nl=G(en()),ne=G(Sn()),Ae=G(Cl()),Cn=G(it());var Qn=G(Mt()),Fr=G(Vt()),Ol=G(en());var Lt=class extends Qn.PureComponent{constructor(s){super(s);N(this,"elementRef");N(this,"editorInstance");N(this,"lastValue");this.elementRef=Qn.default.createRef()}componentDidUpdate(s){if(s.value!==this.props.value&&this.lastValue!==this.props.value){if(!this.editorInstance){let u=this.elementRef.current;if(this.editorInstance=u?.querySelector(".ck-content")?.ckeditorInstance,!this.editorInstance)return}this.editorInstance.setData(this.props.value),this.lastValue=this.props.value}}render(){let{secondaryEditorsRegistry:s}=this.props,{component:u}=s.get("Neos.Neos/Inspector/Secondary/Editors/CKEditorWrap");return Qn.default.createElement("div",{className:"neosidekick__ck-editor"+(this.props.disabled?" neosidekick__ck-editor--disabled":""),ref:this.elementRef},Qn.default.createElement(u,{onChange:l=>{this.lastValue!==l&&(this.lastValue=l,this.props.onChange&&this.props.onChange(l))},value:this.props.value,options:Object.assign({},this.props.options,{disabled:!0})}))}};N(Lt,"propTypes",{value:Fr.default.string.isRequired,onChange:Fr.default.func,options:Fr.default.object,disabled:Fr.default.bool}),Lt=Be([(0,Ol.neos)(n=>({secondaryEditorsRegistry:n.get("inspector").get("secondaryEditors")}))],Lt);var rn=class extends k.PureComponent{constructor(s){super(s);N(this,"handleCancel",()=>{this.props.cancelModal(),this.setState({generatedText:"",generationState:"empty"})});N(this,"handleApply",()=>{this.props.applyModal();let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props,l=this.props.selectedText.endsWith(" ")||this.props.selectedText.endsWith("&nbsp;");this.props.contentCanvasService.insertTextIntoInlineEditor(s,u,this.state.generatedText,l),this.setState({generatedText:"",generationState:"empty"})});N(this,"handleGenerate",async(s,u="default")=>{this.setState({generationModificationType:s,generationWritingStyle:u}),s!=="custom"&&this.setState({customPromptIsVisible:!1}),this.state.generationState==="loading"&&this.props.iFrameApiService.cancelCallModule();let{customPrompt:l}=this.state,{fullText:h,selectedText:v}=this.props,A=this.getPropertyConfiguration().ui?.inline?.editorOptions?.formatting,b=Object.keys(A).filter(M=>A[M]).map(M=>({a:"link",b:"bold",i:"italic",ol:"ordered list",ul:"unordered list"})[M]||M).join(", "),C,P;switch(s){case"configured":let M=this.getConfiguredSidekick();if(M.onCreate?.module){this.addFlashMessage("1696264259260","Please do not use options.sidekick.onCreate.module anymore. Read the docs to find out about the new configuration.","error");return}let{node:R,parentNode:U}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty(),W=await this.props.contentService.processObjectWithClientEval(M,R,U);C=W.module,P=W.arguments||{};break;case"intro":C="free_conversation",P={content:"Write a two sentence introduction for the current page.",allowedMarkdownFormattingOptions:b};break;case"page_conclusion":C="page_conclusion_writer",P={allowedMarkdownFormattingOptions:b};break;case"custom":if(!l||l.length<5){this.addFlashMessage("1696264259270","Please write a few words about how to change the text.","error");return}v&&v.length?(C="modify_selected_text",P={fullText:h,selectedText:v,modificationType:s,allowedMarkdownFormattingOptions:b,customPrompt:l,writingStyle:u}):(C="free_conversation",P={content:"Please create additional content for the current page. "+l,allowedMarkdownFormattingOptions:b});break;default:C="modify_selected_text",P={fullText:h,selectedText:v,modificationType:s,allowedMarkdownFormattingOptions:b,customPrompt:l,writingStyle:u};break}this.setState({generatedText:"",generationState:"loading"});let L={target:{modalTarget:!0},module:C,arguments:P};this.props.iFrameApiService.callModule(L)});N(this,"handleRegenerate",async()=>this.handleGenerate(this.state.generationModificationType,this.state.generationWritingStyle||"default"));this.state={customPromptIsVisible:!1,customPrompt:"",writingStyles:[{value:"",label:"Loading..."}],generatedText:"",generationState:"empty"}}getLanguage(){let{activeContentDimensions:s,configuration:u}=this.props;return s.language?s.language[0]:u.defaultLanguage}getPropertyConfiguration(){let{node:s,nodeTypesRegistry:u}=this.props,l=s?u.get(s?.nodeType):null,{property:h}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty();return!s||!l||!h?null:l?.properties?l?.properties[h]:null}getConfiguredSidekick(){return this.getPropertyConfiguration()?.options?.sidekick}componentDidMount(){let s=this.getLanguage();this.props.externalService.fetch("/api/v1/writing-styles?language="+s).then(u=>{let l=u.data.filter(h=>h.identifier!=="default"&&h.allowed_languages.includes(s));this.setState({writingStyles:l.map(h=>({value:h.identifier,label:h.label}))})}),this.props.iFrameApiService.listenToMessages(u=>{if(u.data?.data?.modalTarget)switch(u?.data?.eventName){case"write-content":let{value:l,isFinished:h}=u.data?.data;this.setState({generatedText:l||""}),h&&(this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished());break;case"stopped-generation":this.setState({generationState:"finished"});break;case"error":let v=u?.data?.data?.message;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+v,"error",v),this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished();break;default:let A="Unknown message event: "+u?.data?.eventName;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+A,"error",A),this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished()}}),window.addEventListener("keydown",u=>{u.key==="Enter"&&u.target===document.getElementById("neosidekickAiModifyPromptTextarea")&&this.handleGenerate("custom")})}componentDidUpdate(s){s.isOpen&&!this.props.isOpen&&this.state.generationState==="loading"&&this.props.iFrameApiService.cancelCallModule(),!s.isOpen&&this.props.isOpen&&this.setState({customPromptIsVisible:!1,customPrompt:"",generatedText:"",generationState:"empty",generationModificationType:void 0,generationWritingStyle:void 0})}addFlashMessage(s,u,l="error",h){this.props.addFlashMessage(s,this.props.i18nRegistry.translate("NEOSidekick.AiAssistant:Error:"+s,u,{0:h}),l)}renderTitle(){return k.default.createElement("div",null,k.default.createElement("svg",{className:"sidekick-icon","enable-background":"new 0 0 245 245",viewBox:"0 0 245 245"},k.default.createElement("path",{d:"m72.6 75.3 5.3-2.6m-18.5-30.7",fill:"#fff"}),k.default.createElement("circle",{cx:"64.7",cy:"50.5",fill:"#fff",r:"9.4"}),k.default.createElement("path",{d:"m68 59.1 7.5 15.2",fill:"none",stroke:"#fff","stroke-miterlimit":"10","stroke-width":"4.9606"}),k.default.createElement("path",{d:"m170.1 72.7 5.3 2.6m13.2-33.3",fill:"#fff"}),k.default.createElement("circle",{cx:"183.4",cy:"50.5",fill:"#fff",r:"9.4"}),k.default.createElement("path",{d:"m180.1 59.1-7.5 15.2",fill:"none",stroke:"#fff","stroke-miterlimit":"10","stroke-width":"4.9606"}),k.default.createElement("path",{d:"m123.6 60c38.1 0 69 31 69 69s-31 69-69 69-69-31-69-69 31-69 69-69m0-8.5c-42.8 0-77.5 34.7-77.5 77.5s34.7 77.5 77.5 77.5 77.5-34.7 77.5-77.5-34.6-77.5-77.5-77.5z",fill:"#fff"}),k.default.createElement("circle",{cx:"97",cy:"123.5",fill:"#fff",r:"9.1"}),k.default.createElement("g",{fill:"none",stroke:"#fff","stroke-miterlimit":"10"},k.default.createElement("path",{d:"m164.2 137.9h-80c-7.8 0-14.1-6.3-14.1-14.1v-.3c0-7.8 6.3-14.1 14.1-14.1h80c7.8 0 14.1 6.3 14.1 14.1v.3c0 7.8-6.4 14.1-14.1 14.1z","stroke-width":"9.0714"}),k.default.createElement("path",{d:"m52.4 153.9h-17.5c-4.1 0-7.4-3.2-7.4-7.2v-34.2c0-3.9 3.4-7.2 7.4-7.2h17.5","stroke-width":"8.5039"}),k.default.createElement("path",{d:"m193.1 153.9h17.5c4.1 0 7.4-3.2 7.4-7.2v-34.2c0-3.9-3.4-7.2-7.4-7.2h-17.5","stroke-width":"8.5039"}),k.default.createElement("path",{d:"m104.1 165.1s18.1 18.1 39 .5","stroke-linecap":"round","stroke-width":"8.5039"}))),this.props.selectedText?k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:modify-text-title",fallback:"Revise text"}):k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:create-text-title",fallback:"Generate text with AI"})," (Beta)")}renderCancelAction(){return k.default.createElement(ne.Button,{key:"cancel",style:"lighter",hoverStyle:"brand",onClick:this.handleCancel},k.default.createElement(Ae.default,{id:"Neos.Neos:Main:cancel",fallback:"Cancel"}))}renderRegenerateAction(){return this.state.generationState==="finished"?k.default.createElement(ne.Button,{key:"regenerate",style:"lighter",hoverStyle:"warn",onClick:this.handleRegenerate},k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:regenerate-text",fallback:"Regenerate"})):""}renderSaveAction(){return this.state.generationState==="finished"?k.default.createElement(ne.Button,{key:"save",style:"success",hoverStyle:"success",onClick:this.handleApply},this.props.selectedText?k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:apply-modify-text",fallback:"Use text"}):k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:apply-create-text",fallback:"Insert text"})):""}hasSelectedText(){return this.props.selectedText&&this.props.selectedText.trim().length>0}renderConfiguredButton(){return this.getConfiguredSidekick()?.module?k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("configured")},k.default.createElement(ne.Icon,{icon:"hand-sparkles",className:"icon--space-right"}),this.getConfiguredSidekick()?.label||k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:configured-button",fallback:"Configured instruction"})):""}renderCreateButtons(){return k.default.createElement("div",{className:"quickGenerationButtons"},this.renderConfiguredButton(),k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("intro")},k.default.createElement(ne.Icon,{icon:"paragraph",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:intro-button",fallback:"Introduction"})),k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("page_conclusion")},k.default.createElement(ne.Icon,{icon:"paragraph",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:page-conclusion-button",fallback:"Page Conclusion"})))}renderEditButtons(){let{i18nRegistry:s}=this.props;return k.default.createElement("div",{className:"quickGenerationButtons"},k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("rephrase")},k.default.createElement(ne.Icon,{icon:"redo",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:rephrase-button",fallback:"Rephrase"})),k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("longer")},k.default.createElement(ne.Icon,{icon:"expand-alt",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:longer-button-short",fallback:"Longer"})),k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("shorter")},k.default.createElement(ne.Icon,{icon:"compress-alt",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:shorter-button-short",fallback:"Shorter"})),k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("fix_spelling")},k.default.createElement(ne.Icon,{icon:"spell-check",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:fix-text-button",fallback:"Fix spelling"})),k.default.createElement(ne.Button,{style:this.state.customPromptIsVisible?"brand":"lighter",hoverStyle:"brand",onClick:()=>this.setState({customPromptIsVisible:!this.state.customPromptIsVisible})},k.default.createElement(ne.Icon,{icon:"pen-fancy",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:custom-prompt-button",fallback:"Etwas anderes"})),k.default.createElement("div",{className:"quickGenerationButtons__selectWrapper"},k.default.createElement(ne.SelectBox,{className:"quickGenerationButtons__select",placeholder:s.translate("NEOSidekick.AiAssistant:AiModal:change-tone"),onValueChange:u=>this.handleGenerate("style",u),options:this.state.writingStyles})))}render(){let{selectedText:s,i18nRegistry:u}=this.props,{customPrompt:l,generatedText:h,generationState:v}=this.state,A=JSON.parse(JSON.stringify(this.getPropertyConfiguration()?.ui?.inline?.editorOptions)||"{}");return A.sidekickModifyButton=!1,k.default.createElement(ne.Dialog,{actions:[this.renderCancelAction(),this.renderRegenerateAction(),this.renderSaveAction()],title:this.renderTitle(),onRequestClose:this.handleCancel,isOpen:this.props.isOpen,style:"wide"},k.default.createElement("div",{className:"primaryColumn"},this.hasSelectedText()?k.default.createElement("div",{className:"originalText"},k.default.createElement(ne.Label,null,k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:selected-text",fallback:"Selected Text"}),":"),k.default.createElement(Lt,{value:s,options:A,disabled:!0})):"",this.hasSelectedText()?this.renderEditButtons():"",!this.hasSelectedText()||this.state.customPromptIsVisible?k.default.createElement("div",{className:"promptRow"},k.default.createElement(ne.TextArea,{autoFocus:!0,id:"neosidekickAiModifyPromptTextarea",placeholder:this.hasSelectedText()?u.translate("NEOSidekick.AiAssistant:AiModal:custom-prompt-modify-placeholder","How should the text be changed?"):u.translate("NEOSidekick.AiAssistant:AiModal:custom-prompt-create-placeholder","Which text should I write?"),onChange:b=>this.setState({customPrompt:b}),minRows:2,expandedRows:2}),k.default.createElement(ne.Button,{className:"promptRow__button",disabled:!l,style:l&&v=="empty"?"success":"lighter",hoverStyle:"success",onClick:()=>this.handleGenerate("custom")},k.default.createElement(ne.Icon,{icon:"magic",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:Main:generate",fallback:"Generate"}))):"",this.hasSelectedText()?"":this.renderCreateButtons(),v==="empty"?"":k.default.createElement("div",{className:"result"},k.default.createElement(ne.Label,null,k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:new-text",fallback:"New Text"}),":"),k.default.createElement(Lt,{onChange:b=>this.setState({generatedText:b}),value:h,options:A}),k.default.createElement("i",{className:"result__notice"},k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:disclaimer",fallback:"GenAI models can make mistakes. Check important information."})))))}};N(rn,"propTypes",{iFrameApiService:xe.default.object.isRequired,contentService:xe.default.object.isRequired,contentCanvasService:xe.default.object.isRequired,externalService:xe.default.object.isRequired,i18nRegistry:xe.default.object.isRequired,nodeTypesRegistry:xe.default.object.isRequired,configuration:xe.default.object.isRequired,isOpen:xe.default.bool,focusedNodePath:xe.default.string,currentlyEditedPropertyName:xe.default.string,fullText:xe.default.string,selectedText:xe.default.string,activeContentDimensions:xe.default.object,node:xe.default.object,cancelModal:xe.default.func.isRequired,applyModal:xe.default.func.isRequired,addFlashMessage:xe.default.func.isRequired}),rn=Be([(0,Nl.neos)(n=>({iFrameApiService:n.get("NEOSidekick.AiAssistant").get("iFrameApiService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),i18nRegistry:n.get("i18n"),nodeTypesRegistry:n.get("@neos-project/neos-ui-contentrepository"),configuration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,El.connect)(n=>({isOpen:Ji.isModalOpen(n),focusedNodePath:Cn.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:Cn.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n),fullText:Ji.fullText(n),selectedText:Ji.selectedText(n),activeContentDimensions:Cn.selectors.CR.ContentDimensions.active(n),node:Cn.selectors.CR.Nodes.focusedSelector(n)}),{cancelModal:Nr.cancelModal,applyModal:Nr.applyModal,addFlashMessage:Cn.actions.UI.FlashMessages.add})],rn);var Pl=n=>{let s=n.get("ckEditor5").get("richtextToolbar");s.set("NEOSidekick.AiAssistant:ModifyButton",{component:nn,isVisible:l=>l?.sidekickModifyButton!==!1},"start"),s.set("NEOSidekick.AiAssistant:generate",{component:tn,isVisible:()=>!0},"end"),n.get("containers").set("Modals/AiModal",rn)};Hc("NEOSidekick.AiAssistant",{},(n,{store:i,frontendConfiguration:s})=>{let u=s["NEOSidekick.AiAssistant"];if(rl(n,u?.enabled),!u?.enabled)return;if(!u.hasOwnProperty("defaultLanguage")||!u.defaultLanguage){console.error("Could not initialize AiAssistant: defaultLanguage is not configured correctly, see README.");return}n.get("reducers").set("NEOSidekick.AiAssistant",{reducer:$f}),n.set("NEOSidekick.AiAssistant",new Jt(""));let l=n.get("NEOSidekick.AiAssistant");l.set("configuration",u);let h=Kc(u);l.set("externalService",h);let v=Bf(n,i);l.set("contentService",v);let A=Hf();l.set("iFrameApiService",A);let b=Gf(n,i,A);l.set("contentCanvasService",b),al(n,u),vl(n,i,A,v),Pl(n)});})();
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
//# sourceMappingURL=Plugin.js.map
