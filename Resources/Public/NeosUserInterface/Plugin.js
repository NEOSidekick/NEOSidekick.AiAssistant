"use strict";(()=>{var D_=Object.create;var Li=Object.defineProperty;var Vc=Object.getOwnPropertyDescriptor;var L_=Object.getOwnPropertyNames;var W_=Object.getPrototypeOf,B_=Object.prototype.hasOwnProperty;var U_=(n,i,s)=>i in n?Li(n,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[i]=s;var G_=(n,i)=>()=>(n&&(i=n(n=0)),i);var ot=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports);var H_=(n,i,s,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of L_(i))!B_.call(n,l)&&l!==s&&Li(n,l,{get:()=>i[l],enumerable:!(u=Vc(i,l))||u.enumerable});return n};var D=(n,i,s)=>(s=n!=null?D_(W_(n)):{},H_(i||!n||!n.__esModule?Li(s,"default",{value:n,enumerable:!0}):s,n));var Ce=(n,i,s,u)=>{for(var l=u>1?void 0:u?Vc(i,s):i,p=n.length-1,v;p>=0;p--)(v=n[p])&&(l=(u?v(i,s,l):v(l))||l);return u&&l&&Li(i,s,l),l};var P=(n,i,s)=>(U_(n,typeof i!="symbol"?i+"":i,s),s);function de(n){return(...i)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${n}`])return window["@Neos:HostPluginAPI"][`@${n}`](...i);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var st=G_(()=>{});var Ge=ot((CS,tf)=>{st();tf.exports=de("NeosProjectPackages")().NeosUiReduxStore});var zf=ot((Ir,Vn)=>{var n0=200,r0="Expected a function",ua="__lodash_hash_undefined__",Yi=1,Xn=2,bf=1/0,Cf=9007199254740991,Gi="[object Arguments]",ta="[object Array]",xf="[object Boolean]",Ef="[object Date]",Of="[object Error]",Pf="[object Function]",i0="[object GeneratorFunction]",Hi="[object Map]",Nf="[object Number]",Zn="[object Object]",hf="[object Promise]",kf="[object RegExp]",Ki="[object Set]",Tf="[object String]",If="[object Symbol]",na="[object WeakMap]",Mf="[object ArrayBuffer]",qi="[object DataView]",o0="[object Float32Array]",s0="[object Float64Array]",a0="[object Int8Array]",u0="[object Int16Array]",c0="[object Int32Array]",f0="[object Uint8Array]",l0="[object Uint8ClampedArray]",d0="[object Uint16Array]",p0="[object Uint32Array]",h0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g0=/^\w*$/,m0=/^\./,v0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y0=/[\\^$.*+?()[\]{}|]/g,_0=/\\(\\)?/g,S0=/^\[object .+?Constructor\]$/,A0=/^(?:0|[1-9]\d*)$/,ce={};ce[o0]=ce[s0]=ce[a0]=ce[u0]=ce[c0]=ce[f0]=ce[l0]=ce[d0]=ce[p0]=!0;ce[Gi]=ce[ta]=ce[Mf]=ce[xf]=ce[qi]=ce[Ef]=ce[Of]=ce[Pf]=ce[Hi]=ce[Nf]=ce[Zn]=ce[kf]=ce[Ki]=ce[Tf]=ce[na]=!1;var Ff=typeof global=="object"&&global&&global.Object===Object&&global,w0=typeof self=="object"&&self&&self.Object===Object&&self,rn=Ff||w0||Function("return this")(),Rf=typeof Ir=="object"&&Ir&&!Ir.nodeType&&Ir,gf=Rf&&typeof Vn=="object"&&Vn&&!Vn.nodeType&&Vn,b0=gf&&gf.exports===Rf,mf=b0&&Ff.process,vf=function(){try{return mf&&mf.binding("util")}catch{}}(),yf=vf&&vf.isTypedArray;function C0(n,i){for(var s=-1,u=n?n.length:0;++s<u;)if(i(n[s],s,n))return!0;return!1}function x0(n){return function(i){return i?.[n]}}function E0(n,i){for(var s=-1,u=Array(n);++s<n;)u[s]=i(s);return u}function O0(n){return function(i){return n(i)}}function P0(n,i){return n?.[i]}function ra(n){var i=!1;if(n!=null&&typeof n.toString!="function")try{i=!!(n+"")}catch{}return i}function N0(n){var i=-1,s=Array(n.size);return n.forEach(function(u,l){s[++i]=[l,u]}),s}function k0(n,i){return function(s){return n(i(s))}}function T0(n){var i=-1,s=Array(n.size);return n.forEach(function(u){s[++i]=u}),s}var I0=Array.prototype,M0=Function.prototype,Ji=Object.prototype,Qs=rn["__core-js_shared__"],_f=function(){var n=/[^.]+$/.exec(Qs&&Qs.keys&&Qs.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Df=M0.toString,Rt=Ji.hasOwnProperty,Qn=Ji.toString,F0=RegExp("^"+Df.call(Rt).replace(y0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sf=rn.Symbol,Af=rn.Uint8Array,R0=Ji.propertyIsEnumerable,D0=I0.splice,L0=k0(Object.keys,Object),ia=er(rn,"DataView"),Mr=er(rn,"Map"),oa=er(rn,"Promise"),sa=er(rn,"Set"),aa=er(rn,"WeakMap"),Fr=er(Object,"create"),W0=xn(ia),B0=xn(Mr),U0=xn(oa),G0=xn(sa),H0=xn(aa),$i=Sf?Sf.prototype:void 0,ea=$i?$i.valueOf:void 0,wf=$i?$i.toString:void 0;function bn(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function K0(){this.__data__=Fr?Fr(null):{}}function q0(n){return this.has(n)&&delete this.__data__[n]}function $0(n){var i=this.__data__;if(Fr){var s=i[n];return s===ua?void 0:s}return Rt.call(i,n)?i[n]:void 0}function j0(n){var i=this.__data__;return Fr?i[n]!==void 0:Rt.call(i,n)}function z0(n,i){var s=this.__data__;return s[n]=Fr&&i===void 0?ua:i,this}bn.prototype.clear=K0;bn.prototype.delete=q0;bn.prototype.get=$0;bn.prototype.has=j0;bn.prototype.set=z0;function Dt(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function Y0(){this.__data__=[]}function J0(n){var i=this.__data__,s=Zi(i,n);if(s<0)return!1;var u=i.length-1;return s==u?i.pop():D0.call(i,s,1),!0}function Z0(n){var i=this.__data__,s=Zi(i,n);return s<0?void 0:i[s][1]}function V0(n){return Zi(this.__data__,n)>-1}function X0(n,i){var s=this.__data__,u=Zi(s,n);return u<0?s.push([n,i]):s[u][1]=i,this}Dt.prototype.clear=Y0;Dt.prototype.delete=J0;Dt.prototype.get=Z0;Dt.prototype.has=V0;Dt.prototype.set=X0;function Lt(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function Q0(){this.__data__={hash:new bn,map:new(Mr||Dt),string:new bn}}function e1(n){return Vi(this,n).delete(n)}function t1(n){return Vi(this,n).get(n)}function n1(n){return Vi(this,n).has(n)}function r1(n,i){return Vi(this,n).set(n,i),this}Lt.prototype.clear=Q0;Lt.prototype.delete=e1;Lt.prototype.get=t1;Lt.prototype.has=n1;Lt.prototype.set=r1;function ji(n){var i=-1,s=n?n.length:0;for(this.__data__=new Lt;++i<s;)this.add(n[i])}function i1(n){return this.__data__.set(n,ua),this}function o1(n){return this.__data__.has(n)}ji.prototype.add=ji.prototype.push=i1;ji.prototype.has=o1;function Ft(n){this.__data__=new Dt(n)}function s1(){this.__data__=new Dt}function a1(n){return this.__data__.delete(n)}function u1(n){return this.__data__.get(n)}function c1(n){return this.__data__.has(n)}function f1(n,i){var s=this.__data__;if(s instanceof Dt){var u=s.__data__;if(!Mr||u.length<n0-1)return u.push([n,i]),this;s=this.__data__=new Lt(u)}return s.set(n,i),this}Ft.prototype.clear=s1;Ft.prototype.delete=a1;Ft.prototype.get=u1;Ft.prototype.has=c1;Ft.prototype.set=f1;function l1(n,i){var s=Cn(n)||qf(n)?E0(n.length,String):[],u=s.length,l=!!u;for(var p in n)(i||Rt.call(n,p))&&!(l&&(p=="length"||Uf(p,u)))&&s.push(p);return s}function Zi(n,i){for(var s=n.length;s--;)if(Kf(n[s][0],i))return s;return-1}var d1=E1();function p1(n,i){return n&&d1(n,i,zi)}function Lf(n,i){i=Xi(i,n)?[i]:Wf(i);for(var s=0,u=i.length;n!=null&&s<u;)n=n[Qi(i[s++])];return s&&s==u?n:void 0}function h1(n){return Qn.call(n)}function g1(n,i){return n!=null&&i in Object(n)}function ca(n,i,s,u,l){return n===i?!0:n==null||i==null||!eo(n)&&!to(i)?n!==n&&i!==i:m1(n,i,ca,s,u,l)}function m1(n,i,s,u,l,p){var v=Cn(n),_=Cn(i),A=ta,C=ta;v||(A=nn(n),A=A==Gi?Zn:A),_||(C=nn(i),C=C==Gi?Zn:C);var E=A==Zn&&!ra(n),k=C==Zn&&!ra(i),I=A==C;if(I&&!E)return p||(p=new Ft),v||D1(n)?Bf(n,i,s,u,l,p):O1(n,i,A,s,u,l,p);if(!(l&Xn)){var F=E&&Rt.call(n,"__wrapped__"),G=k&&Rt.call(i,"__wrapped__");if(F||G){var B=F?n.value():n,O=G?i.value():i;return p||(p=new Ft),s(B,O,u,l,p)}}return I?(p||(p=new Ft),P1(n,i,s,u,l,p)):!1}function v1(n,i,s,u){var l=s.length,p=l,v=!u;if(n==null)return!p;for(n=Object(n);l--;){var _=s[l];if(v&&_[2]?_[1]!==n[_[0]]:!(_[0]in n))return!1}for(;++l<p;){_=s[l];var A=_[0],C=n[A],E=_[1];if(v&&_[2]){if(C===void 0&&!(A in n))return!1}else{var k=new Ft;if(u)var I=u(C,E,A,n,i,k);if(!(I===void 0?ca(E,C,u,Yi|Xn,k):I))return!1}}return!0}function y1(n){if(!eo(n)||I1(n))return!1;var i=jf(n)||ra(n)?F0:S0;return i.test(xn(n))}function _1(n){return to(n)&&la(n.length)&&!!ce[Qn.call(n)]}function S1(n){return typeof n=="function"?n:n==null?G1:typeof n=="object"?Cn(n)?b1(n[0],n[1]):w1(n):H1(n)}function A1(n){if(!M1(n))return L0(n);var i=[];for(var s in Object(n))Rt.call(n,s)&&s!="constructor"&&i.push(s);return i}function w1(n){var i=N1(n);return i.length==1&&i[0][2]?Hf(i[0][0],i[0][1]):function(s){return s===n||v1(s,n,i)}}function b1(n,i){return Xi(n)&&Gf(i)?Hf(Qi(n),i):function(s){var u=W1(s,n);return u===void 0&&u===i?B1(s,n):ca(i,u,void 0,Yi|Xn)}}function C1(n){return function(i){return Lf(i,n)}}function x1(n){if(typeof n=="string")return n;if(da(n))return wf?wf.call(n):"";var i=n+"";return i=="0"&&1/n==-bf?"-0":i}function Wf(n){return Cn(n)?n:F1(n)}function E1(n){return function(i,s,u){for(var l=-1,p=Object(i),v=u(i),_=v.length;_--;){var A=v[n?_:++l];if(s(p[A],A,p)===!1)break}return i}}function Bf(n,i,s,u,l,p){var v=l&Xn,_=n.length,A=i.length;if(_!=A&&!(v&&A>_))return!1;var C=p.get(n);if(C&&p.get(i))return C==i;var E=-1,k=!0,I=l&Yi?new ji:void 0;for(p.set(n,i),p.set(i,n);++E<_;){var F=n[E],G=i[E];if(u)var B=v?u(G,F,E,i,n,p):u(F,G,E,n,i,p);if(B!==void 0){if(B)continue;k=!1;break}if(I){if(!C0(i,function(O,N){if(!I.has(N)&&(F===O||s(F,O,u,l,p)))return I.add(N)})){k=!1;break}}else if(!(F===G||s(F,G,u,l,p))){k=!1;break}}return p.delete(n),p.delete(i),k}function O1(n,i,s,u,l,p,v){switch(s){case qi:if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case Mf:return!(n.byteLength!=i.byteLength||!u(new Af(n),new Af(i)));case xf:case Ef:case Nf:return Kf(+n,+i);case Of:return n.name==i.name&&n.message==i.message;case kf:case Tf:return n==i+"";case Hi:var _=N0;case Ki:var A=p&Xn;if(_||(_=T0),n.size!=i.size&&!A)return!1;var C=v.get(n);if(C)return C==i;p|=Yi,v.set(n,i);var E=Bf(_(n),_(i),u,l,p,v);return v.delete(n),E;case If:if(ea)return ea.call(n)==ea.call(i)}return!1}function P1(n,i,s,u,l,p){var v=l&Xn,_=zi(n),A=_.length,C=zi(i),E=C.length;if(A!=E&&!v)return!1;for(var k=A;k--;){var I=_[k];if(!(v?I in i:Rt.call(i,I)))return!1}var F=p.get(n);if(F&&p.get(i))return F==i;var G=!0;p.set(n,i),p.set(i,n);for(var B=v;++k<A;){I=_[k];var O=n[I],N=i[I];if(u)var U=v?u(N,O,I,i,n,p):u(O,N,I,n,i,p);if(!(U===void 0?O===N||s(O,N,u,l,p):U)){G=!1;break}B||(B=I=="constructor")}if(G&&!B){var L=n.constructor,Y=i.constructor;L!=Y&&"constructor"in n&&"constructor"in i&&!(typeof L=="function"&&L instanceof L&&typeof Y=="function"&&Y instanceof Y)&&(G=!1)}return p.delete(n),p.delete(i),G}function Vi(n,i){var s=n.__data__;return T1(i)?s[typeof i=="string"?"string":"hash"]:s.map}function N1(n){for(var i=zi(n),s=i.length;s--;){var u=i[s],l=n[u];i[s]=[u,l,Gf(l)]}return i}function er(n,i){var s=P0(n,i);return y1(s)?s:void 0}var nn=h1;(ia&&nn(new ia(new ArrayBuffer(1)))!=qi||Mr&&nn(new Mr)!=Hi||oa&&nn(oa.resolve())!=hf||sa&&nn(new sa)!=Ki||aa&&nn(new aa)!=na)&&(nn=function(n){var i=Qn.call(n),s=i==Zn?n.constructor:void 0,u=s?xn(s):void 0;if(u)switch(u){case W0:return qi;case B0:return Hi;case U0:return hf;case G0:return Ki;case H0:return na}return i});function k1(n,i,s){i=Xi(i,n)?[i]:Wf(i);for(var u,l=-1,v=i.length;++l<v;){var p=Qi(i[l]);if(!(u=n!=null&&s(n,p)))break;n=n[p]}if(u)return u;var v=n?n.length:0;return!!v&&la(v)&&Uf(p,v)&&(Cn(n)||qf(n))}function Uf(n,i){return i=i??Cf,!!i&&(typeof n=="number"||A0.test(n))&&n>-1&&n%1==0&&n<i}function Xi(n,i){if(Cn(n))return!1;var s=typeof n;return s=="number"||s=="symbol"||s=="boolean"||n==null||da(n)?!0:g0.test(n)||!h0.test(n)||i!=null&&n in Object(i)}function T1(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function I1(n){return!!_f&&_f in n}function M1(n){var i=n&&n.constructor,s=typeof i=="function"&&i.prototype||Ji;return n===s}function Gf(n){return n===n&&!eo(n)}function Hf(n,i){return function(s){return s==null?!1:s[n]===i&&(i!==void 0||n in Object(s))}}var F1=fa(function(n){n=L1(n);var i=[];return m0.test(n)&&i.push(""),n.replace(v0,function(s,u,l,p){i.push(l?p.replace(_0,"$1"):u||s)}),i});function Qi(n){if(typeof n=="string"||da(n))return n;var i=n+"";return i=="0"&&1/n==-bf?"-0":i}function xn(n){if(n!=null){try{return Df.call(n)}catch{}try{return n+""}catch{}}return""}function fa(n,i){if(typeof n!="function"||i&&typeof i!="function")throw new TypeError(r0);var s=function(){var u=arguments,l=i?i.apply(this,u):u[0],p=s.cache;if(p.has(l))return p.get(l);var v=n.apply(this,u);return s.cache=p.set(l,v),v};return s.cache=new(fa.Cache||Lt),s}fa.Cache=Lt;function Kf(n,i){return n===i||n!==n&&i!==i}function qf(n){return R1(n)&&Rt.call(n,"callee")&&(!R0.call(n,"callee")||Qn.call(n)==Gi)}var Cn=Array.isArray;function $f(n){return n!=null&&la(n.length)&&!jf(n)}function R1(n){return to(n)&&$f(n)}function jf(n){var i=eo(n)?Qn.call(n):"";return i==Pf||i==i0}function la(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Cf}function eo(n){var i=typeof n;return!!n&&(i=="object"||i=="function")}function to(n){return!!n&&typeof n=="object"}function da(n){return typeof n=="symbol"||to(n)&&Qn.call(n)==If}var D1=yf?O0(yf):_1;function L1(n){return n==null?"":x1(n)}function W1(n,i,s){var u=n==null?void 0:Lf(n,i);return u===void 0?s:u}function B1(n,i){return n!=null&&k1(n,i,g1)}function zi(n){return $f(n)?l1(n):A1(n)}function U1(n,i){var s={};return i=S1(i,3),p1(n,function(u,l,p){s[l]=i(u,l,p)}),s}function G1(n){return n}function H1(n){return Xi(n)?x0(Qi(n)):C1(n)}Vn.exports=U1});var el=ot((no,Qf)=>{(function(n,i){typeof no=="object"&&typeof Qf<"u"?i(no):typeof define=="function"&&define.amd?define(["exports"],i):i((n=n||self).TypesafeActions={})})(no,function(n){"use strict";function i(O){return O==null}function s(O){throw new Error("Argument "+O+" is empty.")}function u(O){return typeof O=="function"&&"getType"in O}function l(O){throw new Error("Argument "+O+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function p(O,N){if(O==null)throw new Error("Argument contains array with empty element at index "+N);if(O.getType==null)throw new Error("Argument contains array with invalid element at index "+N+', it should be an action-creator instance from "typesafe-actions"')}function v(O){return typeof O=="string"||typeof O=="symbol"}function _(O){return!v(O)}function A(O){throw new Error("Argument "+O+" is invalid, it should be an action type of type: string | symbol")}function C(O,N){if(O==null)throw new Error("Argument contains array with empty element at index "+N);if(typeof O!="string"&&typeof O!="symbol")throw new Error("Argument contains array with invalid element at index "+N+", it should be of type: string | symbol")}function E(O,N,U,L){return i(O)&&s(1),_(O)&&l(1),{type:O,payload:N,meta:U,error:L}}function k(O,N){return i(O)&&s(1),_(O)&&A(1),Object.assign(function(){var U=N?.apply(void 0,arguments);return Object.assign({type:O},U)},{getType:function(){return O},toString:function(){return O}})}function I(O,N,U){return i(O)&&s(1),_(O)&&A(1),function(){return k(O,function(){var L=arguments.length<=0?void 0:arguments[0],Y=arguments.length<=1?void 0:arguments[1];return N==null&&U==null||(L=N?.apply(void 0,arguments),Y=U?.apply(void 0,arguments)),Object.assign({},L!==void 0&&{payload:L},{},Y!==void 0&&{meta:Y})})}}function F(O){return i(O)&&s(1),u(O)||l(1),O.getType()}function G(O,N){i(O)&&s(1),_(O)&&A(1);var U=N!=null?N(O):function(){return{type:O}};return Object.assign(U,{getType:function(){return O},toString:function(){return O}})}var B={createAction:function(O,N){var U=N==null?function(){return E(O)}:N(E.bind(null,O));return Object.assign(U,{getType:function(){return O},toString:function(){return O}})},createCustomAction:G,createStandardAction:function(O){return i(O)&&s(1),_(O)&&A(1),Object.assign(function(){return G(O,function(N){return function(U,L){return{type:N,payload:U,meta:L}}})},{map:function(N){return G(O,function(U){return function(L,Y){return Object.assign(N(L,Y),{type:U})}})}})}};n.action=E,n.createAction=I,n.createAsyncAction=function(O,N,U,L){return function(){var Y=[O,N,U,L].map(function($,ve){return Array.isArray($)?I($[0],$[1],$[2])():typeof $=="string"||typeof $=="symbol"?I($)():void(ve<3&&function(ee){throw new Error("Argument "+ee+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(ve))});return{request:Y[0],success:Y[1],failure:Y[2],cancel:Y[3]}}},n.createCustomAction=k,n.createReducer=function O(N,U){U===void 0&&(U={});var L=Object.assign({},U),Y=function($,ve){var ee=Array.isArray($)?$:[$],fe={};return ee.map(function(Ne,fo){return u(Ne)?F(Ne):v(Ne)?Ne:function(lo){throw new Error("Argument "+lo+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(fo+1)}).forEach(function(Ne){return fe[Ne]=ve}),O(N,Object.assign({},L,{},fe))};return Object.assign(function($,ve){if($===void 0&&($=N),L.hasOwnProperty(ve.type)){var ee=L[ve.type];if(typeof ee!="function")throw Error('Reducer under "'+ve.type+'" key is not a valid reducer');return ee($,ve)}return $},{handlers:Object.assign({},L),handleAction:Y,handleType:Y})},n.deprecated=B,n.getType=F,n.isActionOf=function(O,N){i(O)&&s(1);var U=Array.isArray(O)?O:[O];U.forEach(p);var L=function(Y){return U.some(function($){return Y.type===$.getType()})};return N===void 0?L:L(N)},n.isOfType=function(O,N){i(O)&&s(1);var U=Array.isArray(O)?O:[O];U.forEach(C);var L=function(Y){return U.includes(Y.type)};return N===void 0?L:L(N)}})});var ma=ot(($S,nl)=>{st();nl.exports=de("NeosProjectPackages")().NeosUiEditors});var ht=ot((zS,rl)=>{st();rl.exports=de("vendor")().React});var Wt=ot((JS,il)=>{st();il.exports=de("vendor")().reactRedux});var St=ot((VS,ol)=>{st();ol.exports=de("vendor")().PropTypes});var At=ot((QS,sl)=>{st();sl.exports=de("NeosProjectPackages")().NeosUiDecorators});var Bt=ot((tA,al)=>{st();al.exports=de("NeosProjectPackages")().ReactUiComponents});var so=ot((wA,Sl)=>{st();Sl.exports=de("vendor")().reduxSagaEffects});var El=ot((ir,Lr)=>{(function(){var n,i="4.17.21",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",p="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",_=500,A="__lodash_placeholder__",C=1,E=2,k=4,I=1,F=2,G=1,B=2,O=4,N=8,U=16,L=32,Y=64,$=128,ve=256,ee=512,fe=30,Ne="...",fo=800,lo=16,_a=1,$l=2,jl=3,ln=1/0,qt=9007199254740991,zl=17976931348623157e292,qr=0/0,gt=4294967295,Yl=gt-1,Jl=gt>>>1,Zl=[["ary",$],["bind",G],["bindKey",B],["curry",N],["curryRight",U],["flip",ee],["partial",L],["partialRight",Y],["rearg",ve]],Mn="[object Arguments]",$r="[object Array]",Vl="[object AsyncFunction]",sr="[object Boolean]",ar="[object Date]",Xl="[object DOMException]",jr="[object Error]",zr="[object Function]",Sa="[object GeneratorFunction]",at="[object Map]",ur="[object Number]",Ql="[object Null]",Ct="[object Object]",Aa="[object Promise]",ed="[object Proxy]",cr="[object RegExp]",ut="[object Set]",fr="[object String]",Yr="[object Symbol]",td="[object Undefined]",lr="[object WeakMap]",nd="[object WeakSet]",dr="[object ArrayBuffer]",Fn="[object DataView]",po="[object Float32Array]",ho="[object Float64Array]",go="[object Int8Array]",mo="[object Int16Array]",vo="[object Int32Array]",yo="[object Uint8Array]",_o="[object Uint8ClampedArray]",So="[object Uint16Array]",Ao="[object Uint32Array]",rd=/\b__p \+= '';/g,id=/\b(__p \+=) '' \+/g,od=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wa=/&(?:amp|lt|gt|quot|#39);/g,ba=/[&<>"']/g,sd=RegExp(wa.source),ad=RegExp(ba.source),ud=/<%-([\s\S]+?)%>/g,cd=/<%([\s\S]+?)%>/g,Ca=/<%=([\s\S]+?)%>/g,fd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ld=/^\w*$/,dd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wo=/[\\^$.*+?()[\]{}|]/g,pd=RegExp(wo.source),bo=/^\s+/,hd=/\s/,gd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,md=/\{\n\/\* \[wrapped with (.+)\] \*/,vd=/,? & /,yd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_d=/[()=,{}\[\]\/\s]/,Sd=/\\(\\)?/g,Ad=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xa=/\w*$/,wd=/^[-+]0x[0-9a-f]+$/i,bd=/^0b[01]+$/i,Cd=/^\[object .+?Constructor\]$/,xd=/^0o[0-7]+$/i,Ed=/^(?:0|[1-9]\d*)$/,Od=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jr=/($^)/,Pd=/['\n\r\u2028\u2029\\]/g,Zr="\\ud800-\\udfff",Nd="\\u0300-\\u036f",kd="\\ufe20-\\ufe2f",Td="\\u20d0-\\u20ff",Ea=Nd+kd+Td,Oa="\\u2700-\\u27bf",Pa="a-z\\xdf-\\xf6\\xf8-\\xff",Id="\\xac\\xb1\\xd7\\xf7",Md="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Fd="\\u2000-\\u206f",Rd=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Na="A-Z\\xc0-\\xd6\\xd8-\\xde",ka="\\ufe0e\\ufe0f",Ta=Id+Md+Fd+Rd,Co="['\u2019]",Dd="["+Zr+"]",Ia="["+Ta+"]",Vr="["+Ea+"]",Ma="\\d+",Ld="["+Oa+"]",Fa="["+Pa+"]",Ra="[^"+Zr+Ta+Ma+Oa+Pa+Na+"]",xo="\\ud83c[\\udffb-\\udfff]",Wd="(?:"+Vr+"|"+xo+")",Da="[^"+Zr+"]",Eo="(?:\\ud83c[\\udde6-\\uddff]){2}",Oo="[\\ud800-\\udbff][\\udc00-\\udfff]",Rn="["+Na+"]",La="\\u200d",Wa="(?:"+Fa+"|"+Ra+")",Bd="(?:"+Rn+"|"+Ra+")",Ba="(?:"+Co+"(?:d|ll|m|re|s|t|ve))?",Ua="(?:"+Co+"(?:D|LL|M|RE|S|T|VE))?",Ga=Wd+"?",Ha="["+ka+"]?",Ud="(?:"+La+"(?:"+[Da,Eo,Oo].join("|")+")"+Ha+Ga+")*",Gd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ka=Ha+Ga+Ud,Kd="(?:"+[Ld,Eo,Oo].join("|")+")"+Ka,qd="(?:"+[Da+Vr+"?",Vr,Eo,Oo,Dd].join("|")+")",$d=RegExp(Co,"g"),jd=RegExp(Vr,"g"),Po=RegExp(xo+"(?="+xo+")|"+qd+Ka,"g"),zd=RegExp([Rn+"?"+Fa+"+"+Ba+"(?="+[Ia,Rn,"$"].join("|")+")",Bd+"+"+Ua+"(?="+[Ia,Rn+Wa,"$"].join("|")+")",Rn+"?"+Wa+"+"+Ba,Rn+"+"+Ua,Hd,Gd,Ma,Kd].join("|"),"g"),Yd=RegExp("["+La+Zr+Ea+ka+"]"),Jd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vd=-1,ue={};ue[po]=ue[ho]=ue[go]=ue[mo]=ue[vo]=ue[yo]=ue[_o]=ue[So]=ue[Ao]=!0,ue[Mn]=ue[$r]=ue[dr]=ue[sr]=ue[Fn]=ue[ar]=ue[jr]=ue[zr]=ue[at]=ue[ur]=ue[Ct]=ue[cr]=ue[ut]=ue[fr]=ue[lr]=!1;var ae={};ae[Mn]=ae[$r]=ae[dr]=ae[Fn]=ae[sr]=ae[ar]=ae[po]=ae[ho]=ae[go]=ae[mo]=ae[vo]=ae[at]=ae[ur]=ae[Ct]=ae[cr]=ae[ut]=ae[fr]=ae[Yr]=ae[yo]=ae[_o]=ae[So]=ae[Ao]=!0,ae[jr]=ae[zr]=ae[lr]=!1;var Xd={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Qd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ep={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},np=parseFloat,rp=parseInt,qa=typeof global=="object"&&global&&global.Object===Object&&global,ip=typeof self=="object"&&self&&self.Object===Object&&self,we=qa||ip||Function("return this")(),No=typeof ir=="object"&&ir&&!ir.nodeType&&ir,dn=No&&typeof Lr=="object"&&Lr&&!Lr.nodeType&&Lr,$a=dn&&dn.exports===No,ko=$a&&qa.process,Ve=function(){try{var g=dn&&dn.require&&dn.require("util").types;return g||ko&&ko.binding&&ko.binding("util")}catch{}}(),ja=Ve&&Ve.isArrayBuffer,za=Ve&&Ve.isDate,Ya=Ve&&Ve.isMap,Ja=Ve&&Ve.isRegExp,Za=Ve&&Ve.isSet,Va=Ve&&Ve.isTypedArray;function He(g,S,y){switch(y.length){case 0:return g.call(S);case 1:return g.call(S,y[0]);case 2:return g.call(S,y[0],y[1]);case 3:return g.call(S,y[0],y[1],y[2])}return g.apply(S,y)}function op(g,S,y,R){for(var j=-1,re=g==null?0:g.length;++j<re;){var ye=g[j];S(R,ye,y(ye),g)}return R}function Xe(g,S){for(var y=-1,R=g==null?0:g.length;++y<R&&S(g[y],y,g)!==!1;);return g}function sp(g,S){for(var y=g==null?0:g.length;y--&&S(g[y],y,g)!==!1;);return g}function Xa(g,S){for(var y=-1,R=g==null?0:g.length;++y<R;)if(!S(g[y],y,g))return!1;return!0}function $t(g,S){for(var y=-1,R=g==null?0:g.length,j=0,re=[];++y<R;){var ye=g[y];S(ye,y,g)&&(re[j++]=ye)}return re}function Xr(g,S){var y=g==null?0:g.length;return!!y&&Dn(g,S,0)>-1}function To(g,S,y){for(var R=-1,j=g==null?0:g.length;++R<j;)if(y(S,g[R]))return!0;return!1}function le(g,S){for(var y=-1,R=g==null?0:g.length,j=Array(R);++y<R;)j[y]=S(g[y],y,g);return j}function jt(g,S){for(var y=-1,R=S.length,j=g.length;++y<R;)g[j+y]=S[y];return g}function Io(g,S,y,R){var j=-1,re=g==null?0:g.length;for(R&&re&&(y=g[++j]);++j<re;)y=S(y,g[j],j,g);return y}function ap(g,S,y,R){var j=g==null?0:g.length;for(R&&j&&(y=g[--j]);j--;)y=S(y,g[j],j,g);return y}function Mo(g,S){for(var y=-1,R=g==null?0:g.length;++y<R;)if(S(g[y],y,g))return!0;return!1}var up=Fo("length");function cp(g){return g.split("")}function fp(g){return g.match(yd)||[]}function Qa(g,S,y){var R;return y(g,function(j,re,ye){if(S(j,re,ye))return R=re,!1}),R}function Qr(g,S,y,R){for(var j=g.length,re=y+(R?1:-1);R?re--:++re<j;)if(S(g[re],re,g))return re;return-1}function Dn(g,S,y){return S===S?wp(g,S,y):Qr(g,eu,y)}function lp(g,S,y,R){for(var j=y-1,re=g.length;++j<re;)if(R(g[j],S))return j;return-1}function eu(g){return g!==g}function tu(g,S){var y=g==null?0:g.length;return y?Do(g,S)/y:qr}function Fo(g){return function(S){return S==null?n:S[g]}}function Ro(g){return function(S){return g==null?n:g[S]}}function nu(g,S,y,R,j){return j(g,function(re,ye,se){y=R?(R=!1,re):S(y,re,ye,se)}),y}function dp(g,S){var y=g.length;for(g.sort(S);y--;)g[y]=g[y].value;return g}function Do(g,S){for(var y,R=-1,j=g.length;++R<j;){var re=S(g[R]);re!==n&&(y=y===n?re:y+re)}return y}function Lo(g,S){for(var y=-1,R=Array(g);++y<g;)R[y]=S(y);return R}function pp(g,S){return le(S,function(y){return[y,g[y]]})}function ru(g){return g&&g.slice(0,au(g)+1).replace(bo,"")}function Ke(g){return function(S){return g(S)}}function Wo(g,S){return le(S,function(y){return g[y]})}function pr(g,S){return g.has(S)}function iu(g,S){for(var y=-1,R=g.length;++y<R&&Dn(S,g[y],0)>-1;);return y}function ou(g,S){for(var y=g.length;y--&&Dn(S,g[y],0)>-1;);return y}function hp(g,S){for(var y=g.length,R=0;y--;)g[y]===S&&++R;return R}var gp=Ro(Xd),mp=Ro(Qd);function vp(g){return"\\"+tp[g]}function yp(g,S){return g==null?n:g[S]}function Ln(g){return Yd.test(g)}function _p(g){return Jd.test(g)}function Sp(g){for(var S,y=[];!(S=g.next()).done;)y.push(S.value);return y}function Bo(g){var S=-1,y=Array(g.size);return g.forEach(function(R,j){y[++S]=[j,R]}),y}function su(g,S){return function(y){return g(S(y))}}function zt(g,S){for(var y=-1,R=g.length,j=0,re=[];++y<R;){var ye=g[y];(ye===S||ye===A)&&(g[y]=A,re[j++]=y)}return re}function ei(g){var S=-1,y=Array(g.size);return g.forEach(function(R){y[++S]=R}),y}function Ap(g){var S=-1,y=Array(g.size);return g.forEach(function(R){y[++S]=[R,R]}),y}function wp(g,S,y){for(var R=y-1,j=g.length;++R<j;)if(g[R]===S)return R;return-1}function bp(g,S,y){for(var R=y+1;R--;)if(g[R]===S)return R;return R}function Wn(g){return Ln(g)?xp(g):up(g)}function ct(g){return Ln(g)?Ep(g):cp(g)}function au(g){for(var S=g.length;S--&&hd.test(g.charAt(S)););return S}var Cp=Ro(ep);function xp(g){for(var S=Po.lastIndex=0;Po.test(g);)++S;return S}function Ep(g){return g.match(Po)||[]}function Op(g){return g.match(zd)||[]}var Pp=function g(S){S=S==null?we:Yt.defaults(we.Object(),S,Yt.pick(we,Zd));var y=S.Array,R=S.Date,j=S.Error,re=S.Function,ye=S.Math,se=S.Object,Uo=S.RegExp,Np=S.String,Qe=S.TypeError,ti=y.prototype,kp=re.prototype,Bn=se.prototype,ni=S["__core-js_shared__"],ri=kp.toString,oe=Bn.hasOwnProperty,Tp=0,uu=function(){var e=/[^.]+$/.exec(ni&&ni.keys&&ni.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ii=Bn.toString,Ip=ri.call(se),Mp=we._,Fp=Uo("^"+ri.call(oe).replace(wo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oi=$a?S.Buffer:n,Jt=S.Symbol,si=S.Uint8Array,cu=oi?oi.allocUnsafe:n,ai=su(se.getPrototypeOf,se),fu=se.create,lu=Bn.propertyIsEnumerable,ui=ti.splice,du=Jt?Jt.isConcatSpreadable:n,hr=Jt?Jt.iterator:n,pn=Jt?Jt.toStringTag:n,ci=function(){try{var e=yn(se,"defineProperty");return e({},"",{}),e}catch{}}(),Rp=S.clearTimeout!==we.clearTimeout&&S.clearTimeout,Dp=R&&R.now!==we.Date.now&&R.now,Lp=S.setTimeout!==we.setTimeout&&S.setTimeout,fi=ye.ceil,li=ye.floor,Go=se.getOwnPropertySymbols,Wp=oi?oi.isBuffer:n,pu=S.isFinite,Bp=ti.join,Up=su(se.keys,se),_e=ye.max,ke=ye.min,Gp=R.now,Hp=S.parseInt,hu=ye.random,Kp=ti.reverse,Ho=yn(S,"DataView"),gr=yn(S,"Map"),Ko=yn(S,"Promise"),Un=yn(S,"Set"),mr=yn(S,"WeakMap"),vr=yn(se,"create"),di=mr&&new mr,Gn={},qp=_n(Ho),$p=_n(gr),jp=_n(Ko),zp=_n(Un),Yp=_n(mr),pi=Jt?Jt.prototype:n,yr=pi?pi.valueOf:n,gu=pi?pi.toString:n;function c(e){if(he(e)&&!z(e)&&!(e instanceof Q)){if(e instanceof et)return e;if(oe.call(e,"__wrapped__"))return mc(e)}return new et(e)}var Hn=function(){function e(){}return function(t){if(!pe(t))return{};if(fu)return fu(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function hi(){}function et(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}c.templateSettings={escape:ud,evaluate:cd,interpolate:Ca,variable:"",imports:{_:c}},c.prototype=hi.prototype,c.prototype.constructor=c,et.prototype=Hn(hi.prototype),et.prototype.constructor=et;function Q(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=gt,this.__views__=[]}function Jp(){var e=new Q(this.__wrapped__);return e.__actions__=Le(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Le(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Le(this.__views__),e}function Zp(){if(this.__filtered__){var e=new Q(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Vp(){var e=this.__wrapped__.value(),t=this.__dir__,r=z(e),o=t<0,a=r?e.length:0,f=cg(0,a,this.__views__),d=f.start,h=f.end,m=h-d,w=o?h:d-1,b=this.__iteratees__,x=b.length,T=0,W=ke(m,this.__takeCount__);if(!r||!o&&a==m&&W==m)return Bu(e,this.__actions__);var K=[];e:for(;m--&&T<W;){w+=t;for(var Z=-1,q=e[w];++Z<x;){var X=b[Z],te=X.iteratee,je=X.type,Re=te(q);if(je==$l)q=Re;else if(!Re){if(je==_a)continue e;break e}}K[T++]=q}return K}Q.prototype=Hn(hi.prototype),Q.prototype.constructor=Q;function hn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Xp(){this.__data__=vr?vr(null):{},this.size=0}function Qp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function eh(e){var t=this.__data__;if(vr){var r=t[e];return r===v?n:r}return oe.call(t,e)?t[e]:n}function th(e){var t=this.__data__;return vr?t[e]!==n:oe.call(t,e)}function nh(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=vr&&t===n?v:t,this}hn.prototype.clear=Xp,hn.prototype.delete=Qp,hn.prototype.get=eh,hn.prototype.has=th,hn.prototype.set=nh;function xt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function rh(){this.__data__=[],this.size=0}function ih(e){var t=this.__data__,r=gi(t,e);if(r<0)return!1;var o=t.length-1;return r==o?t.pop():ui.call(t,r,1),--this.size,!0}function oh(e){var t=this.__data__,r=gi(t,e);return r<0?n:t[r][1]}function sh(e){return gi(this.__data__,e)>-1}function ah(e,t){var r=this.__data__,o=gi(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}xt.prototype.clear=rh,xt.prototype.delete=ih,xt.prototype.get=oh,xt.prototype.has=sh,xt.prototype.set=ah;function Et(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function uh(){this.size=0,this.__data__={hash:new hn,map:new(gr||xt),string:new hn}}function ch(e){var t=Oi(this,e).delete(e);return this.size-=t?1:0,t}function fh(e){return Oi(this,e).get(e)}function lh(e){return Oi(this,e).has(e)}function dh(e,t){var r=Oi(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}Et.prototype.clear=uh,Et.prototype.delete=ch,Et.prototype.get=fh,Et.prototype.has=lh,Et.prototype.set=dh;function gn(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Et;++t<r;)this.add(e[t])}function ph(e){return this.__data__.set(e,v),this}function hh(e){return this.__data__.has(e)}gn.prototype.add=gn.prototype.push=ph,gn.prototype.has=hh;function ft(e){var t=this.__data__=new xt(e);this.size=t.size}function gh(){this.__data__=new xt,this.size=0}function mh(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function vh(e){return this.__data__.get(e)}function yh(e){return this.__data__.has(e)}function _h(e,t){var r=this.__data__;if(r instanceof xt){var o=r.__data__;if(!gr||o.length<s-1)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new Et(o)}return r.set(e,t),this.size=r.size,this}ft.prototype.clear=gh,ft.prototype.delete=mh,ft.prototype.get=vh,ft.prototype.has=yh,ft.prototype.set=_h;function mu(e,t){var r=z(e),o=!r&&Sn(e),a=!r&&!o&&en(e),f=!r&&!o&&!a&&jn(e),d=r||o||a||f,h=d?Lo(e.length,Np):[],m=h.length;for(var w in e)(t||oe.call(e,w))&&!(d&&(w=="length"||a&&(w=="offset"||w=="parent")||f&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||kt(w,m)))&&h.push(w);return h}function vu(e){var t=e.length;return t?e[es(0,t-1)]:n}function Sh(e,t){return Pi(Le(e),mn(t,0,e.length))}function Ah(e){return Pi(Le(e))}function qo(e,t,r){(r!==n&&!lt(e[t],r)||r===n&&!(t in e))&&Ot(e,t,r)}function _r(e,t,r){var o=e[t];(!(oe.call(e,t)&&lt(o,r))||r===n&&!(t in e))&&Ot(e,t,r)}function gi(e,t){for(var r=e.length;r--;)if(lt(e[r][0],t))return r;return-1}function wh(e,t,r,o){return Zt(e,function(a,f,d){t(o,a,r(a),d)}),o}function yu(e,t){return e&&vt(t,be(t),e)}function bh(e,t){return e&&vt(t,Be(t),e)}function Ot(e,t,r){t=="__proto__"&&ci?ci(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function $o(e,t){for(var r=-1,o=t.length,a=y(o),f=e==null;++r<o;)a[r]=f?n:xs(e,t[r]);return a}function mn(e,t,r){return e===e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function tt(e,t,r,o,a,f){var d,h=t&C,m=t&E,w=t&k;if(r&&(d=a?r(e,o,a,f):r(e)),d!==n)return d;if(!pe(e))return e;var b=z(e);if(b){if(d=lg(e),!h)return Le(e,d)}else{var x=Te(e),T=x==zr||x==Sa;if(en(e))return Hu(e,h);if(x==Ct||x==Mn||T&&!a){if(d=m||T?{}:ac(e),!h)return m?eg(e,bh(d,e)):Qh(e,yu(d,e))}else{if(!ae[x])return a?e:{};d=dg(e,x,h)}}f||(f=new ft);var W=f.get(e);if(W)return W;f.set(e,d),Dc(e)?e.forEach(function(q){d.add(tt(q,t,r,q,e,f))}):Fc(e)&&e.forEach(function(q,X){d.set(X,tt(q,t,r,X,e,f))});var K=w?m?ls:fs:m?Be:be,Z=b?n:K(e);return Xe(Z||e,function(q,X){Z&&(X=q,q=e[X]),_r(d,X,tt(q,t,r,X,e,f))}),d}function Ch(e){var t=be(e);return function(r){return _u(r,e,t)}}function _u(e,t,r){var o=r.length;if(e==null)return!o;for(e=se(e);o--;){var a=r[o],f=t[a],d=e[a];if(d===n&&!(a in e)||!f(d))return!1}return!0}function Su(e,t,r){if(typeof e!="function")throw new Qe(l);return Er(function(){e.apply(n,r)},t)}function Sr(e,t,r,o){var a=-1,f=Xr,d=!0,h=e.length,m=[],w=t.length;if(!h)return m;r&&(t=le(t,Ke(r))),o?(f=To,d=!1):t.length>=s&&(f=pr,d=!1,t=new gn(t));e:for(;++a<h;){var b=e[a],x=r==null?b:r(b);if(b=o||b!==0?b:0,d&&x===x){for(var T=w;T--;)if(t[T]===x)continue e;m.push(b)}else f(t,x,o)||m.push(b)}return m}var Zt=zu(mt),Au=zu(zo,!0);function xh(e,t){var r=!0;return Zt(e,function(o,a,f){return r=!!t(o,a,f),r}),r}function mi(e,t,r){for(var o=-1,a=e.length;++o<a;){var f=e[o],d=t(f);if(d!=null&&(h===n?d===d&&!$e(d):r(d,h)))var h=d,m=f}return m}function Eh(e,t,r,o){var a=e.length;for(r=J(r),r<0&&(r=-r>a?0:a+r),o=o===n||o>a?a:J(o),o<0&&(o+=a),o=r>o?0:Wc(o);r<o;)e[r++]=t;return e}function wu(e,t){var r=[];return Zt(e,function(o,a,f){t(o,a,f)&&r.push(o)}),r}function Oe(e,t,r,o,a){var f=-1,d=e.length;for(r||(r=hg),a||(a=[]);++f<d;){var h=e[f];t>0&&r(h)?t>1?Oe(h,t-1,r,o,a):jt(a,h):o||(a[a.length]=h)}return a}var jo=Yu(),bu=Yu(!0);function mt(e,t){return e&&jo(e,t,be)}function zo(e,t){return e&&bu(e,t,be)}function vi(e,t){return $t(t,function(r){return Tt(e[r])})}function vn(e,t){t=Xt(t,e);for(var r=0,o=t.length;e!=null&&r<o;)e=e[yt(t[r++])];return r&&r==o?e:n}function Cu(e,t,r){var o=t(e);return z(e)?o:jt(o,r(e))}function Me(e){return e==null?e===n?td:Ql:pn&&pn in se(e)?ug(e):Ag(e)}function Yo(e,t){return e>t}function Oh(e,t){return e!=null&&oe.call(e,t)}function Ph(e,t){return e!=null&&t in se(e)}function Nh(e,t,r){return e>=ke(t,r)&&e<_e(t,r)}function Jo(e,t,r){for(var o=r?To:Xr,a=e[0].length,f=e.length,d=f,h=y(f),m=1/0,w=[];d--;){var b=e[d];d&&t&&(b=le(b,Ke(t))),m=ke(b.length,m),h[d]=!r&&(t||a>=120&&b.length>=120)?new gn(d&&b):n}b=e[0];var x=-1,T=h[0];e:for(;++x<a&&w.length<m;){var W=b[x],K=t?t(W):W;if(W=r||W!==0?W:0,!(T?pr(T,K):o(w,K,r))){for(d=f;--d;){var Z=h[d];if(!(Z?pr(Z,K):o(e[d],K,r)))continue e}T&&T.push(K),w.push(W)}}return w}function kh(e,t,r,o){return mt(e,function(a,f,d){t(o,r(a),f,d)}),o}function Ar(e,t,r){t=Xt(t,e),e=lc(e,t);var o=e==null?e:e[yt(rt(t))];return o==null?n:He(o,e,r)}function xu(e){return he(e)&&Me(e)==Mn}function Th(e){return he(e)&&Me(e)==dr}function Ih(e){return he(e)&&Me(e)==ar}function wr(e,t,r,o,a){return e===t?!0:e==null||t==null||!he(e)&&!he(t)?e!==e&&t!==t:Mh(e,t,r,o,wr,a)}function Mh(e,t,r,o,a,f){var d=z(e),h=z(t),m=d?$r:Te(e),w=h?$r:Te(t);m=m==Mn?Ct:m,w=w==Mn?Ct:w;var b=m==Ct,x=w==Ct,T=m==w;if(T&&en(e)){if(!en(t))return!1;d=!0,b=!1}if(T&&!b)return f||(f=new ft),d||jn(e)?ic(e,t,r,o,a,f):sg(e,t,m,r,o,a,f);if(!(r&I)){var W=b&&oe.call(e,"__wrapped__"),K=x&&oe.call(t,"__wrapped__");if(W||K){var Z=W?e.value():e,q=K?t.value():t;return f||(f=new ft),a(Z,q,r,o,f)}}return T?(f||(f=new ft),ag(e,t,r,o,a,f)):!1}function Fh(e){return he(e)&&Te(e)==at}function Zo(e,t,r,o){var a=r.length,f=a,d=!o;if(e==null)return!f;for(e=se(e);a--;){var h=r[a];if(d&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++a<f;){h=r[a];var m=h[0],w=e[m],b=h[1];if(d&&h[2]){if(w===n&&!(m in e))return!1}else{var x=new ft;if(o)var T=o(w,b,m,e,t,x);if(!(T===n?wr(b,w,I|F,o,x):T))return!1}}return!0}function Eu(e){if(!pe(e)||mg(e))return!1;var t=Tt(e)?Fp:Cd;return t.test(_n(e))}function Rh(e){return he(e)&&Me(e)==cr}function Dh(e){return he(e)&&Te(e)==ut}function Lh(e){return he(e)&&Fi(e.length)&&!!ue[Me(e)]}function Ou(e){return typeof e=="function"?e:e==null?Ue:typeof e=="object"?z(e)?ku(e[0],e[1]):Nu(e):Jc(e)}function Vo(e){if(!xr(e))return Up(e);var t=[];for(var r in se(e))oe.call(e,r)&&r!="constructor"&&t.push(r);return t}function Wh(e){if(!pe(e))return Sg(e);var t=xr(e),r=[];for(var o in e)o=="constructor"&&(t||!oe.call(e,o))||r.push(o);return r}function Xo(e,t){return e<t}function Pu(e,t){var r=-1,o=We(e)?y(e.length):[];return Zt(e,function(a,f,d){o[++r]=t(a,f,d)}),o}function Nu(e){var t=ps(e);return t.length==1&&t[0][2]?cc(t[0][0],t[0][1]):function(r){return r===e||Zo(r,e,t)}}function ku(e,t){return gs(e)&&uc(t)?cc(yt(e),t):function(r){var o=xs(r,e);return o===n&&o===t?Es(r,e):wr(t,o,I|F)}}function yi(e,t,r,o,a){e!==t&&jo(t,function(f,d){if(a||(a=new ft),pe(f))Bh(e,t,d,r,yi,o,a);else{var h=o?o(vs(e,d),f,d+"",e,t,a):n;h===n&&(h=f),qo(e,d,h)}},Be)}function Bh(e,t,r,o,a,f,d){var h=vs(e,r),m=vs(t,r),w=d.get(m);if(w){qo(e,r,w);return}var b=f?f(h,m,r+"",e,t,d):n,x=b===n;if(x){var T=z(m),W=!T&&en(m),K=!T&&!W&&jn(m);b=m,T||W||K?z(h)?b=h:ge(h)?b=Le(h):W?(x=!1,b=Hu(m,!0)):K?(x=!1,b=Ku(m,!0)):b=[]:Or(m)||Sn(m)?(b=h,Sn(h)?b=Bc(h):(!pe(h)||Tt(h))&&(b=ac(m))):x=!1}x&&(d.set(m,b),a(b,m,o,f,d),d.delete(m)),qo(e,r,b)}function Tu(e,t){var r=e.length;if(r)return t+=t<0?r:0,kt(t,r)?e[t]:n}function Iu(e,t,r){t.length?t=le(t,function(f){return z(f)?function(d){return vn(d,f.length===1?f[0]:f)}:f}):t=[Ue];var o=-1;t=le(t,Ke(H()));var a=Pu(e,function(f,d,h){var m=le(t,function(w){return w(f)});return{criteria:m,index:++o,value:f}});return dp(a,function(f,d){return Xh(f,d,r)})}function Uh(e,t){return Mu(e,t,function(r,o){return Es(e,o)})}function Mu(e,t,r){for(var o=-1,a=t.length,f={};++o<a;){var d=t[o],h=vn(e,d);r(h,d)&&br(f,Xt(d,e),h)}return f}function Gh(e){return function(t){return vn(t,e)}}function Qo(e,t,r,o){var a=o?lp:Dn,f=-1,d=t.length,h=e;for(e===t&&(t=Le(t)),r&&(h=le(e,Ke(r)));++f<d;)for(var m=0,w=t[f],b=r?r(w):w;(m=a(h,b,m,o))>-1;)h!==e&&ui.call(h,m,1),ui.call(e,m,1);return e}function Fu(e,t){for(var r=e?t.length:0,o=r-1;r--;){var a=t[r];if(r==o||a!==f){var f=a;kt(a)?ui.call(e,a,1):rs(e,a)}}return e}function es(e,t){return e+li(hu()*(t-e+1))}function Hh(e,t,r,o){for(var a=-1,f=_e(fi((t-e)/(r||1)),0),d=y(f);f--;)d[o?f:++a]=e,e+=r;return d}function ts(e,t){var r="";if(!e||t<1||t>qt)return r;do t%2&&(r+=e),t=li(t/2),t&&(e+=e);while(t);return r}function V(e,t){return ys(fc(e,t,Ue),e+"")}function Kh(e){return vu(zn(e))}function qh(e,t){var r=zn(e);return Pi(r,mn(t,0,r.length))}function br(e,t,r,o){if(!pe(e))return e;t=Xt(t,e);for(var a=-1,f=t.length,d=f-1,h=e;h!=null&&++a<f;){var m=yt(t[a]),w=r;if(m==="__proto__"||m==="constructor"||m==="prototype")return e;if(a!=d){var b=h[m];w=o?o(b,m,h):n,w===n&&(w=pe(b)?b:kt(t[a+1])?[]:{})}_r(h,m,w),h=h[m]}return e}var Ru=di?function(e,t){return di.set(e,t),e}:Ue,$h=ci?function(e,t){return ci(e,"toString",{configurable:!0,enumerable:!1,value:Ps(t),writable:!0})}:Ue;function jh(e){return Pi(zn(e))}function nt(e,t,r){var o=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var f=y(a);++o<a;)f[o]=e[o+t];return f}function zh(e,t){var r;return Zt(e,function(o,a,f){return r=t(o,a,f),!r}),!!r}function _i(e,t,r){var o=0,a=e==null?o:e.length;if(typeof t=="number"&&t===t&&a<=Jl){for(;o<a;){var f=o+a>>>1,d=e[f];d!==null&&!$e(d)&&(r?d<=t:d<t)?o=f+1:a=f}return a}return ns(e,t,Ue,r)}function ns(e,t,r,o){var a=0,f=e==null?0:e.length;if(f===0)return 0;t=r(t);for(var d=t!==t,h=t===null,m=$e(t),w=t===n;a<f;){var b=li((a+f)/2),x=r(e[b]),T=x!==n,W=x===null,K=x===x,Z=$e(x);if(d)var q=o||K;else w?q=K&&(o||T):h?q=K&&T&&(o||!W):m?q=K&&T&&!W&&(o||!Z):W||Z?q=!1:q=o?x<=t:x<t;q?a=b+1:f=b}return ke(f,Yl)}function Du(e,t){for(var r=-1,o=e.length,a=0,f=[];++r<o;){var d=e[r],h=t?t(d):d;if(!r||!lt(h,m)){var m=h;f[a++]=d===0?0:d}}return f}function Lu(e){return typeof e=="number"?e:$e(e)?qr:+e}function qe(e){if(typeof e=="string")return e;if(z(e))return le(e,qe)+"";if($e(e))return gu?gu.call(e):"";var t=e+"";return t=="0"&&1/e==-ln?"-0":t}function Vt(e,t,r){var o=-1,a=Xr,f=e.length,d=!0,h=[],m=h;if(r)d=!1,a=To;else if(f>=s){var w=t?null:ig(e);if(w)return ei(w);d=!1,a=pr,m=new gn}else m=t?[]:h;e:for(;++o<f;){var b=e[o],x=t?t(b):b;if(b=r||b!==0?b:0,d&&x===x){for(var T=m.length;T--;)if(m[T]===x)continue e;t&&m.push(x),h.push(b)}else a(m,x,r)||(m!==h&&m.push(x),h.push(b))}return h}function rs(e,t){return t=Xt(t,e),e=lc(e,t),e==null||delete e[yt(rt(t))]}function Wu(e,t,r,o){return br(e,t,r(vn(e,t)),o)}function Si(e,t,r,o){for(var a=e.length,f=o?a:-1;(o?f--:++f<a)&&t(e[f],f,e););return r?nt(e,o?0:f,o?f+1:a):nt(e,o?f+1:0,o?a:f)}function Bu(e,t){var r=e;return r instanceof Q&&(r=r.value()),Io(t,function(o,a){return a.func.apply(a.thisArg,jt([o],a.args))},r)}function is(e,t,r){var o=e.length;if(o<2)return o?Vt(e[0]):[];for(var a=-1,f=y(o);++a<o;)for(var d=e[a],h=-1;++h<o;)h!=a&&(f[a]=Sr(f[a]||d,e[h],t,r));return Vt(Oe(f,1),t,r)}function Uu(e,t,r){for(var o=-1,a=e.length,f=t.length,d={};++o<a;){var h=o<f?t[o]:n;r(d,e[o],h)}return d}function os(e){return ge(e)?e:[]}function ss(e){return typeof e=="function"?e:Ue}function Xt(e,t){return z(e)?e:gs(e,t)?[e]:gc(ie(e))}var Yh=V;function Qt(e,t,r){var o=e.length;return r=r===n?o:r,!t&&r>=o?e:nt(e,t,r)}var Gu=Rp||function(e){return we.clearTimeout(e)};function Hu(e,t){if(t)return e.slice();var r=e.length,o=cu?cu(r):new e.constructor(r);return e.copy(o),o}function as(e){var t=new e.constructor(e.byteLength);return new si(t).set(new si(e)),t}function Jh(e,t){var r=t?as(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Zh(e){var t=new e.constructor(e.source,xa.exec(e));return t.lastIndex=e.lastIndex,t}function Vh(e){return yr?se(yr.call(e)):{}}function Ku(e,t){var r=t?as(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function qu(e,t){if(e!==t){var r=e!==n,o=e===null,a=e===e,f=$e(e),d=t!==n,h=t===null,m=t===t,w=$e(t);if(!h&&!w&&!f&&e>t||f&&d&&m&&!h&&!w||o&&d&&m||!r&&m||!a)return 1;if(!o&&!f&&!w&&e<t||w&&r&&a&&!o&&!f||h&&r&&a||!d&&a||!m)return-1}return 0}function Xh(e,t,r){for(var o=-1,a=e.criteria,f=t.criteria,d=a.length,h=r.length;++o<d;){var m=qu(a[o],f[o]);if(m){if(o>=h)return m;var w=r[o];return m*(w=="desc"?-1:1)}}return e.index-t.index}function $u(e,t,r,o){for(var a=-1,f=e.length,d=r.length,h=-1,m=t.length,w=_e(f-d,0),b=y(m+w),x=!o;++h<m;)b[h]=t[h];for(;++a<d;)(x||a<f)&&(b[r[a]]=e[a]);for(;w--;)b[h++]=e[a++];return b}function ju(e,t,r,o){for(var a=-1,f=e.length,d=-1,h=r.length,m=-1,w=t.length,b=_e(f-h,0),x=y(b+w),T=!o;++a<b;)x[a]=e[a];for(var W=a;++m<w;)x[W+m]=t[m];for(;++d<h;)(T||a<f)&&(x[W+r[d]]=e[a++]);return x}function Le(e,t){var r=-1,o=e.length;for(t||(t=y(o));++r<o;)t[r]=e[r];return t}function vt(e,t,r,o){var a=!r;r||(r={});for(var f=-1,d=t.length;++f<d;){var h=t[f],m=o?o(r[h],e[h],h,r,e):n;m===n&&(m=e[h]),a?Ot(r,h,m):_r(r,h,m)}return r}function Qh(e,t){return vt(e,hs(e),t)}function eg(e,t){return vt(e,oc(e),t)}function Ai(e,t){return function(r,o){var a=z(r)?op:wh,f=t?t():{};return a(r,e,H(o,2),f)}}function Kn(e){return V(function(t,r){var o=-1,a=r.length,f=a>1?r[a-1]:n,d=a>2?r[2]:n;for(f=e.length>3&&typeof f=="function"?(a--,f):n,d&&Fe(r[0],r[1],d)&&(f=a<3?n:f,a=1),t=se(t);++o<a;){var h=r[o];h&&e(t,h,o,f)}return t})}function zu(e,t){return function(r,o){if(r==null)return r;if(!We(r))return e(r,o);for(var a=r.length,f=t?a:-1,d=se(r);(t?f--:++f<a)&&o(d[f],f,d)!==!1;);return r}}function Yu(e){return function(t,r,o){for(var a=-1,f=se(t),d=o(t),h=d.length;h--;){var m=d[e?h:++a];if(r(f[m],m,f)===!1)break}return t}}function tg(e,t,r){var o=t&G,a=Cr(e);function f(){var d=this&&this!==we&&this instanceof f?a:e;return d.apply(o?r:this,arguments)}return f}function Ju(e){return function(t){t=ie(t);var r=Ln(t)?ct(t):n,o=r?r[0]:t.charAt(0),a=r?Qt(r,1).join(""):t.slice(1);return o[e]()+a}}function qn(e){return function(t){return Io(zc(jc(t).replace($d,"")),e,"")}}function Cr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Hn(e.prototype),o=e.apply(r,t);return pe(o)?o:r}}function ng(e,t,r){var o=Cr(e);function a(){for(var f=arguments.length,d=y(f),h=f,m=$n(a);h--;)d[h]=arguments[h];var w=f<3&&d[0]!==m&&d[f-1]!==m?[]:zt(d,m);if(f-=w.length,f<r)return ec(e,t,wi,a.placeholder,n,d,w,n,n,r-f);var b=this&&this!==we&&this instanceof a?o:e;return He(b,this,d)}return a}function Zu(e){return function(t,r,o){var a=se(t);if(!We(t)){var f=H(r,3);t=be(t),r=function(h){return f(a[h],h,a)}}var d=e(t,r,o);return d>-1?a[f?t[d]:d]:n}}function Vu(e){return Nt(function(t){var r=t.length,o=r,a=et.prototype.thru;for(e&&t.reverse();o--;){var f=t[o];if(typeof f!="function")throw new Qe(l);if(a&&!d&&Ei(f)=="wrapper")var d=new et([],!0)}for(o=d?o:r;++o<r;){f=t[o];var h=Ei(f),m=h=="wrapper"?ds(f):n;m&&ms(m[0])&&m[1]==($|N|L|ve)&&!m[4].length&&m[9]==1?d=d[Ei(m[0])].apply(d,m[3]):d=f.length==1&&ms(f)?d[h]():d.thru(f)}return function(){var w=arguments,b=w[0];if(d&&w.length==1&&z(b))return d.plant(b).value();for(var x=0,T=r?t[x].apply(this,w):b;++x<r;)T=t[x].call(this,T);return T}})}function wi(e,t,r,o,a,f,d,h,m,w){var b=t&$,x=t&G,T=t&B,W=t&(N|U),K=t&ee,Z=T?n:Cr(e);function q(){for(var X=arguments.length,te=y(X),je=X;je--;)te[je]=arguments[je];if(W)var Re=$n(q),ze=hp(te,Re);if(o&&(te=$u(te,o,a,W)),f&&(te=ju(te,f,d,W)),X-=ze,W&&X<w){var me=zt(te,Re);return ec(e,t,wi,q.placeholder,r,te,me,h,m,w-X)}var dt=x?r:this,Mt=T?dt[e]:e;return X=te.length,h?te=wg(te,h):K&&X>1&&te.reverse(),b&&m<X&&(te.length=m),this&&this!==we&&this instanceof q&&(Mt=Z||Cr(Mt)),Mt.apply(dt,te)}return q}function Xu(e,t){return function(r,o){return kh(r,e,t(o),{})}}function bi(e,t){return function(r,o){var a;if(r===n&&o===n)return t;if(r!==n&&(a=r),o!==n){if(a===n)return o;typeof r=="string"||typeof o=="string"?(r=qe(r),o=qe(o)):(r=Lu(r),o=Lu(o)),a=e(r,o)}return a}}function us(e){return Nt(function(t){return t=le(t,Ke(H())),V(function(r){var o=this;return e(t,function(a){return He(a,o,r)})})})}function Ci(e,t){t=t===n?" ":qe(t);var r=t.length;if(r<2)return r?ts(t,e):t;var o=ts(t,fi(e/Wn(t)));return Ln(t)?Qt(ct(o),0,e).join(""):o.slice(0,e)}function rg(e,t,r,o){var a=t&G,f=Cr(e);function d(){for(var h=-1,m=arguments.length,w=-1,b=o.length,x=y(b+m),T=this&&this!==we&&this instanceof d?f:e;++w<b;)x[w]=o[w];for(;m--;)x[w++]=arguments[++h];return He(T,a?r:this,x)}return d}function Qu(e){return function(t,r,o){return o&&typeof o!="number"&&Fe(t,r,o)&&(r=o=n),t=It(t),r===n?(r=t,t=0):r=It(r),o=o===n?t<r?1:-1:It(o),Hh(t,r,o,e)}}function xi(e){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=it(t),r=it(r)),e(t,r)}}function ec(e,t,r,o,a,f,d,h,m,w){var b=t&N,x=b?d:n,T=b?n:d,W=b?f:n,K=b?n:f;t|=b?L:Y,t&=~(b?Y:L),t&O||(t&=~(G|B));var Z=[e,t,a,W,x,K,T,h,m,w],q=r.apply(n,Z);return ms(e)&&dc(q,Z),q.placeholder=o,pc(q,e,t)}function cs(e){var t=ye[e];return function(r,o){if(r=it(r),o=o==null?0:ke(J(o),292),o&&pu(r)){var a=(ie(r)+"e").split("e"),f=t(a[0]+"e"+(+a[1]+o));return a=(ie(f)+"e").split("e"),+(a[0]+"e"+(+a[1]-o))}return t(r)}}var ig=Un&&1/ei(new Un([,-0]))[1]==ln?function(e){return new Un(e)}:Ts;function tc(e){return function(t){var r=Te(t);return r==at?Bo(t):r==ut?Ap(t):pp(t,e(t))}}function Pt(e,t,r,o,a,f,d,h){var m=t&B;if(!m&&typeof e!="function")throw new Qe(l);var w=o?o.length:0;if(w||(t&=~(L|Y),o=a=n),d=d===n?d:_e(J(d),0),h=h===n?h:J(h),w-=a?a.length:0,t&Y){var b=o,x=a;o=a=n}var T=m?n:ds(e),W=[e,t,r,o,a,b,x,f,d,h];if(T&&_g(W,T),e=W[0],t=W[1],r=W[2],o=W[3],a=W[4],h=W[9]=W[9]===n?m?0:e.length:_e(W[9]-w,0),!h&&t&(N|U)&&(t&=~(N|U)),!t||t==G)var K=tg(e,t,r);else t==N||t==U?K=ng(e,t,h):(t==L||t==(G|L))&&!a.length?K=rg(e,t,r,o):K=wi.apply(n,W);var Z=T?Ru:dc;return pc(Z(K,W),e,t)}function nc(e,t,r,o){return e===n||lt(e,Bn[r])&&!oe.call(o,r)?t:e}function rc(e,t,r,o,a,f){return pe(e)&&pe(t)&&(f.set(t,e),yi(e,t,n,rc,f),f.delete(t)),e}function og(e){return Or(e)?n:e}function ic(e,t,r,o,a,f){var d=r&I,h=e.length,m=t.length;if(h!=m&&!(d&&m>h))return!1;var w=f.get(e),b=f.get(t);if(w&&b)return w==t&&b==e;var x=-1,T=!0,W=r&F?new gn:n;for(f.set(e,t),f.set(t,e);++x<h;){var K=e[x],Z=t[x];if(o)var q=d?o(Z,K,x,t,e,f):o(K,Z,x,e,t,f);if(q!==n){if(q)continue;T=!1;break}if(W){if(!Mo(t,function(X,te){if(!pr(W,te)&&(K===X||a(K,X,r,o,f)))return W.push(te)})){T=!1;break}}else if(!(K===Z||a(K,Z,r,o,f))){T=!1;break}}return f.delete(e),f.delete(t),T}function sg(e,t,r,o,a,f,d){switch(r){case Fn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case dr:return!(e.byteLength!=t.byteLength||!f(new si(e),new si(t)));case sr:case ar:case ur:return lt(+e,+t);case jr:return e.name==t.name&&e.message==t.message;case cr:case fr:return e==t+"";case at:var h=Bo;case ut:var m=o&I;if(h||(h=ei),e.size!=t.size&&!m)return!1;var w=d.get(e);if(w)return w==t;o|=F,d.set(e,t);var b=ic(h(e),h(t),o,a,f,d);return d.delete(e),b;case Yr:if(yr)return yr.call(e)==yr.call(t)}return!1}function ag(e,t,r,o,a,f){var d=r&I,h=fs(e),m=h.length,w=fs(t),b=w.length;if(m!=b&&!d)return!1;for(var x=m;x--;){var T=h[x];if(!(d?T in t:oe.call(t,T)))return!1}var W=f.get(e),K=f.get(t);if(W&&K)return W==t&&K==e;var Z=!0;f.set(e,t),f.set(t,e);for(var q=d;++x<m;){T=h[x];var X=e[T],te=t[T];if(o)var je=d?o(te,X,T,t,e,f):o(X,te,T,e,t,f);if(!(je===n?X===te||a(X,te,r,o,f):je)){Z=!1;break}q||(q=T=="constructor")}if(Z&&!q){var Re=e.constructor,ze=t.constructor;Re!=ze&&"constructor"in e&&"constructor"in t&&!(typeof Re=="function"&&Re instanceof Re&&typeof ze=="function"&&ze instanceof ze)&&(Z=!1)}return f.delete(e),f.delete(t),Z}function Nt(e){return ys(fc(e,n,_c),e+"")}function fs(e){return Cu(e,be,hs)}function ls(e){return Cu(e,Be,oc)}var ds=di?function(e){return di.get(e)}:Ts;function Ei(e){for(var t=e.name+"",r=Gn[t],o=oe.call(Gn,t)?r.length:0;o--;){var a=r[o],f=a.func;if(f==null||f==e)return a.name}return t}function $n(e){var t=oe.call(c,"placeholder")?c:e;return t.placeholder}function H(){var e=c.iteratee||Ns;return e=e===Ns?Ou:e,arguments.length?e(arguments[0],arguments[1]):e}function Oi(e,t){var r=e.__data__;return gg(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ps(e){for(var t=be(e),r=t.length;r--;){var o=t[r],a=e[o];t[r]=[o,a,uc(a)]}return t}function yn(e,t){var r=yp(e,t);return Eu(r)?r:n}function ug(e){var t=oe.call(e,pn),r=e[pn];try{e[pn]=n;var o=!0}catch{}var a=ii.call(e);return o&&(t?e[pn]=r:delete e[pn]),a}var hs=Go?function(e){return e==null?[]:(e=se(e),$t(Go(e),function(t){return lu.call(e,t)}))}:Is,oc=Go?function(e){for(var t=[];e;)jt(t,hs(e)),e=ai(e);return t}:Is,Te=Me;(Ho&&Te(new Ho(new ArrayBuffer(1)))!=Fn||gr&&Te(new gr)!=at||Ko&&Te(Ko.resolve())!=Aa||Un&&Te(new Un)!=ut||mr&&Te(new mr)!=lr)&&(Te=function(e){var t=Me(e),r=t==Ct?e.constructor:n,o=r?_n(r):"";if(o)switch(o){case qp:return Fn;case $p:return at;case jp:return Aa;case zp:return ut;case Yp:return lr}return t});function cg(e,t,r){for(var o=-1,a=r.length;++o<a;){var f=r[o],d=f.size;switch(f.type){case"drop":e+=d;break;case"dropRight":t-=d;break;case"take":t=ke(t,e+d);break;case"takeRight":e=_e(e,t-d);break}}return{start:e,end:t}}function fg(e){var t=e.match(md);return t?t[1].split(vd):[]}function sc(e,t,r){t=Xt(t,e);for(var o=-1,a=t.length,f=!1;++o<a;){var d=yt(t[o]);if(!(f=e!=null&&r(e,d)))break;e=e[d]}return f||++o!=a?f:(a=e==null?0:e.length,!!a&&Fi(a)&&kt(d,a)&&(z(e)||Sn(e)))}function lg(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&oe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function ac(e){return typeof e.constructor=="function"&&!xr(e)?Hn(ai(e)):{}}function dg(e,t,r){var o=e.constructor;switch(t){case dr:return as(e);case sr:case ar:return new o(+e);case Fn:return Jh(e,r);case po:case ho:case go:case mo:case vo:case yo:case _o:case So:case Ao:return Ku(e,r);case at:return new o;case ur:case fr:return new o(e);case cr:return Zh(e);case ut:return new o;case Yr:return Vh(e)}}function pg(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(gd,`{
/* [wrapped with `+t+`] */
`)}function hg(e){return z(e)||Sn(e)||!!(du&&e&&e[du])}function kt(e,t){var r=typeof e;return t=t??qt,!!t&&(r=="number"||r!="symbol"&&Ed.test(e))&&e>-1&&e%1==0&&e<t}function Fe(e,t,r){if(!pe(r))return!1;var o=typeof t;return(o=="number"?We(r)&&kt(t,r.length):o=="string"&&t in r)?lt(r[t],e):!1}function gs(e,t){if(z(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||$e(e)?!0:ld.test(e)||!fd.test(e)||t!=null&&e in se(t)}function gg(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ms(e){var t=Ei(e),r=c[t];if(typeof r!="function"||!(t in Q.prototype))return!1;if(e===r)return!0;var o=ds(r);return!!o&&e===o[0]}function mg(e){return!!uu&&uu in e}var vg=ni?Tt:Ms;function xr(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Bn;return e===r}function uc(e){return e===e&&!pe(e)}function cc(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==n||e in se(r))}}function yg(e){var t=Ii(e,function(o){return r.size===_&&r.clear(),o}),r=t.cache;return t}function _g(e,t){var r=e[1],o=t[1],a=r|o,f=a<(G|B|$),d=o==$&&r==N||o==$&&r==ve&&e[7].length<=t[8]||o==($|ve)&&t[7].length<=t[8]&&r==N;if(!(f||d))return e;o&G&&(e[2]=t[2],a|=r&G?0:O);var h=t[3];if(h){var m=e[3];e[3]=m?$u(m,h,t[4]):h,e[4]=m?zt(e[3],A):t[4]}return h=t[5],h&&(m=e[5],e[5]=m?ju(m,h,t[6]):h,e[6]=m?zt(e[5],A):t[6]),h=t[7],h&&(e[7]=h),o&$&&(e[8]=e[8]==null?t[8]:ke(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function Sg(e){var t=[];if(e!=null)for(var r in se(e))t.push(r);return t}function Ag(e){return ii.call(e)}function fc(e,t,r){return t=_e(t===n?e.length-1:t,0),function(){for(var o=arguments,a=-1,f=_e(o.length-t,0),d=y(f);++a<f;)d[a]=o[t+a];a=-1;for(var h=y(t+1);++a<t;)h[a]=o[a];return h[t]=r(d),He(e,this,h)}}function lc(e,t){return t.length<2?e:vn(e,nt(t,0,-1))}function wg(e,t){for(var r=e.length,o=ke(t.length,r),a=Le(e);o--;){var f=t[o];e[o]=kt(f,r)?a[f]:n}return e}function vs(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var dc=hc(Ru),Er=Lp||function(e,t){return we.setTimeout(e,t)},ys=hc($h);function pc(e,t,r){var o=t+"";return ys(e,pg(o,bg(fg(o),r)))}function hc(e){var t=0,r=0;return function(){var o=Gp(),a=lo-(o-r);if(r=o,a>0){if(++t>=fo)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Pi(e,t){var r=-1,o=e.length,a=o-1;for(t=t===n?o:t;++r<t;){var f=es(r,a),d=e[f];e[f]=e[r],e[r]=d}return e.length=t,e}var gc=yg(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(dd,function(r,o,a,f){t.push(a?f.replace(Sd,"$1"):o||r)}),t});function yt(e){if(typeof e=="string"||$e(e))return e;var t=e+"";return t=="0"&&1/e==-ln?"-0":t}function _n(e){if(e!=null){try{return ri.call(e)}catch{}try{return e+""}catch{}}return""}function bg(e,t){return Xe(Zl,function(r){var o="_."+r[0];t&r[1]&&!Xr(e,o)&&e.push(o)}),e.sort()}function mc(e){if(e instanceof Q)return e.clone();var t=new et(e.__wrapped__,e.__chain__);return t.__actions__=Le(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Cg(e,t,r){(r?Fe(e,t,r):t===n)?t=1:t=_e(J(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var a=0,f=0,d=y(fi(o/t));a<o;)d[f++]=nt(e,a,a+=t);return d}function xg(e){for(var t=-1,r=e==null?0:e.length,o=0,a=[];++t<r;){var f=e[t];f&&(a[o++]=f)}return a}function Eg(){var e=arguments.length;if(!e)return[];for(var t=y(e-1),r=arguments[0],o=e;o--;)t[o-1]=arguments[o];return jt(z(r)?Le(r):[r],Oe(t,1))}var Og=V(function(e,t){return ge(e)?Sr(e,Oe(t,1,ge,!0)):[]}),Pg=V(function(e,t){var r=rt(t);return ge(r)&&(r=n),ge(e)?Sr(e,Oe(t,1,ge,!0),H(r,2)):[]}),Ng=V(function(e,t){var r=rt(t);return ge(r)&&(r=n),ge(e)?Sr(e,Oe(t,1,ge,!0),n,r):[]});function kg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),nt(e,t<0?0:t,o)):[]}function Tg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),t=o-t,nt(e,0,t<0?0:t)):[]}function Ig(e,t){return e&&e.length?Si(e,H(t,3),!0,!0):[]}function Mg(e,t){return e&&e.length?Si(e,H(t,3),!0):[]}function Fg(e,t,r,o){var a=e==null?0:e.length;return a?(r&&typeof r!="number"&&Fe(e,t,r)&&(r=0,o=a),Eh(e,t,r,o)):[]}function vc(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=r==null?0:J(r);return a<0&&(a=_e(o+a,0)),Qr(e,H(t,3),a)}function yc(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=o-1;return r!==n&&(a=J(r),a=r<0?_e(o+a,0):ke(a,o-1)),Qr(e,H(t,3),a,!0)}function _c(e){var t=e==null?0:e.length;return t?Oe(e,1):[]}function Rg(e){var t=e==null?0:e.length;return t?Oe(e,ln):[]}function Dg(e,t){var r=e==null?0:e.length;return r?(t=t===n?1:J(t),Oe(e,t)):[]}function Lg(e){for(var t=-1,r=e==null?0:e.length,o={};++t<r;){var a=e[t];o[a[0]]=a[1]}return o}function Sc(e){return e&&e.length?e[0]:n}function Wg(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=r==null?0:J(r);return a<0&&(a=_e(o+a,0)),Dn(e,t,a)}function Bg(e){var t=e==null?0:e.length;return t?nt(e,0,-1):[]}var Ug=V(function(e){var t=le(e,os);return t.length&&t[0]===e[0]?Jo(t):[]}),Gg=V(function(e){var t=rt(e),r=le(e,os);return t===rt(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Jo(r,H(t,2)):[]}),Hg=V(function(e){var t=rt(e),r=le(e,os);return t=typeof t=="function"?t:n,t&&r.pop(),r.length&&r[0]===e[0]?Jo(r,n,t):[]});function Kg(e,t){return e==null?"":Bp.call(e,t)}function rt(e){var t=e==null?0:e.length;return t?e[t-1]:n}function qg(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=o;return r!==n&&(a=J(r),a=a<0?_e(o+a,0):ke(a,o-1)),t===t?bp(e,t,a):Qr(e,eu,a,!0)}function $g(e,t){return e&&e.length?Tu(e,J(t)):n}var jg=V(Ac);function Ac(e,t){return e&&e.length&&t&&t.length?Qo(e,t):e}function zg(e,t,r){return e&&e.length&&t&&t.length?Qo(e,t,H(r,2)):e}function Yg(e,t,r){return e&&e.length&&t&&t.length?Qo(e,t,n,r):e}var Jg=Nt(function(e,t){var r=e==null?0:e.length,o=$o(e,t);return Fu(e,le(t,function(a){return kt(a,r)?+a:a}).sort(qu)),o});function Zg(e,t){var r=[];if(!(e&&e.length))return r;var o=-1,a=[],f=e.length;for(t=H(t,3);++o<f;){var d=e[o];t(d,o,e)&&(r.push(d),a.push(o))}return Fu(e,a),r}function _s(e){return e==null?e:Kp.call(e)}function Vg(e,t,r){var o=e==null?0:e.length;return o?(r&&typeof r!="number"&&Fe(e,t,r)?(t=0,r=o):(t=t==null?0:J(t),r=r===n?o:J(r)),nt(e,t,r)):[]}function Xg(e,t){return _i(e,t)}function Qg(e,t,r){return ns(e,t,H(r,2))}function em(e,t){var r=e==null?0:e.length;if(r){var o=_i(e,t);if(o<r&&lt(e[o],t))return o}return-1}function tm(e,t){return _i(e,t,!0)}function nm(e,t,r){return ns(e,t,H(r,2),!0)}function rm(e,t){var r=e==null?0:e.length;if(r){var o=_i(e,t,!0)-1;if(lt(e[o],t))return o}return-1}function im(e){return e&&e.length?Du(e):[]}function om(e,t){return e&&e.length?Du(e,H(t,2)):[]}function sm(e){var t=e==null?0:e.length;return t?nt(e,1,t):[]}function am(e,t,r){return e&&e.length?(t=r||t===n?1:J(t),nt(e,0,t<0?0:t)):[]}function um(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),t=o-t,nt(e,t<0?0:t,o)):[]}function cm(e,t){return e&&e.length?Si(e,H(t,3),!1,!0):[]}function fm(e,t){return e&&e.length?Si(e,H(t,3)):[]}var lm=V(function(e){return Vt(Oe(e,1,ge,!0))}),dm=V(function(e){var t=rt(e);return ge(t)&&(t=n),Vt(Oe(e,1,ge,!0),H(t,2))}),pm=V(function(e){var t=rt(e);return t=typeof t=="function"?t:n,Vt(Oe(e,1,ge,!0),n,t)});function hm(e){return e&&e.length?Vt(e):[]}function gm(e,t){return e&&e.length?Vt(e,H(t,2)):[]}function mm(e,t){return t=typeof t=="function"?t:n,e&&e.length?Vt(e,n,t):[]}function Ss(e){if(!(e&&e.length))return[];var t=0;return e=$t(e,function(r){if(ge(r))return t=_e(r.length,t),!0}),Lo(t,function(r){return le(e,Fo(r))})}function wc(e,t){if(!(e&&e.length))return[];var r=Ss(e);return t==null?r:le(r,function(o){return He(t,n,o)})}var vm=V(function(e,t){return ge(e)?Sr(e,t):[]}),ym=V(function(e){return is($t(e,ge))}),_m=V(function(e){var t=rt(e);return ge(t)&&(t=n),is($t(e,ge),H(t,2))}),Sm=V(function(e){var t=rt(e);return t=typeof t=="function"?t:n,is($t(e,ge),n,t)}),Am=V(Ss);function wm(e,t){return Uu(e||[],t||[],_r)}function bm(e,t){return Uu(e||[],t||[],br)}var Cm=V(function(e){var t=e.length,r=t>1?e[t-1]:n;return r=typeof r=="function"?(e.pop(),r):n,wc(e,r)});function bc(e){var t=c(e);return t.__chain__=!0,t}function xm(e,t){return t(e),e}function Ni(e,t){return t(e)}var Em=Nt(function(e){var t=e.length,r=t?e[0]:0,o=this.__wrapped__,a=function(f){return $o(f,e)};return t>1||this.__actions__.length||!(o instanceof Q)||!kt(r)?this.thru(a):(o=o.slice(r,+r+(t?1:0)),o.__actions__.push({func:Ni,args:[a],thisArg:n}),new et(o,this.__chain__).thru(function(f){return t&&!f.length&&f.push(n),f}))});function Om(){return bc(this)}function Pm(){return new et(this.value(),this.__chain__)}function Nm(){this.__values__===n&&(this.__values__=Lc(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function km(){return this}function Tm(e){for(var t,r=this;r instanceof hi;){var o=mc(r);o.__index__=0,o.__values__=n,t?a.__wrapped__=o:t=o;var a=o;r=r.__wrapped__}return a.__wrapped__=e,t}function Im(){var e=this.__wrapped__;if(e instanceof Q){var t=e;return this.__actions__.length&&(t=new Q(this)),t=t.reverse(),t.__actions__.push({func:Ni,args:[_s],thisArg:n}),new et(t,this.__chain__)}return this.thru(_s)}function Mm(){return Bu(this.__wrapped__,this.__actions__)}var Fm=Ai(function(e,t,r){oe.call(e,r)?++e[r]:Ot(e,r,1)});function Rm(e,t,r){var o=z(e)?Xa:xh;return r&&Fe(e,t,r)&&(t=n),o(e,H(t,3))}function Dm(e,t){var r=z(e)?$t:wu;return r(e,H(t,3))}var Lm=Zu(vc),Wm=Zu(yc);function Bm(e,t){return Oe(ki(e,t),1)}function Um(e,t){return Oe(ki(e,t),ln)}function Gm(e,t,r){return r=r===n?1:J(r),Oe(ki(e,t),r)}function Cc(e,t){var r=z(e)?Xe:Zt;return r(e,H(t,3))}function xc(e,t){var r=z(e)?sp:Au;return r(e,H(t,3))}var Hm=Ai(function(e,t,r){oe.call(e,r)?e[r].push(t):Ot(e,r,[t])});function Km(e,t,r,o){e=We(e)?e:zn(e),r=r&&!o?J(r):0;var a=e.length;return r<0&&(r=_e(a+r,0)),Ri(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&Dn(e,t,r)>-1}var qm=V(function(e,t,r){var o=-1,a=typeof t=="function",f=We(e)?y(e.length):[];return Zt(e,function(d){f[++o]=a?He(t,d,r):Ar(d,t,r)}),f}),$m=Ai(function(e,t,r){Ot(e,r,t)});function ki(e,t){var r=z(e)?le:Pu;return r(e,H(t,3))}function jm(e,t,r,o){return e==null?[]:(z(t)||(t=t==null?[]:[t]),r=o?n:r,z(r)||(r=r==null?[]:[r]),Iu(e,t,r))}var zm=Ai(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});function Ym(e,t,r){var o=z(e)?Io:nu,a=arguments.length<3;return o(e,H(t,4),r,a,Zt)}function Jm(e,t,r){var o=z(e)?ap:nu,a=arguments.length<3;return o(e,H(t,4),r,a,Au)}function Zm(e,t){var r=z(e)?$t:wu;return r(e,Mi(H(t,3)))}function Vm(e){var t=z(e)?vu:Kh;return t(e)}function Xm(e,t,r){(r?Fe(e,t,r):t===n)?t=1:t=J(t);var o=z(e)?Sh:qh;return o(e,t)}function Qm(e){var t=z(e)?Ah:jh;return t(e)}function ev(e){if(e==null)return 0;if(We(e))return Ri(e)?Wn(e):e.length;var t=Te(e);return t==at||t==ut?e.size:Vo(e).length}function tv(e,t,r){var o=z(e)?Mo:zh;return r&&Fe(e,t,r)&&(t=n),o(e,H(t,3))}var nv=V(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Fe(e,t[0],t[1])?t=[]:r>2&&Fe(t[0],t[1],t[2])&&(t=[t[0]]),Iu(e,Oe(t,1),[])}),Ti=Dp||function(){return we.Date.now()};function rv(e,t){if(typeof t!="function")throw new Qe(l);return e=J(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ec(e,t,r){return t=r?n:t,t=e&&t==null?e.length:t,Pt(e,$,n,n,n,n,t)}function Oc(e,t){var r;if(typeof t!="function")throw new Qe(l);return e=J(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var As=V(function(e,t,r){var o=G;if(r.length){var a=zt(r,$n(As));o|=L}return Pt(e,o,t,r,a)}),Pc=V(function(e,t,r){var o=G|B;if(r.length){var a=zt(r,$n(Pc));o|=L}return Pt(t,o,e,r,a)});function Nc(e,t,r){t=r?n:t;var o=Pt(e,N,n,n,n,n,n,t);return o.placeholder=Nc.placeholder,o}function kc(e,t,r){t=r?n:t;var o=Pt(e,U,n,n,n,n,n,t);return o.placeholder=kc.placeholder,o}function Tc(e,t,r){var o,a,f,d,h,m,w=0,b=!1,x=!1,T=!0;if(typeof e!="function")throw new Qe(l);t=it(t)||0,pe(r)&&(b=!!r.leading,x="maxWait"in r,f=x?_e(it(r.maxWait)||0,t):f,T="trailing"in r?!!r.trailing:T);function W(me){var dt=o,Mt=a;return o=a=n,w=me,d=e.apply(Mt,dt),d}function K(me){return w=me,h=Er(X,t),b?W(me):d}function Z(me){var dt=me-m,Mt=me-w,Zc=t-dt;return x?ke(Zc,f-Mt):Zc}function q(me){var dt=me-m,Mt=me-w;return m===n||dt>=t||dt<0||x&&Mt>=f}function X(){var me=Ti();if(q(me))return te(me);h=Er(X,Z(me))}function te(me){return h=n,T&&o?W(me):(o=a=n,d)}function je(){h!==n&&Gu(h),w=0,o=m=a=h=n}function Re(){return h===n?d:te(Ti())}function ze(){var me=Ti(),dt=q(me);if(o=arguments,a=this,m=me,dt){if(h===n)return K(m);if(x)return Gu(h),h=Er(X,t),W(m)}return h===n&&(h=Er(X,t)),d}return ze.cancel=je,ze.flush=Re,ze}var iv=V(function(e,t){return Su(e,1,t)}),ov=V(function(e,t,r){return Su(e,it(t)||0,r)});function sv(e){return Pt(e,ee)}function Ii(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Qe(l);var r=function(){var o=arguments,a=t?t.apply(this,o):o[0],f=r.cache;if(f.has(a))return f.get(a);var d=e.apply(this,o);return r.cache=f.set(a,d)||f,d};return r.cache=new(Ii.Cache||Et),r}Ii.Cache=Et;function Mi(e){if(typeof e!="function")throw new Qe(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function av(e){return Oc(2,e)}var uv=Yh(function(e,t){t=t.length==1&&z(t[0])?le(t[0],Ke(H())):le(Oe(t,1),Ke(H()));var r=t.length;return V(function(o){for(var a=-1,f=ke(o.length,r);++a<f;)o[a]=t[a].call(this,o[a]);return He(e,this,o)})}),ws=V(function(e,t){var r=zt(t,$n(ws));return Pt(e,L,n,t,r)}),Ic=V(function(e,t){var r=zt(t,$n(Ic));return Pt(e,Y,n,t,r)}),cv=Nt(function(e,t){return Pt(e,ve,n,n,n,t)});function fv(e,t){if(typeof e!="function")throw new Qe(l);return t=t===n?t:J(t),V(e,t)}function lv(e,t){if(typeof e!="function")throw new Qe(l);return t=t==null?0:_e(J(t),0),V(function(r){var o=r[t],a=Qt(r,0,t);return o&&jt(a,o),He(e,this,a)})}function dv(e,t,r){var o=!0,a=!0;if(typeof e!="function")throw new Qe(l);return pe(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),Tc(e,t,{leading:o,maxWait:t,trailing:a})}function pv(e){return Ec(e,1)}function hv(e,t){return ws(ss(t),e)}function gv(){if(!arguments.length)return[];var e=arguments[0];return z(e)?e:[e]}function mv(e){return tt(e,k)}function vv(e,t){return t=typeof t=="function"?t:n,tt(e,k,t)}function yv(e){return tt(e,C|k)}function _v(e,t){return t=typeof t=="function"?t:n,tt(e,C|k,t)}function Sv(e,t){return t==null||_u(e,t,be(t))}function lt(e,t){return e===t||e!==e&&t!==t}var Av=xi(Yo),wv=xi(function(e,t){return e>=t}),Sn=xu(function(){return arguments}())?xu:function(e){return he(e)&&oe.call(e,"callee")&&!lu.call(e,"callee")},z=y.isArray,bv=ja?Ke(ja):Th;function We(e){return e!=null&&Fi(e.length)&&!Tt(e)}function ge(e){return he(e)&&We(e)}function Cv(e){return e===!0||e===!1||he(e)&&Me(e)==sr}var en=Wp||Ms,xv=za?Ke(za):Ih;function Ev(e){return he(e)&&e.nodeType===1&&!Or(e)}function Ov(e){if(e==null)return!0;if(We(e)&&(z(e)||typeof e=="string"||typeof e.splice=="function"||en(e)||jn(e)||Sn(e)))return!e.length;var t=Te(e);if(t==at||t==ut)return!e.size;if(xr(e))return!Vo(e).length;for(var r in e)if(oe.call(e,r))return!1;return!0}function Pv(e,t){return wr(e,t)}function Nv(e,t,r){r=typeof r=="function"?r:n;var o=r?r(e,t):n;return o===n?wr(e,t,n,r):!!o}function bs(e){if(!he(e))return!1;var t=Me(e);return t==jr||t==Xl||typeof e.message=="string"&&typeof e.name=="string"&&!Or(e)}function kv(e){return typeof e=="number"&&pu(e)}function Tt(e){if(!pe(e))return!1;var t=Me(e);return t==zr||t==Sa||t==Vl||t==ed}function Mc(e){return typeof e=="number"&&e==J(e)}function Fi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=qt}function pe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function he(e){return e!=null&&typeof e=="object"}var Fc=Ya?Ke(Ya):Fh;function Tv(e,t){return e===t||Zo(e,t,ps(t))}function Iv(e,t,r){return r=typeof r=="function"?r:n,Zo(e,t,ps(t),r)}function Mv(e){return Rc(e)&&e!=+e}function Fv(e){if(vg(e))throw new j(u);return Eu(e)}function Rv(e){return e===null}function Dv(e){return e==null}function Rc(e){return typeof e=="number"||he(e)&&Me(e)==ur}function Or(e){if(!he(e)||Me(e)!=Ct)return!1;var t=ai(e);if(t===null)return!0;var r=oe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ri.call(r)==Ip}var Cs=Ja?Ke(Ja):Rh;function Lv(e){return Mc(e)&&e>=-qt&&e<=qt}var Dc=Za?Ke(Za):Dh;function Ri(e){return typeof e=="string"||!z(e)&&he(e)&&Me(e)==fr}function $e(e){return typeof e=="symbol"||he(e)&&Me(e)==Yr}var jn=Va?Ke(Va):Lh;function Wv(e){return e===n}function Bv(e){return he(e)&&Te(e)==lr}function Uv(e){return he(e)&&Me(e)==nd}var Gv=xi(Xo),Hv=xi(function(e,t){return e<=t});function Lc(e){if(!e)return[];if(We(e))return Ri(e)?ct(e):Le(e);if(hr&&e[hr])return Sp(e[hr]());var t=Te(e),r=t==at?Bo:t==ut?ei:zn;return r(e)}function It(e){if(!e)return e===0?e:0;if(e=it(e),e===ln||e===-ln){var t=e<0?-1:1;return t*zl}return e===e?e:0}function J(e){var t=It(e),r=t%1;return t===t?r?t-r:t:0}function Wc(e){return e?mn(J(e),0,gt):0}function it(e){if(typeof e=="number")return e;if($e(e))return qr;if(pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ru(e);var r=bd.test(e);return r||xd.test(e)?rp(e.slice(2),r?2:8):wd.test(e)?qr:+e}function Bc(e){return vt(e,Be(e))}function Kv(e){return e?mn(J(e),-qt,qt):e===0?e:0}function ie(e){return e==null?"":qe(e)}var qv=Kn(function(e,t){if(xr(t)||We(t)){vt(t,be(t),e);return}for(var r in t)oe.call(t,r)&&_r(e,r,t[r])}),Uc=Kn(function(e,t){vt(t,Be(t),e)}),Di=Kn(function(e,t,r,o){vt(t,Be(t),e,o)}),$v=Kn(function(e,t,r,o){vt(t,be(t),e,o)}),jv=Nt($o);function zv(e,t){var r=Hn(e);return t==null?r:yu(r,t)}var Yv=V(function(e,t){e=se(e);var r=-1,o=t.length,a=o>2?t[2]:n;for(a&&Fe(t[0],t[1],a)&&(o=1);++r<o;)for(var f=t[r],d=Be(f),h=-1,m=d.length;++h<m;){var w=d[h],b=e[w];(b===n||lt(b,Bn[w])&&!oe.call(e,w))&&(e[w]=f[w])}return e}),Jv=V(function(e){return e.push(n,rc),He(Gc,n,e)});function Zv(e,t){return Qa(e,H(t,3),mt)}function Vv(e,t){return Qa(e,H(t,3),zo)}function Xv(e,t){return e==null?e:jo(e,H(t,3),Be)}function Qv(e,t){return e==null?e:bu(e,H(t,3),Be)}function ey(e,t){return e&&mt(e,H(t,3))}function ty(e,t){return e&&zo(e,H(t,3))}function ny(e){return e==null?[]:vi(e,be(e))}function ry(e){return e==null?[]:vi(e,Be(e))}function xs(e,t,r){var o=e==null?n:vn(e,t);return o===n?r:o}function iy(e,t){return e!=null&&sc(e,t,Oh)}function Es(e,t){return e!=null&&sc(e,t,Ph)}var oy=Xu(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=ii.call(t)),e[t]=r},Ps(Ue)),sy=Xu(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=ii.call(t)),oe.call(e,t)?e[t].push(r):e[t]=[r]},H),ay=V(Ar);function be(e){return We(e)?mu(e):Vo(e)}function Be(e){return We(e)?mu(e,!0):Wh(e)}function uy(e,t){var r={};return t=H(t,3),mt(e,function(o,a,f){Ot(r,t(o,a,f),o)}),r}function cy(e,t){var r={};return t=H(t,3),mt(e,function(o,a,f){Ot(r,a,t(o,a,f))}),r}var fy=Kn(function(e,t,r){yi(e,t,r)}),Gc=Kn(function(e,t,r,o){yi(e,t,r,o)}),ly=Nt(function(e,t){var r={};if(e==null)return r;var o=!1;t=le(t,function(f){return f=Xt(f,e),o||(o=f.length>1),f}),vt(e,ls(e),r),o&&(r=tt(r,C|E|k,og));for(var a=t.length;a--;)rs(r,t[a]);return r});function dy(e,t){return Hc(e,Mi(H(t)))}var py=Nt(function(e,t){return e==null?{}:Uh(e,t)});function Hc(e,t){if(e==null)return{};var r=le(ls(e),function(o){return[o]});return t=H(t),Mu(e,r,function(o,a){return t(o,a[0])})}function hy(e,t,r){t=Xt(t,e);var o=-1,a=t.length;for(a||(a=1,e=n);++o<a;){var f=e==null?n:e[yt(t[o])];f===n&&(o=a,f=r),e=Tt(f)?f.call(e):f}return e}function gy(e,t,r){return e==null?e:br(e,t,r)}function my(e,t,r,o){return o=typeof o=="function"?o:n,e==null?e:br(e,t,r,o)}var Kc=tc(be),qc=tc(Be);function vy(e,t,r){var o=z(e),a=o||en(e)||jn(e);if(t=H(t,4),r==null){var f=e&&e.constructor;a?r=o?new f:[]:pe(e)?r=Tt(f)?Hn(ai(e)):{}:r={}}return(a?Xe:mt)(e,function(d,h,m){return t(r,d,h,m)}),r}function yy(e,t){return e==null?!0:rs(e,t)}function _y(e,t,r){return e==null?e:Wu(e,t,ss(r))}function Sy(e,t,r,o){return o=typeof o=="function"?o:n,e==null?e:Wu(e,t,ss(r),o)}function zn(e){return e==null?[]:Wo(e,be(e))}function Ay(e){return e==null?[]:Wo(e,Be(e))}function wy(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=it(r),r=r===r?r:0),t!==n&&(t=it(t),t=t===t?t:0),mn(it(e),t,r)}function by(e,t,r){return t=It(t),r===n?(r=t,t=0):r=It(r),e=it(e),Nh(e,t,r)}function Cy(e,t,r){if(r&&typeof r!="boolean"&&Fe(e,t,r)&&(t=r=n),r===n&&(typeof t=="boolean"?(r=t,t=n):typeof e=="boolean"&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=It(e),t===n?(t=e,e=0):t=It(t)),e>t){var o=e;e=t,t=o}if(r||e%1||t%1){var a=hu();return ke(e+a*(t-e+np("1e-"+((a+"").length-1))),t)}return es(e,t)}var xy=qn(function(e,t,r){return t=t.toLowerCase(),e+(r?$c(t):t)});function $c(e){return Os(ie(e).toLowerCase())}function jc(e){return e=ie(e),e&&e.replace(Od,gp).replace(jd,"")}function Ey(e,t,r){e=ie(e),t=qe(t);var o=e.length;r=r===n?o:mn(J(r),0,o);var a=r;return r-=t.length,r>=0&&e.slice(r,a)==t}function Oy(e){return e=ie(e),e&&ad.test(e)?e.replace(ba,mp):e}function Py(e){return e=ie(e),e&&pd.test(e)?e.replace(wo,"\\$&"):e}var Ny=qn(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),ky=qn(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Ty=Ju("toLowerCase");function Iy(e,t,r){e=ie(e),t=J(t);var o=t?Wn(e):0;if(!t||o>=t)return e;var a=(t-o)/2;return Ci(li(a),r)+e+Ci(fi(a),r)}function My(e,t,r){e=ie(e),t=J(t);var o=t?Wn(e):0;return t&&o<t?e+Ci(t-o,r):e}function Fy(e,t,r){e=ie(e),t=J(t);var o=t?Wn(e):0;return t&&o<t?Ci(t-o,r)+e:e}function Ry(e,t,r){return r||t==null?t=0:t&&(t=+t),Hp(ie(e).replace(bo,""),t||0)}function Dy(e,t,r){return(r?Fe(e,t,r):t===n)?t=1:t=J(t),ts(ie(e),t)}function Ly(){var e=arguments,t=ie(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Wy=qn(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});function By(e,t,r){return r&&typeof r!="number"&&Fe(e,t,r)&&(t=r=n),r=r===n?gt:r>>>0,r?(e=ie(e),e&&(typeof t=="string"||t!=null&&!Cs(t))&&(t=qe(t),!t&&Ln(e))?Qt(ct(e),0,r):e.split(t,r)):[]}var Uy=qn(function(e,t,r){return e+(r?" ":"")+Os(t)});function Gy(e,t,r){return e=ie(e),r=r==null?0:mn(J(r),0,e.length),t=qe(t),e.slice(r,r+t.length)==t}function Hy(e,t,r){var o=c.templateSettings;r&&Fe(e,t,r)&&(t=n),e=ie(e),t=Di({},t,o,nc);var a=Di({},t.imports,o.imports,nc),f=be(a),d=Wo(a,f),h,m,w=0,b=t.interpolate||Jr,x="__p += '",T=Uo((t.escape||Jr).source+"|"+b.source+"|"+(b===Ca?Ad:Jr).source+"|"+(t.evaluate||Jr).source+"|$","g"),W="//# sourceURL="+(oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vd+"]")+`
`;e.replace(T,function(q,X,te,je,Re,ze){return te||(te=je),x+=e.slice(w,ze).replace(Pd,vp),X&&(h=!0,x+=`' +
__e(`+X+`) +
'`),Re&&(m=!0,x+=`';
`+Re+`;
__p += '`),te&&(x+=`' +
((__t = (`+te+`)) == null ? '' : __t) +
'`),w=ze+q.length,q}),x+=`';
`;var K=oe.call(t,"variable")&&t.variable;if(!K)x=`with (obj) {
`+x+`
}
`;else if(_d.test(K))throw new j(p);x=(m?x.replace(rd,""):x).replace(id,"$1").replace(od,"$1;"),x="function("+(K||"obj")+`) {
`+(K?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(h?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+x+`return __p
}`;var Z=Yc(function(){return re(f,W+"return "+x).apply(n,d)});if(Z.source=x,bs(Z))throw Z;return Z}function Ky(e){return ie(e).toLowerCase()}function qy(e){return ie(e).toUpperCase()}function $y(e,t,r){if(e=ie(e),e&&(r||t===n))return ru(e);if(!e||!(t=qe(t)))return e;var o=ct(e),a=ct(t),f=iu(o,a),d=ou(o,a)+1;return Qt(o,f,d).join("")}function jy(e,t,r){if(e=ie(e),e&&(r||t===n))return e.slice(0,au(e)+1);if(!e||!(t=qe(t)))return e;var o=ct(e),a=ou(o,ct(t))+1;return Qt(o,0,a).join("")}function zy(e,t,r){if(e=ie(e),e&&(r||t===n))return e.replace(bo,"");if(!e||!(t=qe(t)))return e;var o=ct(e),a=iu(o,ct(t));return Qt(o,a).join("")}function Yy(e,t){var r=fe,o=Ne;if(pe(t)){var a="separator"in t?t.separator:a;r="length"in t?J(t.length):r,o="omission"in t?qe(t.omission):o}e=ie(e);var f=e.length;if(Ln(e)){var d=ct(e);f=d.length}if(r>=f)return e;var h=r-Wn(o);if(h<1)return o;var m=d?Qt(d,0,h).join(""):e.slice(0,h);if(a===n)return m+o;if(d&&(h+=m.length-h),Cs(a)){if(e.slice(h).search(a)){var w,b=m;for(a.global||(a=Uo(a.source,ie(xa.exec(a))+"g")),a.lastIndex=0;w=a.exec(b);)var x=w.index;m=m.slice(0,x===n?h:x)}}else if(e.indexOf(qe(a),h)!=h){var T=m.lastIndexOf(a);T>-1&&(m=m.slice(0,T))}return m+o}function Jy(e){return e=ie(e),e&&sd.test(e)?e.replace(wa,Cp):e}var Zy=qn(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Os=Ju("toUpperCase");function zc(e,t,r){return e=ie(e),t=r?n:t,t===n?_p(e)?Op(e):fp(e):e.match(t)||[]}var Yc=V(function(e,t){try{return He(e,n,t)}catch(r){return bs(r)?r:new j(r)}}),Vy=Nt(function(e,t){return Xe(t,function(r){r=yt(r),Ot(e,r,As(e[r],e))}),e});function Xy(e){var t=e==null?0:e.length,r=H();return e=t?le(e,function(o){if(typeof o[1]!="function")throw new Qe(l);return[r(o[0]),o[1]]}):[],V(function(o){for(var a=-1;++a<t;){var f=e[a];if(He(f[0],this,o))return He(f[1],this,o)}})}function Qy(e){return Ch(tt(e,C))}function Ps(e){return function(){return e}}function e_(e,t){return e==null||e!==e?t:e}var t_=Vu(),n_=Vu(!0);function Ue(e){return e}function Ns(e){return Ou(typeof e=="function"?e:tt(e,C))}function r_(e){return Nu(tt(e,C))}function i_(e,t){return ku(e,tt(t,C))}var o_=V(function(e,t){return function(r){return Ar(r,e,t)}}),s_=V(function(e,t){return function(r){return Ar(e,r,t)}});function ks(e,t,r){var o=be(t),a=vi(t,o);r==null&&!(pe(t)&&(a.length||!o.length))&&(r=t,t=e,e=this,a=vi(t,be(t)));var f=!(pe(r)&&"chain"in r)||!!r.chain,d=Tt(e);return Xe(a,function(h){var m=t[h];e[h]=m,d&&(e.prototype[h]=function(){var w=this.__chain__;if(f||w){var b=e(this.__wrapped__),x=b.__actions__=Le(this.__actions__);return x.push({func:m,args:arguments,thisArg:e}),b.__chain__=w,b}return m.apply(e,jt([this.value()],arguments))})}),e}function a_(){return we._===this&&(we._=Mp),this}function Ts(){}function u_(e){return e=J(e),V(function(t){return Tu(t,e)})}var c_=us(le),f_=us(Xa),l_=us(Mo);function Jc(e){return gs(e)?Fo(yt(e)):Gh(e)}function d_(e){return function(t){return e==null?n:vn(e,t)}}var p_=Qu(),h_=Qu(!0);function Is(){return[]}function Ms(){return!1}function g_(){return{}}function m_(){return""}function v_(){return!0}function y_(e,t){if(e=J(e),e<1||e>qt)return[];var r=gt,o=ke(e,gt);t=H(t),e-=gt;for(var a=Lo(o,t);++r<e;)t(r);return a}function __(e){return z(e)?le(e,yt):$e(e)?[e]:Le(gc(ie(e)))}function S_(e){var t=++Tp;return ie(e)+t}var A_=bi(function(e,t){return e+t},0),w_=cs("ceil"),b_=bi(function(e,t){return e/t},1),C_=cs("floor");function x_(e){return e&&e.length?mi(e,Ue,Yo):n}function E_(e,t){return e&&e.length?mi(e,H(t,2),Yo):n}function O_(e){return tu(e,Ue)}function P_(e,t){return tu(e,H(t,2))}function N_(e){return e&&e.length?mi(e,Ue,Xo):n}function k_(e,t){return e&&e.length?mi(e,H(t,2),Xo):n}var T_=bi(function(e,t){return e*t},1),I_=cs("round"),M_=bi(function(e,t){return e-t},0);function F_(e){return e&&e.length?Do(e,Ue):0}function R_(e,t){return e&&e.length?Do(e,H(t,2)):0}return c.after=rv,c.ary=Ec,c.assign=qv,c.assignIn=Uc,c.assignInWith=Di,c.assignWith=$v,c.at=jv,c.before=Oc,c.bind=As,c.bindAll=Vy,c.bindKey=Pc,c.castArray=gv,c.chain=bc,c.chunk=Cg,c.compact=xg,c.concat=Eg,c.cond=Xy,c.conforms=Qy,c.constant=Ps,c.countBy=Fm,c.create=zv,c.curry=Nc,c.curryRight=kc,c.debounce=Tc,c.defaults=Yv,c.defaultsDeep=Jv,c.defer=iv,c.delay=ov,c.difference=Og,c.differenceBy=Pg,c.differenceWith=Ng,c.drop=kg,c.dropRight=Tg,c.dropRightWhile=Ig,c.dropWhile=Mg,c.fill=Fg,c.filter=Dm,c.flatMap=Bm,c.flatMapDeep=Um,c.flatMapDepth=Gm,c.flatten=_c,c.flattenDeep=Rg,c.flattenDepth=Dg,c.flip=sv,c.flow=t_,c.flowRight=n_,c.fromPairs=Lg,c.functions=ny,c.functionsIn=ry,c.groupBy=Hm,c.initial=Bg,c.intersection=Ug,c.intersectionBy=Gg,c.intersectionWith=Hg,c.invert=oy,c.invertBy=sy,c.invokeMap=qm,c.iteratee=Ns,c.keyBy=$m,c.keys=be,c.keysIn=Be,c.map=ki,c.mapKeys=uy,c.mapValues=cy,c.matches=r_,c.matchesProperty=i_,c.memoize=Ii,c.merge=fy,c.mergeWith=Gc,c.method=o_,c.methodOf=s_,c.mixin=ks,c.negate=Mi,c.nthArg=u_,c.omit=ly,c.omitBy=dy,c.once=av,c.orderBy=jm,c.over=c_,c.overArgs=uv,c.overEvery=f_,c.overSome=l_,c.partial=ws,c.partialRight=Ic,c.partition=zm,c.pick=py,c.pickBy=Hc,c.property=Jc,c.propertyOf=d_,c.pull=jg,c.pullAll=Ac,c.pullAllBy=zg,c.pullAllWith=Yg,c.pullAt=Jg,c.range=p_,c.rangeRight=h_,c.rearg=cv,c.reject=Zm,c.remove=Zg,c.rest=fv,c.reverse=_s,c.sampleSize=Xm,c.set=gy,c.setWith=my,c.shuffle=Qm,c.slice=Vg,c.sortBy=nv,c.sortedUniq=im,c.sortedUniqBy=om,c.split=By,c.spread=lv,c.tail=sm,c.take=am,c.takeRight=um,c.takeRightWhile=cm,c.takeWhile=fm,c.tap=xm,c.throttle=dv,c.thru=Ni,c.toArray=Lc,c.toPairs=Kc,c.toPairsIn=qc,c.toPath=__,c.toPlainObject=Bc,c.transform=vy,c.unary=pv,c.union=lm,c.unionBy=dm,c.unionWith=pm,c.uniq=hm,c.uniqBy=gm,c.uniqWith=mm,c.unset=yy,c.unzip=Ss,c.unzipWith=wc,c.update=_y,c.updateWith=Sy,c.values=zn,c.valuesIn=Ay,c.without=vm,c.words=zc,c.wrap=hv,c.xor=ym,c.xorBy=_m,c.xorWith=Sm,c.zip=Am,c.zipObject=wm,c.zipObjectDeep=bm,c.zipWith=Cm,c.entries=Kc,c.entriesIn=qc,c.extend=Uc,c.extendWith=Di,ks(c,c),c.add=A_,c.attempt=Yc,c.camelCase=xy,c.capitalize=$c,c.ceil=w_,c.clamp=wy,c.clone=mv,c.cloneDeep=yv,c.cloneDeepWith=_v,c.cloneWith=vv,c.conformsTo=Sv,c.deburr=jc,c.defaultTo=e_,c.divide=b_,c.endsWith=Ey,c.eq=lt,c.escape=Oy,c.escapeRegExp=Py,c.every=Rm,c.find=Lm,c.findIndex=vc,c.findKey=Zv,c.findLast=Wm,c.findLastIndex=yc,c.findLastKey=Vv,c.floor=C_,c.forEach=Cc,c.forEachRight=xc,c.forIn=Xv,c.forInRight=Qv,c.forOwn=ey,c.forOwnRight=ty,c.get=xs,c.gt=Av,c.gte=wv,c.has=iy,c.hasIn=Es,c.head=Sc,c.identity=Ue,c.includes=Km,c.indexOf=Wg,c.inRange=by,c.invoke=ay,c.isArguments=Sn,c.isArray=z,c.isArrayBuffer=bv,c.isArrayLike=We,c.isArrayLikeObject=ge,c.isBoolean=Cv,c.isBuffer=en,c.isDate=xv,c.isElement=Ev,c.isEmpty=Ov,c.isEqual=Pv,c.isEqualWith=Nv,c.isError=bs,c.isFinite=kv,c.isFunction=Tt,c.isInteger=Mc,c.isLength=Fi,c.isMap=Fc,c.isMatch=Tv,c.isMatchWith=Iv,c.isNaN=Mv,c.isNative=Fv,c.isNil=Dv,c.isNull=Rv,c.isNumber=Rc,c.isObject=pe,c.isObjectLike=he,c.isPlainObject=Or,c.isRegExp=Cs,c.isSafeInteger=Lv,c.isSet=Dc,c.isString=Ri,c.isSymbol=$e,c.isTypedArray=jn,c.isUndefined=Wv,c.isWeakMap=Bv,c.isWeakSet=Uv,c.join=Kg,c.kebabCase=Ny,c.last=rt,c.lastIndexOf=qg,c.lowerCase=ky,c.lowerFirst=Ty,c.lt=Gv,c.lte=Hv,c.max=x_,c.maxBy=E_,c.mean=O_,c.meanBy=P_,c.min=N_,c.minBy=k_,c.stubArray=Is,c.stubFalse=Ms,c.stubObject=g_,c.stubString=m_,c.stubTrue=v_,c.multiply=T_,c.nth=$g,c.noConflict=a_,c.noop=Ts,c.now=Ti,c.pad=Iy,c.padEnd=My,c.padStart=Fy,c.parseInt=Ry,c.random=Cy,c.reduce=Ym,c.reduceRight=Jm,c.repeat=Dy,c.replace=Ly,c.result=hy,c.round=I_,c.runInContext=g,c.sample=Vm,c.size=ev,c.snakeCase=Wy,c.some=tv,c.sortedIndex=Xg,c.sortedIndexBy=Qg,c.sortedIndexOf=em,c.sortedLastIndex=tm,c.sortedLastIndexBy=nm,c.sortedLastIndexOf=rm,c.startCase=Uy,c.startsWith=Gy,c.subtract=M_,c.sum=F_,c.sumBy=R_,c.template=Hy,c.times=y_,c.toFinite=It,c.toInteger=J,c.toLength=Wc,c.toLower=Ky,c.toNumber=it,c.toSafeInteger=Kv,c.toString=ie,c.toUpper=qy,c.trim=$y,c.trimEnd=jy,c.trimStart=zy,c.truncate=Yy,c.unescape=Jy,c.uniqueId=S_,c.upperCase=Zy,c.upperFirst=Os,c.each=Cc,c.eachRight=xc,c.first=Sc,ks(c,function(){var e={};return mt(c,function(t,r){oe.call(c.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),c.VERSION=i,Xe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){c[e].placeholder=c}),Xe(["drop","take"],function(e,t){Q.prototype[e]=function(r){r=r===n?1:_e(J(r),0);var o=this.__filtered__&&!t?new Q(this):this.clone();return o.__filtered__?o.__takeCount__=ke(r,o.__takeCount__):o.__views__.push({size:ke(r,gt),type:e+(o.__dir__<0?"Right":"")}),o},Q.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),Xe(["filter","map","takeWhile"],function(e,t){var r=t+1,o=r==_a||r==jl;Q.prototype[e]=function(a){var f=this.clone();return f.__iteratees__.push({iteratee:H(a,3),type:r}),f.__filtered__=f.__filtered__||o,f}}),Xe(["head","last"],function(e,t){var r="take"+(t?"Right":"");Q.prototype[e]=function(){return this[r](1).value()[0]}}),Xe(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");Q.prototype[e]=function(){return this.__filtered__?new Q(this):this[r](1)}}),Q.prototype.compact=function(){return this.filter(Ue)},Q.prototype.find=function(e){return this.filter(e).head()},Q.prototype.findLast=function(e){return this.reverse().find(e)},Q.prototype.invokeMap=V(function(e,t){return typeof e=="function"?new Q(this):this.map(function(r){return Ar(r,e,t)})}),Q.prototype.reject=function(e){return this.filter(Mi(H(e)))},Q.prototype.slice=function(e,t){e=J(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Q(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(t=J(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},Q.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Q.prototype.toArray=function(){return this.take(gt)},mt(Q.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=c[o?"take"+(t=="last"?"Right":""):t],f=o||/^find/.test(t);a&&(c.prototype[t]=function(){var d=this.__wrapped__,h=o?[1]:arguments,m=d instanceof Q,w=h[0],b=m||z(d),x=function(X){var te=a.apply(c,jt([X],h));return o&&T?te[0]:te};b&&r&&typeof w=="function"&&w.length!=1&&(m=b=!1);var T=this.__chain__,W=!!this.__actions__.length,K=f&&!T,Z=m&&!W;if(!f&&b){d=Z?d:new Q(this);var q=e.apply(d,h);return q.__actions__.push({func:Ni,args:[x],thisArg:n}),new et(q,T)}return K&&Z?e.apply(this,h):(q=this.thru(x),K?o?q.value()[0]:q.value():q)})}),Xe(["pop","push","shift","sort","splice","unshift"],function(e){var t=ti[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);c.prototype[e]=function(){var a=arguments;if(o&&!this.__chain__){var f=this.value();return t.apply(z(f)?f:[],a)}return this[r](function(d){return t.apply(z(d)?d:[],a)})}}),mt(Q.prototype,function(e,t){var r=c[t];if(r){var o=r.name+"";oe.call(Gn,o)||(Gn[o]=[]),Gn[o].push({name:t,func:r})}}),Gn[wi(n,B).name]=[{name:"wrapper",func:n}],Q.prototype.clone=Jp,Q.prototype.reverse=Zp,Q.prototype.value=Vp,c.prototype.at=Em,c.prototype.chain=Om,c.prototype.commit=Pm,c.prototype.next=Nm,c.prototype.plant=Tm,c.prototype.reverse=Im,c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=Mm,c.prototype.first=c.prototype.head,hr&&(c.prototype[hr]=km),c},Yt=Pp();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(we._=Yt,define(function(){return Yt})):dn?((dn.exports=Yt)._=Yt,No._=Yt):we._=Yt}).call(ir)});var Ll=ot((WA,Dl)=>{st();Dl.exports=de("NeosProjectPackages")().NeosUiI18n});st();var Pr=class{constructor(i){this.SERIAL_VERSION_UID="d8a5aa78-978e-11e6-ae22-56b6b6499611",this.description=i}};var K_=(n,i="position",s="key")=>{let u=typeof i=="string"?N=>N[i]:i,l={},p={},v={},_={},A={},C={};n.forEach((N,U)=>{let L=N[s]?N[s]:String(U);l[L]=U;let Y=u(N),$=String(Y||U),ve=!1;if($.startsWith("start")){let ee=$.match(/start\s+(\d+)/),fe=ee&&ee[1]?Number(ee[1]):0;v[fe]||(v[fe]=[]),v[fe].push(L)}else if($.startsWith("end")){let ee=$.match(/end\s+(\d+)/),fe=ee&&ee[1]?Number(ee[1]):0;_[fe]||(_[fe]=[]),_[fe].push(L)}else if($.startsWith("before")){let ee=$.match(/before\s+(\S+)(\s+(\d+))?/);if(!ee)ve=!0;else{let fe=ee[1],Ne=ee[3]?Number(ee[3]):0;A[fe]||(A[fe]={}),A[fe][Ne]||(A[fe][Ne]=[]),A[fe][Ne].push(L)}}else if($.startsWith("after")){let ee=$.match(/after\s+(\S+)(\s+(\d+))?/);if(!ee)ve=!0;else{let fe=ee[1],Ne=ee[3]?Number(ee[3]):0;C[fe]||(C[fe]={}),C[fe][Ne]||(C[fe][Ne]=[]),C[fe][Ne].push(L)}}else ve=!0;if(ve){let ee=parseFloat($);(isNaN(ee)||!isFinite(ee))&&(ee=U),p[ee]||(p[ee]=[]),p[ee].push(L)}});let E=[],k=[],I=[],F=[],G=(N,U)=>{let L=Object.keys(N).map(Y=>Number(Y)).sort((Y,$)=>Y-$);return U?L:L.reverse()},B=(N,U)=>{N.forEach(L=>{if(!(F.indexOf(L)>=0)){if(F.push(L),A[L]){let Y=G(A[L],!0);for(let $ of Y)B(A[L][$],U)}if(U.push(L),C[L]){let Y=G(C[L],!1);for(let $ of Y)B(C[L][$],U)}}})};for(let N of G(v,!1))B(v[N],E);for(let N of G(p,!0))B(p[N],k);for(let N of G(_,!0))B(_[N],I);for(let N of Object.keys(A))if(!(F.indexOf(N)>=0))for(let U of G(A[N],!1))B(A[N][U],E);for(let N of Object.keys(C))if(!(F.indexOf(N)>=0))for(let U of G(C[N],!1))B(C[N][U],k);return[...E,...k,...I].map(N=>l[N]).map(N=>n[N])},Fs=K_;var tn=class extends Pr{constructor(i){super(i),this._registry=[]}set(i,s,u=0){if(typeof i!="string")throw new Error("Key must be a string");if(typeof u!="string"&&typeof u!="number")throw new Error("Position must be a string or a number");let l={key:i,value:s};u&&(l.position=u);let p=this._registry.findIndex(v=>v.key===i);return p===-1?this._registry.push(l):this._registry[p]=l,s}get(i){if(typeof i!="string")return console.error("Key must be a string"),null;let s=this._registry.find(u=>u.key===i);return s?s.value:null}_getChildrenWrapped(i){let s=this._registry.filter(u=>u.key.indexOf(i+"/")===0);return Fs(s)}getChildrenAsObject(i){let s={};return this._getChildrenWrapped(i).forEach(u=>{s[u.key]=u.value}),s}getChildren(i){return this._getChildrenWrapped(i).map(s=>s.value)}has(i){return typeof i!="string"?(console.error("Key must be a string"),!1):!!this._registry.find(s=>s.key===i)}_getAllWrapped(){return Fs(this._registry)}getAllAsObject(){let i={};return this._getAllWrapped().forEach(s=>{i[s.key]=s.value}),i}getAllAsList(){return this._getAllWrapped().map(i=>Object.assign({id:i.key},i.value))}};var Xc=de("manifest");var Ie=class extends Error{constructor(s,u,l=""){super(s);P(this,"code");P(this,"severity","error");P(this,"externalMessage");this.code=u,this.externalMessage=l}};var Qc=n=>new Rs(n.apiDomain,n.apiKey),Rs=class{constructor(i,s){P(this,"apiDomain","");P(this,"apiKey","");P(this,"hasApiKey",()=>this.apiKey!==null&&this.apiKey!=="");P(this,"generate",async(i,s,u={})=>{let p=(await this.fetch(`/api/v1/chat?language=${s}`,{method:"POST",body:JSON.stringify({module:i,platform:"neos",user_input:u})}))?.data?.message?.message;return typeof p=="string"&&p.startsWith('"')&&p.endsWith('"')&&(p=p.substring(1,p.length-1)),p});P(this,"fetch",async(i,s={})=>{if(!this.apiKey)throw new Ie("This feature is not available in the free version.","1688157373215");let u=await fetch(this.apiDomain+i,Object.assign({},s,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`,Accept:"application/json"}})),l=await u.json();if(u.status===401)throw new Ie("The NEOSidekick api key provided is not valid.","1688158193038");if(u.status<200||u.status>=400){let p=l?.message;throw l?.errors&&(p+="<br>"+Object.values(l.errors).join("<br>")),new Ie("An error occurred while asking NEOSidekick.","1688158257149",p)}return l});this.apiDomain=i,this.apiKey=s}};st();var ef=de("NeosProjectPackages")().NeosUiBackendConnectorDefault,{fetchWithErrorHandling:AS}=de("NeosProjectPackages")().NeosUiBackendConnector;var on=D(Ge());function pt(n){for(var i=arguments.length,s=Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];if(!1)var l,p;throw Error("[Immer] minified error nr: "+n+(s.length?" "+s.map(function(v){return"'"+v+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Yn(n){return!!n&&!!n[Ye]}function wn(n){var i;return!!n&&(function(s){if(!s||typeof s!="object")return!1;var u=Object.getPrototypeOf(s);if(u===null)return!0;var l=Object.hasOwnProperty.call(u,"constructor")&&u.constructor;return l===Object||typeof l=="function"&&Function.toString.call(l)===X_}(n)||Array.isArray(n)||!!n[ff]||!!(!((i=n.constructor)===null||i===void 0)&&i[ff])||$s(n)||js(n))}function kr(n,i,s){s===void 0&&(s=!1),Jn(n)===0?(s?Object.keys:Vs)(n).forEach(function(u){s&&typeof u=="symbol"||i(u,n[u],n)}):n.forEach(function(u,l){return i(l,u,n)})}function Jn(n){var i=n[Ye];return i?i.i>3?i.i-4:i.i:Array.isArray(n)?1:$s(n)?2:js(n)?3:0}function Us(n,i){return Jn(n)===2?n.has(i):Object.prototype.hasOwnProperty.call(n,i)}function $_(n,i){return Jn(n)===2?n.get(i):n[i]}function lf(n,i,s){var u=Jn(n);u===2?n.set(i,s):u===3?n.add(s):n[i]=s}function j_(n,i){return n===i?n!==0||1/n==1/i:n!=n&&i!=i}function $s(n){return Z_&&n instanceof Map}function js(n){return V_&&n instanceof Set}function An(n){return n.o||n.t}function zs(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var i=Q_(n);delete i[Ye];for(var s=Vs(i),u=0;u<s.length;u++){var l=s[u],p=i[l];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(i[l]={configurable:!0,writable:!0,enumerable:p.enumerable,value:n[l]})}return Object.create(Object.getPrototypeOf(n),i)}function Ys(n,i){return i===void 0&&(i=!1),Js(n)||Yn(n)||!wn(n)||(Jn(n)>1&&(n.set=n.add=n.clear=n.delete=z_),Object.freeze(n),i&&kr(n,function(s,u){return Ys(u,!0)},!0)),n}function z_(){pt(2)}function Js(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function _t(n){var i=e0[n];return i||pt(18,n),i}function nf(){return Tr}function Ds(n,i){i&&(_t("Patches"),n.u=[],n.s=[],n.v=i)}function Wi(n){Gs(n),n.p.forEach(Y_),n.p=null}function Gs(n){n===Tr&&(Tr=n.l)}function rf(n){return Tr={p:[],l:Tr,h:n,m:!0,_:0}}function Y_(n){var i=n[Ye];i.i===0||i.i===1?i.j():i.g=!0}function Ls(n,i){i._=i.p.length;var s=i.p[0],u=n!==void 0&&n!==s;return i.h.O||_t("ES5").S(i,n,u),u?(s[Ye].P&&(Wi(i),pt(4)),wn(n)&&(n=Bi(i,n),i.l||Ui(i,n)),i.u&&_t("Patches").M(s[Ye].t,n,i.u,i.s)):n=Bi(i,s,[]),Wi(i),i.u&&i.v(i.u,i.s),n!==df?n:void 0}function Bi(n,i,s){if(Js(i))return i;var u=i[Ye];if(!u)return kr(i,function(_,A){return of(n,u,i,_,A,s)},!0),i;if(u.A!==n)return i;if(!u.P)return Ui(n,u.t,!0),u.t;if(!u.I){u.I=!0,u.A._--;var l=u.i===4||u.i===5?u.o=zs(u.k):u.o,p=l,v=!1;u.i===3&&(p=new Set(l),l.clear(),v=!0),kr(p,function(_,A){return of(n,u,l,_,A,s,v)}),Ui(n,l,!1),s&&n.u&&_t("Patches").N(u,s,n.u,n.s)}return u.o}function of(n,i,s,u,l,p,v){if(Yn(l)){var _=Bi(n,l,p&&i&&i.i!==3&&!Us(i.R,u)?p.concat(u):void 0);if(lf(s,u,_),!Yn(_))return;n.m=!1}else v&&s.add(l);if(wn(l)&&!Js(l)){if(!n.h.D&&n._<1)return;Bi(n,l),i&&i.A.l||Ui(n,l)}}function Ui(n,i,s){s===void 0&&(s=!1),!n.l&&n.h.D&&n.m&&Ys(i,s)}function Ws(n,i){var s=n[Ye];return(s?An(s):n)[i]}function sf(n,i){if(i in n)for(var s=Object.getPrototypeOf(n);s;){var u=Object.getOwnPropertyDescriptor(s,i);if(u)return u;s=Object.getPrototypeOf(s)}}function Hs(n){n.P||(n.P=!0,n.l&&Hs(n.l))}function Bs(n){n.o||(n.o=zs(n.t))}function Ks(n,i,s){var u=$s(i)?_t("MapSet").F(i,s):js(i)?_t("MapSet").T(i,s):n.O?function(l,p){var v=Array.isArray(l),_={i:v?1:0,A:p?p.A:nf(),P:!1,I:!1,R:{},l:p,t:l,k:null,o:null,j:null,C:!1},A=_,C=qs;v&&(A=[_],C=Nr);var E=Proxy.revocable(A,C),k=E.revoke,I=E.proxy;return _.k=I,_.j=k,I}(i,s):_t("ES5").J(i,s);return(s?s.A:nf()).p.push(u),u}function J_(n){return Yn(n)||pt(22,n),function i(s){if(!wn(s))return s;var u,l=s[Ye],p=Jn(s);if(l){if(!l.P&&(l.i<4||!_t("ES5").K(l)))return l.t;l.I=!0,u=af(s,p),l.I=!1}else u=af(s,p);return kr(u,function(v,_){l&&$_(l.t,v)===_||lf(u,v,i(_))}),p===3?new Set(u):u}(n)}function af(n,i){switch(i){case 2:return new Map(n);case 3:return Array.from(n)}return zs(n)}var uf,Tr,Zs=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Z_=typeof Map<"u",V_=typeof Set<"u",cf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",df=Zs?Symbol.for("immer-nothing"):((uf={})["immer-nothing"]=!0,uf),ff=Zs?Symbol.for("immer-draftable"):"__$immer_draftable",Ye=Zs?Symbol.for("immer-state"):"__$immer_state";var X_=""+Object.prototype.constructor,Vs=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,Q_=Object.getOwnPropertyDescriptors||function(n){var i={};return Vs(n).forEach(function(s){i[s]=Object.getOwnPropertyDescriptor(n,s)}),i},e0={},qs={get:function(n,i){if(i===Ye)return n;var s=An(n);if(!Us(s,i))return function(l,p,v){var _,A=sf(p,v);return A?"value"in A?A.value:(_=A.get)===null||_===void 0?void 0:_.call(l.k):void 0}(n,s,i);var u=s[i];return n.I||!wn(u)?u:u===Ws(n.t,i)?(Bs(n),n.o[i]=Ks(n.A.h,u,n)):u},has:function(n,i){return i in An(n)},ownKeys:function(n){return Reflect.ownKeys(An(n))},set:function(n,i,s){var u=sf(An(n),i);if(u?.set)return u.set.call(n.k,s),!0;if(!n.P){var l=Ws(An(n),i),p=l?.[Ye];if(p&&p.t===s)return n.o[i]=s,n.R[i]=!1,!0;if(j_(s,l)&&(s!==void 0||Us(n.t,i)))return!0;Bs(n),Hs(n)}return n.o[i]===s&&(s!==void 0||i in n.o)||Number.isNaN(s)&&Number.isNaN(n.o[i])||(n.o[i]=s,n.R[i]=!0),!0},deleteProperty:function(n,i){return Ws(n.t,i)!==void 0||i in n.t?(n.R[i]=!1,Bs(n),Hs(n)):delete n.R[i],n.o&&delete n.o[i],!0},getOwnPropertyDescriptor:function(n,i){var s=An(n),u=Reflect.getOwnPropertyDescriptor(s,i);return u&&{writable:!0,configurable:n.i!==1||i!=="length",enumerable:u.enumerable,value:s[i]}},defineProperty:function(){pt(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){pt(12)}},Nr={};kr(qs,function(n,i){Nr[n]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),Nr.deleteProperty=function(n,i){return Nr.set.call(this,n,i,void 0)},Nr.set=function(n,i,s){return qs.set.call(this,n[0],i,s,n[0])};var t0=function(){function n(s){var u=this;this.O=cf,this.D=!0,this.produce=function(l,p,v){if(typeof l=="function"&&typeof p!="function"){var _=p;p=l;var A=u;return function(B){var O=this;B===void 0&&(B=_);for(var N=arguments.length,U=Array(N>1?N-1:0),L=1;L<N;L++)U[L-1]=arguments[L];return A.produce(B,function(Y){var $;return($=p).call.apply($,[O,Y].concat(U))})}}var C;if(typeof p!="function"&&pt(6),v!==void 0&&typeof v!="function"&&pt(7),wn(l)){var E=rf(u),k=Ks(u,l,void 0),I=!0;try{C=p(k),I=!1}finally{I?Wi(E):Gs(E)}return typeof Promise<"u"&&C instanceof Promise?C.then(function(B){return Ds(E,v),Ls(B,E)},function(B){throw Wi(E),B}):(Ds(E,v),Ls(C,E))}if(!l||typeof l!="object"){if((C=p(l))===void 0&&(C=l),C===df&&(C=void 0),u.D&&Ys(C,!0),v){var F=[],G=[];_t("Patches").M(l,C,F,G),v(F,G)}return C}pt(21,l)},this.produceWithPatches=function(l,p){if(typeof l=="function")return function(C){for(var E=arguments.length,k=Array(E>1?E-1:0),I=1;I<E;I++)k[I-1]=arguments[I];return u.produceWithPatches(C,function(F){return l.apply(void 0,[F].concat(k))})};var v,_,A=u.produce(l,p,function(C,E){v=C,_=E});return typeof Promise<"u"&&A instanceof Promise?A.then(function(C){return[C,v,_]}):[A,v,_]},typeof s?.useProxies=="boolean"&&this.setUseProxies(s.useProxies),typeof s?.autoFreeze=="boolean"&&this.setAutoFreeze(s.autoFreeze)}var i=n.prototype;return i.createDraft=function(s){wn(s)||pt(8),Yn(s)&&(s=J_(s));var u=rf(this),l=Ks(this,s,void 0);return l[Ye].C=!0,Gs(u),l},i.finishDraft=function(s,u){var l=s&&s[Ye],p=l.A;return Ds(p,u),Ls(void 0,p)},i.setAutoFreeze=function(s){this.D=s},i.setUseProxies=function(s){s&&!cf&&pt(20),this.O=s},i.applyPatches=function(s,u){var l;for(l=u.length-1;l>=0;l--){var p=u[l];if(p.path.length===0&&p.op==="replace"){s=p.value;break}}l>-1&&(u=u.slice(l+1));var v=_t("Patches").$;return Yn(s)?v(s,u):this.produce(s,function(_){return v(_,u)})},n}(),Je=new t0,Xs=Je.produce,xS=Je.produceWithPatches.bind(Je),ES=Je.setAutoFreeze.bind(Je),OS=Je.setUseProxies.bind(Je),PS=Je.applyPatches.bind(Je),NS=Je.createDraft.bind(Je),kS=Je.finishDraft.bind(Je),pf=Xs;var Yf=D(zf());var Jf=(n,i)=>new pa(n,i),pa=class{constructor(i,s){P(this,"globalRegistry");P(this,"store");P(this,"guestFrameContentDocument",null);P(this,"nodeTypesRegistry");P(this,"externalService");P(this,"getGuestFrameContentDocument",async()=>{let i=document.getElementsByName("neos-content-main")[0];for(;!i;)await new Promise(s=>setTimeout(s,100)),i=document.getElementsByName("neos-content-main")[0];for(;!i.contentDocument||i.contentDocument.readyState==="loading"||!i?.contentDocument?.title;)await new Promise(s=>setTimeout(s,100));return this.guestFrameContentDocument=i?.contentDocument,this.guestFrameContentDocument});P(this,"getGuestFrameDocumentTitle",async()=>(await this.getGuestFrameContentDocument())?.title);P(this,"getGuestFrameDocumentHtml",async()=>(await this.getGuestFrameContentDocument())?.body?.innerHTML);P(this,"getCurrentDocumentNode",()=>{let i=this.store.getState();return on.selectors.CR.Nodes.documentNodeSelector(i)});P(this,"getCurrentDocumentParentNode",()=>{let i=this.store.getState(),s=this.getCurrentDocumentNode();return on.selectors.CR.Nodes.nodeByContextPath(i)(s.parent)});P(this,"getCurrentDocumentNodeType",()=>{let i=this.getCurrentDocumentNode();return this.globalRegistry.get("@neos-project/neos-ui-contentrepository").get(i?.nodeType)});P(this,"getCurrentDocumentTargetAudience",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.targetAudience;return i?this.processClientEval(i):""});P(this,"getCurrentDocumentPageBriefing",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.pageBriefing;return i?this.processClientEval(i):""});P(this,"getCurrentDocumentFocusKeyword",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.focusKeyword;return i?await this.processClientEval(i):""});P(this,"processClientEval",async(i,s,u)=>{if(typeof i=="string"&&(i.startsWith("SidekickClientEval:")||i.startsWith("ClientEval:")))try{s=s??this.getCurrentDocumentNode();let l=on.selectors.UI.Inspector.transientValues(this.store.getState());s=this.generateNodeForContext(s,l),u=u??this.getCurrentDocumentParentNode();let p=null,v=null;(i.indexOf("documentTitle")!==-1||i.indexOf("documentContent")!==-1)&&(p=await this.getGuestFrameDocumentTitle(),v=await this.getGuestFrameDocumentHtml());let _=this.getImageMetadata,A=(I,F)=>this.getAssetProperty("title",I,F),C=(I,F)=>this.getAssetProperty("caption",I,F),E=Object.getPrototypeOf(async function(){}).constructor;return await new E("node,parentNode,documentTitle,documentContent,AssetUri,AssetTitle,AssetCaption","return "+i.replace("SidekickClientEval:","").replace("ClientEval:",""))(s,u,p,v,_,A,C)}catch(l){throw l instanceof Ie?l:(console.error(l),new Ie('An error occurred while trying to evaluate "'+i+'"',"1694682118365",i))}return i});P(this,"processValueWithClientEval",async(i,s,u)=>{if(typeof i=="string")return this.processClientEval(i,s,u);if(typeof i=="object"&&i!==null)return this.processObjectWithClientEval(i,s,u);if(typeof i=="boolean")return i;if(i===null)return null;if(Array.isArray(i))return Promise.all(i.map(async l=>this.processObjectWithClientEval(l,s,u)))});P(this,"processObjectWithClientEval",async(i,s,u)=>{let l={};return await Promise.all(Object.keys(i).map(async p=>{let v=i[p];l[p]=await this.processValueWithClientEval(v,s,u)})),l});P(this,"getImageMetadata",async i=>{if(!i||!i?.__identity)throw new Ie("The property does not have a valid image.","1694595562191");let{loadImageMetadata:s}=ef.get().endpoints,u,l;try{let v=await s(i?.__identity);u=v?.originalImageResourceUri,l=v?.previewImageResourceUri}catch{throw new Ie("Could not fetch image object.","1694595598880")}if(!u||u==="")throw new Ie("The given image does not have a correct url.","1694595462402");let p=[];return p.push(this.prependConfiguredDomainToImageUri(u)),l&&p.push(this.prependConfiguredDomainToImageUri(l)),p});P(this,"getAssetProperty",async(i,s,u="")=>{if(!s||!s?.__identity)return u;try{return(await(await fetch("/neosidekick/aiassistant/service/imageTitleAndCaption?image="+s?.__identity,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"}})).json())[i]||u}catch{return u}});this.globalRegistry=i,this.store=s,this.nodeTypesRegistry=i.get("@neos-project/neos-ui-contentrepository"),this.externalService=i.get("NEOSidekick.AiAssistant").get("externalService")}prependConfiguredDomainToImageUri(i){let s=this.globalRegistry.get("NEOSidekick.AiAssistant").get("configuration").domain,u=i.replace("http://","").replace("https://","").split("/");return u.shift(),u.unshift(s),u.join("/")}getCurrentlyFocusedNodePathAndProperty(){let i=this.store.getState(),s=this.globalRegistry.get("@neos-project/neos-ui-contentrepository"),u=i?.cr?.nodes?.focused?.contextPaths[0],l=u?on.selectors.CR.Nodes.nodeByContextPath(i)(u):null;return{nodePath:u,node:l,property:i?.ui?.contentCanvas?.currentlyEditedPropertyName,nodeType:l?s.get(l?.nodeType):null,parentNode:l?on.selectors.CR.Nodes.nodesByContextPathSelector(i)[l.parent]:null}}async evaluateNodeTypeConfigurationAndStartGeneration(i,s,u,l,p=!1){if(!u||s[0]==="_")return;let v=u.properties?u.properties[s]:null;try{if(v?.options?.sidekick?.onCreate?.module)throw new Ie("Please do not use options.sidekick.onCreate.module anymore. Read the docs to find out about the new configuration.","1696264259260");if(!v?.options?.sidekick?.module||p&&v?.options?.sidekick?.onCreate&&!await this.processValueWithClientEval(v?.options?.sidekick?.onCreate,i,l))return;if(!v?.ui?.inlineEditable)throw new Ie("You can only generate content on inline editable properties","1688395273728");if(!this.externalService.hasApiKey())throw new Ie("This feature is not available in the free version.","1688157373215")}catch(E){let k=this.globalRegistry.get("i18n");this.store.dispatch(on.actions.UI.FlashMessages.add(E?.code??E?.message,E?.code?k.translate("NEOSidekick.AiAssistant:Error:"+E.code):E?.message,E?.severity??"error"));return}let _=JSON.parse(JSON.stringify(v.options.sidekick)),A=this.globalRegistry.get("NEOSidekick.AiAssistant").get("contentCanvasService"),C=await this.processObjectWithClientEval(_,i,l);A.streamGenerationIntoInlineProperty(i.contextPath,s,C)}generateNodeForContext(i,s){return s?Xs(i,u=>{let l=(0,Yf.default)(s,p=>p?.value);u.properties=Object.assign({},u.properties,l)}):i}};var Zf=D(Ge());var Vf=(n,i,s)=>new ha(n,i,s),ha=class{constructor(i,s,u){P(this,"globalRegistry");P(this,"store");P(this,"iFrameApiService");P(this,"currentlyHandledNodePath",null);P(this,"streamGenerationIntoInlineProperty",(i,s,u)=>{this.iFrameApiService.callModule({target:{nodePath:i,propertyName:s},...u},()=>this.currentlyHandledNodePath=i)});P(this,"onNodeRemoved",i=>{this.currentlyHandledNodePath===i&&(this.iFrameApiService.cancelCallModule(),this.unsetCurrentlyHandledNodePath())});P(this,"getEditorContent",(i,s)=>this.getPropertyInlineField(i,s)?.ckeditorInstance?.getData());P(this,"getSelectedContent",(i,s)=>{let l=this.getPropertyInlineField(i,s)?.ckeditorInstance;return l?.data.stringify(l.model.getSelectedContent(l.model.document.selection))});P(this,"insertTextIntoInlineEditor",(i,s,u,l)=>{let v=this.getPropertyInlineField(i,s)?.ckeditorInstance,_=v.model.document.selection.getFirstRange();if(l){let A=u.lastIndexOf("</");A+10<u.length&&(A=u.length),u=u.substring(0,A)+"&nbsp;"+u.substring(A)}v.model.change(A=>{let C=v.data.processor.toView(u),E=v.data.toModel(C),k=v.model.insertContent(E,_);v.editing.view.focus(),A.setSelection(k)})});P(this,"handleMessage",i=>{switch(i?.data?.eventName){case"write-content":let{nodePath:s,propertyName:u,value:l,isFinished:p}=i?.data?.data;s&&u&&(console.info(s+": "+l),this.setPropertyValue(s,u,l||"",p||!1),p&&this.handleStreamingFinished());break;case"stopped-generation":this.handleStreamingFinished();break;case"error":let v=i?.data?.data?.message;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+v,"error",v),this.handleStreamingFinished();break;default:let _="Unknown message event: "+i?.data?.eventName;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+_,"error",_),this.handleStreamingFinished()}});P(this,"handleStreamingFinished",()=>{this.resetTypingCaret(),this.unsetCurrentlyHandledNodePath(),this.iFrameApiService.setStreamingFinished()});P(this,"getPropertyInlineField",(i,s)=>document.getElementsByName("neos-content-main")[0]?.contentDocument?.querySelector(`[data-__neos-editable-node-contextpath="${i}"][data-__neos-property="${s}"]`)||void 0);P(this,"setPropertyValue",(i,s,u,l)=>{let p=this.getPropertyInlineField(i,s);if(!p&&l){let _="Could not find inline field for nodePath: "+i+" and propertyName: "+s;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+_,"error",_),this.unsetCurrentlyHandledNodePath();return}if(!p)return;if(!this.store.getState()?.cr?.nodes?.byContextPath.hasOwnProperty(i)){this.handleStreamingFinished();return}p.ckeditorInstance?.setData(u),p.classList.add("typing-caret")});this.globalRegistry=i,this.store=s,this.iFrameApiService=u,this.iFrameApiService.listenToMessages(this.handleMessage)}unsetCurrentlyHandledNodePath(){this.currentlyHandledNodePath=null}resetTypingCaret(){let u=document.getElementsByName("neos-content-main")[0]?.contentDocument?.querySelector(".typing-caret");u&&u.classList.remove("typing-caret")}addFlashMessage(i,s,u="error",l){let p=this.globalRegistry.get("i18n");this.store.dispatch(Zf.actions.UI.FlashMessages.add(i,p.translate("NEOSidekick.AiAssistant:Error:"+i,s,{0:l}),u))}};var Xf=()=>new ga,ga=class{constructor(){P(this,"isStreaming",!1);P(this,"unsyncedWebContextIsNewPage");P(this,"unsyncedWebContextData");P(this,"callModuleQueue",[]);P(this,"callModule",(i,s)=>{if(this.isStreaming){this.callModuleQueue.push({data:i,onStarted:s});return}this.isStreaming=!0;let u={version:"1.0",eventName:"call-module",data:{platform:"neos",...i}};this.sendMessage(u,s)});P(this,"setStreamingFinished",()=>{this.isStreaming=!1,this.unsyncedWebContextData&&(this.updateWebContext(this.unsyncedWebContextIsNewPage||!1,this.unsyncedWebContextData),this.unsyncedWebContextData=void 0,this.unsyncedWebContextIsNewPage=void 0);let i=this.callModuleQueue.shift();if(i){let{data:s,onStarted:u}=i;this.callModule(s,u)}});P(this,"cancelCallModule",()=>{let i={version:"1.0",eventName:"cancel-call-module"};this.setStreamingFinished(),this.sendMessage(i)});P(this,"updateWebContext",(i,s)=>{if(this.isStreaming){this.unsyncedWebContextIsNewPage=i,this.unsyncedWebContextData=s;return}let u={version:"1.0",eventName:i?"page-changed":"page-updated",data:s};this.sendMessage(u)});P(this,"listenToMessages",i=>{let s=this.getAssistantFrame();s?window.addEventListener("message",u=>{u.source===s.contentWindow&&i(u)}):setTimeout(()=>this.listenToMessages(i),250)});P(this,"sendMessage",(i,s,u=0)=>{let l=this.getAssistantFrame();if(l)console.log("Sending message to frame",i),l.contentWindow?.postMessage(i,"*"),s&&s();else{if(u>20){alert("NEOSidekick AI-Error: Could not load assistant frame, please reload the page or contact support@neosidekick.com.");return}u++,setTimeout(()=>this.sendMessage(i,s),250)}});P(this,"getAssistantFrame",()=>{let i=document.getElementById("neosidekickAssistant");return i?.dataset.hasOwnProperty("loaded")&&i.contentWindow?i:null})}};var ro=D(el());var K1=(n,i)=>(0,ro.action)("@neosidekick/ai-assistant/UI/ModifyDialog/OPEN",{selectedText:i,fullText:n}),q1=()=>(0,ro.action)("@neosidekick/ai-assistant/UI/ModifyDialog/CANCEL"),$1=n=>(0,ro.action)("@neosidekick/ai-assistant/UI/ModifyDialog/APPLY",{newText:n}),En={openModal:K1,cancelModal:q1,applyModal:$1},tl=(n,i)=>pf(n,s=>{switch(i.type){case"@neos/neos-ui/System/INIT":{s.plugins.NEOSidekick={},s.plugins.NEOSidekick.AiAssistant={},s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/OPEN":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!0,s.plugins.NEOSidekick.AiAssistant.fullText=i.payload.fullText,s.plugins.NEOSidekick.AiAssistant.selectedText=i.payload.selectedText;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/CANCEL":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/APPLY":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}}}),io={isModalOpen:n=>n.plugins?.NEOSidekick?.AiAssistant?.isModalOpen,fullText:n=>n.plugins?.NEOSidekick?.AiAssistant?.fullText,selectedText:n=>n.plugins?.NEOSidekick?.AiAssistant?.selectedText};var Rr=D(ma());var De=D(ht()),ul=D(Wt()),xe=D(St()),cl=D(At()),nr=D(Bt()),tr=D(Ge()),fl=D(ma());var sn=class extends De.Component{constructor(i){super(i),this.state={suggestionsState:"none",suggestions:[]}}renderIcon(i){return i?De.default.createElement(nr.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):De.default.createElement(nr.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}getLanguage(){let{activeContentDimensions:i,frontendConfiguration:s}=this.props;return i.language?i.language[0]:s.defaultLanguage}async fetchSuggestions(i=3){let{externalService:s,contentService:u,addFlashMessage:l,i18nRegistry:p,node:v,parentNode:_,options:A}=this.props,C=A.module,E=A.arguments??{};this.setState({suggestionsState:"is-loading"});try{let k=await u.processObjectWithClientEval(E,v,_);k=Object.keys(k).map(F=>({identifier:F,value:k[F]}));let I=await s.generate(C,this.getLanguage(),k);if(!Array.isArray(I)||I.length===0){if(i===0)throw new Error(p.translate("NEOSidekick.AiAssistant:Editors.FocusKeywordEditor:suggestionsFailed","Could not calculate focus keyword suggestions for the page."));this.fetchSuggestions(i-1);return}this.setState({suggestionsState:"loaded",suggestions:I})}catch(k){this.setState({suggestionsState:"none"}),l(k?.code??k?.message,k?.code?p.translate("NEOSidekick.AiAssistant:Error:"+k.code,k.message,{0:k.externalMessage}):k.message,k?.severity??"error")}}render(){let{value:i,commit:s,i18nRegistry:u}=this.props,{suggestionsState:l,suggestions:p}=this.state,v=`https://app.ahrefs.com/keywords-explorer/google/${this.getLanguage().replace("en","uk")}/overview?keyword=${i}`,_="https://ads.google.com/aw/keywordplanner/plan/keywords/historical";return De.default.createElement("div",{style:{display:"flex",flexDirection:"column"}},De.default.createElement("div",null,De.default.createElement(fl.TextField,{...this.props})),(l==="none"||l==="is-loading")&&De.default.createElement("div",{style:{marginTop:"5px"}},De.default.createElement(nr.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:l==="is-loading"?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:l==="is-loading",onClick:()=>this.fetchSuggestions()},u.translate("NEOSidekick.AiAssistant:Main:calculateWithSidekick","Calculate with Sidekick"),"\xA0",this.renderIcon(l==="is-loading"))),l==="loaded"&&De.default.createElement("div",{style:{padding:"1rem",background:"gray"}},u.translate("NEOSidekick.AiAssistant:Editors.FocusKeywordEditor:suggestionsIntro","Our page content analysis points one of the following phrases as focus keyword. If this does not fit at all, customising the text for SEO could be helpful."),p.map(A=>De.default.createElement(nr.Button,{key:A,className:"neosidekick__editor__suggestion-button",size:"small",style:"lighter",hoverStyle:"brand",onClick:()=>s(A)},A))),(l==="loaded"||i)&&De.default.createElement("p",{style:{marginBottom:"16px"}},u.translate("NEOSidekick.AiAssistant:Editors.FocusKeywordEditor:checkSearchVolume","Check search volume:"),"\xA0",De.default.createElement("a",{href:v,target:"_blank",style:{textDecoration:"underline",color:"white"}},"Ahrefs"),"\xA0|\xA0",De.default.createElement("a",{href:_,target:"_blank",style:{textDecoration:"underline",color:"white"}},"Google")))}};P(sn,"propTypes",{className:xe.default.string,value:xe.default.oneOfType([xe.default.string,xe.default.number]),commit:xe.default.func.isRequired,options:xe.default.object,onKeyPress:xe.default.func,onEnterKey:xe.default.func,id:xe.default.string,activeContentDimensions:xe.default.object.isRequired,node:xe.default.object,parentNode:xe.default.object,i18nRegistry:xe.default.object.isRequired,externalService:xe.default.object.isRequired,contentService:xe.default.object.isRequired,addFlashMessage:xe.default.func.isRequired,frontendConfiguration:xe.default.object}),sn=Ce([(0,cl.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,ul.connect)(n=>{let i=tr.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:tr.selectors.CR.ContentDimensions.active(n),node:i,parentNode:tr.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:tr.actions.UI.FlashMessages.add})],sn);var wt=D(ht()),ll=D(Wt()),Se=D(St()),dl=D(At()),Pn=D(Bt()),On=D(Ge());var j1={autoFocus:!1,disabled:!1,maxlength:null,readonly:!1},Ut=class extends wt.PureComponent{constructor(s){super(s);P(this,"fetch",async(s,u)=>{let{commit:l,externalService:p,contentService:v,activeContentDimensions:_,addFlashMessage:A,i18nRegistry:C,node:E,parentNode:k,frontendConfiguration:I}=this.props;this.setState({loading:!0});try{u=await v.processObjectWithClientEval(u,E,k),u=Object.keys(u).map(B=>({identifier:B,value:u[B]}));let F=_.language?_.language[0]:I.defaultLanguage,G=await p.generate(s,F,u);l(G)}catch(F){A(F?.code??F?.message,F?.code?C.translate("NEOSidekick.AiAssistant:Error:"+F.code,F.message,{0:F.externalMessage}):F.message,F?.severity??"error")}finally{this.setState({loading:!1})}});P(this,"fetchAndUpdatePlaceholderIfReferencedPropertyHasChanged",async s=>{let{node:u,transientValues:l,options:p}=this.props;if(!p?.placeholder?.startsWith("SidekickClientEval"))return;let v=/node\.properties\.(\w+)/g,A=p.placeholder.match(v).map(E=>{let[,k]=E.match(/node\.properties\.(.*)/);return k}),C=!1;A.forEach(E=>{(l?.[E]!==s.transientValues?.[E]||u.properties[E]!==s.node.properties[E])&&(C=!0)}),C&&this.fetchAndUpdatePlaceholder()});P(this,"fetchAndUpdatePlaceholder",async()=>{let{contentService:s,node:u,parentNode:l,options:p}=this.props;s.processClientEval(p.placeholder,u,l).then(v=>this.setState({placeholder:v}))});this.state={loading:!1,placeholder:""},s.options?.placeholder?.startsWith("SidekickClientEval")?this.fetchAndUpdatePlaceholder():s.options?.placeholder&&this.setState({placeholder:s.i18nRegistry.translate(unescape(s.options.placeholder))})}componentDidUpdate(s){this.fetchAndUpdatePlaceholderIfReferencedPropertyHasChanged(s)}renderIcon(s){return s?wt.default.createElement(Pn.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):wt.default.createElement(Pn.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}render(){let{id:s,value:u,className:l,commit:p,options:v,i18nRegistry:_,onKeyPress:A,onEnterKey:C}=this.props,{placeholder:E}=this.state,k=Object.assign({},j1,v),I=!k.readonly&&!k.disabled;return wt.default.createElement("div",{style:{display:"flex",flexDirection:"column"},className:l},wt.default.createElement("div",null,wt.default.createElement(Pn.TextInput,{id:s,autoFocus:k.autoFocus,value:u===null?"":u,onChange:p,disabled:k.disabled||this.state.loading,maxLength:k.maxlength,readOnly:k.readonly,placeholder:E,onKeyPress:A,onEnterKey:C})),I?wt.default.createElement("div",{style:{marginTop:"4px"}},wt.default.createElement(Pn.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:this.state.loading?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:this.state.loading,onClick:()=>this.fetch(k.module,k.arguments??{})},_.translate("NEOSidekick.AiAssistant:Main:generateWithSidekick"),"\xA0",this.renderIcon(this.state.loading))):null)}};P(Ut,"propTypes",{className:Se.default.string,value:Se.default.oneOfType([Se.default.string,Se.default.number]),commit:Se.default.func.isRequired,options:Se.default.object,onKeyPress:Se.default.func,onEnterKey:Se.default.func,id:Se.default.string,activeContentDimensions:Se.default.object.isRequired,node:Se.default.object,parentNode:Se.default.object,transientValues:Se.default.object,i18nRegistry:Se.default.object.isRequired,externalService:Se.default.object.isRequired,contentService:Se.default.object.isRequired,addFlashMessage:Se.default.func.isRequired,frontendConfiguration:Se.default.object}),P(Ut,"defaultProps",{options:{}}),Ut=Ce([(0,dl.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,ll.connect)(n=>{let i=On.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:On.selectors.CR.ContentDimensions.active(n),node:i,transientValues:On.selectors.UI.Inspector.transientValues(n),parentNode:On.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:On.actions.UI.FlashMessages.add})],Ut);var bt=D(ht()),pl=D(Wt()),Pe=D(St()),hl=D(At()),kn=D(Bt()),Nn=D(Ge());var z1={disabled:!1,maxlength:null,readonly:!1,placeholder:"",minRows:2,expandedRows:6},Gt=class extends bt.Component{constructor(s){super(s);P(this,"fetch",async(s,u)=>{let{commit:l,externalService:p,contentService:v,activeContentDimensions:_,addFlashMessage:A,i18nRegistry:C,node:E,parentNode:k,frontendConfiguration:I}=this.props;this.setState({loading:!0});try{u=await v.processObjectWithClientEval(u,E,k),u=Object.keys(u).map(B=>({identifier:B,value:u[B]}));let F=_.language?_.language[0]:I.defaultLanguage,G=await p.generate(s,F,u);l(G)}catch(F){A(F?.code??F?.message,F?.code?C.translate("NEOSidekick.AiAssistant:Error:"+F.code,F.message,{0:F.externalMessage}):F.message,F?.severity??"error")}finally{this.setState({loading:!1})}});P(this,"fetchAndUpdatePlaceholderIfReferencedPropertyHasChanged",async s=>{let{node:u,transientValues:l,options:p}=this.props;if(!p?.placeholder?.startsWith("SidekickClientEval"))return;let v=/node\.properties\.(\w+)/g,A=p.placeholder.match(v).map(E=>{let[,k]=E.match(/node\.properties\.(.*)/);return k}),C=!1;A.forEach(E=>{(l?.[E]!==s.transientValues?.[E]||u.properties[E]!==s.node.properties[E])&&(C=!0)}),C&&this.fetchAndUpdatePlaceholder()});P(this,"fetchAndUpdatePlaceholder",async()=>{let{contentService:s,node:u,parentNode:l,options:p}=this.props;s.processClientEval(p.placeholder,u,l).then(v=>this.setState({placeholder:v}))});this.state={loading:!1,placeholder:""},s.options?.placeholder?.startsWith("SidekickClientEval")?this.fetchAndUpdatePlaceholder():s.options?.placeholder&&this.setState({placeholder:s.i18nRegistry.translate(unescape(s.options.placeholder))})}componentDidUpdate(s){this.fetchAndUpdatePlaceholderIfReferencedPropertyHasChanged(s)}renderIcon(s){return s?bt.default.createElement(kn.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):bt.default.createElement(kn.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}render(){let{id:s,value:u,className:l,commit:p,options:v,i18nRegistry:_}=this.props,{placeholder:A}=this.state,C=Object.assign({},z1,v),E=!C.readonly&&!C.disabled;return bt.default.createElement("div",{style:{display:"flex",flexDirection:"column"},className:l},bt.default.createElement("div",null,bt.default.createElement(kn.TextArea,{id:s,value:u,onChange:p,disabled:C.disabled||this.state.loading,maxLength:C.maxlength,readOnly:C.readonly,placeholder:A,minRows:C.minRows,expandedRows:C.expandedRows})),E?bt.default.createElement("div",null,bt.default.createElement(kn.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:this.state.loading?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:this.state.loading,onClick:()=>this.fetch(C.module,C.arguments??{})},_.translate("NEOSidekick.AiAssistant:Main:generateWithSidekick"),"\xA0",this.renderIcon(this.state.loading))):null)}};P(Gt,"propTypes",{className:Pe.default.string,value:Pe.default.oneOfType([Pe.default.string,Pe.default.number]),commit:Pe.default.func.isRequired,options:Pe.default.object,id:Pe.default.string,activeContentDimensions:Pe.default.object.isRequired,node:Pe.default.object,parentNode:Pe.default.object,transientValues:Pe.default.object,i18nRegistry:Pe.default.object.isRequired,externalService:Pe.default.object.isRequired,contentService:Pe.default.object.isRequired,addFlashMessage:Pe.default.func.isRequired,frontendConfiguration:Pe.default.object}),P(Gt,"defaultProps",{options:{}}),Gt=Ce([(0,hl.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,pl.connect)(n=>{let i=Nn.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:Nn.selectors.CR.ContentDimensions.active(n),node:i,transientValues:Nn.selectors.UI.Inspector.transientValues(n),parentNode:Nn.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:Nn.actions.UI.FlashMessages.add})],Gt);var gl=(n,i)=>{let s=n.get("inspector").get("editors");s.set("NEOSidekick.AiAssistant/Inspector/Editors/FocusKeywordEditor",{component:i?sn:Rr.TextField}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/MagicTextFieldEditor",{component:i?Ut:Rr.TextField}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/MagicTextAreaEditor",{component:i?Gt:Rr.TextArea})};var Ze=D(ht()),Dr=D(Bt());var oo=D(ht()),ml=D(Wt()),rr=D(St()),vl=D(Ge()),yl=D(At());var Ht=class extends oo.PureComponent{getUri(){let{configuration:i,activeContentDimensions:s,interfaceLanguage:u}=this.props,l=new URL(`${i.apiDomain}/chat/`);return l.searchParams.append("contentLanguage",s.language?s.language[0]:i.defaultLanguage),l.searchParams.append("interfaceLanguage",u),l.searchParams.append("userId",i.userId),l.searchParams.append("plattform","neos"),l.searchParams.append("domain",i.domain),l.searchParams.append("siteName",i.siteName),i?.referrer&&l.searchParams.append("referral",i?.referrer),i?.apiKey&&l.searchParams.append("apikey",i?.apiKey),l}render(){let{className:i}=this.props;return oo.default.createElement("iframe",{id:"neosidekickAssistant",className:i,src:this.getUri().toString(),allow:"clipboard-write",onLoad:s=>s.target.dataset.loaded="true"})}};P(Ht,"propTypes",{configuration:rr.default.object.isRequired,i18nRegistry:rr.default.object.isRequired,activeContentDimensions:rr.default.object.isRequired,interfaceLanguage:rr.default.string.isRequired,className:rr.default.string}),Ht=Ce([(0,yl.neos)(n=>({configuration:n.get("NEOSidekick.AiAssistant").get("configuration"),i18nRegistry:n.get("i18n")})),(0,ml.connect)(n=>({activeContentDimensions:vl.selectors.CR.ContentDimensions.active(n),interfaceLanguage:n.user?.preferences?.interfaceLanguage}),{})],Ht);var _l=(n,i)=>{let s=n.get("containers"),u=s.get("App");if(!i.chatSidebarEnabled){s.set("Modals/SidekickIFrame",()=>Ze.default.createElement(Ht,{className:"neosidekick__frame--hidden"}));return}let l=p=>{let v=localStorage.getItem("NEOSidekick")?JSON.parse(localStorage.getItem("NEOSidekick")):{open:!0,fullscreen:!1},[_,A]=Ze.default.useState(v?.open),C=B=>{A(B),v.open=B,localStorage.setItem("NEOSidekick",JSON.stringify(v))},[E,k]=Ze.default.useState(v?.fullscreen),I=B=>{k(B),v.fullscreen=B,localStorage.setItem("NEOSidekick",JSON.stringify(v))},F=(B,O,N)=>B?Ze.default.createElement(Dr.IconButton,{icon:O?"compress":"expand",onClick:N}):"",G=(B,O,N)=>O?"":Ze.default.createElement(Dr.IconButton,{icon:B?"chevron-circle-right":"chevron-circle-left",onClick:N});return Ze.default.createElement("div",{className:`neosidekick_appWrapper ${_?"neosidekick_appWrapper--sidebar-open":""}  ${E?"neosidekick_appWrapper--sidebar-fullscreen":""}`},Ze.default.createElement(u,{...p}),Ze.default.createElement("div",{className:"neosidekick_sideBar"},Ze.default.createElement("div",{className:"neosidekick_sideBar__title"},Ze.default.createElement(Dr.Headline,{className:`neosidekick_sideBar__title-headline ${_?"neosidekick_sideBar__title-headline--open":""}`},"AI Sidekick"),Ze.default.createElement("div",null,F(_,E,()=>I(!E)),G(_,E,()=>C(!_)))),Ze.default.createElement(Ht,{className:`neosidekick_sideBar__frame ${_?"neosidekick_sideBar__frame--open":""}`})))};s.set("App",l)};var Wr=D(Ge()),Ol=D(so());var Al=D(so()),ao=D(Ge()),wl=(n,i)=>function*(){yield(0,Al.takeEvery)(ao.actionTypes.ServerFeedback.HANDLE_SERVER_FEEDBACK,function*(s){s.payload.feedbackEnvelope.feedbacks.forEach(u=>{if(u.type!=="Neos.Neos.Ui:NodeCreated")return;let p=u.payload.contextPath.split("@")[0],v=i.getState(),_=ao.selectors.CR.Nodes.nodesByContextPathSelector(v),A=n.get("@neos-project/neos-ui-contentrepository"),C=n.get("NEOSidekick.AiAssistant").get("contentService");Object.keys(_).forEach(E=>{if(!E.split("@")[0].startsWith(p))return;let I=_[E],F=_[I.parent],G=A.get(I.nodeType);Object.keys(G.properties).forEach(B=>{C.evaluateNodeTypeConfigurationAndStartGeneration(I,B,G,F,!0)})})})})};var bl=D(so()),Cl=D(Ge()),xl=(n,i)=>function*(){yield(0,bl.takeEvery)(Cl.actionTypes.CR.Nodes.REMOVE,function*(s){n.get("NEOSidekick.AiAssistant").get("contentCanvasService").onNodeRemoved(s.payload)})};var Pl=D(El());var Nl=(n,i,s,u)=>{let l=!1,p=(0,Pl.debounce)((A,C)=>s.updateWebContext(A,C),500),v=function*(){yield(0,Ol.takeLatest)([Wr.actionTypes.UI.ContentCanvas.SET_SRC,Wr.actionTypes.UI.ContentCanvas.RELOAD,Wr.actionTypes.CR.Nodes.MERGE],async function*(A){A.type===Wr.actionTypes.UI.ContentCanvas.SET_SRC&&(l=!0);let C=n.get("@neos-project/neos-ui-contentrepository"),E=i.getState(),k=E?.ui?.contentCanvas?.previewUrl,I=u.getCurrentDocumentNode(),F=I?.contextPath,G=Object.values(E?.cr?.nodes?.byContextPath||{}).filter(O=>{let N=C.getRole("document");if(!N)throw new Error("Document role is not loaded!");let U=C.getSubTypesOf(N);return F&&O.contextPath.indexOf(F.split("@")[0])===0&&(O.contextPath===F||!U.includes(O.nodeType))}),B={url:k,title:I?.properties?.title||await u.getGuestFrameDocumentTitle(),content:await u.getGuestFrameDocumentHtml(),structuredContent:G,targetAudience:await u.getCurrentDocumentTargetAudience(),pageBriefing:await u.getCurrentDocumentPageBriefing(),focusKeyword:await u.getCurrentDocumentFocusKeyword()};p(l,B),l=!1})},_=n.get("sagas");_.set("NEOSidekick.AiAssistant/watchDocumentNodeChange",{saga:v}),_.set("NEOSidekick.AiAssistant/watchNodeCreated",{saga:wl(n,i)}),_.set("NEOSidekick.AiAssistant/watchNodeRemoved",{saga:xl(n,i)})};var Br=D(ht()),kl=D(Wt()),uo=D(St()),co=D(Bt()),Tl=D(At()),Il=D(Ge());var an=class extends Br.PureComponent{constructor(){super(...arguments);P(this,"state",{show:!1,enabled:!0});P(this,"evaluateFocusedNodeAndPropertyAndShowButton",(s=5)=>{let{nodeType:u,property:l}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty();if(!u||!l){if(s===0)return;setTimeout(()=>this.evaluateFocusedNodeAndPropertyAndShowButton(s-1),100);return}let p=u.properties[l];this.setState({show:p?.ui?.inlineEditable===!0&&p?.options?.sidekick?.module!==void 0})});P(this,"onClick",async()=>{let{addFlashMessage:s,i18nRegistry:u,contentService:l}=this.props;try{this.setState({enabled:!1});let{node:p,nodeType:v,parentNode:_,property:A}=l.getCurrentlyFocusedNodePathAndProperty();await l.evaluateNodeTypeConfigurationAndStartGeneration(p,A,v,_)}catch(p){s(p?.code??p?.message,p?.code?u.translate("NEOSidekick.AiAssistant:Error:"+p.code,p.message,{0:p.externalMessage}):p.message,p?.severity??"error")}finally{setTimeout(()=>{this.setState({enabled:!0})},2500)}})}componentDidMount(){this.evaluateFocusedNodeAndPropertyAndShowButton()}render(){let{i18nRegistry:s}=this.props;return this.state.show?Br.default.createElement(co.Button,{disabled:!this.state.enabled,style:"transparent",hoverStyle:"brand",onClick:this.onClick,isActive:!!this.props.isActive,title:s.translate("NEOSidekick.AiAssistant:Main:generate")},Br.default.createElement(co.Icon,{icon:"magic",fixedWidth:!0,padded:"right"}),s.translate("NEOSidekick.AiAssistant:Main:generate")):""}};P(an,"propTypes",{contentService:uo.default.object.isRequired,i18nRegistry:uo.default.object.isRequired,addFlashMessage:uo.default.func.isRequired}),an=Ce([(0,Tl.neos)(n=>({contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),i18nRegistry:n.get("i18n")})),(0,kl.connect)(()=>{},{addFlashMessage:Il.actions.UI.FlashMessages.add})],an);var Ur=D(ht()),Tn=D(St()),Ml=D(Bt()),Fl=D(At()),Rl=D(Wt());var va=D(Ge());var un=class extends Ur.PureComponent{constructor(){super(...arguments);P(this,"handleOpen",()=>{let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props,l=this.props.contentCanvasService.getEditorContent(s,u),p=this.props.contentCanvasService.getSelectedContent(s,u);this.props.openModal(l,p)})}render(){let{i18nRegistry:s}=this.props;return Ur.default.createElement("div",null,Ur.default.createElement(Ml.Button,{className:"button",style:"transparent",hoverStyle:"brand",onClick:this.handleOpen,title:s.translate("NEOSidekick.AiAssistant:Main:title","Mit AI bearbeiten")},"AI"))}};P(un,"propTypes",{contentService:Tn.default.object.isRequired,contentCanvasService:Tn.default.object.isRequired,i18nRegistry:Tn.default.object.isRequired,openModal:Tn.default.func.isRequired,focusedNodePath:Tn.default.string,currentlyEditedPropertyName:Tn.default.string}),un=Ce([(0,Fl.neos)(n=>({contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService"),i18nRegistry:n.get("i18n")})),(0,Rl.connect)(n=>({focusedNodePath:va.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:va.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n)}),{openModal:En.openModal})],un);var M=D(ht()),Ee=D(St()),Bl=D(Wt()),Ul=D(At()),ne=D(Bt()),Ae=D(Ll()),In=D(Ge());var or=D(ht()),Gr=D(St()),Wl=D(At());var Kt=class extends or.PureComponent{constructor(s){super(s);P(this,"elementRef");P(this,"editorInstance");P(this,"lastValue");this.elementRef=or.default.createRef()}componentDidUpdate(s){if(s.value!==this.props.value&&this.lastValue!==this.props.value){if(!this.editorInstance){let u=this.elementRef.current;if(this.editorInstance=u?.querySelector(".ck-content")?.ckeditorInstance,!this.editorInstance)return}this.editorInstance.setData(this.props.value),this.lastValue=this.props.value}}render(){let{secondaryEditorsRegistry:s}=this.props,{component:u}=s.get("Neos.Neos/Inspector/Secondary/Editors/CKEditorWrap");return or.default.createElement("div",{className:"neosidekick__ck-editor"+(this.props.disabled?" neosidekick__ck-editor--disabled":""),ref:this.elementRef},or.default.createElement(u,{onChange:l=>{this.lastValue!==l&&(this.lastValue=l,this.props.onChange&&this.props.onChange(l))},value:this.props.value,options:Object.assign({},this.props.options,{disabled:!0})}))}};P(Kt,"propTypes",{value:Gr.default.string.isRequired,onChange:Gr.default.func,options:Gr.default.object,disabled:Gr.default.bool}),Kt=Ce([(0,Wl.neos)(n=>({secondaryEditorsRegistry:n.get("inspector").get("secondaryEditors")}))],Kt);var cn=class extends M.PureComponent{constructor(s){super(s);P(this,"handleCancel",()=>{this.props.cancelModal(),this.setState({generatedText:"",generationState:"empty"})});P(this,"handleApply",()=>{this.props.applyModal();let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props,l=this.props.selectedText.endsWith(" ")||this.props.selectedText.endsWith("&nbsp;");this.props.contentCanvasService.insertTextIntoInlineEditor(s,u,this.state.generatedText,l),this.setState({generatedText:"",generationState:"empty"})});P(this,"handleGenerate",async(s,u="default")=>{this.setState({generationModificationType:s,generationWritingStyle:u}),s!=="custom"&&this.setState({customPromptIsVisible:!1}),this.state.generationState==="loading"&&this.props.iFrameApiService.cancelCallModule();let{customPrompt:l}=this.state,{fullText:p,selectedText:v}=this.props,_=this.getPropertyConfiguration().ui?.inline?.editorOptions?.formatting,A=Object.keys(_).filter(I=>_[I]).map(I=>({a:"link",b:"bold",i:"italic",ol:"ordered list",ul:"unordered list"})[I]||I).join(", "),C,E;switch(s){case"configured":let I=this.getConfiguredSidekick();if(I.onCreate?.module){this.addFlashMessage("1696264259260","Please do not use options.sidekick.onCreate.module anymore. Read the docs to find out about the new configuration.","error");return}let{node:F,parentNode:G}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty(),B=await this.props.contentService.processObjectWithClientEval(I,F,G);C=B.module,E=B.arguments||{};break;case"intro":C="custom_prompt",E={customPrompt:"Write a two sentence introduction for the current page.",allowedMarkdownFormattingOptions:A};break;case"page_conclusion":C="page_conclusion_writer",E={allowedMarkdownFormattingOptions:A};break;case"custom":if(!l||l.length<5){this.addFlashMessage("1696264259270","Please write a few words about how to change the text.","error");return}v&&v.length?(C="modify_selected_text",E={fullText:p,selectedText:v,modificationType:s,allowedMarkdownFormattingOptions:A,customPrompt:l,writingStyle:u}):(C="custom_prompt",E={customPrompt:l,allowedMarkdownFormattingOptions:A});break;default:C="modify_selected_text",E={fullText:p,selectedText:v,modificationType:s,allowedMarkdownFormattingOptions:A,customPrompt:l,writingStyle:u};break}this.setState({generatedText:"",generationState:"loading"});let k={target:{modalTarget:!0},module:C,arguments:E};this.props.iFrameApiService.callModule(k)});P(this,"handleRegenerate",async()=>this.handleGenerate(this.state.generationModificationType,this.state.generationWritingStyle||"default"));this.state={customPromptIsVisible:this.props.configuration.modifyTextModalPreferCustomPrompt,customPrompt:"",writingStyles:[{value:"",label:"Loading..."}],generatedText:"",generationState:"empty"}}getLanguage(){let{activeContentDimensions:s,configuration:u}=this.props;return s.language?s.language[0]:u.defaultLanguage}getPropertyConfiguration(){let{node:s,nodeTypesRegistry:u}=this.props,l=s?u.get(s?.nodeType):null,{property:p}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty();return!s||!l||!p?null:l?.properties?l?.properties[p]:null}getConfiguredSidekick(){return this.getPropertyConfiguration()?.options?.sidekick}componentDidMount(){let s=this.getLanguage();this.props.externalService.fetch("/api/v1/writing-styles?language="+s).then(u=>{let l=u.data.filter(p=>p.identifier!=="default"&&p.allowed_languages.includes(s));this.setState({writingStyles:l.map(p=>({value:p.identifier,label:p.label}))})}),this.props.iFrameApiService.listenToMessages(u=>{if(u.data?.data?.modalTarget)switch(u?.data?.eventName){case"write-content":let{value:l,isFinished:p}=u.data?.data;this.setState({generatedText:l||""}),p&&(this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished());break;case"stopped-generation":this.setState({generationState:"finished"});break;case"error":let v=u?.data?.data?.message;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+v,"error",v),this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished();break;default:let _="Unknown message event: "+u?.data?.eventName;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+_,"error",_),this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished()}}),window.addEventListener("keydown",u=>{u.key==="Enter"&&u.target===document.getElementById("neosidekickAiModifyPromptTextarea")&&this.handleGenerate("custom")})}componentDidUpdate(s){s.isOpen&&!this.props.isOpen&&this.state.generationState==="loading"&&this.props.iFrameApiService.cancelCallModule(),!s.isOpen&&this.props.isOpen&&this.setState({customPromptIsVisible:this.props.configuration.modifyTextModalPreferCustomPrompt,customPrompt:"",generatedText:"",generationState:"empty",generationModificationType:void 0,generationWritingStyle:void 0})}addFlashMessage(s,u,l="error",p){this.props.addFlashMessage(s,this.props.i18nRegistry.translate("NEOSidekick.AiAssistant:Error:"+s,u,{0:p}),l)}renderTitle(){return M.default.createElement("div",null,M.default.createElement("svg",{className:"sidekick-icon","enable-background":"new 0 0 245 245",viewBox:"0 0 245 245"},M.default.createElement("path",{d:"m72.6 75.3 5.3-2.6m-18.5-30.7",fill:"#fff"}),M.default.createElement("circle",{cx:"64.7",cy:"50.5",fill:"#fff",r:"9.4"}),M.default.createElement("path",{d:"m68 59.1 7.5 15.2",fill:"none",stroke:"#fff","stroke-miterlimit":"10","stroke-width":"4.9606"}),M.default.createElement("path",{d:"m170.1 72.7 5.3 2.6m13.2-33.3",fill:"#fff"}),M.default.createElement("circle",{cx:"183.4",cy:"50.5",fill:"#fff",r:"9.4"}),M.default.createElement("path",{d:"m180.1 59.1-7.5 15.2",fill:"none",stroke:"#fff","stroke-miterlimit":"10","stroke-width":"4.9606"}),M.default.createElement("path",{d:"m123.6 60c38.1 0 69 31 69 69s-31 69-69 69-69-31-69-69 31-69 69-69m0-8.5c-42.8 0-77.5 34.7-77.5 77.5s34.7 77.5 77.5 77.5 77.5-34.7 77.5-77.5-34.6-77.5-77.5-77.5z",fill:"#fff"}),M.default.createElement("circle",{cx:"97",cy:"123.5",fill:"#fff",r:"9.1"}),M.default.createElement("g",{fill:"none",stroke:"#fff","stroke-miterlimit":"10"},M.default.createElement("path",{d:"m164.2 137.9h-80c-7.8 0-14.1-6.3-14.1-14.1v-.3c0-7.8 6.3-14.1 14.1-14.1h80c7.8 0 14.1 6.3 14.1 14.1v.3c0 7.8-6.4 14.1-14.1 14.1z","stroke-width":"9.0714"}),M.default.createElement("path",{d:"m52.4 153.9h-17.5c-4.1 0-7.4-3.2-7.4-7.2v-34.2c0-3.9 3.4-7.2 7.4-7.2h17.5","stroke-width":"8.5039"}),M.default.createElement("path",{d:"m193.1 153.9h17.5c4.1 0 7.4-3.2 7.4-7.2v-34.2c0-3.9-3.4-7.2-7.4-7.2h-17.5","stroke-width":"8.5039"}),M.default.createElement("path",{d:"m104.1 165.1s18.1 18.1 39 .5","stroke-linecap":"round","stroke-width":"8.5039"}))),this.props.selectedText?M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:modify-text-title",fallback:"Revise text"}):M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:create-text-title",fallback:"Generate text with AI"})," (Beta)")}renderCancelAction(){return M.default.createElement(ne.Button,{key:"cancel",style:"lighter",hoverStyle:"brand",onClick:this.handleCancel},M.default.createElement(Ae.default,{id:"Neos.Neos:Main:cancel",fallback:"Cancel"}))}renderRegenerateAction(){return this.state.generationState==="finished"?M.default.createElement(ne.Button,{key:"regenerate",style:"lighter",hoverStyle:"warn",onClick:this.handleRegenerate},M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:regenerate-text",fallback:"Regenerate"})):""}renderSaveAction(){return this.state.generationState==="finished"?M.default.createElement(ne.Button,{key:"save",style:"success",hoverStyle:"success",onClick:this.handleApply},this.props.selectedText?M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:apply-modify-text",fallback:"Use text"}):M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:apply-create-text",fallback:"Insert text"})):""}hasSelectedText(){return this.props.selectedText&&this.props.selectedText.trim().length>0}renderConfiguredButton(){return this.getConfiguredSidekick()?.module?M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("configured")},M.default.createElement(ne.Icon,{icon:"hand-sparkles",className:"icon--space-right"}),this.getConfiguredSidekick()?.label||M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:configured-button",fallback:"Configured instruction"})):""}renderCreateButtons(){return M.default.createElement("div",{className:"quickGenerationButtons"},this.renderConfiguredButton(),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("intro")},M.default.createElement(ne.Icon,{icon:"paragraph",className:"icon--space-right"}),M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:intro-button",fallback:"Introduction"})),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("page_conclusion")},M.default.createElement(ne.Icon,{icon:"paragraph",className:"icon--space-right"}),M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:page-conclusion-button",fallback:"Page Conclusion"})))}renderEditButtons(){let{i18nRegistry:s}=this.props;return M.default.createElement("div",{className:"quickGenerationButtons"},M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("rephrase")},M.default.createElement(ne.Icon,{icon:"redo",className:"icon--space-right"}),M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:rephrase-button",fallback:"Rephrase"})),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("longer")},M.default.createElement(ne.Icon,{icon:"expand-alt",className:"icon--space-right"}),M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:longer-button-short",fallback:"Longer"})),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("shorter")},M.default.createElement(ne.Icon,{icon:"compress-alt",className:"icon--space-right"}),M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:shorter-button-short",fallback:"Shorter"})),M.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("fix_spelling")},M.default.createElement(ne.Icon,{icon:"spell-check",className:"icon--space-right"}),M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:fix-text-button",fallback:"Fix spelling"})),M.default.createElement(ne.Button,{style:this.state.customPromptIsVisible?"brand":"lighter",hoverStyle:"brand",onClick:()=>this.setState({customPromptIsVisible:!this.state.customPromptIsVisible})},M.default.createElement(ne.Icon,{icon:"pen-fancy",className:"icon--space-right"}),M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:custom-prompt-button",fallback:"Etwas anderes"})),M.default.createElement("div",{className:"quickGenerationButtons__selectWrapper"},M.default.createElement(ne.SelectBox,{className:"quickGenerationButtons__select",placeholder:s.translate("NEOSidekick.AiAssistant:AiModal:change-tone"),onValueChange:u=>this.handleGenerate("style",u),options:this.state.writingStyles})))}render(){let{selectedText:s,i18nRegistry:u}=this.props,{customPrompt:l,generatedText:p,generationState:v}=this.state,_=JSON.parse(JSON.stringify(this.getPropertyConfiguration()?.ui?.inline?.editorOptions)||"{}");return _.sidekickModifyButton=!1,M.default.createElement(ne.Dialog,{actions:[this.renderCancelAction(),this.renderRegenerateAction(),this.renderSaveAction()],title:this.renderTitle(),onRequestClose:this.handleCancel,isOpen:this.props.isOpen,style:"wide"},M.default.createElement("div",{className:"primaryColumn"},this.hasSelectedText()?M.default.createElement("div",{className:"originalText"},M.default.createElement(ne.Label,null,M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:selected-text",fallback:"Selected Text"}),":"),M.default.createElement(Kt,{value:s,options:_,disabled:!0})):"",this.hasSelectedText()?this.renderEditButtons():"",!this.hasSelectedText()||this.state.customPromptIsVisible?M.default.createElement("div",{className:"promptRow"},M.default.createElement(ne.TextArea,{autoFocus:!0,id:"neosidekickAiModifyPromptTextarea",placeholder:this.hasSelectedText()?u.translate("NEOSidekick.AiAssistant:AiModal:custom-prompt-modify-placeholder","How should the text be changed?"):u.translate("NEOSidekick.AiAssistant:AiModal:custom-prompt-create-placeholder","Which text should I write?"),onChange:A=>this.setState({customPrompt:A}),minRows:2,expandedRows:2}),M.default.createElement(ne.Button,{className:"promptRow__button",disabled:!l,style:l&&v=="empty"?"success":"lighter",hoverStyle:"success",onClick:()=>this.handleGenerate("custom")},M.default.createElement(ne.Icon,{icon:"magic",className:"icon--space-right"}),M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:Main:generate",fallback:"Generate"}))):"",this.hasSelectedText()?"":this.renderCreateButtons(),v==="empty"?"":M.default.createElement("div",{className:"result"},M.default.createElement(ne.Label,null,M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:new-text",fallback:"New Text"}),":"),M.default.createElement(Kt,{onChange:A=>this.setState({generatedText:A}),value:p,options:_}),M.default.createElement("i",{className:"result__notice"},M.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:disclaimer",fallback:"GenAI models can make mistakes. Check important information."})))))}};P(cn,"propTypes",{iFrameApiService:Ee.default.object.isRequired,contentService:Ee.default.object.isRequired,contentCanvasService:Ee.default.object.isRequired,externalService:Ee.default.object.isRequired,i18nRegistry:Ee.default.object.isRequired,nodeTypesRegistry:Ee.default.object.isRequired,configuration:Ee.default.object.isRequired,isOpen:Ee.default.bool,focusedNodePath:Ee.default.string,currentlyEditedPropertyName:Ee.default.string,fullText:Ee.default.string,selectedText:Ee.default.string,activeContentDimensions:Ee.default.object,node:Ee.default.object,cancelModal:Ee.default.func.isRequired,applyModal:Ee.default.func.isRequired,addFlashMessage:Ee.default.func.isRequired}),cn=Ce([(0,Ul.neos)(n=>({iFrameApiService:n.get("NEOSidekick.AiAssistant").get("iFrameApiService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),i18nRegistry:n.get("i18n"),nodeTypesRegistry:n.get("@neos-project/neos-ui-contentrepository"),configuration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,Bl.connect)(n=>({isOpen:io.isModalOpen(n),focusedNodePath:In.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:In.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n),fullText:io.fullText(n),selectedText:io.selectedText(n),activeContentDimensions:In.selectors.CR.ContentDimensions.active(n),node:In.selectors.CR.Nodes.focusedSelector(n)}),{cancelModal:En.cancelModal,applyModal:En.applyModal,addFlashMessage:In.actions.UI.FlashMessages.add})],cn);var Kr=D(ht()),Hr=D(St()),Gl=D(Wt()),ya=D(Ge()),Hl=D(At()),Kl=D(Bt());var fn=class extends Kr.PureComponent{constructor(){super(...arguments);P(this,"handleOpen",()=>{let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props,l=this.props.contentCanvasService.getEditorContent(s,u),p=this.props.contentCanvasService.getSelectedContent(s,u);this.props.openModal(l,p)})}render(){let{currentlyEditedPropertyName:s,i18nRegistry:u}=this.props;return Kr.default.createElement(Kl.Button,{id:"neos-InlineToolbar-AiModify",disabled:!s,className:this.props.className,style:"transparent",hoverStyle:"brand",onClick:this.handleOpen,title:u.translate("NEOSidekick.AiAssistant:Main:title","Mit AI bearbeiten")},Kr.default.createElement("strong",null,"AI"))}};P(fn,"propTypes",{className:Hr.default.string,i18nRegistry:Hr.default.object.isRequired,focusedNodePath:Hr.default.string,currentlyEditedPropertyName:Hr.default.string}),fn=Ce([(0,Hl.neos)(n=>({nodeTypesRegistry:n.get("@neos-project/neos-ui-contentrepository"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService")})),(0,Gl.connect)(n=>({focusedNodePath:ya.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:ya.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n)}),{openModal:En.openModal})],fn);var ql=n=>{let s=n.get("ckEditor5").get("richtextToolbar");s.set("NEOSidekick.AiAssistant:ModifyButton",{component:un,isVisible:p=>p?.sidekickModifyButton!==!1},"start"),s.set("NEOSidekick.AiAssistant:generate",{component:an,isVisible:()=>!0},"end"),n.get("containers").set("Modals/AiModal",cn),n.get("@neos-project/neos-ui-guest-frame").set("NodeToolbar/Buttons/AiModify",fn,"after NodeToolbar/Buttons/AddNode")};Xc("NEOSidekick.AiAssistant",{},(n,{store:i,frontendConfiguration:s})=>{let u=s["NEOSidekick.AiAssistant"];if(gl(n,u?.enabled),!u?.enabled)return;if(!u.hasOwnProperty("defaultLanguage")||!u.defaultLanguage){console.error("Could not initialize AiAssistant: defaultLanguage is not configured correctly, see README.");return}n.get("reducers").set("NEOSidekick.AiAssistant",{reducer:tl}),n.set("NEOSidekick.AiAssistant",new tn(""));let l=n.get("NEOSidekick.AiAssistant");l.set("configuration",u);let p=Qc(u);l.set("externalService",p);let v=Jf(n,i);l.set("contentService",v);let _=Xf();l.set("iFrameApiService",_);let A=Vf(n,i,_);l.set("contentCanvasService",A),_l(n,u),Nl(n,i,_,v),ql(n)});})();
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
//# sourceMappingURL=Plugin.js.map
