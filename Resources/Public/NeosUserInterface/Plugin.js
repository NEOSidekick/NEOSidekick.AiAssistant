"use strict";(()=>{var N_=Object.create;var ki=Object.defineProperty;var $c=Object.getOwnPropertyDescriptor;var P_=Object.getOwnPropertyNames;var T_=Object.getPrototypeOf,k_=Object.prototype.hasOwnProperty;var I_=(n,i,s)=>i in n?ki(n,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[i]=s;var M_=(n,i)=>()=>(n&&(i=n(n=0)),i);var rt=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports);var R_=(n,i,s,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of P_(i))!k_.call(n,l)&&l!==s&&ki(n,l,{get:()=>i[l],enumerable:!(u=$c(i,l))||u.enumerable});return n};var W=(n,i,s)=>(s=n!=null?N_(T_(n)):{},R_(i||!n||!n.__esModule?ki(s,"default",{value:n,enumerable:!0}):s,n));var Pe=(n,i,s,u)=>{for(var l=u>1?void 0:u?$c(i,s):i,h=n.length-1,v;h>=0;h--)(v=n[h])&&(l=(u?v(i,s,l):v(l))||l);return u&&l&&ki(i,s,l),l};var N=(n,i,s)=>(I_(n,typeof i!="symbol"?i+"":i,s),s);function de(n){return(...i)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${n}`])return window["@Neos:HostPluginAPI"][`@${n}`](...i);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var it=M_(()=>{});var $e=rt((mA,Jc)=>{it();Jc.exports=de("NeosProjectPackages")().NeosUiReduxStore});var Gf=rt((Or,zn)=>{var Y_=200,J_="Expected a function",ra="__lodash_hash_undefined__",Hi=1,jn=2,vf=1/0,yf=9007199254740991,Fi="[object Arguments]",Zs="[object Array]",_f="[object Boolean]",Af="[object Date]",Sf="[object Error]",bf="[object Function]",Z_="[object GeneratorFunction]",Di="[object Map]",wf="[object Number]",$n="[object Object]",uf="[object Promise]",Cf="[object RegExp]",Li="[object Set]",xf="[object String]",Ef="[object Symbol]",Xs="[object WeakMap]",Of="[object ArrayBuffer]",Wi="[object DataView]",X_="[object Float32Array]",V_="[object Float64Array]",Q_="[object Int8Array]",e0="[object Int16Array]",t0="[object Int32Array]",n0="[object Uint8Array]",r0="[object Uint8ClampedArray]",i0="[object Uint16Array]",o0="[object Uint32Array]",s0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a0=/^\w*$/,u0=/^\./,c0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f0=/[\\^$.*+?()[\]{}|]/g,l0=/\\(\\)?/g,d0=/^\[object .+?Constructor\]$/,p0=/^(?:0|[1-9]\d*)$/,ce={};ce[X_]=ce[V_]=ce[Q_]=ce[e0]=ce[t0]=ce[n0]=ce[r0]=ce[i0]=ce[o0]=!0;ce[Fi]=ce[Zs]=ce[Of]=ce[_f]=ce[Wi]=ce[Af]=ce[Sf]=ce[bf]=ce[Di]=ce[wf]=ce[$n]=ce[Cf]=ce[Li]=ce[xf]=ce[Xs]=!1;var Nf=typeof global=="object"&&global&&global.Object===Object&&global,h0=typeof self=="object"&&self&&self.Object===Object&&self,Qt=Nf||h0||Function("return this")(),Pf=typeof Or=="object"&&Or&&!Or.nodeType&&Or,cf=Pf&&typeof zn=="object"&&zn&&!zn.nodeType&&zn,g0=cf&&cf.exports===Pf,ff=g0&&Nf.process,lf=function(){try{return ff&&ff.binding("util")}catch{}}(),df=lf&&lf.isTypedArray;function m0(n,i){for(var s=-1,u=n?n.length:0;++s<u;)if(i(n[s],s,n))return!0;return!1}function v0(n){return function(i){return i?.[n]}}function y0(n,i){for(var s=-1,u=Array(n);++s<n;)u[s]=i(s);return u}function _0(n){return function(i){return n(i)}}function A0(n,i){return n?.[i]}function Vs(n){var i=!1;if(n!=null&&typeof n.toString!="function")try{i=!!(n+"")}catch{}return i}function S0(n){var i=-1,s=Array(n.size);return n.forEach(function(u,l){s[++i]=[l,u]}),s}function b0(n,i){return function(s){return n(i(s))}}function w0(n){var i=-1,s=Array(n.size);return n.forEach(function(u){s[++i]=u}),s}var C0=Array.prototype,x0=Function.prototype,Ki=Object.prototype,Ys=Qt["__core-js_shared__"],pf=function(){var n=/[^.]+$/.exec(Ys&&Ys.keys&&Ys.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Tf=x0.toString,kt=Ki.hasOwnProperty,Yn=Ki.toString,E0=RegExp("^"+Tf.call(kt).replace(f0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hf=Qt.Symbol,gf=Qt.Uint8Array,O0=Ki.propertyIsEnumerable,N0=C0.splice,P0=b0(Object.keys,Object),Qs=Jn(Qt,"DataView"),Nr=Jn(Qt,"Map"),ea=Jn(Qt,"Promise"),ta=Jn(Qt,"Set"),na=Jn(Qt,"WeakMap"),Pr=Jn(Object,"create"),T0=bn(Qs),k0=bn(Nr),I0=bn(ea),M0=bn(ta),R0=bn(na),Bi=hf?hf.prototype:void 0,Js=Bi?Bi.valueOf:void 0,mf=Bi?Bi.toString:void 0;function An(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function F0(){this.__data__=Pr?Pr(null):{}}function D0(n){return this.has(n)&&delete this.__data__[n]}function L0(n){var i=this.__data__;if(Pr){var s=i[n];return s===ra?void 0:s}return kt.call(i,n)?i[n]:void 0}function W0(n){var i=this.__data__;return Pr?i[n]!==void 0:kt.call(i,n)}function B0(n,i){var s=this.__data__;return s[n]=Pr&&i===void 0?ra:i,this}An.prototype.clear=F0;An.prototype.delete=D0;An.prototype.get=L0;An.prototype.has=W0;An.prototype.set=B0;function It(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function U0(){this.__data__=[]}function G0(n){var i=this.__data__,s=qi(i,n);if(s<0)return!1;var u=i.length-1;return s==u?i.pop():N0.call(i,s,1),!0}function H0(n){var i=this.__data__,s=qi(i,n);return s<0?void 0:i[s][1]}function K0(n){return qi(this.__data__,n)>-1}function q0(n,i){var s=this.__data__,u=qi(s,n);return u<0?s.push([n,i]):s[u][1]=i,this}It.prototype.clear=U0;It.prototype.delete=G0;It.prototype.get=H0;It.prototype.has=K0;It.prototype.set=q0;function Mt(n){var i=-1,s=n?n.length:0;for(this.clear();++i<s;){var u=n[i];this.set(u[0],u[1])}}function $0(){this.__data__={hash:new An,map:new(Nr||It),string:new An}}function z0(n){return $i(this,n).delete(n)}function j0(n){return $i(this,n).get(n)}function Y0(n){return $i(this,n).has(n)}function J0(n,i){return $i(this,n).set(n,i),this}Mt.prototype.clear=$0;Mt.prototype.delete=z0;Mt.prototype.get=j0;Mt.prototype.has=Y0;Mt.prototype.set=J0;function Ui(n){var i=-1,s=n?n.length:0;for(this.__data__=new Mt;++i<s;)this.add(n[i])}function Z0(n){return this.__data__.set(n,ra),this}function X0(n){return this.__data__.has(n)}Ui.prototype.add=Ui.prototype.push=Z0;Ui.prototype.has=X0;function Tt(n){this.__data__=new It(n)}function V0(){this.__data__=new It}function Q0(n){return this.__data__.delete(n)}function e1(n){return this.__data__.get(n)}function t1(n){return this.__data__.has(n)}function n1(n,i){var s=this.__data__;if(s instanceof It){var u=s.__data__;if(!Nr||u.length<Y_-1)return u.push([n,i]),this;s=this.__data__=new Mt(u)}return s.set(n,i),this}Tt.prototype.clear=V0;Tt.prototype.delete=Q0;Tt.prototype.get=e1;Tt.prototype.has=t1;Tt.prototype.set=n1;function r1(n,i){var s=Sn(n)||Wf(n)?y0(n.length,String):[],u=s.length,l=!!u;for(var h in n)(i||kt.call(n,h))&&!(l&&(h=="length"||Rf(h,u)))&&s.push(h);return s}function qi(n,i){for(var s=n.length;s--;)if(Lf(n[s][0],i))return s;return-1}var i1=y1();function o1(n,i){return n&&i1(n,i,Gi)}function kf(n,i){i=zi(i,n)?[i]:If(i);for(var s=0,u=i.length;n!=null&&s<u;)n=n[ji(i[s++])];return s&&s==u?n:void 0}function s1(n){return Yn.call(n)}function a1(n,i){return n!=null&&i in Object(n)}function ia(n,i,s,u,l){return n===i?!0:n==null||i==null||!Yi(n)&&!Ji(i)?n!==n&&i!==i:u1(n,i,ia,s,u,l)}function u1(n,i,s,u,l,h){var v=Sn(n),A=Sn(i),w=Zs,x=Zs;v||(w=Vt(n),w=w==Fi?$n:w),A||(x=Vt(i),x=x==Fi?$n:x);var P=w==$n&&!Vs(n),L=x==$n&&!Vs(i),M=w==x;if(M&&!P)return h||(h=new Tt),v||N1(n)?Mf(n,i,s,u,l,h):_1(n,i,w,s,u,l,h);if(!(l&jn)){var F=P&&kt.call(n,"__wrapped__"),G=L&&kt.call(i,"__wrapped__");if(F||G){var B=F?n.value():n,E=G?i.value():i;return h||(h=new Tt),s(B,E,u,l,h)}}return M?(h||(h=new Tt),A1(n,i,s,u,l,h)):!1}function c1(n,i,s,u){var l=s.length,h=l,v=!u;if(n==null)return!h;for(n=Object(n);l--;){var A=s[l];if(v&&A[2]?A[1]!==n[A[0]]:!(A[0]in n))return!1}for(;++l<h;){A=s[l];var w=A[0],x=n[w],P=A[1];if(v&&A[2]){if(x===void 0&&!(w in n))return!1}else{var L=new Tt;if(u)var M=u(x,P,w,n,i,L);if(!(M===void 0?ia(P,x,u,Hi|jn,L):M))return!1}}return!0}function f1(n){if(!Yi(n)||C1(n))return!1;var i=Uf(n)||Vs(n)?E0:d0;return i.test(bn(n))}function l1(n){return Ji(n)&&sa(n.length)&&!!ce[Yn.call(n)]}function d1(n){return typeof n=="function"?n:n==null?M1:typeof n=="object"?Sn(n)?g1(n[0],n[1]):h1(n):R1(n)}function p1(n){if(!x1(n))return P0(n);var i=[];for(var s in Object(n))kt.call(n,s)&&s!="constructor"&&i.push(s);return i}function h1(n){var i=S1(n);return i.length==1&&i[0][2]?Df(i[0][0],i[0][1]):function(s){return s===n||c1(s,n,i)}}function g1(n,i){return zi(n)&&Ff(i)?Df(ji(n),i):function(s){var u=T1(s,n);return u===void 0&&u===i?k1(s,n):ia(i,u,void 0,Hi|jn)}}function m1(n){return function(i){return kf(i,n)}}function v1(n){if(typeof n=="string")return n;if(aa(n))return mf?mf.call(n):"";var i=n+"";return i=="0"&&1/n==-vf?"-0":i}function If(n){return Sn(n)?n:E1(n)}function y1(n){return function(i,s,u){for(var l=-1,h=Object(i),v=u(i),A=v.length;A--;){var w=v[n?A:++l];if(s(h[w],w,h)===!1)break}return i}}function Mf(n,i,s,u,l,h){var v=l&jn,A=n.length,w=i.length;if(A!=w&&!(v&&w>A))return!1;var x=h.get(n);if(x&&h.get(i))return x==i;var P=-1,L=!0,M=l&Hi?new Ui:void 0;for(h.set(n,i),h.set(i,n);++P<A;){var F=n[P],G=i[P];if(u)var B=v?u(G,F,P,i,n,h):u(F,G,P,n,i,h);if(B!==void 0){if(B)continue;L=!1;break}if(M){if(!m0(i,function(E,O){if(!M.has(O)&&(F===E||s(F,E,u,l,h)))return M.add(O)})){L=!1;break}}else if(!(F===G||s(F,G,u,l,h))){L=!1;break}}return h.delete(n),h.delete(i),L}function _1(n,i,s,u,l,h,v){switch(s){case Wi:if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case Of:return!(n.byteLength!=i.byteLength||!u(new gf(n),new gf(i)));case _f:case Af:case wf:return Lf(+n,+i);case Sf:return n.name==i.name&&n.message==i.message;case Cf:case xf:return n==i+"";case Di:var A=S0;case Li:var w=h&jn;if(A||(A=w0),n.size!=i.size&&!w)return!1;var x=v.get(n);if(x)return x==i;h|=Hi,v.set(n,i);var P=Mf(A(n),A(i),u,l,h,v);return v.delete(n),P;case Ef:if(Js)return Js.call(n)==Js.call(i)}return!1}function A1(n,i,s,u,l,h){var v=l&jn,A=Gi(n),w=A.length,x=Gi(i),P=x.length;if(w!=P&&!v)return!1;for(var L=w;L--;){var M=A[L];if(!(v?M in i:kt.call(i,M)))return!1}var F=h.get(n);if(F&&h.get(i))return F==i;var G=!0;h.set(n,i),h.set(i,n);for(var B=v;++L<w;){M=A[L];var E=n[M],O=i[M];if(u)var U=v?u(O,E,M,i,n,h):u(E,O,M,n,i,h);if(!(U===void 0?E===O||s(E,O,u,l,h):U)){G=!1;break}B||(B=M=="constructor")}if(G&&!B){var R=n.constructor,Y=i.constructor;R!=Y&&"constructor"in n&&"constructor"in i&&!(typeof R=="function"&&R instanceof R&&typeof Y=="function"&&Y instanceof Y)&&(G=!1)}return h.delete(n),h.delete(i),G}function $i(n,i){var s=n.__data__;return w1(i)?s[typeof i=="string"?"string":"hash"]:s.map}function S1(n){for(var i=Gi(n),s=i.length;s--;){var u=i[s],l=n[u];i[s]=[u,l,Ff(l)]}return i}function Jn(n,i){var s=A0(n,i);return f1(s)?s:void 0}var Vt=s1;(Qs&&Vt(new Qs(new ArrayBuffer(1)))!=Wi||Nr&&Vt(new Nr)!=Di||ea&&Vt(ea.resolve())!=uf||ta&&Vt(new ta)!=Li||na&&Vt(new na)!=Xs)&&(Vt=function(n){var i=Yn.call(n),s=i==$n?n.constructor:void 0,u=s?bn(s):void 0;if(u)switch(u){case T0:return Wi;case k0:return Di;case I0:return uf;case M0:return Li;case R0:return Xs}return i});function b1(n,i,s){i=zi(i,n)?[i]:If(i);for(var u,l=-1,v=i.length;++l<v;){var h=ji(i[l]);if(!(u=n!=null&&s(n,h)))break;n=n[h]}if(u)return u;var v=n?n.length:0;return!!v&&sa(v)&&Rf(h,v)&&(Sn(n)||Wf(n))}function Rf(n,i){return i=i??yf,!!i&&(typeof n=="number"||p0.test(n))&&n>-1&&n%1==0&&n<i}function zi(n,i){if(Sn(n))return!1;var s=typeof n;return s=="number"||s=="symbol"||s=="boolean"||n==null||aa(n)?!0:a0.test(n)||!s0.test(n)||i!=null&&n in Object(i)}function w1(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function C1(n){return!!pf&&pf in n}function x1(n){var i=n&&n.constructor,s=typeof i=="function"&&i.prototype||Ki;return n===s}function Ff(n){return n===n&&!Yi(n)}function Df(n,i){return function(s){return s==null?!1:s[n]===i&&(i!==void 0||n in Object(s))}}var E1=oa(function(n){n=P1(n);var i=[];return u0.test(n)&&i.push(""),n.replace(c0,function(s,u,l,h){i.push(l?h.replace(l0,"$1"):u||s)}),i});function ji(n){if(typeof n=="string"||aa(n))return n;var i=n+"";return i=="0"&&1/n==-vf?"-0":i}function bn(n){if(n!=null){try{return Tf.call(n)}catch{}try{return n+""}catch{}}return""}function oa(n,i){if(typeof n!="function"||i&&typeof i!="function")throw new TypeError(J_);var s=function(){var u=arguments,l=i?i.apply(this,u):u[0],h=s.cache;if(h.has(l))return h.get(l);var v=n.apply(this,u);return s.cache=h.set(l,v),v};return s.cache=new(oa.Cache||Mt),s}oa.Cache=Mt;function Lf(n,i){return n===i||n!==n&&i!==i}function Wf(n){return O1(n)&&kt.call(n,"callee")&&(!O0.call(n,"callee")||Yn.call(n)==Fi)}var Sn=Array.isArray;function Bf(n){return n!=null&&sa(n.length)&&!Uf(n)}function O1(n){return Ji(n)&&Bf(n)}function Uf(n){var i=Yi(n)?Yn.call(n):"";return i==bf||i==Z_}function sa(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=yf}function Yi(n){var i=typeof n;return!!n&&(i=="object"||i=="function")}function Ji(n){return!!n&&typeof n=="object"}function aa(n){return typeof n=="symbol"||Ji(n)&&Yn.call(n)==Ef}var N1=df?_0(df):l1;function P1(n){return n==null?"":v1(n)}function T1(n,i,s){var u=n==null?void 0:kf(n,i);return u===void 0?s:u}function k1(n,i){return n!=null&&b1(n,i,a1)}function Gi(n){return Bf(n)?r1(n):p1(n)}function I1(n,i){var s={};return i=d1(i,3),o1(n,function(u,l,h){s[l]=i(u,l,h)}),s}function M1(n){return n}function R1(n){return zi(n)?v0(ji(n)):m1(n)}zn.exports=I1});var Yf=rt((Zi,jf)=>{(function(n,i){typeof Zi=="object"&&typeof jf<"u"?i(Zi):typeof define=="function"&&define.amd?define(["exports"],i):i((n=n||self).TypesafeActions={})})(Zi,function(n){"use strict";function i(E){return E==null}function s(E){throw new Error("Argument "+E+" is empty.")}function u(E){return typeof E=="function"&&"getType"in E}function l(E){throw new Error("Argument "+E+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function h(E,O){if(E==null)throw new Error("Argument contains array with empty element at index "+O);if(E.getType==null)throw new Error("Argument contains array with invalid element at index "+O+', it should be an action-creator instance from "typesafe-actions"')}function v(E){return typeof E=="string"||typeof E=="symbol"}function A(E){return!v(E)}function w(E){throw new Error("Argument "+E+" is invalid, it should be an action type of type: string | symbol")}function x(E,O){if(E==null)throw new Error("Argument contains array with empty element at index "+O);if(typeof E!="string"&&typeof E!="symbol")throw new Error("Argument contains array with invalid element at index "+O+", it should be of type: string | symbol")}function P(E,O,U,R){return i(E)&&s(1),A(E)&&l(1),{type:E,payload:O,meta:U,error:R}}function L(E,O){return i(E)&&s(1),A(E)&&w(1),Object.assign(function(){var U=O?.apply(void 0,arguments);return Object.assign({type:E},U)},{getType:function(){return E},toString:function(){return E}})}function M(E,O,U){return i(E)&&s(1),A(E)&&w(1),function(){return L(E,function(){var R=arguments.length<=0?void 0:arguments[0],Y=arguments.length<=1?void 0:arguments[1];return O==null&&U==null||(R=O?.apply(void 0,arguments),Y=U?.apply(void 0,arguments)),Object.assign({},R!==void 0&&{payload:R},{},Y!==void 0&&{meta:Y})})}}function F(E){return i(E)&&s(1),u(E)||l(1),E.getType()}function G(E,O){i(E)&&s(1),A(E)&&w(1);var U=O!=null?O(E):function(){return{type:E}};return Object.assign(U,{getType:function(){return E},toString:function(){return E}})}var B={createAction:function(E,O){var U=O==null?function(){return P(E)}:O(P.bind(null,E));return Object.assign(U,{getType:function(){return E},toString:function(){return E}})},createCustomAction:G,createStandardAction:function(E){return i(E)&&s(1),A(E)&&w(1),Object.assign(function(){return G(E,function(O){return function(U,R){return{type:O,payload:U,meta:R}}})},{map:function(O){return G(E,function(U){return function(R,Y){return Object.assign(O(R,Y),{type:U})}})}})}};n.action=P,n.createAction=M,n.createAsyncAction=function(E,O,U,R){return function(){var Y=[E,O,U,R].map(function($,ve){return Array.isArray($)?M($[0],$[1],$[2])():typeof $=="string"||typeof $=="symbol"?M($)():void(ve<3&&function(ee){throw new Error("Argument "+ee+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(ve))});return{request:Y[0],success:Y[1],failure:Y[2],cancel:Y[3]}}},n.createCustomAction=L,n.createReducer=function E(O,U){U===void 0&&(U={});var R=Object.assign({},U),Y=function($,ve){var ee=Array.isArray($)?$:[$],fe={};return ee.map(function(Ee,oo){return u(Ee)?F(Ee):v(Ee)?Ee:function(so){throw new Error("Argument "+so+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(oo+1)}).forEach(function(Ee){return fe[Ee]=ve}),E(O,Object.assign({},R,{},fe))};return Object.assign(function($,ve){if($===void 0&&($=O),R.hasOwnProperty(ve.type)){var ee=R[ve.type];if(typeof ee!="function")throw Error('Reducer under "'+ve.type+'" key is not a valid reducer');return ee($,ve)}return $},{handlers:Object.assign({},R),handleAction:Y,handleType:Y})},n.deprecated=B,n.getType=F,n.isActionOf=function(E,O){i(E)&&s(1);var U=Array.isArray(E)?E:[E];U.forEach(h);var R=function(Y){return U.some(function($){return Y.type===$.getType()})};return O===void 0?R:R(O)},n.isOfType=function(E,O){i(E)&&s(1);var U=Array.isArray(E)?E:[E];U.forEach(x);var R=function(Y){return U.includes(Y.type)};return O===void 0?R:R(O)}})});var Xf=rt((LA,Zf)=>{it();Zf.exports=de("NeosProjectPackages")().NeosUiEditors});var vt=rt((BA,Vf)=>{it();Vf.exports=de("vendor")().React});var tn=rt((GA,Qf)=>{it();Qf.exports=de("vendor")().reactRedux});var Rt=rt((KA,el)=>{it();el.exports=de("vendor")().PropTypes});var Ft=rt(($A,tl)=>{it();tl.exports=de("NeosProjectPackages")().NeosUiDecorators});var nn=rt((jA,nl)=>{it();nl.exports=de("NeosProjectPackages")().ReactUiComponents});var to=rt((fS,dl)=>{it();dl.exports=de("vendor")().reduxSagaEffects});var yl=rt((Qn,kr)=>{(function(){var n,i="4.17.21",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",h="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",A=500,w="__lodash_placeholder__",x=1,P=2,L=4,M=1,F=2,G=1,B=2,E=4,O=8,U=16,R=32,Y=64,$=128,ve=256,ee=512,fe=30,Ee="...",oo=800,so=16,pa=1,Ll=2,Wl=3,un=1/0,Ut=9007199254740991,Bl=17976931348623157e292,Wr=0/0,dt=4294967295,Ul=dt-1,Gl=dt>>>1,Hl=[["ary",$],["bind",G],["bindKey",B],["curry",O],["curryRight",U],["flip",ee],["partial",R],["partialRight",Y],["rearg",ve]],Nn="[object Arguments]",Br="[object Array]",Kl="[object AsyncFunction]",tr="[object Boolean]",nr="[object Date]",ql="[object DOMException]",Ur="[object Error]",Gr="[object Function]",ha="[object GeneratorFunction]",ot="[object Map]",rr="[object Number]",$l="[object Null]",At="[object Object]",ga="[object Promise]",zl="[object Proxy]",ir="[object RegExp]",st="[object Set]",or="[object String]",Hr="[object Symbol]",jl="[object Undefined]",sr="[object WeakMap]",Yl="[object WeakSet]",ar="[object ArrayBuffer]",Pn="[object DataView]",ao="[object Float32Array]",uo="[object Float64Array]",co="[object Int8Array]",fo="[object Int16Array]",lo="[object Int32Array]",po="[object Uint8Array]",ho="[object Uint8ClampedArray]",go="[object Uint16Array]",mo="[object Uint32Array]",Jl=/\b__p \+= '';/g,Zl=/\b(__p \+=) '' \+/g,Xl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ma=/&(?:amp|lt|gt|quot|#39);/g,va=/[&<>"']/g,Vl=RegExp(ma.source),Ql=RegExp(va.source),ed=/<%-([\s\S]+?)%>/g,td=/<%([\s\S]+?)%>/g,ya=/<%=([\s\S]+?)%>/g,nd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rd=/^\w*$/,id=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vo=/[\\^$.*+?()[\]{}|]/g,od=RegExp(vo.source),yo=/^\s+/,sd=/\s/,ad=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ud=/\{\n\/\* \[wrapped with (.+)\] \*/,cd=/,? & /,fd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ld=/[()=,{}\[\]\/\s]/,dd=/\\(\\)?/g,pd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_a=/\w*$/,hd=/^[-+]0x[0-9a-f]+$/i,gd=/^0b[01]+$/i,md=/^\[object .+?Constructor\]$/,vd=/^0o[0-7]+$/i,yd=/^(?:0|[1-9]\d*)$/,_d=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kr=/($^)/,Ad=/['\n\r\u2028\u2029\\]/g,qr="\\ud800-\\udfff",Sd="\\u0300-\\u036f",bd="\\ufe20-\\ufe2f",wd="\\u20d0-\\u20ff",Aa=Sd+bd+wd,Sa="\\u2700-\\u27bf",ba="a-z\\xdf-\\xf6\\xf8-\\xff",Cd="\\xac\\xb1\\xd7\\xf7",xd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ed="\\u2000-\\u206f",Od=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",wa="A-Z\\xc0-\\xd6\\xd8-\\xde",Ca="\\ufe0e\\ufe0f",xa=Cd+xd+Ed+Od,_o="['\u2019]",Nd="["+qr+"]",Ea="["+xa+"]",$r="["+Aa+"]",Oa="\\d+",Pd="["+Sa+"]",Na="["+ba+"]",Pa="[^"+qr+xa+Oa+Sa+ba+wa+"]",Ao="\\ud83c[\\udffb-\\udfff]",Td="(?:"+$r+"|"+Ao+")",Ta="[^"+qr+"]",So="(?:\\ud83c[\\udde6-\\uddff]){2}",bo="[\\ud800-\\udbff][\\udc00-\\udfff]",Tn="["+wa+"]",ka="\\u200d",Ia="(?:"+Na+"|"+Pa+")",kd="(?:"+Tn+"|"+Pa+")",Ma="(?:"+_o+"(?:d|ll|m|re|s|t|ve))?",Ra="(?:"+_o+"(?:D|LL|M|RE|S|T|VE))?",Fa=Td+"?",Da="["+Ca+"]?",Id="(?:"+ka+"(?:"+[Ta,So,bo].join("|")+")"+Da+Fa+")*",Md="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",La=Da+Fa+Id,Fd="(?:"+[Pd,So,bo].join("|")+")"+La,Dd="(?:"+[Ta+$r+"?",$r,So,bo,Nd].join("|")+")",Ld=RegExp(_o,"g"),Wd=RegExp($r,"g"),wo=RegExp(Ao+"(?="+Ao+")|"+Dd+La,"g"),Bd=RegExp([Tn+"?"+Na+"+"+Ma+"(?="+[Ea,Tn,"$"].join("|")+")",kd+"+"+Ra+"(?="+[Ea,Tn+Ia,"$"].join("|")+")",Tn+"?"+Ia+"+"+Ma,Tn+"+"+Ra,Rd,Md,Oa,Fd].join("|"),"g"),Ud=RegExp("["+ka+qr+Aa+Ca+"]"),Gd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Hd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kd=-1,ue={};ue[ao]=ue[uo]=ue[co]=ue[fo]=ue[lo]=ue[po]=ue[ho]=ue[go]=ue[mo]=!0,ue[Nn]=ue[Br]=ue[ar]=ue[tr]=ue[Pn]=ue[nr]=ue[Ur]=ue[Gr]=ue[ot]=ue[rr]=ue[At]=ue[ir]=ue[st]=ue[or]=ue[sr]=!1;var ae={};ae[Nn]=ae[Br]=ae[ar]=ae[Pn]=ae[tr]=ae[nr]=ae[ao]=ae[uo]=ae[co]=ae[fo]=ae[lo]=ae[ot]=ae[rr]=ae[At]=ae[ir]=ae[st]=ae[or]=ae[Hr]=ae[po]=ae[ho]=ae[go]=ae[mo]=!0,ae[Ur]=ae[Gr]=ae[sr]=!1;var qd={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},$d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},jd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yd=parseFloat,Jd=parseInt,Wa=typeof global=="object"&&global&&global.Object===Object&&global,Zd=typeof self=="object"&&self&&self.Object===Object&&self,Se=Wa||Zd||Function("return this")(),Co=typeof Qn=="object"&&Qn&&!Qn.nodeType&&Qn,cn=Co&&typeof kr=="object"&&kr&&!kr.nodeType&&kr,Ba=cn&&cn.exports===Co,xo=Ba&&Wa.process,Je=function(){try{var g=cn&&cn.require&&cn.require("util").types;return g||xo&&xo.binding&&xo.binding("util")}catch{}}(),Ua=Je&&Je.isArrayBuffer,Ga=Je&&Je.isDate,Ha=Je&&Je.isMap,Ka=Je&&Je.isRegExp,qa=Je&&Je.isSet,$a=Je&&Je.isTypedArray;function Be(g,_,y){switch(y.length){case 0:return g.call(_);case 1:return g.call(_,y[0]);case 2:return g.call(_,y[0],y[1]);case 3:return g.call(_,y[0],y[1],y[2])}return g.apply(_,y)}function Xd(g,_,y,I){for(var z=-1,re=g==null?0:g.length;++z<re;){var ye=g[z];_(I,ye,y(ye),g)}return I}function Ze(g,_){for(var y=-1,I=g==null?0:g.length;++y<I&&_(g[y],y,g)!==!1;);return g}function Vd(g,_){for(var y=g==null?0:g.length;y--&&_(g[y],y,g)!==!1;);return g}function za(g,_){for(var y=-1,I=g==null?0:g.length;++y<I;)if(!_(g[y],y,g))return!1;return!0}function Gt(g,_){for(var y=-1,I=g==null?0:g.length,z=0,re=[];++y<I;){var ye=g[y];_(ye,y,g)&&(re[z++]=ye)}return re}function zr(g,_){var y=g==null?0:g.length;return!!y&&kn(g,_,0)>-1}function Eo(g,_,y){for(var I=-1,z=g==null?0:g.length;++I<z;)if(y(_,g[I]))return!0;return!1}function le(g,_){for(var y=-1,I=g==null?0:g.length,z=Array(I);++y<I;)z[y]=_(g[y],y,g);return z}function Ht(g,_){for(var y=-1,I=_.length,z=g.length;++y<I;)g[z+y]=_[y];return g}function Oo(g,_,y,I){var z=-1,re=g==null?0:g.length;for(I&&re&&(y=g[++z]);++z<re;)y=_(y,g[z],z,g);return y}function Qd(g,_,y,I){var z=g==null?0:g.length;for(I&&z&&(y=g[--z]);z--;)y=_(y,g[z],z,g);return y}function No(g,_){for(var y=-1,I=g==null?0:g.length;++y<I;)if(_(g[y],y,g))return!0;return!1}var ep=Po("length");function tp(g){return g.split("")}function np(g){return g.match(fd)||[]}function ja(g,_,y){var I;return y(g,function(z,re,ye){if(_(z,re,ye))return I=re,!1}),I}function jr(g,_,y,I){for(var z=g.length,re=y+(I?1:-1);I?re--:++re<z;)if(_(g[re],re,g))return re;return-1}function kn(g,_,y){return _===_?hp(g,_,y):jr(g,Ya,y)}function rp(g,_,y,I){for(var z=y-1,re=g.length;++z<re;)if(I(g[z],_))return z;return-1}function Ya(g){return g!==g}function Ja(g,_){var y=g==null?0:g.length;return y?ko(g,_)/y:Wr}function Po(g){return function(_){return _==null?n:_[g]}}function To(g){return function(_){return g==null?n:g[_]}}function Za(g,_,y,I,z){return z(g,function(re,ye,se){y=I?(I=!1,re):_(y,re,ye,se)}),y}function ip(g,_){var y=g.length;for(g.sort(_);y--;)g[y]=g[y].value;return g}function ko(g,_){for(var y,I=-1,z=g.length;++I<z;){var re=_(g[I]);re!==n&&(y=y===n?re:y+re)}return y}function Io(g,_){for(var y=-1,I=Array(g);++y<g;)I[y]=_(y);return I}function op(g,_){return le(_,function(y){return[y,g[y]]})}function Xa(g){return g&&g.slice(0,tu(g)+1).replace(yo,"")}function Ue(g){return function(_){return g(_)}}function Mo(g,_){return le(_,function(y){return g[y]})}function ur(g,_){return g.has(_)}function Va(g,_){for(var y=-1,I=g.length;++y<I&&kn(_,g[y],0)>-1;);return y}function Qa(g,_){for(var y=g.length;y--&&kn(_,g[y],0)>-1;);return y}function sp(g,_){for(var y=g.length,I=0;y--;)g[y]===_&&++I;return I}var ap=To(qd),up=To($d);function cp(g){return"\\"+jd[g]}function fp(g,_){return g==null?n:g[_]}function In(g){return Ud.test(g)}function lp(g){return Gd.test(g)}function dp(g){for(var _,y=[];!(_=g.next()).done;)y.push(_.value);return y}function Ro(g){var _=-1,y=Array(g.size);return g.forEach(function(I,z){y[++_]=[z,I]}),y}function eu(g,_){return function(y){return g(_(y))}}function Kt(g,_){for(var y=-1,I=g.length,z=0,re=[];++y<I;){var ye=g[y];(ye===_||ye===w)&&(g[y]=w,re[z++]=y)}return re}function Yr(g){var _=-1,y=Array(g.size);return g.forEach(function(I){y[++_]=I}),y}function pp(g){var _=-1,y=Array(g.size);return g.forEach(function(I){y[++_]=[I,I]}),y}function hp(g,_,y){for(var I=y-1,z=g.length;++I<z;)if(g[I]===_)return I;return-1}function gp(g,_,y){for(var I=y+1;I--;)if(g[I]===_)return I;return I}function Mn(g){return In(g)?vp(g):ep(g)}function at(g){return In(g)?yp(g):tp(g)}function tu(g){for(var _=g.length;_--&&sd.test(g.charAt(_)););return _}var mp=To(zd);function vp(g){for(var _=wo.lastIndex=0;wo.test(g);)++_;return _}function yp(g){return g.match(wo)||[]}function _p(g){return g.match(Bd)||[]}var Ap=function g(_){_=_==null?Se:qt.defaults(Se.Object(),_,qt.pick(Se,Hd));var y=_.Array,I=_.Date,z=_.Error,re=_.Function,ye=_.Math,se=_.Object,Fo=_.RegExp,Sp=_.String,Xe=_.TypeError,Jr=y.prototype,bp=re.prototype,Rn=se.prototype,Zr=_["__core-js_shared__"],Xr=bp.toString,oe=Rn.hasOwnProperty,wp=0,nu=function(){var e=/[^.]+$/.exec(Zr&&Zr.keys&&Zr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Vr=Rn.toString,Cp=Xr.call(se),xp=Se._,Ep=Fo("^"+Xr.call(oe).replace(vo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qr=Ba?_.Buffer:n,$t=_.Symbol,ei=_.Uint8Array,ru=Qr?Qr.allocUnsafe:n,ti=eu(se.getPrototypeOf,se),iu=se.create,ou=Rn.propertyIsEnumerable,ni=Jr.splice,su=$t?$t.isConcatSpreadable:n,cr=$t?$t.iterator:n,fn=$t?$t.toStringTag:n,ri=function(){try{var e=gn(se,"defineProperty");return e({},"",{}),e}catch{}}(),Op=_.clearTimeout!==Se.clearTimeout&&_.clearTimeout,Np=I&&I.now!==Se.Date.now&&I.now,Pp=_.setTimeout!==Se.setTimeout&&_.setTimeout,ii=ye.ceil,oi=ye.floor,Do=se.getOwnPropertySymbols,Tp=Qr?Qr.isBuffer:n,au=_.isFinite,kp=Jr.join,Ip=eu(se.keys,se),_e=ye.max,Oe=ye.min,Mp=I.now,Rp=_.parseInt,uu=ye.random,Fp=Jr.reverse,Lo=gn(_,"DataView"),fr=gn(_,"Map"),Wo=gn(_,"Promise"),Fn=gn(_,"Set"),lr=gn(_,"WeakMap"),dr=gn(se,"create"),si=lr&&new lr,Dn={},Dp=mn(Lo),Lp=mn(fr),Wp=mn(Wo),Bp=mn(Fn),Up=mn(lr),ai=$t?$t.prototype:n,pr=ai?ai.valueOf:n,cu=ai?ai.toString:n;function c(e){if(he(e)&&!j(e)&&!(e instanceof Q)){if(e instanceof Ve)return e;if(oe.call(e,"__wrapped__"))return fc(e)}return new Ve(e)}var Ln=function(){function e(){}return function(t){if(!pe(t))return{};if(iu)return iu(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function ui(){}function Ve(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}c.templateSettings={escape:ed,evaluate:td,interpolate:ya,variable:"",imports:{_:c}},c.prototype=ui.prototype,c.prototype.constructor=c,Ve.prototype=Ln(ui.prototype),Ve.prototype.constructor=Ve;function Q(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=dt,this.__views__=[]}function Gp(){var e=new Q(this.__wrapped__);return e.__actions__=Fe(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Fe(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Fe(this.__views__),e}function Hp(){if(this.__filtered__){var e=new Q(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Kp(){var e=this.__wrapped__.value(),t=this.__dir__,r=j(e),o=t<0,a=r?e.length:0,f=tg(0,a,this.__views__),d=f.start,p=f.end,m=p-d,S=o?p:d-1,b=this.__iteratees__,C=b.length,T=0,D=Oe(m,this.__takeCount__);if(!r||!o&&a==m&&D==m)return Mu(e,this.__actions__);var K=[];e:for(;m--&&T<D;){S+=t;for(var Z=-1,q=e[S];++Z<C;){var V=b[Z],te=V.iteratee,Ke=V.type,Re=te(q);if(Ke==Ll)q=Re;else if(!Re){if(Ke==pa)continue e;break e}}K[T++]=q}return K}Q.prototype=Ln(ui.prototype),Q.prototype.constructor=Q;function ln(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function qp(){this.__data__=dr?dr(null):{},this.size=0}function $p(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function zp(e){var t=this.__data__;if(dr){var r=t[e];return r===v?n:r}return oe.call(t,e)?t[e]:n}function jp(e){var t=this.__data__;return dr?t[e]!==n:oe.call(t,e)}function Yp(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=dr&&t===n?v:t,this}ln.prototype.clear=qp,ln.prototype.delete=$p,ln.prototype.get=zp,ln.prototype.has=jp,ln.prototype.set=Yp;function St(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Jp(){this.__data__=[],this.size=0}function Zp(e){var t=this.__data__,r=ci(t,e);if(r<0)return!1;var o=t.length-1;return r==o?t.pop():ni.call(t,r,1),--this.size,!0}function Xp(e){var t=this.__data__,r=ci(t,e);return r<0?n:t[r][1]}function Vp(e){return ci(this.__data__,e)>-1}function Qp(e,t){var r=this.__data__,o=ci(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}St.prototype.clear=Jp,St.prototype.delete=Zp,St.prototype.get=Xp,St.prototype.has=Vp,St.prototype.set=Qp;function bt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function eh(){this.size=0,this.__data__={hash:new ln,map:new(fr||St),string:new ln}}function th(e){var t=Si(this,e).delete(e);return this.size-=t?1:0,t}function nh(e){return Si(this,e).get(e)}function rh(e){return Si(this,e).has(e)}function ih(e,t){var r=Si(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}bt.prototype.clear=eh,bt.prototype.delete=th,bt.prototype.get=nh,bt.prototype.has=rh,bt.prototype.set=ih;function dn(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new bt;++t<r;)this.add(e[t])}function oh(e){return this.__data__.set(e,v),this}function sh(e){return this.__data__.has(e)}dn.prototype.add=dn.prototype.push=oh,dn.prototype.has=sh;function ut(e){var t=this.__data__=new St(e);this.size=t.size}function ah(){this.__data__=new St,this.size=0}function uh(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function ch(e){return this.__data__.get(e)}function fh(e){return this.__data__.has(e)}function lh(e,t){var r=this.__data__;if(r instanceof St){var o=r.__data__;if(!fr||o.length<s-1)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new bt(o)}return r.set(e,t),this.size=r.size,this}ut.prototype.clear=ah,ut.prototype.delete=uh,ut.prototype.get=ch,ut.prototype.has=fh,ut.prototype.set=lh;function fu(e,t){var r=j(e),o=!r&&vn(e),a=!r&&!o&&Zt(e),f=!r&&!o&&!a&&Gn(e),d=r||o||a||f,p=d?Io(e.length,Sp):[],m=p.length;for(var S in e)(t||oe.call(e,S))&&!(d&&(S=="length"||a&&(S=="offset"||S=="parent")||f&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||Et(S,m)))&&p.push(S);return p}function lu(e){var t=e.length;return t?e[Jo(0,t-1)]:n}function dh(e,t){return bi(Fe(e),pn(t,0,e.length))}function ph(e){return bi(Fe(e))}function Bo(e,t,r){(r!==n&&!ct(e[t],r)||r===n&&!(t in e))&&wt(e,t,r)}function hr(e,t,r){var o=e[t];(!(oe.call(e,t)&&ct(o,r))||r===n&&!(t in e))&&wt(e,t,r)}function ci(e,t){for(var r=e.length;r--;)if(ct(e[r][0],t))return r;return-1}function hh(e,t,r,o){return zt(e,function(a,f,d){t(o,a,r(a),d)}),o}function du(e,t){return e&&ht(t,be(t),e)}function gh(e,t){return e&&ht(t,Le(t),e)}function wt(e,t,r){t=="__proto__"&&ri?ri(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Uo(e,t){for(var r=-1,o=t.length,a=y(o),f=e==null;++r<o;)a[r]=f?n:As(e,t[r]);return a}function pn(e,t,r){return e===e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function Qe(e,t,r,o,a,f){var d,p=t&x,m=t&P,S=t&L;if(r&&(d=a?r(e,o,a,f):r(e)),d!==n)return d;if(!pe(e))return e;var b=j(e);if(b){if(d=rg(e),!p)return Fe(e,d)}else{var C=Ne(e),T=C==Gr||C==ha;if(Zt(e))return Du(e,p);if(C==At||C==Nn||T&&!a){if(d=m||T?{}:tc(e),!p)return m?zh(e,gh(d,e)):$h(e,du(d,e))}else{if(!ae[C])return a?e:{};d=ig(e,C,p)}}f||(f=new ut);var D=f.get(e);if(D)return D;f.set(e,d),Tc(e)?e.forEach(function(q){d.add(Qe(q,t,r,q,e,f))}):Nc(e)&&e.forEach(function(q,V){d.set(V,Qe(q,t,r,V,e,f))});var K=S?m?ss:os:m?Le:be,Z=b?n:K(e);return Ze(Z||e,function(q,V){Z&&(V=q,q=e[V]),hr(d,V,Qe(q,t,r,V,e,f))}),d}function mh(e){var t=be(e);return function(r){return pu(r,e,t)}}function pu(e,t,r){var o=r.length;if(e==null)return!o;for(e=se(e);o--;){var a=r[o],f=t[a],d=e[a];if(d===n&&!(a in e)||!f(d))return!1}return!0}function hu(e,t,r){if(typeof e!="function")throw new Xe(l);return Sr(function(){e.apply(n,r)},t)}function gr(e,t,r,o){var a=-1,f=zr,d=!0,p=e.length,m=[],S=t.length;if(!p)return m;r&&(t=le(t,Ue(r))),o?(f=Eo,d=!1):t.length>=s&&(f=ur,d=!1,t=new dn(t));e:for(;++a<p;){var b=e[a],C=r==null?b:r(b);if(b=o||b!==0?b:0,d&&C===C){for(var T=S;T--;)if(t[T]===C)continue e;m.push(b)}else f(t,C,o)||m.push(b)}return m}var zt=Gu(pt),gu=Gu(Ho,!0);function vh(e,t){var r=!0;return zt(e,function(o,a,f){return r=!!t(o,a,f),r}),r}function fi(e,t,r){for(var o=-1,a=e.length;++o<a;){var f=e[o],d=t(f);if(d!=null&&(p===n?d===d&&!He(d):r(d,p)))var p=d,m=f}return m}function yh(e,t,r,o){var a=e.length;for(r=J(r),r<0&&(r=-r>a?0:a+r),o=o===n||o>a?a:J(o),o<0&&(o+=a),o=r>o?0:Ic(o);r<o;)e[r++]=t;return e}function mu(e,t){var r=[];return zt(e,function(o,a,f){t(o,a,f)&&r.push(o)}),r}function xe(e,t,r,o,a){var f=-1,d=e.length;for(r||(r=sg),a||(a=[]);++f<d;){var p=e[f];t>0&&r(p)?t>1?xe(p,t-1,r,o,a):Ht(a,p):o||(a[a.length]=p)}return a}var Go=Hu(),vu=Hu(!0);function pt(e,t){return e&&Go(e,t,be)}function Ho(e,t){return e&&vu(e,t,be)}function li(e,t){return Gt(t,function(r){return Ot(e[r])})}function hn(e,t){t=Yt(t,e);for(var r=0,o=t.length;e!=null&&r<o;)e=e[gt(t[r++])];return r&&r==o?e:n}function yu(e,t,r){var o=t(e);return j(e)?o:Ht(o,r(e))}function Ie(e){return e==null?e===n?jl:$l:fn&&fn in se(e)?eg(e):pg(e)}function Ko(e,t){return e>t}function _h(e,t){return e!=null&&oe.call(e,t)}function Ah(e,t){return e!=null&&t in se(e)}function Sh(e,t,r){return e>=Oe(t,r)&&e<_e(t,r)}function qo(e,t,r){for(var o=r?Eo:zr,a=e[0].length,f=e.length,d=f,p=y(f),m=1/0,S=[];d--;){var b=e[d];d&&t&&(b=le(b,Ue(t))),m=Oe(b.length,m),p[d]=!r&&(t||a>=120&&b.length>=120)?new dn(d&&b):n}b=e[0];var C=-1,T=p[0];e:for(;++C<a&&S.length<m;){var D=b[C],K=t?t(D):D;if(D=r||D!==0?D:0,!(T?ur(T,K):o(S,K,r))){for(d=f;--d;){var Z=p[d];if(!(Z?ur(Z,K):o(e[d],K,r)))continue e}T&&T.push(K),S.push(D)}}return S}function bh(e,t,r,o){return pt(e,function(a,f,d){t(o,r(a),f,d)}),o}function mr(e,t,r){t=Yt(t,e),e=oc(e,t);var o=e==null?e:e[gt(tt(t))];return o==null?n:Be(o,e,r)}function _u(e){return he(e)&&Ie(e)==Nn}function wh(e){return he(e)&&Ie(e)==ar}function Ch(e){return he(e)&&Ie(e)==nr}function vr(e,t,r,o,a){return e===t?!0:e==null||t==null||!he(e)&&!he(t)?e!==e&&t!==t:xh(e,t,r,o,vr,a)}function xh(e,t,r,o,a,f){var d=j(e),p=j(t),m=d?Br:Ne(e),S=p?Br:Ne(t);m=m==Nn?At:m,S=S==Nn?At:S;var b=m==At,C=S==At,T=m==S;if(T&&Zt(e)){if(!Zt(t))return!1;d=!0,b=!1}if(T&&!b)return f||(f=new ut),d||Gn(e)?Vu(e,t,r,o,a,f):Vh(e,t,m,r,o,a,f);if(!(r&M)){var D=b&&oe.call(e,"__wrapped__"),K=C&&oe.call(t,"__wrapped__");if(D||K){var Z=D?e.value():e,q=K?t.value():t;return f||(f=new ut),a(Z,q,r,o,f)}}return T?(f||(f=new ut),Qh(e,t,r,o,a,f)):!1}function Eh(e){return he(e)&&Ne(e)==ot}function $o(e,t,r,o){var a=r.length,f=a,d=!o;if(e==null)return!f;for(e=se(e);a--;){var p=r[a];if(d&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++a<f;){p=r[a];var m=p[0],S=e[m],b=p[1];if(d&&p[2]){if(S===n&&!(m in e))return!1}else{var C=new ut;if(o)var T=o(S,b,m,e,t,C);if(!(T===n?vr(b,S,M|F,o,C):T))return!1}}return!0}function Au(e){if(!pe(e)||ug(e))return!1;var t=Ot(e)?Ep:md;return t.test(mn(e))}function Oh(e){return he(e)&&Ie(e)==ir}function Nh(e){return he(e)&&Ne(e)==st}function Ph(e){return he(e)&&Ni(e.length)&&!!ue[Ie(e)]}function Su(e){return typeof e=="function"?e:e==null?We:typeof e=="object"?j(e)?Cu(e[0],e[1]):wu(e):Kc(e)}function zo(e){if(!Ar(e))return Ip(e);var t=[];for(var r in se(e))oe.call(e,r)&&r!="constructor"&&t.push(r);return t}function Th(e){if(!pe(e))return dg(e);var t=Ar(e),r=[];for(var o in e)o=="constructor"&&(t||!oe.call(e,o))||r.push(o);return r}function jo(e,t){return e<t}function bu(e,t){var r=-1,o=De(e)?y(e.length):[];return zt(e,function(a,f,d){o[++r]=t(a,f,d)}),o}function wu(e){var t=us(e);return t.length==1&&t[0][2]?rc(t[0][0],t[0][1]):function(r){return r===e||$o(r,e,t)}}function Cu(e,t){return fs(e)&&nc(t)?rc(gt(e),t):function(r){var o=As(r,e);return o===n&&o===t?Ss(r,e):vr(t,o,M|F)}}function di(e,t,r,o,a){e!==t&&Go(t,function(f,d){if(a||(a=new ut),pe(f))kh(e,t,d,r,di,o,a);else{var p=o?o(ds(e,d),f,d+"",e,t,a):n;p===n&&(p=f),Bo(e,d,p)}},Le)}function kh(e,t,r,o,a,f,d){var p=ds(e,r),m=ds(t,r),S=d.get(m);if(S){Bo(e,r,S);return}var b=f?f(p,m,r+"",e,t,d):n,C=b===n;if(C){var T=j(m),D=!T&&Zt(m),K=!T&&!D&&Gn(m);b=m,T||D||K?j(p)?b=p:ge(p)?b=Fe(p):D?(C=!1,b=Du(m,!0)):K?(C=!1,b=Lu(m,!0)):b=[]:br(m)||vn(m)?(b=p,vn(p)?b=Mc(p):(!pe(p)||Ot(p))&&(b=tc(m))):C=!1}C&&(d.set(m,b),a(b,m,o,f,d),d.delete(m)),Bo(e,r,b)}function xu(e,t){var r=e.length;if(r)return t+=t<0?r:0,Et(t,r)?e[t]:n}function Eu(e,t,r){t.length?t=le(t,function(f){return j(f)?function(d){return hn(d,f.length===1?f[0]:f)}:f}):t=[We];var o=-1;t=le(t,Ue(H()));var a=bu(e,function(f,d,p){var m=le(t,function(S){return S(f)});return{criteria:m,index:++o,value:f}});return ip(a,function(f,d){return qh(f,d,r)})}function Ih(e,t){return Ou(e,t,function(r,o){return Ss(e,o)})}function Ou(e,t,r){for(var o=-1,a=t.length,f={};++o<a;){var d=t[o],p=hn(e,d);r(p,d)&&yr(f,Yt(d,e),p)}return f}function Mh(e){return function(t){return hn(t,e)}}function Yo(e,t,r,o){var a=o?rp:kn,f=-1,d=t.length,p=e;for(e===t&&(t=Fe(t)),r&&(p=le(e,Ue(r)));++f<d;)for(var m=0,S=t[f],b=r?r(S):S;(m=a(p,b,m,o))>-1;)p!==e&&ni.call(p,m,1),ni.call(e,m,1);return e}function Nu(e,t){for(var r=e?t.length:0,o=r-1;r--;){var a=t[r];if(r==o||a!==f){var f=a;Et(a)?ni.call(e,a,1):Vo(e,a)}}return e}function Jo(e,t){return e+oi(uu()*(t-e+1))}function Rh(e,t,r,o){for(var a=-1,f=_e(ii((t-e)/(r||1)),0),d=y(f);f--;)d[o?f:++a]=e,e+=r;return d}function Zo(e,t){var r="";if(!e||t<1||t>Ut)return r;do t%2&&(r+=e),t=oi(t/2),t&&(e+=e);while(t);return r}function X(e,t){return ps(ic(e,t,We),e+"")}function Fh(e){return lu(Hn(e))}function Dh(e,t){var r=Hn(e);return bi(r,pn(t,0,r.length))}function yr(e,t,r,o){if(!pe(e))return e;t=Yt(t,e);for(var a=-1,f=t.length,d=f-1,p=e;p!=null&&++a<f;){var m=gt(t[a]),S=r;if(m==="__proto__"||m==="constructor"||m==="prototype")return e;if(a!=d){var b=p[m];S=o?o(b,m,p):n,S===n&&(S=pe(b)?b:Et(t[a+1])?[]:{})}hr(p,m,S),p=p[m]}return e}var Pu=si?function(e,t){return si.set(e,t),e}:We,Lh=ri?function(e,t){return ri(e,"toString",{configurable:!0,enumerable:!1,value:ws(t),writable:!0})}:We;function Wh(e){return bi(Hn(e))}function et(e,t,r){var o=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var f=y(a);++o<a;)f[o]=e[o+t];return f}function Bh(e,t){var r;return zt(e,function(o,a,f){return r=t(o,a,f),!r}),!!r}function pi(e,t,r){var o=0,a=e==null?o:e.length;if(typeof t=="number"&&t===t&&a<=Gl){for(;o<a;){var f=o+a>>>1,d=e[f];d!==null&&!He(d)&&(r?d<=t:d<t)?o=f+1:a=f}return a}return Xo(e,t,We,r)}function Xo(e,t,r,o){var a=0,f=e==null?0:e.length;if(f===0)return 0;t=r(t);for(var d=t!==t,p=t===null,m=He(t),S=t===n;a<f;){var b=oi((a+f)/2),C=r(e[b]),T=C!==n,D=C===null,K=C===C,Z=He(C);if(d)var q=o||K;else S?q=K&&(o||T):p?q=K&&T&&(o||!D):m?q=K&&T&&!D&&(o||!Z):D||Z?q=!1:q=o?C<=t:C<t;q?a=b+1:f=b}return Oe(f,Ul)}function Tu(e,t){for(var r=-1,o=e.length,a=0,f=[];++r<o;){var d=e[r],p=t?t(d):d;if(!r||!ct(p,m)){var m=p;f[a++]=d===0?0:d}}return f}function ku(e){return typeof e=="number"?e:He(e)?Wr:+e}function Ge(e){if(typeof e=="string")return e;if(j(e))return le(e,Ge)+"";if(He(e))return cu?cu.call(e):"";var t=e+"";return t=="0"&&1/e==-un?"-0":t}function jt(e,t,r){var o=-1,a=zr,f=e.length,d=!0,p=[],m=p;if(r)d=!1,a=Eo;else if(f>=s){var S=t?null:Zh(e);if(S)return Yr(S);d=!1,a=ur,m=new dn}else m=t?[]:p;e:for(;++o<f;){var b=e[o],C=t?t(b):b;if(b=r||b!==0?b:0,d&&C===C){for(var T=m.length;T--;)if(m[T]===C)continue e;t&&m.push(C),p.push(b)}else a(m,C,r)||(m!==p&&m.push(C),p.push(b))}return p}function Vo(e,t){return t=Yt(t,e),e=oc(e,t),e==null||delete e[gt(tt(t))]}function Iu(e,t,r,o){return yr(e,t,r(hn(e,t)),o)}function hi(e,t,r,o){for(var a=e.length,f=o?a:-1;(o?f--:++f<a)&&t(e[f],f,e););return r?et(e,o?0:f,o?f+1:a):et(e,o?f+1:0,o?a:f)}function Mu(e,t){var r=e;return r instanceof Q&&(r=r.value()),Oo(t,function(o,a){return a.func.apply(a.thisArg,Ht([o],a.args))},r)}function Qo(e,t,r){var o=e.length;if(o<2)return o?jt(e[0]):[];for(var a=-1,f=y(o);++a<o;)for(var d=e[a],p=-1;++p<o;)p!=a&&(f[a]=gr(f[a]||d,e[p],t,r));return jt(xe(f,1),t,r)}function Ru(e,t,r){for(var o=-1,a=e.length,f=t.length,d={};++o<a;){var p=o<f?t[o]:n;r(d,e[o],p)}return d}function es(e){return ge(e)?e:[]}function ts(e){return typeof e=="function"?e:We}function Yt(e,t){return j(e)?e:fs(e,t)?[e]:cc(ie(e))}var Uh=X;function Jt(e,t,r){var o=e.length;return r=r===n?o:r,!t&&r>=o?e:et(e,t,r)}var Fu=Op||function(e){return Se.clearTimeout(e)};function Du(e,t){if(t)return e.slice();var r=e.length,o=ru?ru(r):new e.constructor(r);return e.copy(o),o}function ns(e){var t=new e.constructor(e.byteLength);return new ei(t).set(new ei(e)),t}function Gh(e,t){var r=t?ns(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Hh(e){var t=new e.constructor(e.source,_a.exec(e));return t.lastIndex=e.lastIndex,t}function Kh(e){return pr?se(pr.call(e)):{}}function Lu(e,t){var r=t?ns(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Wu(e,t){if(e!==t){var r=e!==n,o=e===null,a=e===e,f=He(e),d=t!==n,p=t===null,m=t===t,S=He(t);if(!p&&!S&&!f&&e>t||f&&d&&m&&!p&&!S||o&&d&&m||!r&&m||!a)return 1;if(!o&&!f&&!S&&e<t||S&&r&&a&&!o&&!f||p&&r&&a||!d&&a||!m)return-1}return 0}function qh(e,t,r){for(var o=-1,a=e.criteria,f=t.criteria,d=a.length,p=r.length;++o<d;){var m=Wu(a[o],f[o]);if(m){if(o>=p)return m;var S=r[o];return m*(S=="desc"?-1:1)}}return e.index-t.index}function Bu(e,t,r,o){for(var a=-1,f=e.length,d=r.length,p=-1,m=t.length,S=_e(f-d,0),b=y(m+S),C=!o;++p<m;)b[p]=t[p];for(;++a<d;)(C||a<f)&&(b[r[a]]=e[a]);for(;S--;)b[p++]=e[a++];return b}function Uu(e,t,r,o){for(var a=-1,f=e.length,d=-1,p=r.length,m=-1,S=t.length,b=_e(f-p,0),C=y(b+S),T=!o;++a<b;)C[a]=e[a];for(var D=a;++m<S;)C[D+m]=t[m];for(;++d<p;)(T||a<f)&&(C[D+r[d]]=e[a++]);return C}function Fe(e,t){var r=-1,o=e.length;for(t||(t=y(o));++r<o;)t[r]=e[r];return t}function ht(e,t,r,o){var a=!r;r||(r={});for(var f=-1,d=t.length;++f<d;){var p=t[f],m=o?o(r[p],e[p],p,r,e):n;m===n&&(m=e[p]),a?wt(r,p,m):hr(r,p,m)}return r}function $h(e,t){return ht(e,cs(e),t)}function zh(e,t){return ht(e,Qu(e),t)}function gi(e,t){return function(r,o){var a=j(r)?Xd:hh,f=t?t():{};return a(r,e,H(o,2),f)}}function Wn(e){return X(function(t,r){var o=-1,a=r.length,f=a>1?r[a-1]:n,d=a>2?r[2]:n;for(f=e.length>3&&typeof f=="function"?(a--,f):n,d&&Me(r[0],r[1],d)&&(f=a<3?n:f,a=1),t=se(t);++o<a;){var p=r[o];p&&e(t,p,o,f)}return t})}function Gu(e,t){return function(r,o){if(r==null)return r;if(!De(r))return e(r,o);for(var a=r.length,f=t?a:-1,d=se(r);(t?f--:++f<a)&&o(d[f],f,d)!==!1;);return r}}function Hu(e){return function(t,r,o){for(var a=-1,f=se(t),d=o(t),p=d.length;p--;){var m=d[e?p:++a];if(r(f[m],m,f)===!1)break}return t}}function jh(e,t,r){var o=t&G,a=_r(e);function f(){var d=this&&this!==Se&&this instanceof f?a:e;return d.apply(o?r:this,arguments)}return f}function Ku(e){return function(t){t=ie(t);var r=In(t)?at(t):n,o=r?r[0]:t.charAt(0),a=r?Jt(r,1).join(""):t.slice(1);return o[e]()+a}}function Bn(e){return function(t){return Oo(Gc(Uc(t).replace(Ld,"")),e,"")}}function _r(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Ln(e.prototype),o=e.apply(r,t);return pe(o)?o:r}}function Yh(e,t,r){var o=_r(e);function a(){for(var f=arguments.length,d=y(f),p=f,m=Un(a);p--;)d[p]=arguments[p];var S=f<3&&d[0]!==m&&d[f-1]!==m?[]:Kt(d,m);if(f-=S.length,f<r)return Yu(e,t,mi,a.placeholder,n,d,S,n,n,r-f);var b=this&&this!==Se&&this instanceof a?o:e;return Be(b,this,d)}return a}function qu(e){return function(t,r,o){var a=se(t);if(!De(t)){var f=H(r,3);t=be(t),r=function(p){return f(a[p],p,a)}}var d=e(t,r,o);return d>-1?a[f?t[d]:d]:n}}function $u(e){return xt(function(t){var r=t.length,o=r,a=Ve.prototype.thru;for(e&&t.reverse();o--;){var f=t[o];if(typeof f!="function")throw new Xe(l);if(a&&!d&&Ai(f)=="wrapper")var d=new Ve([],!0)}for(o=d?o:r;++o<r;){f=t[o];var p=Ai(f),m=p=="wrapper"?as(f):n;m&&ls(m[0])&&m[1]==($|O|R|ve)&&!m[4].length&&m[9]==1?d=d[Ai(m[0])].apply(d,m[3]):d=f.length==1&&ls(f)?d[p]():d.thru(f)}return function(){var S=arguments,b=S[0];if(d&&S.length==1&&j(b))return d.plant(b).value();for(var C=0,T=r?t[C].apply(this,S):b;++C<r;)T=t[C].call(this,T);return T}})}function mi(e,t,r,o,a,f,d,p,m,S){var b=t&$,C=t&G,T=t&B,D=t&(O|U),K=t&ee,Z=T?n:_r(e);function q(){for(var V=arguments.length,te=y(V),Ke=V;Ke--;)te[Ke]=arguments[Ke];if(D)var Re=Un(q),qe=sp(te,Re);if(o&&(te=Bu(te,o,a,D)),f&&(te=Uu(te,f,d,D)),V-=qe,D&&V<S){var me=Kt(te,Re);return Yu(e,t,mi,q.placeholder,r,te,me,p,m,S-V)}var ft=C?r:this,Pt=T?ft[e]:e;return V=te.length,p?te=hg(te,p):K&&V>1&&te.reverse(),b&&m<V&&(te.length=m),this&&this!==Se&&this instanceof q&&(Pt=Z||_r(Pt)),Pt.apply(ft,te)}return q}function zu(e,t){return function(r,o){return bh(r,e,t(o),{})}}function vi(e,t){return function(r,o){var a;if(r===n&&o===n)return t;if(r!==n&&(a=r),o!==n){if(a===n)return o;typeof r=="string"||typeof o=="string"?(r=Ge(r),o=Ge(o)):(r=ku(r),o=ku(o)),a=e(r,o)}return a}}function rs(e){return xt(function(t){return t=le(t,Ue(H())),X(function(r){var o=this;return e(t,function(a){return Be(a,o,r)})})})}function yi(e,t){t=t===n?" ":Ge(t);var r=t.length;if(r<2)return r?Zo(t,e):t;var o=Zo(t,ii(e/Mn(t)));return In(t)?Jt(at(o),0,e).join(""):o.slice(0,e)}function Jh(e,t,r,o){var a=t&G,f=_r(e);function d(){for(var p=-1,m=arguments.length,S=-1,b=o.length,C=y(b+m),T=this&&this!==Se&&this instanceof d?f:e;++S<b;)C[S]=o[S];for(;m--;)C[S++]=arguments[++p];return Be(T,a?r:this,C)}return d}function ju(e){return function(t,r,o){return o&&typeof o!="number"&&Me(t,r,o)&&(r=o=n),t=Nt(t),r===n?(r=t,t=0):r=Nt(r),o=o===n?t<r?1:-1:Nt(o),Rh(t,r,o,e)}}function _i(e){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=nt(t),r=nt(r)),e(t,r)}}function Yu(e,t,r,o,a,f,d,p,m,S){var b=t&O,C=b?d:n,T=b?n:d,D=b?f:n,K=b?n:f;t|=b?R:Y,t&=~(b?Y:R),t&E||(t&=~(G|B));var Z=[e,t,a,D,C,K,T,p,m,S],q=r.apply(n,Z);return ls(e)&&sc(q,Z),q.placeholder=o,ac(q,e,t)}function is(e){var t=ye[e];return function(r,o){if(r=nt(r),o=o==null?0:Oe(J(o),292),o&&au(r)){var a=(ie(r)+"e").split("e"),f=t(a[0]+"e"+(+a[1]+o));return a=(ie(f)+"e").split("e"),+(a[0]+"e"+(+a[1]-o))}return t(r)}}var Zh=Fn&&1/Yr(new Fn([,-0]))[1]==un?function(e){return new Fn(e)}:Es;function Ju(e){return function(t){var r=Ne(t);return r==ot?Ro(t):r==st?pp(t):op(t,e(t))}}function Ct(e,t,r,o,a,f,d,p){var m=t&B;if(!m&&typeof e!="function")throw new Xe(l);var S=o?o.length:0;if(S||(t&=~(R|Y),o=a=n),d=d===n?d:_e(J(d),0),p=p===n?p:J(p),S-=a?a.length:0,t&Y){var b=o,C=a;o=a=n}var T=m?n:as(e),D=[e,t,r,o,a,b,C,f,d,p];if(T&&lg(D,T),e=D[0],t=D[1],r=D[2],o=D[3],a=D[4],p=D[9]=D[9]===n?m?0:e.length:_e(D[9]-S,0),!p&&t&(O|U)&&(t&=~(O|U)),!t||t==G)var K=jh(e,t,r);else t==O||t==U?K=Yh(e,t,p):(t==R||t==(G|R))&&!a.length?K=Jh(e,t,r,o):K=mi.apply(n,D);var Z=T?Pu:sc;return ac(Z(K,D),e,t)}function Zu(e,t,r,o){return e===n||ct(e,Rn[r])&&!oe.call(o,r)?t:e}function Xu(e,t,r,o,a,f){return pe(e)&&pe(t)&&(f.set(t,e),di(e,t,n,Xu,f),f.delete(t)),e}function Xh(e){return br(e)?n:e}function Vu(e,t,r,o,a,f){var d=r&M,p=e.length,m=t.length;if(p!=m&&!(d&&m>p))return!1;var S=f.get(e),b=f.get(t);if(S&&b)return S==t&&b==e;var C=-1,T=!0,D=r&F?new dn:n;for(f.set(e,t),f.set(t,e);++C<p;){var K=e[C],Z=t[C];if(o)var q=d?o(Z,K,C,t,e,f):o(K,Z,C,e,t,f);if(q!==n){if(q)continue;T=!1;break}if(D){if(!No(t,function(V,te){if(!ur(D,te)&&(K===V||a(K,V,r,o,f)))return D.push(te)})){T=!1;break}}else if(!(K===Z||a(K,Z,r,o,f))){T=!1;break}}return f.delete(e),f.delete(t),T}function Vh(e,t,r,o,a,f,d){switch(r){case Pn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ar:return!(e.byteLength!=t.byteLength||!f(new ei(e),new ei(t)));case tr:case nr:case rr:return ct(+e,+t);case Ur:return e.name==t.name&&e.message==t.message;case ir:case or:return e==t+"";case ot:var p=Ro;case st:var m=o&M;if(p||(p=Yr),e.size!=t.size&&!m)return!1;var S=d.get(e);if(S)return S==t;o|=F,d.set(e,t);var b=Vu(p(e),p(t),o,a,f,d);return d.delete(e),b;case Hr:if(pr)return pr.call(e)==pr.call(t)}return!1}function Qh(e,t,r,o,a,f){var d=r&M,p=os(e),m=p.length,S=os(t),b=S.length;if(m!=b&&!d)return!1;for(var C=m;C--;){var T=p[C];if(!(d?T in t:oe.call(t,T)))return!1}var D=f.get(e),K=f.get(t);if(D&&K)return D==t&&K==e;var Z=!0;f.set(e,t),f.set(t,e);for(var q=d;++C<m;){T=p[C];var V=e[T],te=t[T];if(o)var Ke=d?o(te,V,T,t,e,f):o(V,te,T,e,t,f);if(!(Ke===n?V===te||a(V,te,r,o,f):Ke)){Z=!1;break}q||(q=T=="constructor")}if(Z&&!q){var Re=e.constructor,qe=t.constructor;Re!=qe&&"constructor"in e&&"constructor"in t&&!(typeof Re=="function"&&Re instanceof Re&&typeof qe=="function"&&qe instanceof qe)&&(Z=!1)}return f.delete(e),f.delete(t),Z}function xt(e){return ps(ic(e,n,pc),e+"")}function os(e){return yu(e,be,cs)}function ss(e){return yu(e,Le,Qu)}var as=si?function(e){return si.get(e)}:Es;function Ai(e){for(var t=e.name+"",r=Dn[t],o=oe.call(Dn,t)?r.length:0;o--;){var a=r[o],f=a.func;if(f==null||f==e)return a.name}return t}function Un(e){var t=oe.call(c,"placeholder")?c:e;return t.placeholder}function H(){var e=c.iteratee||Cs;return e=e===Cs?Su:e,arguments.length?e(arguments[0],arguments[1]):e}function Si(e,t){var r=e.__data__;return ag(t)?r[typeof t=="string"?"string":"hash"]:r.map}function us(e){for(var t=be(e),r=t.length;r--;){var o=t[r],a=e[o];t[r]=[o,a,nc(a)]}return t}function gn(e,t){var r=fp(e,t);return Au(r)?r:n}function eg(e){var t=oe.call(e,fn),r=e[fn];try{e[fn]=n;var o=!0}catch{}var a=Vr.call(e);return o&&(t?e[fn]=r:delete e[fn]),a}var cs=Do?function(e){return e==null?[]:(e=se(e),Gt(Do(e),function(t){return ou.call(e,t)}))}:Os,Qu=Do?function(e){for(var t=[];e;)Ht(t,cs(e)),e=ti(e);return t}:Os,Ne=Ie;(Lo&&Ne(new Lo(new ArrayBuffer(1)))!=Pn||fr&&Ne(new fr)!=ot||Wo&&Ne(Wo.resolve())!=ga||Fn&&Ne(new Fn)!=st||lr&&Ne(new lr)!=sr)&&(Ne=function(e){var t=Ie(e),r=t==At?e.constructor:n,o=r?mn(r):"";if(o)switch(o){case Dp:return Pn;case Lp:return ot;case Wp:return ga;case Bp:return st;case Up:return sr}return t});function tg(e,t,r){for(var o=-1,a=r.length;++o<a;){var f=r[o],d=f.size;switch(f.type){case"drop":e+=d;break;case"dropRight":t-=d;break;case"take":t=Oe(t,e+d);break;case"takeRight":e=_e(e,t-d);break}}return{start:e,end:t}}function ng(e){var t=e.match(ud);return t?t[1].split(cd):[]}function ec(e,t,r){t=Yt(t,e);for(var o=-1,a=t.length,f=!1;++o<a;){var d=gt(t[o]);if(!(f=e!=null&&r(e,d)))break;e=e[d]}return f||++o!=a?f:(a=e==null?0:e.length,!!a&&Ni(a)&&Et(d,a)&&(j(e)||vn(e)))}function rg(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&oe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function tc(e){return typeof e.constructor=="function"&&!Ar(e)?Ln(ti(e)):{}}function ig(e,t,r){var o=e.constructor;switch(t){case ar:return ns(e);case tr:case nr:return new o(+e);case Pn:return Gh(e,r);case ao:case uo:case co:case fo:case lo:case po:case ho:case go:case mo:return Lu(e,r);case ot:return new o;case rr:case or:return new o(e);case ir:return Hh(e);case st:return new o;case Hr:return Kh(e)}}function og(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(ad,`{
/* [wrapped with `+t+`] */
`)}function sg(e){return j(e)||vn(e)||!!(su&&e&&e[su])}function Et(e,t){var r=typeof e;return t=t??Ut,!!t&&(r=="number"||r!="symbol"&&yd.test(e))&&e>-1&&e%1==0&&e<t}function Me(e,t,r){if(!pe(r))return!1;var o=typeof t;return(o=="number"?De(r)&&Et(t,r.length):o=="string"&&t in r)?ct(r[t],e):!1}function fs(e,t){if(j(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||He(e)?!0:rd.test(e)||!nd.test(e)||t!=null&&e in se(t)}function ag(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ls(e){var t=Ai(e),r=c[t];if(typeof r!="function"||!(t in Q.prototype))return!1;if(e===r)return!0;var o=as(r);return!!o&&e===o[0]}function ug(e){return!!nu&&nu in e}var cg=Zr?Ot:Ns;function Ar(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Rn;return e===r}function nc(e){return e===e&&!pe(e)}function rc(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==n||e in se(r))}}function fg(e){var t=Ei(e,function(o){return r.size===A&&r.clear(),o}),r=t.cache;return t}function lg(e,t){var r=e[1],o=t[1],a=r|o,f=a<(G|B|$),d=o==$&&r==O||o==$&&r==ve&&e[7].length<=t[8]||o==($|ve)&&t[7].length<=t[8]&&r==O;if(!(f||d))return e;o&G&&(e[2]=t[2],a|=r&G?0:E);var p=t[3];if(p){var m=e[3];e[3]=m?Bu(m,p,t[4]):p,e[4]=m?Kt(e[3],w):t[4]}return p=t[5],p&&(m=e[5],e[5]=m?Uu(m,p,t[6]):p,e[6]=m?Kt(e[5],w):t[6]),p=t[7],p&&(e[7]=p),o&$&&(e[8]=e[8]==null?t[8]:Oe(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function dg(e){var t=[];if(e!=null)for(var r in se(e))t.push(r);return t}function pg(e){return Vr.call(e)}function ic(e,t,r){return t=_e(t===n?e.length-1:t,0),function(){for(var o=arguments,a=-1,f=_e(o.length-t,0),d=y(f);++a<f;)d[a]=o[t+a];a=-1;for(var p=y(t+1);++a<t;)p[a]=o[a];return p[t]=r(d),Be(e,this,p)}}function oc(e,t){return t.length<2?e:hn(e,et(t,0,-1))}function hg(e,t){for(var r=e.length,o=Oe(t.length,r),a=Fe(e);o--;){var f=t[o];e[o]=Et(f,r)?a[f]:n}return e}function ds(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var sc=uc(Pu),Sr=Pp||function(e,t){return Se.setTimeout(e,t)},ps=uc(Lh);function ac(e,t,r){var o=t+"";return ps(e,og(o,gg(ng(o),r)))}function uc(e){var t=0,r=0;return function(){var o=Mp(),a=so-(o-r);if(r=o,a>0){if(++t>=oo)return arguments[0]}else t=0;return e.apply(n,arguments)}}function bi(e,t){var r=-1,o=e.length,a=o-1;for(t=t===n?o:t;++r<t;){var f=Jo(r,a),d=e[f];e[f]=e[r],e[r]=d}return e.length=t,e}var cc=fg(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(id,function(r,o,a,f){t.push(a?f.replace(dd,"$1"):o||r)}),t});function gt(e){if(typeof e=="string"||He(e))return e;var t=e+"";return t=="0"&&1/e==-un?"-0":t}function mn(e){if(e!=null){try{return Xr.call(e)}catch{}try{return e+""}catch{}}return""}function gg(e,t){return Ze(Hl,function(r){var o="_."+r[0];t&r[1]&&!zr(e,o)&&e.push(o)}),e.sort()}function fc(e){if(e instanceof Q)return e.clone();var t=new Ve(e.__wrapped__,e.__chain__);return t.__actions__=Fe(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function mg(e,t,r){(r?Me(e,t,r):t===n)?t=1:t=_e(J(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var a=0,f=0,d=y(ii(o/t));a<o;)d[f++]=et(e,a,a+=t);return d}function vg(e){for(var t=-1,r=e==null?0:e.length,o=0,a=[];++t<r;){var f=e[t];f&&(a[o++]=f)}return a}function yg(){var e=arguments.length;if(!e)return[];for(var t=y(e-1),r=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Ht(j(r)?Fe(r):[r],xe(t,1))}var _g=X(function(e,t){return ge(e)?gr(e,xe(t,1,ge,!0)):[]}),Ag=X(function(e,t){var r=tt(t);return ge(r)&&(r=n),ge(e)?gr(e,xe(t,1,ge,!0),H(r,2)):[]}),Sg=X(function(e,t){var r=tt(t);return ge(r)&&(r=n),ge(e)?gr(e,xe(t,1,ge,!0),n,r):[]});function bg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),et(e,t<0?0:t,o)):[]}function wg(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),t=o-t,et(e,0,t<0?0:t)):[]}function Cg(e,t){return e&&e.length?hi(e,H(t,3),!0,!0):[]}function xg(e,t){return e&&e.length?hi(e,H(t,3),!0):[]}function Eg(e,t,r,o){var a=e==null?0:e.length;return a?(r&&typeof r!="number"&&Me(e,t,r)&&(r=0,o=a),yh(e,t,r,o)):[]}function lc(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=r==null?0:J(r);return a<0&&(a=_e(o+a,0)),jr(e,H(t,3),a)}function dc(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=o-1;return r!==n&&(a=J(r),a=r<0?_e(o+a,0):Oe(a,o-1)),jr(e,H(t,3),a,!0)}function pc(e){var t=e==null?0:e.length;return t?xe(e,1):[]}function Og(e){var t=e==null?0:e.length;return t?xe(e,un):[]}function Ng(e,t){var r=e==null?0:e.length;return r?(t=t===n?1:J(t),xe(e,t)):[]}function Pg(e){for(var t=-1,r=e==null?0:e.length,o={};++t<r;){var a=e[t];o[a[0]]=a[1]}return o}function hc(e){return e&&e.length?e[0]:n}function Tg(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=r==null?0:J(r);return a<0&&(a=_e(o+a,0)),kn(e,t,a)}function kg(e){var t=e==null?0:e.length;return t?et(e,0,-1):[]}var Ig=X(function(e){var t=le(e,es);return t.length&&t[0]===e[0]?qo(t):[]}),Mg=X(function(e){var t=tt(e),r=le(e,es);return t===tt(r)?t=n:r.pop(),r.length&&r[0]===e[0]?qo(r,H(t,2)):[]}),Rg=X(function(e){var t=tt(e),r=le(e,es);return t=typeof t=="function"?t:n,t&&r.pop(),r.length&&r[0]===e[0]?qo(r,n,t):[]});function Fg(e,t){return e==null?"":kp.call(e,t)}function tt(e){var t=e==null?0:e.length;return t?e[t-1]:n}function Dg(e,t,r){var o=e==null?0:e.length;if(!o)return-1;var a=o;return r!==n&&(a=J(r),a=a<0?_e(o+a,0):Oe(a,o-1)),t===t?gp(e,t,a):jr(e,Ya,a,!0)}function Lg(e,t){return e&&e.length?xu(e,J(t)):n}var Wg=X(gc);function gc(e,t){return e&&e.length&&t&&t.length?Yo(e,t):e}function Bg(e,t,r){return e&&e.length&&t&&t.length?Yo(e,t,H(r,2)):e}function Ug(e,t,r){return e&&e.length&&t&&t.length?Yo(e,t,n,r):e}var Gg=xt(function(e,t){var r=e==null?0:e.length,o=Uo(e,t);return Nu(e,le(t,function(a){return Et(a,r)?+a:a}).sort(Wu)),o});function Hg(e,t){var r=[];if(!(e&&e.length))return r;var o=-1,a=[],f=e.length;for(t=H(t,3);++o<f;){var d=e[o];t(d,o,e)&&(r.push(d),a.push(o))}return Nu(e,a),r}function hs(e){return e==null?e:Fp.call(e)}function Kg(e,t,r){var o=e==null?0:e.length;return o?(r&&typeof r!="number"&&Me(e,t,r)?(t=0,r=o):(t=t==null?0:J(t),r=r===n?o:J(r)),et(e,t,r)):[]}function qg(e,t){return pi(e,t)}function $g(e,t,r){return Xo(e,t,H(r,2))}function zg(e,t){var r=e==null?0:e.length;if(r){var o=pi(e,t);if(o<r&&ct(e[o],t))return o}return-1}function jg(e,t){return pi(e,t,!0)}function Yg(e,t,r){return Xo(e,t,H(r,2),!0)}function Jg(e,t){var r=e==null?0:e.length;if(r){var o=pi(e,t,!0)-1;if(ct(e[o],t))return o}return-1}function Zg(e){return e&&e.length?Tu(e):[]}function Xg(e,t){return e&&e.length?Tu(e,H(t,2)):[]}function Vg(e){var t=e==null?0:e.length;return t?et(e,1,t):[]}function Qg(e,t,r){return e&&e.length?(t=r||t===n?1:J(t),et(e,0,t<0?0:t)):[]}function em(e,t,r){var o=e==null?0:e.length;return o?(t=r||t===n?1:J(t),t=o-t,et(e,t<0?0:t,o)):[]}function tm(e,t){return e&&e.length?hi(e,H(t,3),!1,!0):[]}function nm(e,t){return e&&e.length?hi(e,H(t,3)):[]}var rm=X(function(e){return jt(xe(e,1,ge,!0))}),im=X(function(e){var t=tt(e);return ge(t)&&(t=n),jt(xe(e,1,ge,!0),H(t,2))}),om=X(function(e){var t=tt(e);return t=typeof t=="function"?t:n,jt(xe(e,1,ge,!0),n,t)});function sm(e){return e&&e.length?jt(e):[]}function am(e,t){return e&&e.length?jt(e,H(t,2)):[]}function um(e,t){return t=typeof t=="function"?t:n,e&&e.length?jt(e,n,t):[]}function gs(e){if(!(e&&e.length))return[];var t=0;return e=Gt(e,function(r){if(ge(r))return t=_e(r.length,t),!0}),Io(t,function(r){return le(e,Po(r))})}function mc(e,t){if(!(e&&e.length))return[];var r=gs(e);return t==null?r:le(r,function(o){return Be(t,n,o)})}var cm=X(function(e,t){return ge(e)?gr(e,t):[]}),fm=X(function(e){return Qo(Gt(e,ge))}),lm=X(function(e){var t=tt(e);return ge(t)&&(t=n),Qo(Gt(e,ge),H(t,2))}),dm=X(function(e){var t=tt(e);return t=typeof t=="function"?t:n,Qo(Gt(e,ge),n,t)}),pm=X(gs);function hm(e,t){return Ru(e||[],t||[],hr)}function gm(e,t){return Ru(e||[],t||[],yr)}var mm=X(function(e){var t=e.length,r=t>1?e[t-1]:n;return r=typeof r=="function"?(e.pop(),r):n,mc(e,r)});function vc(e){var t=c(e);return t.__chain__=!0,t}function vm(e,t){return t(e),e}function wi(e,t){return t(e)}var ym=xt(function(e){var t=e.length,r=t?e[0]:0,o=this.__wrapped__,a=function(f){return Uo(f,e)};return t>1||this.__actions__.length||!(o instanceof Q)||!Et(r)?this.thru(a):(o=o.slice(r,+r+(t?1:0)),o.__actions__.push({func:wi,args:[a],thisArg:n}),new Ve(o,this.__chain__).thru(function(f){return t&&!f.length&&f.push(n),f}))});function _m(){return vc(this)}function Am(){return new Ve(this.value(),this.__chain__)}function Sm(){this.__values__===n&&(this.__values__=kc(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function bm(){return this}function wm(e){for(var t,r=this;r instanceof ui;){var o=fc(r);o.__index__=0,o.__values__=n,t?a.__wrapped__=o:t=o;var a=o;r=r.__wrapped__}return a.__wrapped__=e,t}function Cm(){var e=this.__wrapped__;if(e instanceof Q){var t=e;return this.__actions__.length&&(t=new Q(this)),t=t.reverse(),t.__actions__.push({func:wi,args:[hs],thisArg:n}),new Ve(t,this.__chain__)}return this.thru(hs)}function xm(){return Mu(this.__wrapped__,this.__actions__)}var Em=gi(function(e,t,r){oe.call(e,r)?++e[r]:wt(e,r,1)});function Om(e,t,r){var o=j(e)?za:vh;return r&&Me(e,t,r)&&(t=n),o(e,H(t,3))}function Nm(e,t){var r=j(e)?Gt:mu;return r(e,H(t,3))}var Pm=qu(lc),Tm=qu(dc);function km(e,t){return xe(Ci(e,t),1)}function Im(e,t){return xe(Ci(e,t),un)}function Mm(e,t,r){return r=r===n?1:J(r),xe(Ci(e,t),r)}function yc(e,t){var r=j(e)?Ze:zt;return r(e,H(t,3))}function _c(e,t){var r=j(e)?Vd:gu;return r(e,H(t,3))}var Rm=gi(function(e,t,r){oe.call(e,r)?e[r].push(t):wt(e,r,[t])});function Fm(e,t,r,o){e=De(e)?e:Hn(e),r=r&&!o?J(r):0;var a=e.length;return r<0&&(r=_e(a+r,0)),Pi(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&kn(e,t,r)>-1}var Dm=X(function(e,t,r){var o=-1,a=typeof t=="function",f=De(e)?y(e.length):[];return zt(e,function(d){f[++o]=a?Be(t,d,r):mr(d,t,r)}),f}),Lm=gi(function(e,t,r){wt(e,r,t)});function Ci(e,t){var r=j(e)?le:bu;return r(e,H(t,3))}function Wm(e,t,r,o){return e==null?[]:(j(t)||(t=t==null?[]:[t]),r=o?n:r,j(r)||(r=r==null?[]:[r]),Eu(e,t,r))}var Bm=gi(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});function Um(e,t,r){var o=j(e)?Oo:Za,a=arguments.length<3;return o(e,H(t,4),r,a,zt)}function Gm(e,t,r){var o=j(e)?Qd:Za,a=arguments.length<3;return o(e,H(t,4),r,a,gu)}function Hm(e,t){var r=j(e)?Gt:mu;return r(e,Oi(H(t,3)))}function Km(e){var t=j(e)?lu:Fh;return t(e)}function qm(e,t,r){(r?Me(e,t,r):t===n)?t=1:t=J(t);var o=j(e)?dh:Dh;return o(e,t)}function $m(e){var t=j(e)?ph:Wh;return t(e)}function zm(e){if(e==null)return 0;if(De(e))return Pi(e)?Mn(e):e.length;var t=Ne(e);return t==ot||t==st?e.size:zo(e).length}function jm(e,t,r){var o=j(e)?No:Bh;return r&&Me(e,t,r)&&(t=n),o(e,H(t,3))}var Ym=X(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Me(e,t[0],t[1])?t=[]:r>2&&Me(t[0],t[1],t[2])&&(t=[t[0]]),Eu(e,xe(t,1),[])}),xi=Np||function(){return Se.Date.now()};function Jm(e,t){if(typeof t!="function")throw new Xe(l);return e=J(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ac(e,t,r){return t=r?n:t,t=e&&t==null?e.length:t,Ct(e,$,n,n,n,n,t)}function Sc(e,t){var r;if(typeof t!="function")throw new Xe(l);return e=J(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var ms=X(function(e,t,r){var o=G;if(r.length){var a=Kt(r,Un(ms));o|=R}return Ct(e,o,t,r,a)}),bc=X(function(e,t,r){var o=G|B;if(r.length){var a=Kt(r,Un(bc));o|=R}return Ct(t,o,e,r,a)});function wc(e,t,r){t=r?n:t;var o=Ct(e,O,n,n,n,n,n,t);return o.placeholder=wc.placeholder,o}function Cc(e,t,r){t=r?n:t;var o=Ct(e,U,n,n,n,n,n,t);return o.placeholder=Cc.placeholder,o}function xc(e,t,r){var o,a,f,d,p,m,S=0,b=!1,C=!1,T=!0;if(typeof e!="function")throw new Xe(l);t=nt(t)||0,pe(r)&&(b=!!r.leading,C="maxWait"in r,f=C?_e(nt(r.maxWait)||0,t):f,T="trailing"in r?!!r.trailing:T);function D(me){var ft=o,Pt=a;return o=a=n,S=me,d=e.apply(Pt,ft),d}function K(me){return S=me,p=Sr(V,t),b?D(me):d}function Z(me){var ft=me-m,Pt=me-S,qc=t-ft;return C?Oe(qc,f-Pt):qc}function q(me){var ft=me-m,Pt=me-S;return m===n||ft>=t||ft<0||C&&Pt>=f}function V(){var me=xi();if(q(me))return te(me);p=Sr(V,Z(me))}function te(me){return p=n,T&&o?D(me):(o=a=n,d)}function Ke(){p!==n&&Fu(p),S=0,o=m=a=p=n}function Re(){return p===n?d:te(xi())}function qe(){var me=xi(),ft=q(me);if(o=arguments,a=this,m=me,ft){if(p===n)return K(m);if(C)return Fu(p),p=Sr(V,t),D(m)}return p===n&&(p=Sr(V,t)),d}return qe.cancel=Ke,qe.flush=Re,qe}var Zm=X(function(e,t){return hu(e,1,t)}),Xm=X(function(e,t,r){return hu(e,nt(t)||0,r)});function Vm(e){return Ct(e,ee)}function Ei(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Xe(l);var r=function(){var o=arguments,a=t?t.apply(this,o):o[0],f=r.cache;if(f.has(a))return f.get(a);var d=e.apply(this,o);return r.cache=f.set(a,d)||f,d};return r.cache=new(Ei.Cache||bt),r}Ei.Cache=bt;function Oi(e){if(typeof e!="function")throw new Xe(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Qm(e){return Sc(2,e)}var ev=Uh(function(e,t){t=t.length==1&&j(t[0])?le(t[0],Ue(H())):le(xe(t,1),Ue(H()));var r=t.length;return X(function(o){for(var a=-1,f=Oe(o.length,r);++a<f;)o[a]=t[a].call(this,o[a]);return Be(e,this,o)})}),vs=X(function(e,t){var r=Kt(t,Un(vs));return Ct(e,R,n,t,r)}),Ec=X(function(e,t){var r=Kt(t,Un(Ec));return Ct(e,Y,n,t,r)}),tv=xt(function(e,t){return Ct(e,ve,n,n,n,t)});function nv(e,t){if(typeof e!="function")throw new Xe(l);return t=t===n?t:J(t),X(e,t)}function rv(e,t){if(typeof e!="function")throw new Xe(l);return t=t==null?0:_e(J(t),0),X(function(r){var o=r[t],a=Jt(r,0,t);return o&&Ht(a,o),Be(e,this,a)})}function iv(e,t,r){var o=!0,a=!0;if(typeof e!="function")throw new Xe(l);return pe(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),xc(e,t,{leading:o,maxWait:t,trailing:a})}function ov(e){return Ac(e,1)}function sv(e,t){return vs(ts(t),e)}function av(){if(!arguments.length)return[];var e=arguments[0];return j(e)?e:[e]}function uv(e){return Qe(e,L)}function cv(e,t){return t=typeof t=="function"?t:n,Qe(e,L,t)}function fv(e){return Qe(e,x|L)}function lv(e,t){return t=typeof t=="function"?t:n,Qe(e,x|L,t)}function dv(e,t){return t==null||pu(e,t,be(t))}function ct(e,t){return e===t||e!==e&&t!==t}var pv=_i(Ko),hv=_i(function(e,t){return e>=t}),vn=_u(function(){return arguments}())?_u:function(e){return he(e)&&oe.call(e,"callee")&&!ou.call(e,"callee")},j=y.isArray,gv=Ua?Ue(Ua):wh;function De(e){return e!=null&&Ni(e.length)&&!Ot(e)}function ge(e){return he(e)&&De(e)}function mv(e){return e===!0||e===!1||he(e)&&Ie(e)==tr}var Zt=Tp||Ns,vv=Ga?Ue(Ga):Ch;function yv(e){return he(e)&&e.nodeType===1&&!br(e)}function _v(e){if(e==null)return!0;if(De(e)&&(j(e)||typeof e=="string"||typeof e.splice=="function"||Zt(e)||Gn(e)||vn(e)))return!e.length;var t=Ne(e);if(t==ot||t==st)return!e.size;if(Ar(e))return!zo(e).length;for(var r in e)if(oe.call(e,r))return!1;return!0}function Av(e,t){return vr(e,t)}function Sv(e,t,r){r=typeof r=="function"?r:n;var o=r?r(e,t):n;return o===n?vr(e,t,n,r):!!o}function ys(e){if(!he(e))return!1;var t=Ie(e);return t==Ur||t==ql||typeof e.message=="string"&&typeof e.name=="string"&&!br(e)}function bv(e){return typeof e=="number"&&au(e)}function Ot(e){if(!pe(e))return!1;var t=Ie(e);return t==Gr||t==ha||t==Kl||t==zl}function Oc(e){return typeof e=="number"&&e==J(e)}function Ni(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ut}function pe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function he(e){return e!=null&&typeof e=="object"}var Nc=Ha?Ue(Ha):Eh;function wv(e,t){return e===t||$o(e,t,us(t))}function Cv(e,t,r){return r=typeof r=="function"?r:n,$o(e,t,us(t),r)}function xv(e){return Pc(e)&&e!=+e}function Ev(e){if(cg(e))throw new z(u);return Au(e)}function Ov(e){return e===null}function Nv(e){return e==null}function Pc(e){return typeof e=="number"||he(e)&&Ie(e)==rr}function br(e){if(!he(e)||Ie(e)!=At)return!1;var t=ti(e);if(t===null)return!0;var r=oe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Xr.call(r)==Cp}var _s=Ka?Ue(Ka):Oh;function Pv(e){return Oc(e)&&e>=-Ut&&e<=Ut}var Tc=qa?Ue(qa):Nh;function Pi(e){return typeof e=="string"||!j(e)&&he(e)&&Ie(e)==or}function He(e){return typeof e=="symbol"||he(e)&&Ie(e)==Hr}var Gn=$a?Ue($a):Ph;function Tv(e){return e===n}function kv(e){return he(e)&&Ne(e)==sr}function Iv(e){return he(e)&&Ie(e)==Yl}var Mv=_i(jo),Rv=_i(function(e,t){return e<=t});function kc(e){if(!e)return[];if(De(e))return Pi(e)?at(e):Fe(e);if(cr&&e[cr])return dp(e[cr]());var t=Ne(e),r=t==ot?Ro:t==st?Yr:Hn;return r(e)}function Nt(e){if(!e)return e===0?e:0;if(e=nt(e),e===un||e===-un){var t=e<0?-1:1;return t*Bl}return e===e?e:0}function J(e){var t=Nt(e),r=t%1;return t===t?r?t-r:t:0}function Ic(e){return e?pn(J(e),0,dt):0}function nt(e){if(typeof e=="number")return e;if(He(e))return Wr;if(pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Xa(e);var r=gd.test(e);return r||vd.test(e)?Jd(e.slice(2),r?2:8):hd.test(e)?Wr:+e}function Mc(e){return ht(e,Le(e))}function Fv(e){return e?pn(J(e),-Ut,Ut):e===0?e:0}function ie(e){return e==null?"":Ge(e)}var Dv=Wn(function(e,t){if(Ar(t)||De(t)){ht(t,be(t),e);return}for(var r in t)oe.call(t,r)&&hr(e,r,t[r])}),Rc=Wn(function(e,t){ht(t,Le(t),e)}),Ti=Wn(function(e,t,r,o){ht(t,Le(t),e,o)}),Lv=Wn(function(e,t,r,o){ht(t,be(t),e,o)}),Wv=xt(Uo);function Bv(e,t){var r=Ln(e);return t==null?r:du(r,t)}var Uv=X(function(e,t){e=se(e);var r=-1,o=t.length,a=o>2?t[2]:n;for(a&&Me(t[0],t[1],a)&&(o=1);++r<o;)for(var f=t[r],d=Le(f),p=-1,m=d.length;++p<m;){var S=d[p],b=e[S];(b===n||ct(b,Rn[S])&&!oe.call(e,S))&&(e[S]=f[S])}return e}),Gv=X(function(e){return e.push(n,Xu),Be(Fc,n,e)});function Hv(e,t){return ja(e,H(t,3),pt)}function Kv(e,t){return ja(e,H(t,3),Ho)}function qv(e,t){return e==null?e:Go(e,H(t,3),Le)}function $v(e,t){return e==null?e:vu(e,H(t,3),Le)}function zv(e,t){return e&&pt(e,H(t,3))}function jv(e,t){return e&&Ho(e,H(t,3))}function Yv(e){return e==null?[]:li(e,be(e))}function Jv(e){return e==null?[]:li(e,Le(e))}function As(e,t,r){var o=e==null?n:hn(e,t);return o===n?r:o}function Zv(e,t){return e!=null&&ec(e,t,_h)}function Ss(e,t){return e!=null&&ec(e,t,Ah)}var Xv=zu(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=Vr.call(t)),e[t]=r},ws(We)),Vv=zu(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=Vr.call(t)),oe.call(e,t)?e[t].push(r):e[t]=[r]},H),Qv=X(mr);function be(e){return De(e)?fu(e):zo(e)}function Le(e){return De(e)?fu(e,!0):Th(e)}function ey(e,t){var r={};return t=H(t,3),pt(e,function(o,a,f){wt(r,t(o,a,f),o)}),r}function ty(e,t){var r={};return t=H(t,3),pt(e,function(o,a,f){wt(r,a,t(o,a,f))}),r}var ny=Wn(function(e,t,r){di(e,t,r)}),Fc=Wn(function(e,t,r,o){di(e,t,r,o)}),ry=xt(function(e,t){var r={};if(e==null)return r;var o=!1;t=le(t,function(f){return f=Yt(f,e),o||(o=f.length>1),f}),ht(e,ss(e),r),o&&(r=Qe(r,x|P|L,Xh));for(var a=t.length;a--;)Vo(r,t[a]);return r});function iy(e,t){return Dc(e,Oi(H(t)))}var oy=xt(function(e,t){return e==null?{}:Ih(e,t)});function Dc(e,t){if(e==null)return{};var r=le(ss(e),function(o){return[o]});return t=H(t),Ou(e,r,function(o,a){return t(o,a[0])})}function sy(e,t,r){t=Yt(t,e);var o=-1,a=t.length;for(a||(a=1,e=n);++o<a;){var f=e==null?n:e[gt(t[o])];f===n&&(o=a,f=r),e=Ot(f)?f.call(e):f}return e}function ay(e,t,r){return e==null?e:yr(e,t,r)}function uy(e,t,r,o){return o=typeof o=="function"?o:n,e==null?e:yr(e,t,r,o)}var Lc=Ju(be),Wc=Ju(Le);function cy(e,t,r){var o=j(e),a=o||Zt(e)||Gn(e);if(t=H(t,4),r==null){var f=e&&e.constructor;a?r=o?new f:[]:pe(e)?r=Ot(f)?Ln(ti(e)):{}:r={}}return(a?Ze:pt)(e,function(d,p,m){return t(r,d,p,m)}),r}function fy(e,t){return e==null?!0:Vo(e,t)}function ly(e,t,r){return e==null?e:Iu(e,t,ts(r))}function dy(e,t,r,o){return o=typeof o=="function"?o:n,e==null?e:Iu(e,t,ts(r),o)}function Hn(e){return e==null?[]:Mo(e,be(e))}function py(e){return e==null?[]:Mo(e,Le(e))}function hy(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=nt(r),r=r===r?r:0),t!==n&&(t=nt(t),t=t===t?t:0),pn(nt(e),t,r)}function gy(e,t,r){return t=Nt(t),r===n?(r=t,t=0):r=Nt(r),e=nt(e),Sh(e,t,r)}function my(e,t,r){if(r&&typeof r!="boolean"&&Me(e,t,r)&&(t=r=n),r===n&&(typeof t=="boolean"?(r=t,t=n):typeof e=="boolean"&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Nt(e),t===n?(t=e,e=0):t=Nt(t)),e>t){var o=e;e=t,t=o}if(r||e%1||t%1){var a=uu();return Oe(e+a*(t-e+Yd("1e-"+((a+"").length-1))),t)}return Jo(e,t)}var vy=Bn(function(e,t,r){return t=t.toLowerCase(),e+(r?Bc(t):t)});function Bc(e){return bs(ie(e).toLowerCase())}function Uc(e){return e=ie(e),e&&e.replace(_d,ap).replace(Wd,"")}function yy(e,t,r){e=ie(e),t=Ge(t);var o=e.length;r=r===n?o:pn(J(r),0,o);var a=r;return r-=t.length,r>=0&&e.slice(r,a)==t}function _y(e){return e=ie(e),e&&Ql.test(e)?e.replace(va,up):e}function Ay(e){return e=ie(e),e&&od.test(e)?e.replace(vo,"\\$&"):e}var Sy=Bn(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),by=Bn(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),wy=Ku("toLowerCase");function Cy(e,t,r){e=ie(e),t=J(t);var o=t?Mn(e):0;if(!t||o>=t)return e;var a=(t-o)/2;return yi(oi(a),r)+e+yi(ii(a),r)}function xy(e,t,r){e=ie(e),t=J(t);var o=t?Mn(e):0;return t&&o<t?e+yi(t-o,r):e}function Ey(e,t,r){e=ie(e),t=J(t);var o=t?Mn(e):0;return t&&o<t?yi(t-o,r)+e:e}function Oy(e,t,r){return r||t==null?t=0:t&&(t=+t),Rp(ie(e).replace(yo,""),t||0)}function Ny(e,t,r){return(r?Me(e,t,r):t===n)?t=1:t=J(t),Zo(ie(e),t)}function Py(){var e=arguments,t=ie(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Ty=Bn(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});function ky(e,t,r){return r&&typeof r!="number"&&Me(e,t,r)&&(t=r=n),r=r===n?dt:r>>>0,r?(e=ie(e),e&&(typeof t=="string"||t!=null&&!_s(t))&&(t=Ge(t),!t&&In(e))?Jt(at(e),0,r):e.split(t,r)):[]}var Iy=Bn(function(e,t,r){return e+(r?" ":"")+bs(t)});function My(e,t,r){return e=ie(e),r=r==null?0:pn(J(r),0,e.length),t=Ge(t),e.slice(r,r+t.length)==t}function Ry(e,t,r){var o=c.templateSettings;r&&Me(e,t,r)&&(t=n),e=ie(e),t=Ti({},t,o,Zu);var a=Ti({},t.imports,o.imports,Zu),f=be(a),d=Mo(a,f),p,m,S=0,b=t.interpolate||Kr,C="__p += '",T=Fo((t.escape||Kr).source+"|"+b.source+"|"+(b===ya?pd:Kr).source+"|"+(t.evaluate||Kr).source+"|$","g"),D="//# sourceURL="+(oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kd+"]")+`
`;e.replace(T,function(q,V,te,Ke,Re,qe){return te||(te=Ke),C+=e.slice(S,qe).replace(Ad,cp),V&&(p=!0,C+=`' +
__e(`+V+`) +
'`),Re&&(m=!0,C+=`';
`+Re+`;
__p += '`),te&&(C+=`' +
((__t = (`+te+`)) == null ? '' : __t) +
'`),S=qe+q.length,q}),C+=`';
`;var K=oe.call(t,"variable")&&t.variable;if(!K)C=`with (obj) {
`+C+`
}
`;else if(ld.test(K))throw new z(h);C=(m?C.replace(Jl,""):C).replace(Zl,"$1").replace(Xl,"$1;"),C="function("+(K||"obj")+`) {
`+(K?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(p?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+C+`return __p
}`;var Z=Hc(function(){return re(f,D+"return "+C).apply(n,d)});if(Z.source=C,ys(Z))throw Z;return Z}function Fy(e){return ie(e).toLowerCase()}function Dy(e){return ie(e).toUpperCase()}function Ly(e,t,r){if(e=ie(e),e&&(r||t===n))return Xa(e);if(!e||!(t=Ge(t)))return e;var o=at(e),a=at(t),f=Va(o,a),d=Qa(o,a)+1;return Jt(o,f,d).join("")}function Wy(e,t,r){if(e=ie(e),e&&(r||t===n))return e.slice(0,tu(e)+1);if(!e||!(t=Ge(t)))return e;var o=at(e),a=Qa(o,at(t))+1;return Jt(o,0,a).join("")}function By(e,t,r){if(e=ie(e),e&&(r||t===n))return e.replace(yo,"");if(!e||!(t=Ge(t)))return e;var o=at(e),a=Va(o,at(t));return Jt(o,a).join("")}function Uy(e,t){var r=fe,o=Ee;if(pe(t)){var a="separator"in t?t.separator:a;r="length"in t?J(t.length):r,o="omission"in t?Ge(t.omission):o}e=ie(e);var f=e.length;if(In(e)){var d=at(e);f=d.length}if(r>=f)return e;var p=r-Mn(o);if(p<1)return o;var m=d?Jt(d,0,p).join(""):e.slice(0,p);if(a===n)return m+o;if(d&&(p+=m.length-p),_s(a)){if(e.slice(p).search(a)){var S,b=m;for(a.global||(a=Fo(a.source,ie(_a.exec(a))+"g")),a.lastIndex=0;S=a.exec(b);)var C=S.index;m=m.slice(0,C===n?p:C)}}else if(e.indexOf(Ge(a),p)!=p){var T=m.lastIndexOf(a);T>-1&&(m=m.slice(0,T))}return m+o}function Gy(e){return e=ie(e),e&&Vl.test(e)?e.replace(ma,mp):e}var Hy=Bn(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),bs=Ku("toUpperCase");function Gc(e,t,r){return e=ie(e),t=r?n:t,t===n?lp(e)?_p(e):np(e):e.match(t)||[]}var Hc=X(function(e,t){try{return Be(e,n,t)}catch(r){return ys(r)?r:new z(r)}}),Ky=xt(function(e,t){return Ze(t,function(r){r=gt(r),wt(e,r,ms(e[r],e))}),e});function qy(e){var t=e==null?0:e.length,r=H();return e=t?le(e,function(o){if(typeof o[1]!="function")throw new Xe(l);return[r(o[0]),o[1]]}):[],X(function(o){for(var a=-1;++a<t;){var f=e[a];if(Be(f[0],this,o))return Be(f[1],this,o)}})}function $y(e){return mh(Qe(e,x))}function ws(e){return function(){return e}}function zy(e,t){return e==null||e!==e?t:e}var jy=$u(),Yy=$u(!0);function We(e){return e}function Cs(e){return Su(typeof e=="function"?e:Qe(e,x))}function Jy(e){return wu(Qe(e,x))}function Zy(e,t){return Cu(e,Qe(t,x))}var Xy=X(function(e,t){return function(r){return mr(r,e,t)}}),Vy=X(function(e,t){return function(r){return mr(e,r,t)}});function xs(e,t,r){var o=be(t),a=li(t,o);r==null&&!(pe(t)&&(a.length||!o.length))&&(r=t,t=e,e=this,a=li(t,be(t)));var f=!(pe(r)&&"chain"in r)||!!r.chain,d=Ot(e);return Ze(a,function(p){var m=t[p];e[p]=m,d&&(e.prototype[p]=function(){var S=this.__chain__;if(f||S){var b=e(this.__wrapped__),C=b.__actions__=Fe(this.__actions__);return C.push({func:m,args:arguments,thisArg:e}),b.__chain__=S,b}return m.apply(e,Ht([this.value()],arguments))})}),e}function Qy(){return Se._===this&&(Se._=xp),this}function Es(){}function e_(e){return e=J(e),X(function(t){return xu(t,e)})}var t_=rs(le),n_=rs(za),r_=rs(No);function Kc(e){return fs(e)?Po(gt(e)):Mh(e)}function i_(e){return function(t){return e==null?n:hn(e,t)}}var o_=ju(),s_=ju(!0);function Os(){return[]}function Ns(){return!1}function a_(){return{}}function u_(){return""}function c_(){return!0}function f_(e,t){if(e=J(e),e<1||e>Ut)return[];var r=dt,o=Oe(e,dt);t=H(t),e-=dt;for(var a=Io(o,t);++r<e;)t(r);return a}function l_(e){return j(e)?le(e,gt):He(e)?[e]:Fe(cc(ie(e)))}function d_(e){var t=++wp;return ie(e)+t}var p_=vi(function(e,t){return e+t},0),h_=is("ceil"),g_=vi(function(e,t){return e/t},1),m_=is("floor");function v_(e){return e&&e.length?fi(e,We,Ko):n}function y_(e,t){return e&&e.length?fi(e,H(t,2),Ko):n}function __(e){return Ja(e,We)}function A_(e,t){return Ja(e,H(t,2))}function S_(e){return e&&e.length?fi(e,We,jo):n}function b_(e,t){return e&&e.length?fi(e,H(t,2),jo):n}var w_=vi(function(e,t){return e*t},1),C_=is("round"),x_=vi(function(e,t){return e-t},0);function E_(e){return e&&e.length?ko(e,We):0}function O_(e,t){return e&&e.length?ko(e,H(t,2)):0}return c.after=Jm,c.ary=Ac,c.assign=Dv,c.assignIn=Rc,c.assignInWith=Ti,c.assignWith=Lv,c.at=Wv,c.before=Sc,c.bind=ms,c.bindAll=Ky,c.bindKey=bc,c.castArray=av,c.chain=vc,c.chunk=mg,c.compact=vg,c.concat=yg,c.cond=qy,c.conforms=$y,c.constant=ws,c.countBy=Em,c.create=Bv,c.curry=wc,c.curryRight=Cc,c.debounce=xc,c.defaults=Uv,c.defaultsDeep=Gv,c.defer=Zm,c.delay=Xm,c.difference=_g,c.differenceBy=Ag,c.differenceWith=Sg,c.drop=bg,c.dropRight=wg,c.dropRightWhile=Cg,c.dropWhile=xg,c.fill=Eg,c.filter=Nm,c.flatMap=km,c.flatMapDeep=Im,c.flatMapDepth=Mm,c.flatten=pc,c.flattenDeep=Og,c.flattenDepth=Ng,c.flip=Vm,c.flow=jy,c.flowRight=Yy,c.fromPairs=Pg,c.functions=Yv,c.functionsIn=Jv,c.groupBy=Rm,c.initial=kg,c.intersection=Ig,c.intersectionBy=Mg,c.intersectionWith=Rg,c.invert=Xv,c.invertBy=Vv,c.invokeMap=Dm,c.iteratee=Cs,c.keyBy=Lm,c.keys=be,c.keysIn=Le,c.map=Ci,c.mapKeys=ey,c.mapValues=ty,c.matches=Jy,c.matchesProperty=Zy,c.memoize=Ei,c.merge=ny,c.mergeWith=Fc,c.method=Xy,c.methodOf=Vy,c.mixin=xs,c.negate=Oi,c.nthArg=e_,c.omit=ry,c.omitBy=iy,c.once=Qm,c.orderBy=Wm,c.over=t_,c.overArgs=ev,c.overEvery=n_,c.overSome=r_,c.partial=vs,c.partialRight=Ec,c.partition=Bm,c.pick=oy,c.pickBy=Dc,c.property=Kc,c.propertyOf=i_,c.pull=Wg,c.pullAll=gc,c.pullAllBy=Bg,c.pullAllWith=Ug,c.pullAt=Gg,c.range=o_,c.rangeRight=s_,c.rearg=tv,c.reject=Hm,c.remove=Hg,c.rest=nv,c.reverse=hs,c.sampleSize=qm,c.set=ay,c.setWith=uy,c.shuffle=$m,c.slice=Kg,c.sortBy=Ym,c.sortedUniq=Zg,c.sortedUniqBy=Xg,c.split=ky,c.spread=rv,c.tail=Vg,c.take=Qg,c.takeRight=em,c.takeRightWhile=tm,c.takeWhile=nm,c.tap=vm,c.throttle=iv,c.thru=wi,c.toArray=kc,c.toPairs=Lc,c.toPairsIn=Wc,c.toPath=l_,c.toPlainObject=Mc,c.transform=cy,c.unary=ov,c.union=rm,c.unionBy=im,c.unionWith=om,c.uniq=sm,c.uniqBy=am,c.uniqWith=um,c.unset=fy,c.unzip=gs,c.unzipWith=mc,c.update=ly,c.updateWith=dy,c.values=Hn,c.valuesIn=py,c.without=cm,c.words=Gc,c.wrap=sv,c.xor=fm,c.xorBy=lm,c.xorWith=dm,c.zip=pm,c.zipObject=hm,c.zipObjectDeep=gm,c.zipWith=mm,c.entries=Lc,c.entriesIn=Wc,c.extend=Rc,c.extendWith=Ti,xs(c,c),c.add=p_,c.attempt=Hc,c.camelCase=vy,c.capitalize=Bc,c.ceil=h_,c.clamp=hy,c.clone=uv,c.cloneDeep=fv,c.cloneDeepWith=lv,c.cloneWith=cv,c.conformsTo=dv,c.deburr=Uc,c.defaultTo=zy,c.divide=g_,c.endsWith=yy,c.eq=ct,c.escape=_y,c.escapeRegExp=Ay,c.every=Om,c.find=Pm,c.findIndex=lc,c.findKey=Hv,c.findLast=Tm,c.findLastIndex=dc,c.findLastKey=Kv,c.floor=m_,c.forEach=yc,c.forEachRight=_c,c.forIn=qv,c.forInRight=$v,c.forOwn=zv,c.forOwnRight=jv,c.get=As,c.gt=pv,c.gte=hv,c.has=Zv,c.hasIn=Ss,c.head=hc,c.identity=We,c.includes=Fm,c.indexOf=Tg,c.inRange=gy,c.invoke=Qv,c.isArguments=vn,c.isArray=j,c.isArrayBuffer=gv,c.isArrayLike=De,c.isArrayLikeObject=ge,c.isBoolean=mv,c.isBuffer=Zt,c.isDate=vv,c.isElement=yv,c.isEmpty=_v,c.isEqual=Av,c.isEqualWith=Sv,c.isError=ys,c.isFinite=bv,c.isFunction=Ot,c.isInteger=Oc,c.isLength=Ni,c.isMap=Nc,c.isMatch=wv,c.isMatchWith=Cv,c.isNaN=xv,c.isNative=Ev,c.isNil=Nv,c.isNull=Ov,c.isNumber=Pc,c.isObject=pe,c.isObjectLike=he,c.isPlainObject=br,c.isRegExp=_s,c.isSafeInteger=Pv,c.isSet=Tc,c.isString=Pi,c.isSymbol=He,c.isTypedArray=Gn,c.isUndefined=Tv,c.isWeakMap=kv,c.isWeakSet=Iv,c.join=Fg,c.kebabCase=Sy,c.last=tt,c.lastIndexOf=Dg,c.lowerCase=by,c.lowerFirst=wy,c.lt=Mv,c.lte=Rv,c.max=v_,c.maxBy=y_,c.mean=__,c.meanBy=A_,c.min=S_,c.minBy=b_,c.stubArray=Os,c.stubFalse=Ns,c.stubObject=a_,c.stubString=u_,c.stubTrue=c_,c.multiply=w_,c.nth=Lg,c.noConflict=Qy,c.noop=Es,c.now=xi,c.pad=Cy,c.padEnd=xy,c.padStart=Ey,c.parseInt=Oy,c.random=my,c.reduce=Um,c.reduceRight=Gm,c.repeat=Ny,c.replace=Py,c.result=sy,c.round=C_,c.runInContext=g,c.sample=Km,c.size=zm,c.snakeCase=Ty,c.some=jm,c.sortedIndex=qg,c.sortedIndexBy=$g,c.sortedIndexOf=zg,c.sortedLastIndex=jg,c.sortedLastIndexBy=Yg,c.sortedLastIndexOf=Jg,c.startCase=Iy,c.startsWith=My,c.subtract=x_,c.sum=E_,c.sumBy=O_,c.template=Ry,c.times=f_,c.toFinite=Nt,c.toInteger=J,c.toLength=Ic,c.toLower=Fy,c.toNumber=nt,c.toSafeInteger=Fv,c.toString=ie,c.toUpper=Dy,c.trim=Ly,c.trimEnd=Wy,c.trimStart=By,c.truncate=Uy,c.unescape=Gy,c.uniqueId=d_,c.upperCase=Hy,c.upperFirst=bs,c.each=yc,c.eachRight=_c,c.first=hc,xs(c,function(){var e={};return pt(c,function(t,r){oe.call(c.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),c.VERSION=i,Ze(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){c[e].placeholder=c}),Ze(["drop","take"],function(e,t){Q.prototype[e]=function(r){r=r===n?1:_e(J(r),0);var o=this.__filtered__&&!t?new Q(this):this.clone();return o.__filtered__?o.__takeCount__=Oe(r,o.__takeCount__):o.__views__.push({size:Oe(r,dt),type:e+(o.__dir__<0?"Right":"")}),o},Q.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),Ze(["filter","map","takeWhile"],function(e,t){var r=t+1,o=r==pa||r==Wl;Q.prototype[e]=function(a){var f=this.clone();return f.__iteratees__.push({iteratee:H(a,3),type:r}),f.__filtered__=f.__filtered__||o,f}}),Ze(["head","last"],function(e,t){var r="take"+(t?"Right":"");Q.prototype[e]=function(){return this[r](1).value()[0]}}),Ze(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");Q.prototype[e]=function(){return this.__filtered__?new Q(this):this[r](1)}}),Q.prototype.compact=function(){return this.filter(We)},Q.prototype.find=function(e){return this.filter(e).head()},Q.prototype.findLast=function(e){return this.reverse().find(e)},Q.prototype.invokeMap=X(function(e,t){return typeof e=="function"?new Q(this):this.map(function(r){return mr(r,e,t)})}),Q.prototype.reject=function(e){return this.filter(Oi(H(e)))},Q.prototype.slice=function(e,t){e=J(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Q(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(t=J(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},Q.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Q.prototype.toArray=function(){return this.take(dt)},pt(Q.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=c[o?"take"+(t=="last"?"Right":""):t],f=o||/^find/.test(t);a&&(c.prototype[t]=function(){var d=this.__wrapped__,p=o?[1]:arguments,m=d instanceof Q,S=p[0],b=m||j(d),C=function(V){var te=a.apply(c,Ht([V],p));return o&&T?te[0]:te};b&&r&&typeof S=="function"&&S.length!=1&&(m=b=!1);var T=this.__chain__,D=!!this.__actions__.length,K=f&&!T,Z=m&&!D;if(!f&&b){d=Z?d:new Q(this);var q=e.apply(d,p);return q.__actions__.push({func:wi,args:[C],thisArg:n}),new Ve(q,T)}return K&&Z?e.apply(this,p):(q=this.thru(C),K?o?q.value()[0]:q.value():q)})}),Ze(["pop","push","shift","sort","splice","unshift"],function(e){var t=Jr[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);c.prototype[e]=function(){var a=arguments;if(o&&!this.__chain__){var f=this.value();return t.apply(j(f)?f:[],a)}return this[r](function(d){return t.apply(j(d)?d:[],a)})}}),pt(Q.prototype,function(e,t){var r=c[t];if(r){var o=r.name+"";oe.call(Dn,o)||(Dn[o]=[]),Dn[o].push({name:t,func:r})}}),Dn[mi(n,B).name]=[{name:"wrapper",func:n}],Q.prototype.clone=Gp,Q.prototype.reverse=Hp,Q.prototype.value=Kp,c.prototype.at=ym,c.prototype.chain=_m,c.prototype.commit=Am,c.prototype.next=Sm,c.prototype.plant=wm,c.prototype.reverse=Cm,c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=xm,c.prototype.first=c.prototype.head,cr&&(c.prototype[cr]=bm),c},qt=Ap();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Se._=qt,define(function(){return qt})):cn?((cn.exports=qt)._=qt,Co._=qt):Se._=qt}).call(Qn)});var Pl=rt((ES,Nl)=>{it();Nl.exports=de("NeosProjectPackages")().NeosUiI18n});it();var wr=class{constructor(i){this.SERIAL_VERSION_UID="d8a5aa78-978e-11e6-ae22-56b6b6499611",this.description=i}};var F_=(n,i="position",s="key")=>{let u=typeof i=="string"?O=>O[i]:i,l={},h={},v={},A={},w={},x={};n.forEach((O,U)=>{let R=O[s]?O[s]:String(U);l[R]=U;let Y=u(O),$=String(Y||U),ve=!1;if($.startsWith("start")){let ee=$.match(/start\s+(\d+)/),fe=ee&&ee[1]?Number(ee[1]):0;v[fe]||(v[fe]=[]),v[fe].push(R)}else if($.startsWith("end")){let ee=$.match(/end\s+(\d+)/),fe=ee&&ee[1]?Number(ee[1]):0;A[fe]||(A[fe]=[]),A[fe].push(R)}else if($.startsWith("before")){let ee=$.match(/before\s+(\S+)(\s+(\d+))?/);if(!ee)ve=!0;else{let fe=ee[1],Ee=ee[3]?Number(ee[3]):0;w[fe]||(w[fe]={}),w[fe][Ee]||(w[fe][Ee]=[]),w[fe][Ee].push(R)}}else if($.startsWith("after")){let ee=$.match(/after\s+(\S+)(\s+(\d+))?/);if(!ee)ve=!0;else{let fe=ee[1],Ee=ee[3]?Number(ee[3]):0;x[fe]||(x[fe]={}),x[fe][Ee]||(x[fe][Ee]=[]),x[fe][Ee].push(R)}}else ve=!0;if(ve){let ee=parseFloat($);(isNaN(ee)||!isFinite(ee))&&(ee=U),h[ee]||(h[ee]=[]),h[ee].push(R)}});let P=[],L=[],M=[],F=[],G=(O,U)=>{let R=Object.keys(O).map(Y=>Number(Y)).sort((Y,$)=>Y-$);return U?R:R.reverse()},B=(O,U)=>{O.forEach(R=>{if(!(F.indexOf(R)>=0)){if(F.push(R),w[R]){let Y=G(w[R],!0);for(let $ of Y)B(w[R][$],U)}if(U.push(R),x[R]){let Y=G(x[R],!1);for(let $ of Y)B(x[R][$],U)}}})};for(let O of G(v,!1))B(v[O],P);for(let O of G(h,!0))B(h[O],L);for(let O of G(A,!0))B(A[O],M);for(let O of Object.keys(w))if(!(F.indexOf(O)>=0))for(let U of G(w[O],!1))B(w[O][U],P);for(let O of Object.keys(x))if(!(F.indexOf(O)>=0))for(let U of G(x[O],!1))B(x[O][U],L);return[...P,...L,...M].map(O=>l[O]).map(O=>n[O])},Ps=F_;var Xt=class extends wr{constructor(i){super(i),this._registry=[]}set(i,s,u=0){if(typeof i!="string")throw new Error("Key must be a string");if(typeof u!="string"&&typeof u!="number")throw new Error("Position must be a string or a number");let l={key:i,value:s};u&&(l.position=u);let h=this._registry.findIndex(v=>v.key===i);return h===-1?this._registry.push(l):this._registry[h]=l,s}get(i){if(typeof i!="string")return console.error("Key must be a string"),null;let s=this._registry.find(u=>u.key===i);return s?s.value:null}_getChildrenWrapped(i){let s=this._registry.filter(u=>u.key.indexOf(i+"/")===0);return Ps(s)}getChildrenAsObject(i){let s={};return this._getChildrenWrapped(i).forEach(u=>{s[u.key]=u.value}),s}getChildren(i){return this._getChildrenWrapped(i).map(s=>s.value)}has(i){return typeof i!="string"?(console.error("Key must be a string"),!1):!!this._registry.find(s=>s.key===i)}_getAllWrapped(){return Ps(this._registry)}getAllAsObject(){let i={};return this._getAllWrapped().forEach(s=>{i[s.key]=s.value}),i}getAllAsList(){return this._getAllWrapped().map(i=>Object.assign({id:i.key},i.value))}};var zc=de("manifest");var Te=class extends Error{constructor(s,u,l=""){super(s);N(this,"code");N(this,"severity","error");N(this,"externalMessage");this.code=u,this.externalMessage=l}};var jc=n=>new Ts(n.apiDomain,n.apiKey),Ts=class{constructor(i,s){N(this,"apiDomain","");N(this,"apiKey","");N(this,"hasApiKey",()=>this.apiKey!==null&&this.apiKey!=="");N(this,"generate",async(i,s,u={})=>{let h=(await this.fetch(`/api/v1/chat?language=${s}`,{method:"POST",body:JSON.stringify({module:i,platform:"neos",user_input:u})}))?.data?.message?.message;return h.startsWith('"')&&h.endsWith('"')&&(h=h.substring(1,h.length-1)),h});N(this,"fetch",async(i,s={})=>{if(!this.apiKey)throw new Te("This feature is not available in the free version.","1688157373215");let u=await fetch(this.apiDomain+i,Object.assign({},s,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`,Accept:"application/json"}})),l=await u.json();if(u.status===401)throw new Te("The NEOSidekick api key provided is not valid.","1688158193038");if(u.status<200||u.status>=400)throw new Te("An error occurred while asking NEOSidekick.","1688158257149",l?.message);return l});this.apiDomain=i,this.apiKey=s}};it();var Yc=de("NeosProjectPackages")().NeosUiBackendConnectorDefault,{fetchWithErrorHandling:pA}=de("NeosProjectPackages")().NeosUiBackendConnector;var en=W($e());function lt(n){for(var i=arguments.length,s=Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];if(!1)var l,h;throw Error("[Immer] minified error nr: "+n+(s.length?" "+s.map(function(v){return"'"+v+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Kn(n){return!!n&&!!n[ze]}function _n(n){var i;return!!n&&(function(s){if(!s||typeof s!="object")return!1;var u=Object.getPrototypeOf(s);if(u===null)return!0;var l=Object.hasOwnProperty.call(u,"constructor")&&u.constructor;return l===Object||typeof l=="function"&&Function.toString.call(l)===q_}(n)||Array.isArray(n)||!!n[rf]||!!(!((i=n.constructor)===null||i===void 0)&&i[rf])||Us(n)||Gs(n))}function xr(n,i,s){s===void 0&&(s=!1),qn(n)===0?(s?Object.keys:zs)(n).forEach(function(u){s&&typeof u=="symbol"||i(u,n[u],n)}):n.forEach(function(u,l){return i(l,u,n)})}function qn(n){var i=n[ze];return i?i.i>3?i.i-4:i.i:Array.isArray(n)?1:Us(n)?2:Gs(n)?3:0}function Fs(n,i){return qn(n)===2?n.has(i):Object.prototype.hasOwnProperty.call(n,i)}function L_(n,i){return qn(n)===2?n.get(i):n[i]}function of(n,i,s){var u=qn(n);u===2?n.set(i,s):u===3?n.add(s):n[i]=s}function W_(n,i){return n===i?n!==0||1/n==1/i:n!=n&&i!=i}function Us(n){return H_&&n instanceof Map}function Gs(n){return K_&&n instanceof Set}function yn(n){return n.o||n.t}function Hs(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var i=$_(n);delete i[ze];for(var s=zs(i),u=0;u<s.length;u++){var l=s[u],h=i[l];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(i[l]={configurable:!0,writable:!0,enumerable:h.enumerable,value:n[l]})}return Object.create(Object.getPrototypeOf(n),i)}function Ks(n,i){return i===void 0&&(i=!1),qs(n)||Kn(n)||!_n(n)||(qn(n)>1&&(n.set=n.add=n.clear=n.delete=B_),Object.freeze(n),i&&xr(n,function(s,u){return Ks(u,!0)},!0)),n}function B_(){lt(2)}function qs(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function mt(n){var i=z_[n];return i||lt(18,n),i}function Zc(){return Er}function ks(n,i){i&&(mt("Patches"),n.u=[],n.s=[],n.v=i)}function Ii(n){Ds(n),n.p.forEach(U_),n.p=null}function Ds(n){n===Er&&(Er=n.l)}function Xc(n){return Er={p:[],l:Er,h:n,m:!0,_:0}}function U_(n){var i=n[ze];i.i===0||i.i===1?i.j():i.g=!0}function Is(n,i){i._=i.p.length;var s=i.p[0],u=n!==void 0&&n!==s;return i.h.O||mt("ES5").S(i,n,u),u?(s[ze].P&&(Ii(i),lt(4)),_n(n)&&(n=Mi(i,n),i.l||Ri(i,n)),i.u&&mt("Patches").M(s[ze].t,n,i.u,i.s)):n=Mi(i,s,[]),Ii(i),i.u&&i.v(i.u,i.s),n!==sf?n:void 0}function Mi(n,i,s){if(qs(i))return i;var u=i[ze];if(!u)return xr(i,function(A,w){return Vc(n,u,i,A,w,s)},!0),i;if(u.A!==n)return i;if(!u.P)return Ri(n,u.t,!0),u.t;if(!u.I){u.I=!0,u.A._--;var l=u.i===4||u.i===5?u.o=Hs(u.k):u.o,h=l,v=!1;u.i===3&&(h=new Set(l),l.clear(),v=!0),xr(h,function(A,w){return Vc(n,u,l,A,w,s,v)}),Ri(n,l,!1),s&&n.u&&mt("Patches").N(u,s,n.u,n.s)}return u.o}function Vc(n,i,s,u,l,h,v){if(Kn(l)){var A=Mi(n,l,h&&i&&i.i!==3&&!Fs(i.R,u)?h.concat(u):void 0);if(of(s,u,A),!Kn(A))return;n.m=!1}else v&&s.add(l);if(_n(l)&&!qs(l)){if(!n.h.D&&n._<1)return;Mi(n,l),i&&i.A.l||Ri(n,l)}}function Ri(n,i,s){s===void 0&&(s=!1),!n.l&&n.h.D&&n.m&&Ks(i,s)}function Ms(n,i){var s=n[ze];return(s?yn(s):n)[i]}function Qc(n,i){if(i in n)for(var s=Object.getPrototypeOf(n);s;){var u=Object.getOwnPropertyDescriptor(s,i);if(u)return u;s=Object.getPrototypeOf(s)}}function Ls(n){n.P||(n.P=!0,n.l&&Ls(n.l))}function Rs(n){n.o||(n.o=Hs(n.t))}function Ws(n,i,s){var u=Us(i)?mt("MapSet").F(i,s):Gs(i)?mt("MapSet").T(i,s):n.O?function(l,h){var v=Array.isArray(l),A={i:v?1:0,A:h?h.A:Zc(),P:!1,I:!1,R:{},l:h,t:l,k:null,o:null,j:null,C:!1},w=A,x=Bs;v&&(w=[A],x=Cr);var P=Proxy.revocable(w,x),L=P.revoke,M=P.proxy;return A.k=M,A.j=L,M}(i,s):mt("ES5").J(i,s);return(s?s.A:Zc()).p.push(u),u}function G_(n){return Kn(n)||lt(22,n),function i(s){if(!_n(s))return s;var u,l=s[ze],h=qn(s);if(l){if(!l.P&&(l.i<4||!mt("ES5").K(l)))return l.t;l.I=!0,u=ef(s,h),l.I=!1}else u=ef(s,h);return xr(u,function(v,A){l&&L_(l.t,v)===A||of(u,v,i(A))}),h===3?new Set(u):u}(n)}function ef(n,i){switch(i){case 2:return new Map(n);case 3:return Array.from(n)}return Hs(n)}var tf,Er,$s=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",H_=typeof Map<"u",K_=typeof Set<"u",nf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",sf=$s?Symbol.for("immer-nothing"):((tf={})["immer-nothing"]=!0,tf),rf=$s?Symbol.for("immer-draftable"):"__$immer_draftable",ze=$s?Symbol.for("immer-state"):"__$immer_state";var q_=""+Object.prototype.constructor,zs=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,$_=Object.getOwnPropertyDescriptors||function(n){var i={};return zs(n).forEach(function(s){i[s]=Object.getOwnPropertyDescriptor(n,s)}),i},z_={},Bs={get:function(n,i){if(i===ze)return n;var s=yn(n);if(!Fs(s,i))return function(l,h,v){var A,w=Qc(h,v);return w?"value"in w?w.value:(A=w.get)===null||A===void 0?void 0:A.call(l.k):void 0}(n,s,i);var u=s[i];return n.I||!_n(u)?u:u===Ms(n.t,i)?(Rs(n),n.o[i]=Ws(n.A.h,u,n)):u},has:function(n,i){return i in yn(n)},ownKeys:function(n){return Reflect.ownKeys(yn(n))},set:function(n,i,s){var u=Qc(yn(n),i);if(u?.set)return u.set.call(n.k,s),!0;if(!n.P){var l=Ms(yn(n),i),h=l?.[ze];if(h&&h.t===s)return n.o[i]=s,n.R[i]=!1,!0;if(W_(s,l)&&(s!==void 0||Fs(n.t,i)))return!0;Rs(n),Ls(n)}return n.o[i]===s&&(s!==void 0||i in n.o)||Number.isNaN(s)&&Number.isNaN(n.o[i])||(n.o[i]=s,n.R[i]=!0),!0},deleteProperty:function(n,i){return Ms(n.t,i)!==void 0||i in n.t?(n.R[i]=!1,Rs(n),Ls(n)):delete n.R[i],n.o&&delete n.o[i],!0},getOwnPropertyDescriptor:function(n,i){var s=yn(n),u=Reflect.getOwnPropertyDescriptor(s,i);return u&&{writable:!0,configurable:n.i!==1||i!=="length",enumerable:u.enumerable,value:s[i]}},defineProperty:function(){lt(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){lt(12)}},Cr={};xr(Bs,function(n,i){Cr[n]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),Cr.deleteProperty=function(n,i){return Cr.set.call(this,n,i,void 0)},Cr.set=function(n,i,s){return Bs.set.call(this,n[0],i,s,n[0])};var j_=function(){function n(s){var u=this;this.O=nf,this.D=!0,this.produce=function(l,h,v){if(typeof l=="function"&&typeof h!="function"){var A=h;h=l;var w=u;return function(B){var E=this;B===void 0&&(B=A);for(var O=arguments.length,U=Array(O>1?O-1:0),R=1;R<O;R++)U[R-1]=arguments[R];return w.produce(B,function(Y){var $;return($=h).call.apply($,[E,Y].concat(U))})}}var x;if(typeof h!="function"&&lt(6),v!==void 0&&typeof v!="function"&&lt(7),_n(l)){var P=Xc(u),L=Ws(u,l,void 0),M=!0;try{x=h(L),M=!1}finally{M?Ii(P):Ds(P)}return typeof Promise<"u"&&x instanceof Promise?x.then(function(B){return ks(P,v),Is(B,P)},function(B){throw Ii(P),B}):(ks(P,v),Is(x,P))}if(!l||typeof l!="object"){if((x=h(l))===void 0&&(x=l),x===sf&&(x=void 0),u.D&&Ks(x,!0),v){var F=[],G=[];mt("Patches").M(l,x,F,G),v(F,G)}return x}lt(21,l)},this.produceWithPatches=function(l,h){if(typeof l=="function")return function(x){for(var P=arguments.length,L=Array(P>1?P-1:0),M=1;M<P;M++)L[M-1]=arguments[M];return u.produceWithPatches(x,function(F){return l.apply(void 0,[F].concat(L))})};var v,A,w=u.produce(l,h,function(x,P){v=x,A=P});return typeof Promise<"u"&&w instanceof Promise?w.then(function(x){return[x,v,A]}):[w,v,A]},typeof s?.useProxies=="boolean"&&this.setUseProxies(s.useProxies),typeof s?.autoFreeze=="boolean"&&this.setAutoFreeze(s.autoFreeze)}var i=n.prototype;return i.createDraft=function(s){_n(s)||lt(8),Kn(s)&&(s=G_(s));var u=Xc(this),l=Ws(this,s,void 0);return l[ze].C=!0,Ds(u),l},i.finishDraft=function(s,u){var l=s&&s[ze],h=l.A;return ks(h,u),Is(void 0,h)},i.setAutoFreeze=function(s){this.D=s},i.setUseProxies=function(s){s&&!nf&&lt(20),this.O=s},i.applyPatches=function(s,u){var l;for(l=u.length-1;l>=0;l--){var h=u[l];if(h.path.length===0&&h.op==="replace"){s=h.value;break}}l>-1&&(u=u.slice(l+1));var v=mt("Patches").$;return Kn(s)?v(s,u):this.produce(s,function(A){return v(A,u)})},n}(),je=new j_,js=je.produce,vA=je.produceWithPatches.bind(je),yA=je.setAutoFreeze.bind(je),_A=je.setUseProxies.bind(je),AA=je.applyPatches.bind(je),SA=je.createDraft.bind(je),bA=je.finishDraft.bind(je),af=js;var Hf=W(Gf());var Kf=(n,i)=>new ua(n,i),ua=class{constructor(i,s){N(this,"globalRegistry");N(this,"store");N(this,"guestFrameContentDocument",null);N(this,"nodeTypesRegistry");N(this,"externalService");N(this,"getGuestFrameContentDocument",()=>{let i=document.getElementsByName("neos-content-main")[0];return this.guestFrameContentDocument=i?.contentDocument,this.guestFrameContentDocument});N(this,"getGuestFrameDocumentTitle",()=>this.getGuestFrameContentDocument()?.title);N(this,"getGuestFrameDocumentHtml",()=>this.getGuestFrameContentDocument()?.body?.innerHTML);N(this,"getCurrentDocumentNode",()=>{let i=this.store.getState();return en.selectors.CR.Nodes.documentNodeSelector(i)});N(this,"getCurrentDocumentParentNode",()=>{let i=this.store.getState(),s=this.getCurrentDocumentNode();return en.selectors.CR.Nodes.nodeByContextPath(i)(s.parent)});N(this,"getCurrentDocumentNodeType",()=>{let i=this.getCurrentDocumentNode();return this.globalRegistry.get("@neos-project/neos-ui-contentrepository").get(i?.nodeType)});N(this,"getCurrentDocumentTargetAudience",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.targetAudience;return i?this.processClientEval(i):""});N(this,"getCurrentDocumentPageBriefing",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.pageBriefing;return i?this.processClientEval(i):""});N(this,"getCurrentDocumentFocusKeyword",async()=>{let i=this.getCurrentDocumentNodeType()?.options?.sidekick?.focusKeyword;return i?await this.processClientEval(i):""});N(this,"processClientEval",async(i,s,u)=>{if(typeof i=="string"&&(i.startsWith("SidekickClientEval:")||i.startsWith("ClientEval:")))try{s=s??this.getCurrentDocumentNode();let l=en.selectors.UI.Inspector.transientValues(this.store.getState());s=this.generateNodeForContext(s,l),u=u??this.getCurrentDocumentParentNode();let h=this.getGuestFrameDocumentTitle(),v=this.getGuestFrameDocumentHtml(),A=this.getImageMetadata,w=Object.getPrototypeOf(async function(){}).constructor;return await new w("node,parentNode,documentTitle,documentContent,AssetUri","return "+i.replace("SidekickClientEval:","").replace("ClientEval:",""))(s,u,h,v,A)}catch(l){throw l instanceof Te?l:(console.error(l),new Te('An error occurred while trying to evaluate "'+i+'"',"1694682118365",i))}return i});N(this,"processValueWithClientEval",async(i,s,u)=>{if(typeof i=="string")return this.processClientEval(i,s,u);if(typeof i=="object"&&i!==null)return this.processObjectWithClientEval(i,s,u);if(typeof i=="boolean")return i;if(i===null)return null;if(Array.isArray(i))return Promise.all(i.map(async l=>this.processObjectWithClientEval(l,s,u)))});N(this,"processObjectWithClientEval",async(i,s,u)=>{let l={};return await Promise.all(Object.keys(i).map(async h=>{let v=i[h];l[h]=await this.processValueWithClientEval(v,s,u)})),l});N(this,"getImageMetadata",async i=>{if(!i||!i?.__identity)throw new Te("The property does not have a valid image.","1694595562191");let{loadImageMetadata:s}=Yc.get().endpoints,u,l;try{let v=await s(i?.__identity);u=v?.originalImageResourceUri,l=v?.previewImageResourceUri}catch{throw new Te("Could not fetch image object.","1694595598880")}if(!u||u==="")throw new Te("The given image does not have a correct url.","1694595462402");let h=[];return h.push(this.prependConfiguredDomainToImageUri(u)),l&&h.push(this.prependConfiguredDomainToImageUri(l)),h});this.globalRegistry=i,this.store=s,this.nodeTypesRegistry=i.get("@neos-project/neos-ui-contentrepository"),this.externalService=i.get("NEOSidekick.AiAssistant").get("externalService")}prependConfiguredDomainToImageUri(i){let s=this.globalRegistry.get("NEOSidekick.AiAssistant").get("configuration").domain,u=i.replace("http://","").replace("https://","").split("/");return u.shift(),u.unshift(s),u.join("/")}getCurrentlyFocusedNodePathAndProperty(){let i=this.store.getState(),s=this.globalRegistry.get("@neos-project/neos-ui-contentrepository"),u=i?.cr?.nodes?.focused?.contextPaths[0],l=u?en.selectors.CR.Nodes.nodeByContextPath(i)(u):null;return{nodePath:u,node:l,property:i?.ui?.contentCanvas?.currentlyEditedPropertyName,nodeType:l?s.get(l?.nodeType):null,parentNode:l?en.selectors.CR.Nodes.nodesByContextPathSelector(i)[l.parent]:null}}async evaluateNodeTypeConfigurationAndStartGeneration(i,s,u,l,h=!1){if(!u||s[0]==="_")return;let v=u.properties?u.properties[s]:null;try{if(v?.options?.sidekick?.onCreate?.module)throw new Te("Please do not use options.sidekick.onCreate.module anymore. Read the docs to find out about the new configuration.","1696264259260");if(!v?.options?.sidekick?.module||h&&v?.options?.sidekick?.onCreate&&!await this.processValueWithClientEval(v?.options?.sidekick?.onCreate,i,l))return;if(!v?.ui?.inlineEditable)throw new Te("You can only generate content on inline editable properties","1688395273728");if(!this.externalService.hasApiKey())throw new Te("This feature is not available in the free version.","1688157373215")}catch(P){let L=this.globalRegistry.get("i18n");this.store.dispatch(en.actions.UI.FlashMessages.add(P?.code??P?.message,P?.code?L.translate("NEOSidekick.AiAssistant:Error:"+P.code):P?.message,P?.severity??"error"));return}let A=JSON.parse(JSON.stringify(v.options.sidekick)),w=this.globalRegistry.get("NEOSidekick.AiAssistant").get("contentCanvasService"),x=await this.processObjectWithClientEval(A,i,l);w.streamGenerationIntoInlineProperty(i.contextPath,s,x)}generateNodeForContext(i,s){return s?js(i,u=>{let l=(0,Hf.default)(s,h=>h?.value);u.properties=Object.assign({},u.properties,l)}):i}};var qf=W($e());var $f=(n,i,s)=>new ca(n,i,s),ca=class{constructor(i,s,u){N(this,"globalRegistry");N(this,"store");N(this,"iFrameApiService");N(this,"currentlyHandledNodePath",null);N(this,"streamGenerationIntoInlineProperty",(i,s,u)=>{this.iFrameApiService.callModule({target:{nodePath:i,propertyName:s},...u},()=>this.currentlyHandledNodePath=i)});N(this,"onNodeRemoved",i=>{this.currentlyHandledNodePath===i&&(this.iFrameApiService.cancelCallModule(),this.unsetCurrentlyHandledNodePath())});N(this,"getEditorContent",(i,s)=>this.getPropertyInlineField(i,s)?.ckeditorInstance?.getData());N(this,"getSelectedContent",(i,s)=>{let l=this.getPropertyInlineField(i,s)?.ckeditorInstance;return l?.data.stringify(l.model.getSelectedContent(l.model.document.selection))});N(this,"insertTextIntoInlineEditor",(i,s,u,l)=>{let v=this.getPropertyInlineField(i,s)?.ckeditorInstance,A=v.model.document.selection.getFirstRange();if(l){let w=u.lastIndexOf("</");w+10<u.length&&(w=u.length),u=u.substring(0,w)+"&nbsp;"+u.substring(w)}v.model.change(w=>{let x=v.data.processor.toView(u),P=v.data.toModel(x),L=v.model.insertContent(P,A);v.editing.view.focus(),w.setSelection(L)})});N(this,"handleMessage",i=>{switch(i?.data?.eventName){case"write-content":let{nodePath:s,propertyName:u,value:l,isFinished:h}=i?.data?.data;s&&u&&(console.info(s+": "+l),this.setPropertyValue(s,u,l||"",h||!1),h&&this.handleStreamingFinished());break;case"stopped-generation":this.handleStreamingFinished();break;case"error":let v=i?.data?.data?.message;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+v,"error",v),this.handleStreamingFinished();break;default:let A="Unknown message event: "+i?.data?.eventName;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+A,"error",A),this.handleStreamingFinished()}});N(this,"handleStreamingFinished",()=>{this.resetTypingCaret(),this.unsetCurrentlyHandledNodePath(),this.iFrameApiService.setStreamingFinished()});N(this,"getPropertyInlineField",(i,s)=>document.getElementsByName("neos-content-main")[0]?.contentDocument?.querySelector(`[data-__neos-editable-node-contextpath="${i}"][data-__neos-property="${s}"]`)||void 0);N(this,"setPropertyValue",(i,s,u,l)=>{let h=this.getPropertyInlineField(i,s);if(!h&&l){let A="Could not find inline field for nodePath: "+i+" and propertyName: "+s;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+A,"error",A),this.unsetCurrentlyHandledNodePath();return}if(!h)return;if(!this.store.getState()?.cr?.nodes?.byContextPath.hasOwnProperty(i)){this.handleStreamingFinished();return}h.ckeditorInstance?.setData(u),h.classList.add("typing-caret")});this.globalRegistry=i,this.store=s,this.iFrameApiService=u,this.iFrameApiService.listenToMessages(this.handleMessage)}unsetCurrentlyHandledNodePath(){this.currentlyHandledNodePath=null}resetTypingCaret(){let u=document.getElementsByName("neos-content-main")[0]?.contentDocument?.querySelector(".typing-caret");u&&u.classList.remove("typing-caret")}addFlashMessage(i,s,u="error",l){let h=this.globalRegistry.get("i18n");this.store.dispatch(qf.actions.UI.FlashMessages.add(i,h.translate("NEOSidekick.AiAssistant:Error:"+i,s,{0:l}),u))}};var zf=()=>new fa,fa=class{constructor(){N(this,"isStreaming",!1);N(this,"unsyncedWebContextIsNewPage");N(this,"unsyncedWebContextData");N(this,"callModuleQueue",[]);N(this,"callModule",(i,s)=>{if(this.isStreaming){this.callModuleQueue.push({data:i,onStarted:s});return}this.isStreaming=!0;let u={version:"1.0",eventName:"call-module",data:{platform:"neos",...i}};this.sendMessage(u,s)});N(this,"setStreamingFinished",()=>{this.isStreaming=!1,this.unsyncedWebContextData&&(this.updateWebContext(this.unsyncedWebContextIsNewPage||!1,this.unsyncedWebContextData),this.unsyncedWebContextData=void 0,this.unsyncedWebContextIsNewPage=void 0);let i=this.callModuleQueue.shift();if(i){let{data:s,onStarted:u}=i;this.callModule(s,u)}});N(this,"cancelCallModule",()=>{let i={version:"1.0",eventName:"cancel-call-module"};this.setStreamingFinished(),this.sendMessage(i)});N(this,"updateWebContext",(i,s)=>{if(this.isStreaming){this.unsyncedWebContextIsNewPage=i,this.unsyncedWebContextData=s;return}let u={version:"1.0",eventName:i?"page-changed":"page-updated",data:s};this.sendMessage(u)});N(this,"listenToMessages",i=>{let s=this.getAssistantFrame();s?window.addEventListener("message",u=>{u.source===s.contentWindow&&i(u)}):setTimeout(()=>this.listenToMessages(i),250)});N(this,"sendMessage",(i,s,u=0)=>{let l=this.getAssistantFrame();if(l)console.log("Sending message to frame",i),l.contentWindow?.postMessage(i,"*"),s&&s();else{if(u>20){alert("NEOSidekick AI-Error: Could not load assistant frame, please reload the page or contact support@neosidekick.com.");return}u++,setTimeout(()=>this.sendMessage(i,s),250)}});N(this,"getAssistantFrame",()=>{let i=document.getElementById("neosidekickAssistant");return i?.dataset.hasOwnProperty("loaded")&&i.contentWindow?i:null})}};var Xi=W(Yf());var F1=(n,i)=>(0,Xi.action)("@neosidekick/ai-assistant/UI/ModifyDialog/OPEN",{selectedText:i,fullText:n}),D1=()=>(0,Xi.action)("@neosidekick/ai-assistant/UI/ModifyDialog/CANCEL"),L1=n=>(0,Xi.action)("@neosidekick/ai-assistant/UI/ModifyDialog/APPLY",{newText:n}),wn={openModal:F1,cancelModal:D1,applyModal:L1},Jf=(n,i)=>af(n,s=>{switch(i.type){case"@neos/neos-ui/System/INIT":{s.plugins.NEOSidekick={},s.plugins.NEOSidekick.AiAssistant={},s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/OPEN":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!0,s.plugins.NEOSidekick.AiAssistant.fullText=i.payload.fullText,s.plugins.NEOSidekick.AiAssistant.selectedText=i.payload.selectedText;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/CANCEL":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}case"@neosidekick/ai-assistant/UI/ModifyDialog/APPLY":{s.plugins.NEOSidekick.AiAssistant.isModalOpen=!1;break}}}),Vi={isModalOpen:n=>n.plugins?.NEOSidekick?.AiAssistant?.isModalOpen,fullText:n=>n.plugins?.NEOSidekick?.AiAssistant?.fullText,selectedText:n=>n.plugins?.NEOSidekick?.AiAssistant?.selectedText};var Qi=W(Xf());var yt=W(vt()),rl=W(tn()),we=W(Rt()),il=W(Ft()),Cn=W(nn()),Zn=W($e());var W1={autoFocus:!1,disabled:!1,maxlength:null,readonly:!1},Dt=class extends yt.PureComponent{constructor(){super(...arguments);N(this,"state",{loading:!1});N(this,"fetch",async(s,u)=>{let{commit:l,externalService:h,contentService:v,activeContentDimensions:A,addFlashMessage:w,i18nRegistry:x,node:P,parentNode:L,frontendConfiguration:M}=this.props;this.setState({loading:!0});try{u=await v.processObjectWithClientEval(u,P,L),u=Object.keys(u).map(B=>({identifier:B,value:u[B]}));let F=A.language?A.language[0]:M.defaultLanguage,G=await h.generate(s,F,u);l(G)}catch(F){w(F?.code??F?.message,F?.code?x.translate("NEOSidekick.AiAssistant:Error:"+F.code,F.message,{0:F.externalMessage}):F.message,F?.severity??"error")}finally{this.setState({loading:!1})}})}renderIcon(s){return s?yt.default.createElement(Cn.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):yt.default.createElement(Cn.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}render(){let{id:s,value:u,className:l,commit:h,options:v,i18nRegistry:A,onKeyPress:w,onEnterKey:x}=this.props,P=v&&v.placeholder&&A.translate(unescape(v.placeholder)),L=Object.assign({},W1,v),M=!L.readonly&&!L.disabled;return yt.default.createElement("div",{style:{display:"flex",flexDirection:"column"},className:l},yt.default.createElement("div",null,yt.default.createElement(Cn.TextInput,{id:s,autoFocus:L.autoFocus,value:u===null?"":u,onChange:h,disabled:L.disabled||this.state.loading,maxLength:L.maxlength,readOnly:L.readonly,placeholder:P,onKeyPress:w,onEnterKey:x})),M?yt.default.createElement("div",{style:{marginTop:"4px"}},yt.default.createElement(Cn.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:this.state.loading?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:this.state.loading,onClick:()=>this.fetch(L.module,L.arguments??{})},A.translate("NEOSidekick.AiAssistant:Main:generateWithSidekick"),"\xA0",this.renderIcon(this.state.loading))):null)}};N(Dt,"propTypes",{className:we.default.string,value:we.default.oneOfType([we.default.string,we.default.number]),commit:we.default.func.isRequired,options:we.default.object,onKeyPress:we.default.func,onEnterKey:we.default.func,id:we.default.string,activeContentDimensions:we.default.object.isRequired,node:we.default.object,parentNode:we.default.object,i18nRegistry:we.default.object.isRequired,externalService:we.default.object.isRequired,contentService:we.default.object.isRequired,addFlashMessage:we.default.func.isRequired,frontendConfiguration:we.default.object}),N(Dt,"defaultProps",{options:{}}),Dt=Pe([(0,il.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,rl.connect)(n=>{let i=Zn.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:Zn.selectors.CR.ContentDimensions.active(n),node:i,parentNode:Zn.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:Zn.actions.UI.FlashMessages.add})],Dt);var _t=W(vt()),ol=W(tn()),ke=W(Rt()),sl=W(Ft()),xn=W(nn()),Xn=W($e());var B1={disabled:!1,maxlength:null,readonly:!1,placeholder:"",minRows:2,expandedRows:6},Lt=class extends _t.Component{constructor(s){super(s);N(this,"fetch",async(s,u)=>{let{commit:l,externalService:h,contentService:v,activeContentDimensions:A,addFlashMessage:w,i18nRegistry:x,node:P,parentNode:L,frontendConfiguration:M}=this.props;this.setState({loading:!0});try{u=await v.processObjectWithClientEval(u,P,L),u=Object.keys(u).map(B=>({identifier:B,value:u[B]}));let F=A.language?A.language[0]:M.defaultLanguage,G=await h.generate(s,F,u);l(G)}catch(F){w(F?.code??F?.message,F?.code?x.translate("NEOSidekick.AiAssistant:Error:"+F.code,F.message,{0:F.externalMessage}):F.message,F?.severity??"error")}finally{this.setState({loading:!1})}});this.state={loading:!1}}renderIcon(s){return s?_t.default.createElement(xn.Icon,{icon:"spinner",fixedWidth:!0,padded:"right",spin:!0}):_t.default.createElement(xn.Icon,{icon:"magic",fixedWidth:!0,padded:"right"})}render(){let{id:s,value:u,className:l,commit:h,options:v,i18nRegistry:A}=this.props,w=v&&v.placeholder&&A.translate(unescape(v.placeholder)),x=Object.assign({},B1,v),P=!x.readonly&&!x.disabled;return _t.default.createElement("div",{style:{display:"flex",flexDirection:"column"},className:l},_t.default.createElement("div",null,_t.default.createElement(xn.TextArea,{id:s,value:u,onChange:h,disabled:x.disabled||this.state.loading,maxLength:x.maxlength,readOnly:x.readonly,placeholder:w,minRows:x.minRows,expandedRows:x.expandedRows})),P?_t.default.createElement("div",null,_t.default.createElement(xn.Button,{className:"neosidekick__editor__generate-button",size:"regular",icon:this.state.loading?"hourglass":"magic",style:"neutral",hoverStyle:"clean",disabled:this.state.loading,onClick:()=>this.fetch(x.module,x.arguments??{})},A.translate("NEOSidekick.AiAssistant:Main:generateWithSidekick"),"\xA0",this.renderIcon(this.state.loading))):null)}};N(Lt,"propTypes",{className:ke.default.string,value:ke.default.oneOfType([ke.default.string,ke.default.number]),commit:ke.default.func.isRequired,options:ke.default.object,id:ke.default.string,activeContentDimensions:ke.default.object.isRequired,node:ke.default.object,parentNode:ke.default.object,i18nRegistry:ke.default.object.isRequired,externalService:ke.default.object.isRequired,contentService:ke.default.object.isRequired,addFlashMessage:ke.default.func.isRequired,frontendConfiguration:ke.default.object}),N(Lt,"defaultProps",{options:{}}),Lt=Pe([(0,sl.neos)(n=>({i18nRegistry:n.get("i18n"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),frontendConfiguration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,ol.connect)(n=>{let i=Xn.selectors.CR.Nodes.focusedSelector(n);return{activeContentDimensions:Xn.selectors.CR.ContentDimensions.active(n),node:i,parentNode:Xn.selectors.CR.Nodes.nodeByContextPath(n)(i.parent)}},{addFlashMessage:Xn.actions.UI.FlashMessages.add})],Lt);var al=(n,i)=>{let s=n.get("inspector").get("editors");s.set("NEOSidekick.AiAssistant/Inspector/Editors/MagicTextFieldEditor",{component:i?Dt:Qi.TextField}),s.set("NEOSidekick.AiAssistant/Inspector/Editors/MagicTextAreaEditor",{component:i?Lt:Qi.TextArea})};var Ye=W(vt()),Tr=W(nn());var eo=W(vt()),ul=W(tn()),Vn=W(Rt()),cl=W($e()),fl=W(Ft());var Wt=class extends eo.PureComponent{getUri(){let{configuration:i,activeContentDimensions:s,interfaceLanguage:u}=this.props,l=new URL(`${i.apiDomain}/chat/`);return l.searchParams.append("contentLanguage",s.language?s.language[0]:i.defaultLanguage),l.searchParams.append("interfaceLanguage",u),l.searchParams.append("userId",i.userId),l.searchParams.append("plattform","neos"),l.searchParams.append("domain",i.domain),l.searchParams.append("siteName",i.siteName),i?.referrer&&l.searchParams.append("referral",i?.referrer),i?.apiKey&&l.searchParams.append("apikey",i?.apiKey),l}render(){let{className:i}=this.props;return eo.default.createElement("iframe",{id:"neosidekickAssistant",className:i,src:this.getUri().toString(),allow:"clipboard-write",onLoad:s=>s.target.dataset.loaded="true"})}};N(Wt,"propTypes",{configuration:Vn.default.object.isRequired,i18nRegistry:Vn.default.object.isRequired,activeContentDimensions:Vn.default.object.isRequired,interfaceLanguage:Vn.default.string.isRequired,className:Vn.default.string}),Wt=Pe([(0,fl.neos)(n=>({configuration:n.get("NEOSidekick.AiAssistant").get("configuration"),i18nRegistry:n.get("i18n")})),(0,ul.connect)(n=>({activeContentDimensions:cl.selectors.CR.ContentDimensions.active(n),interfaceLanguage:n.user?.preferences?.interfaceLanguage}),{})],Wt);var ll=(n,i)=>{let s=n.get("containers"),u=s.get("App");if(!i.chatSidebarEnabled){s.set("Modals/SidekickIFrame",()=>Ye.default.createElement(Wt,{className:"neosidekick__frame--hidden"}));return}let l=h=>{let v=localStorage.getItem("NEOSidekick")?JSON.parse(localStorage.getItem("NEOSidekick")):{open:!0,fullscreen:!1},[A,w]=Ye.default.useState(v?.open),x=B=>{w(B),v.open=B,localStorage.setItem("NEOSidekick",JSON.stringify(v))},[P,L]=Ye.default.useState(v?.fullscreen),M=B=>{L(B),v.fullscreen=B,localStorage.setItem("NEOSidekick",JSON.stringify(v))},F=(B,E,O)=>B?Ye.default.createElement(Tr.IconButton,{icon:E?"compress":"expand",onClick:O}):"",G=(B,E,O)=>E?"":Ye.default.createElement(Tr.IconButton,{icon:B?"chevron-circle-right":"chevron-circle-left",onClick:O});return Ye.default.createElement("div",{className:`neosidekick_appWrapper ${A?"neosidekick_appWrapper--sidebar-open":""}  ${P?"neosidekick_appWrapper--sidebar-fullscreen":""}`},Ye.default.createElement(u,{...h}),Ye.default.createElement("div",{className:"neosidekick_sideBar"},Ye.default.createElement("div",{className:"neosidekick_sideBar__title"},Ye.default.createElement(Tr.Headline,{className:`neosidekick_sideBar__title-headline ${A?"neosidekick_sideBar__title-headline--open":""}`},"AI Sidekick"),Ye.default.createElement("div",null,F(A,P,()=>M(!P)),G(A,P,()=>x(!A)))),Ye.default.createElement(Wt,{className:`neosidekick_sideBar__frame ${A?"neosidekick_sideBar__frame--open":""}`})))};s.set("App",l)};var Ir=W($e()),_l=W(to());var pl=W(to()),no=W($e()),hl=(n,i)=>function*(){yield(0,pl.takeEvery)(no.actionTypes.ServerFeedback.HANDLE_SERVER_FEEDBACK,function*(s){s.payload.feedbackEnvelope.feedbacks.forEach(u=>{if(u.type!=="Neos.Neos.Ui:NodeCreated")return;let h=u.payload.contextPath.split("@")[0],v=i.getState(),A=no.selectors.CR.Nodes.nodesByContextPathSelector(v),w=n.get("@neos-project/neos-ui-contentrepository"),x=n.get("NEOSidekick.AiAssistant").get("contentService");Object.keys(A).forEach(P=>{if(!P.split("@")[0].startsWith(h))return;let M=A[P],F=A[M.parent],G=w.get(M.nodeType);Object.keys(G.properties).forEach(B=>{x.evaluateNodeTypeConfigurationAndStartGeneration(M,B,G,F,!0)})})})})};var gl=W(to()),ml=W($e()),vl=(n,i)=>function*(){yield(0,gl.takeEvery)(ml.actionTypes.CR.Nodes.REMOVE,function*(s){n.get("NEOSidekick.AiAssistant").get("contentCanvasService").onNodeRemoved(s.payload)})};var Al=W(yl());var Sl=(n,i,s,u)=>{let l=!1,h=(0,Al.debounce)((w,x)=>s.updateWebContext(w,x),500),v=function*(){yield(0,_l.takeLatest)([Ir.actionTypes.UI.ContentCanvas.SET_SRC,Ir.actionTypes.UI.ContentCanvas.RELOAD,Ir.actionTypes.CR.Nodes.MERGE],async function*(w){w.type===Ir.actionTypes.UI.ContentCanvas.SET_SRC&&(l=!0);let x=n.get("@neos-project/neos-ui-contentrepository"),P=i.getState(),L=P?.ui?.contentCanvas?.previewUrl,M=u.getCurrentDocumentNode(),F=M?.contextPath,G=Object.values(P?.cr?.nodes?.byContextPath||{}).filter(E=>{let O=x.getRole("document");if(!O)throw new Error("Document role is not loaded!");let U=x.getSubTypesOf(O);return F&&E.contextPath.indexOf(F.split("@")[0])===0&&(E.contextPath===F||!U.includes(E.nodeType))}),B={url:L,title:M?.properties?.title||u.getGuestFrameDocumentTitle(),content:u.getGuestFrameDocumentHtml(),structuredContent:G,targetAudience:await u.getCurrentDocumentTargetAudience(),pageBriefing:await u.getCurrentDocumentPageBriefing(),focusKeyword:await u.getCurrentDocumentFocusKeyword()};h(l,B),l=!1})},A=n.get("sagas");A.set("NEOSidekick.AiAssistant/watchDocumentNodeChange",{saga:v}),A.set("NEOSidekick.AiAssistant/watchNodeCreated",{saga:hl(n,i)}),A.set("NEOSidekick.AiAssistant/watchNodeRemoved",{saga:vl(n,i)})};var Mr=W(vt()),bl=W(tn()),ro=W(Rt()),io=W(nn()),wl=W(Ft()),Cl=W($e());var rn=class extends Mr.PureComponent{constructor(){super(...arguments);N(this,"state",{show:!1,enabled:!0});N(this,"evaluateFocusedNodeAndPropertyAndShowButton",(s=5)=>{let{nodeType:u,property:l}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty();if(!u||!l){if(s===0)return;setTimeout(()=>this.evaluateFocusedNodeAndPropertyAndShowButton(s-1),100);return}let h=u.properties[l];this.setState({show:h?.ui?.inlineEditable===!0&&h?.options?.sidekick?.module!==void 0})});N(this,"onClick",async()=>{let{addFlashMessage:s,i18nRegistry:u,contentService:l}=this.props;try{this.setState({enabled:!1});let{node:h,nodeType:v,parentNode:A,property:w}=l.getCurrentlyFocusedNodePathAndProperty();await l.evaluateNodeTypeConfigurationAndStartGeneration(h,w,v,A)}catch(h){s(h?.code??h?.message,h?.code?u.translate("NEOSidekick.AiAssistant:Error:"+h.code,h.message,{0:h.externalMessage}):h.message,h?.severity??"error")}finally{setTimeout(()=>{this.setState({enabled:!0})},2500)}})}componentDidMount(){this.evaluateFocusedNodeAndPropertyAndShowButton()}render(){let{i18nRegistry:s}=this.props;return this.state.show?Mr.default.createElement(io.Button,{disabled:!this.state.enabled,style:"transparent",hoverStyle:"brand",onClick:this.onClick,isActive:!!this.props.isActive,title:s.translate("NEOSidekick.AiAssistant:Main:generate")},Mr.default.createElement(io.Icon,{icon:"magic",fixedWidth:!0,padded:"right"}),s.translate("NEOSidekick.AiAssistant:Main:generate")):""}};N(rn,"propTypes",{contentService:ro.default.object.isRequired,i18nRegistry:ro.default.object.isRequired,addFlashMessage:ro.default.func.isRequired}),rn=Pe([(0,wl.neos)(n=>({contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),i18nRegistry:n.get("i18n")})),(0,bl.connect)(()=>{},{addFlashMessage:Cl.actions.UI.FlashMessages.add})],rn);var Rr=W(vt()),En=W(Rt()),xl=W(nn()),El=W(Ft()),Ol=W(tn());var la=W($e());var on=class extends Rr.PureComponent{constructor(){super(...arguments);N(this,"handleOpen",()=>{let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props,l=this.props.contentCanvasService.getEditorContent(s,u),h=this.props.contentCanvasService.getSelectedContent(s,u);this.props.openModal(l,h)})}render(){let{i18nRegistry:s}=this.props;return Rr.default.createElement("div",null,Rr.default.createElement(xl.Button,{className:"button",style:"transparent",hoverStyle:"brand",onClick:this.handleOpen,title:s.translate("NEOSidekick.AiAssistant:Main:title","Mit AI bearbeiten")},"AI"))}};N(on,"propTypes",{contentService:En.default.object.isRequired,contentCanvasService:En.default.object.isRequired,i18nRegistry:En.default.object.isRequired,openModal:En.default.func.isRequired,focusedNodePath:En.default.string,currentlyEditedPropertyName:En.default.string}),on=Pe([(0,El.neos)(n=>({contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService"),i18nRegistry:n.get("i18n")})),(0,Ol.connect)(n=>({focusedNodePath:la.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:la.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n)}),{openModal:wn.openModal})],on);var k=W(vt()),Ce=W(Rt()),kl=W(tn()),Il=W(Ft()),ne=W(nn()),Ae=W(Pl()),On=W($e());var er=W(vt()),Fr=W(Rt()),Tl=W(Ft());var Bt=class extends er.PureComponent{constructor(s){super(s);N(this,"elementRef");N(this,"editorInstance");N(this,"lastValue");this.elementRef=er.default.createRef()}componentDidUpdate(s){if(s.value!==this.props.value&&this.lastValue!==this.props.value){if(!this.editorInstance){let u=this.elementRef.current;if(this.editorInstance=u?.querySelector(".ck-content")?.ckeditorInstance,!this.editorInstance)return}this.editorInstance.setData(this.props.value),this.lastValue=this.props.value}}render(){let{secondaryEditorsRegistry:s}=this.props,{component:u}=s.get("Neos.Neos/Inspector/Secondary/Editors/CKEditorWrap");return er.default.createElement("div",{className:"neosidekick__ck-editor"+(this.props.disabled?" neosidekick__ck-editor--disabled":""),ref:this.elementRef},er.default.createElement(u,{onChange:l=>{this.lastValue!==l&&(this.lastValue=l,this.props.onChange&&this.props.onChange(l))},value:this.props.value,options:Object.assign({},this.props.options,{disabled:!0})}))}};N(Bt,"propTypes",{value:Fr.default.string.isRequired,onChange:Fr.default.func,options:Fr.default.object,disabled:Fr.default.bool}),Bt=Pe([(0,Tl.neos)(n=>({secondaryEditorsRegistry:n.get("inspector").get("secondaryEditors")}))],Bt);var sn=class extends k.PureComponent{constructor(s){super(s);N(this,"handleCancel",()=>{this.props.cancelModal(),this.setState({generatedText:"",generationState:"empty"})});N(this,"handleApply",()=>{this.props.applyModal();let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props,l=this.props.selectedText.endsWith(" ")||this.props.selectedText.endsWith("&nbsp;");this.props.contentCanvasService.insertTextIntoInlineEditor(s,u,this.state.generatedText,l),this.setState({generatedText:"",generationState:"empty"})});N(this,"handleGenerate",async(s,u="default")=>{this.setState({generationModificationType:s,generationWritingStyle:u}),s!=="custom"&&this.setState({customPromptIsVisible:!1}),this.state.generationState==="loading"&&this.props.iFrameApiService.cancelCallModule();let{customPrompt:l}=this.state,{fullText:h,selectedText:v}=this.props,A=this.getPropertyConfiguration().ui?.inline?.editorOptions?.formatting,w=Object.keys(A).filter(M=>A[M]).map(M=>({a:"link",b:"bold",i:"italic",ol:"ordered list",ul:"unordered list"})[M]||M).join(", "),x,P;switch(s){case"configured":let M=this.getConfiguredSidekick();if(M.onCreate?.module){this.addFlashMessage("1696264259260","Please do not use options.sidekick.onCreate.module anymore. Read the docs to find out about the new configuration.","error");return}let{node:F,parentNode:G}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty(),B=await this.props.contentService.processObjectWithClientEval(M,F,G);x=B.module,P=B.arguments||{};break;case"intro":x="free_conversation",P={content:"Write a two sentence introduction for the current page.",allowedMarkdownFormattingOptions:w};break;case"page_conclusion":x="page_conclusion_writer",P={allowedMarkdownFormattingOptions:w};break;case"custom":if(!l||l.length<5){this.addFlashMessage("1696264259270","Please write a few words about how to change the text.","error");return}v&&v.length?(x="modify_selected_text",P={fullText:h,selectedText:v,modificationType:s,allowedMarkdownFormattingOptions:w,customPrompt:l,writingStyle:u}):(x="free_conversation",P={content:"Please create additional content for the current page. "+l,allowedMarkdownFormattingOptions:w});break;default:x="modify_selected_text",P={fullText:h,selectedText:v,modificationType:s,allowedMarkdownFormattingOptions:w,customPrompt:l,writingStyle:u};break}this.setState({generatedText:"",generationState:"loading"});let L={target:{modalTarget:!0},module:x,arguments:P};this.props.iFrameApiService.callModule(L)});N(this,"handleRegenerate",async()=>this.handleGenerate(this.state.generationModificationType,this.state.generationWritingStyle||"default"));this.state={customPromptIsVisible:this.props.configuration.modifyTextModalPreferCustomPrompt,customPrompt:"",writingStyles:[{value:"",label:"Loading..."}],generatedText:"",generationState:"empty"}}getLanguage(){let{activeContentDimensions:s,configuration:u}=this.props;return s.language?s.language[0]:u.defaultLanguage}getPropertyConfiguration(){let{node:s,nodeTypesRegistry:u}=this.props,l=s?u.get(s?.nodeType):null,{property:h}=this.props.contentService.getCurrentlyFocusedNodePathAndProperty();return!s||!l||!h?null:l?.properties?l?.properties[h]:null}getConfiguredSidekick(){return this.getPropertyConfiguration()?.options?.sidekick}componentDidMount(){let s=this.getLanguage();this.props.externalService.fetch("/api/v1/writing-styles?language="+s).then(u=>{let l=u.data.filter(h=>h.identifier!=="default"&&h.allowed_languages.includes(s));this.setState({writingStyles:l.map(h=>({value:h.identifier,label:h.label}))})}),this.props.iFrameApiService.listenToMessages(u=>{if(u.data?.data?.modalTarget)switch(u?.data?.eventName){case"write-content":let{value:l,isFinished:h}=u.data?.data;this.setState({generatedText:l||""}),h&&(this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished());break;case"stopped-generation":this.setState({generationState:"finished"});break;case"error":let v=u?.data?.data?.message;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+v,"error",v),this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished();break;default:let A="Unknown message event: "+u?.data?.eventName;this.addFlashMessage("1688158257149","An error occurred while asking NEOSidekick: "+A,"error",A),this.setState({generationState:"finished"}),this.props.iFrameApiService.setStreamingFinished()}}),window.addEventListener("keydown",u=>{u.key==="Enter"&&u.target===document.getElementById("neosidekickAiModifyPromptTextarea")&&this.handleGenerate("custom")})}componentDidUpdate(s){s.isOpen&&!this.props.isOpen&&this.state.generationState==="loading"&&this.props.iFrameApiService.cancelCallModule(),!s.isOpen&&this.props.isOpen&&this.setState({customPromptIsVisible:this.props.configuration.modifyTextModalPreferCustomPrompt,customPrompt:"",generatedText:"",generationState:"empty",generationModificationType:void 0,generationWritingStyle:void 0})}addFlashMessage(s,u,l="error",h){this.props.addFlashMessage(s,this.props.i18nRegistry.translate("NEOSidekick.AiAssistant:Error:"+s,u,{0:h}),l)}renderTitle(){return k.default.createElement("div",null,k.default.createElement("svg",{className:"sidekick-icon","enable-background":"new 0 0 245 245",viewBox:"0 0 245 245"},k.default.createElement("path",{d:"m72.6 75.3 5.3-2.6m-18.5-30.7",fill:"#fff"}),k.default.createElement("circle",{cx:"64.7",cy:"50.5",fill:"#fff",r:"9.4"}),k.default.createElement("path",{d:"m68 59.1 7.5 15.2",fill:"none",stroke:"#fff","stroke-miterlimit":"10","stroke-width":"4.9606"}),k.default.createElement("path",{d:"m170.1 72.7 5.3 2.6m13.2-33.3",fill:"#fff"}),k.default.createElement("circle",{cx:"183.4",cy:"50.5",fill:"#fff",r:"9.4"}),k.default.createElement("path",{d:"m180.1 59.1-7.5 15.2",fill:"none",stroke:"#fff","stroke-miterlimit":"10","stroke-width":"4.9606"}),k.default.createElement("path",{d:"m123.6 60c38.1 0 69 31 69 69s-31 69-69 69-69-31-69-69 31-69 69-69m0-8.5c-42.8 0-77.5 34.7-77.5 77.5s34.7 77.5 77.5 77.5 77.5-34.7 77.5-77.5-34.6-77.5-77.5-77.5z",fill:"#fff"}),k.default.createElement("circle",{cx:"97",cy:"123.5",fill:"#fff",r:"9.1"}),k.default.createElement("g",{fill:"none",stroke:"#fff","stroke-miterlimit":"10"},k.default.createElement("path",{d:"m164.2 137.9h-80c-7.8 0-14.1-6.3-14.1-14.1v-.3c0-7.8 6.3-14.1 14.1-14.1h80c7.8 0 14.1 6.3 14.1 14.1v.3c0 7.8-6.4 14.1-14.1 14.1z","stroke-width":"9.0714"}),k.default.createElement("path",{d:"m52.4 153.9h-17.5c-4.1 0-7.4-3.2-7.4-7.2v-34.2c0-3.9 3.4-7.2 7.4-7.2h17.5","stroke-width":"8.5039"}),k.default.createElement("path",{d:"m193.1 153.9h17.5c4.1 0 7.4-3.2 7.4-7.2v-34.2c0-3.9-3.4-7.2-7.4-7.2h-17.5","stroke-width":"8.5039"}),k.default.createElement("path",{d:"m104.1 165.1s18.1 18.1 39 .5","stroke-linecap":"round","stroke-width":"8.5039"}))),this.props.selectedText?k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:modify-text-title",fallback:"Revise text"}):k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:create-text-title",fallback:"Generate text with AI"})," (Beta)")}renderCancelAction(){return k.default.createElement(ne.Button,{key:"cancel",style:"lighter",hoverStyle:"brand",onClick:this.handleCancel},k.default.createElement(Ae.default,{id:"Neos.Neos:Main:cancel",fallback:"Cancel"}))}renderRegenerateAction(){return this.state.generationState==="finished"?k.default.createElement(ne.Button,{key:"regenerate",style:"lighter",hoverStyle:"warn",onClick:this.handleRegenerate},k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:regenerate-text",fallback:"Regenerate"})):""}renderSaveAction(){return this.state.generationState==="finished"?k.default.createElement(ne.Button,{key:"save",style:"success",hoverStyle:"success",onClick:this.handleApply},this.props.selectedText?k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:apply-modify-text",fallback:"Use text"}):k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:apply-create-text",fallback:"Insert text"})):""}hasSelectedText(){return this.props.selectedText&&this.props.selectedText.trim().length>0}renderConfiguredButton(){return this.getConfiguredSidekick()?.module?k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("configured")},k.default.createElement(ne.Icon,{icon:"hand-sparkles",className:"icon--space-right"}),this.getConfiguredSidekick()?.label||k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:configured-button",fallback:"Configured instruction"})):""}renderCreateButtons(){return k.default.createElement("div",{className:"quickGenerationButtons"},this.renderConfiguredButton(),k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("intro")},k.default.createElement(ne.Icon,{icon:"paragraph",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:intro-button",fallback:"Introduction"})),k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("page_conclusion")},k.default.createElement(ne.Icon,{icon:"paragraph",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:page-conclusion-button",fallback:"Page Conclusion"})))}renderEditButtons(){let{i18nRegistry:s}=this.props;return k.default.createElement("div",{className:"quickGenerationButtons"},k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("rephrase")},k.default.createElement(ne.Icon,{icon:"redo",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:rephrase-button",fallback:"Rephrase"})),k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("longer")},k.default.createElement(ne.Icon,{icon:"expand-alt",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:longer-button-short",fallback:"Longer"})),k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("shorter")},k.default.createElement(ne.Icon,{icon:"compress-alt",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:shorter-button-short",fallback:"Shorter"})),k.default.createElement(ne.Button,{style:"lighter",hoverStyle:"brand",onClick:()=>this.handleGenerate("fix_spelling")},k.default.createElement(ne.Icon,{icon:"spell-check",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:fix-text-button",fallback:"Fix spelling"})),k.default.createElement(ne.Button,{style:this.state.customPromptIsVisible?"brand":"lighter",hoverStyle:"brand",onClick:()=>this.setState({customPromptIsVisible:!this.state.customPromptIsVisible})},k.default.createElement(ne.Icon,{icon:"pen-fancy",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:custom-prompt-button",fallback:"Etwas anderes"})),k.default.createElement("div",{className:"quickGenerationButtons__selectWrapper"},k.default.createElement(ne.SelectBox,{className:"quickGenerationButtons__select",placeholder:s.translate("NEOSidekick.AiAssistant:AiModal:change-tone"),onValueChange:u=>this.handleGenerate("style",u),options:this.state.writingStyles})))}render(){let{selectedText:s,i18nRegistry:u}=this.props,{customPrompt:l,generatedText:h,generationState:v}=this.state,A=JSON.parse(JSON.stringify(this.getPropertyConfiguration()?.ui?.inline?.editorOptions)||"{}");return A.sidekickModifyButton=!1,k.default.createElement(ne.Dialog,{actions:[this.renderCancelAction(),this.renderRegenerateAction(),this.renderSaveAction()],title:this.renderTitle(),onRequestClose:this.handleCancel,isOpen:this.props.isOpen,style:"wide"},k.default.createElement("div",{className:"primaryColumn"},this.hasSelectedText()?k.default.createElement("div",{className:"originalText"},k.default.createElement(ne.Label,null,k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:selected-text",fallback:"Selected Text"}),":"),k.default.createElement(Bt,{value:s,options:A,disabled:!0})):"",this.hasSelectedText()?this.renderEditButtons():"",!this.hasSelectedText()||this.state.customPromptIsVisible?k.default.createElement("div",{className:"promptRow"},k.default.createElement(ne.TextArea,{autoFocus:!0,id:"neosidekickAiModifyPromptTextarea",placeholder:this.hasSelectedText()?u.translate("NEOSidekick.AiAssistant:AiModal:custom-prompt-modify-placeholder","How should the text be changed?"):u.translate("NEOSidekick.AiAssistant:AiModal:custom-prompt-create-placeholder","Which text should I write?"),onChange:w=>this.setState({customPrompt:w}),minRows:2,expandedRows:2}),k.default.createElement(ne.Button,{className:"promptRow__button",disabled:!l,style:l&&v=="empty"?"success":"lighter",hoverStyle:"success",onClick:()=>this.handleGenerate("custom")},k.default.createElement(ne.Icon,{icon:"magic",className:"icon--space-right"}),k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:Main:generate",fallback:"Generate"}))):"",this.hasSelectedText()?"":this.renderCreateButtons(),v==="empty"?"":k.default.createElement("div",{className:"result"},k.default.createElement(ne.Label,null,k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:new-text",fallback:"New Text"}),":"),k.default.createElement(Bt,{onChange:w=>this.setState({generatedText:w}),value:h,options:A}),k.default.createElement("i",{className:"result__notice"},k.default.createElement(Ae.default,{id:"NEOSidekick.AiAssistant:AiModal:disclaimer",fallback:"GenAI models can make mistakes. Check important information."})))))}};N(sn,"propTypes",{iFrameApiService:Ce.default.object.isRequired,contentService:Ce.default.object.isRequired,contentCanvasService:Ce.default.object.isRequired,externalService:Ce.default.object.isRequired,i18nRegistry:Ce.default.object.isRequired,nodeTypesRegistry:Ce.default.object.isRequired,configuration:Ce.default.object.isRequired,isOpen:Ce.default.bool,focusedNodePath:Ce.default.string,currentlyEditedPropertyName:Ce.default.string,fullText:Ce.default.string,selectedText:Ce.default.string,activeContentDimensions:Ce.default.object,node:Ce.default.object,cancelModal:Ce.default.func.isRequired,applyModal:Ce.default.func.isRequired,addFlashMessage:Ce.default.func.isRequired}),sn=Pe([(0,Il.neos)(n=>({iFrameApiService:n.get("NEOSidekick.AiAssistant").get("iFrameApiService"),contentService:n.get("NEOSidekick.AiAssistant").get("contentService"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService"),externalService:n.get("NEOSidekick.AiAssistant").get("externalService"),i18nRegistry:n.get("i18n"),nodeTypesRegistry:n.get("@neos-project/neos-ui-contentrepository"),configuration:n.get("NEOSidekick.AiAssistant").get("configuration")})),(0,kl.connect)(n=>({isOpen:Vi.isModalOpen(n),focusedNodePath:On.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:On.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n),fullText:Vi.fullText(n),selectedText:Vi.selectedText(n),activeContentDimensions:On.selectors.CR.ContentDimensions.active(n),node:On.selectors.CR.Nodes.focusedSelector(n)}),{cancelModal:wn.cancelModal,applyModal:wn.applyModal,addFlashMessage:On.actions.UI.FlashMessages.add})],sn);var Lr=W(vt()),Dr=W(Rt()),Ml=W(tn()),da=W($e()),Rl=W(Ft()),Fl=W(nn());var an=class extends Lr.PureComponent{constructor(){super(...arguments);N(this,"handleOpen",()=>{let{focusedNodePath:s,currentlyEditedPropertyName:u}=this.props,l=this.props.contentCanvasService.getEditorContent(s,u),h=this.props.contentCanvasService.getSelectedContent(s,u);this.props.openModal(l,h)})}render(){let{currentlyEditedPropertyName:s,i18nRegistry:u}=this.props;return Lr.default.createElement(Fl.Button,{id:"neos-InlineToolbar-AiModify",disabled:!s,className:this.props.className,style:"transparent",hoverStyle:"brand",onClick:this.handleOpen,title:u.translate("NEOSidekick.AiAssistant:Main:title","Mit AI bearbeiten")},Lr.default.createElement("strong",null,"AI"))}};N(an,"propTypes",{className:Dr.default.string,i18nRegistry:Dr.default.object.isRequired,focusedNodePath:Dr.default.string,currentlyEditedPropertyName:Dr.default.string}),an=Pe([(0,Rl.neos)(n=>({nodeTypesRegistry:n.get("@neos-project/neos-ui-contentrepository"),contentCanvasService:n.get("NEOSidekick.AiAssistant").get("contentCanvasService")})),(0,Ml.connect)(n=>({focusedNodePath:da.selectors.CR.Nodes.focusedNodePathSelector(n),currentlyEditedPropertyName:da.selectors.UI.ContentCanvas.currentlyEditedPropertyName(n)}),{openModal:wn.openModal})],an);var Dl=n=>{let s=n.get("ckEditor5").get("richtextToolbar");s.set("NEOSidekick.AiAssistant:ModifyButton",{component:on,isVisible:h=>h?.sidekickModifyButton!==!1},"start"),s.set("NEOSidekick.AiAssistant:generate",{component:rn,isVisible:()=>!0},"end"),n.get("containers").set("Modals/AiModal",sn),n.get("@neos-project/neos-ui-guest-frame").set("NodeToolbar/Buttons/AiModify",an,"after NodeToolbar/Buttons/AddNode")};zc("NEOSidekick.AiAssistant",{},(n,{store:i,frontendConfiguration:s})=>{let u=s["NEOSidekick.AiAssistant"];if(al(n,u?.enabled),!u?.enabled)return;if(!u.hasOwnProperty("defaultLanguage")||!u.defaultLanguage){console.error("Could not initialize AiAssistant: defaultLanguage is not configured correctly, see README.");return}n.get("reducers").set("NEOSidekick.AiAssistant",{reducer:Jf}),n.set("NEOSidekick.AiAssistant",new Xt(""));let l=n.get("NEOSidekick.AiAssistant");l.set("configuration",u);let h=jc(u);l.set("externalService",h);let v=Kf(n,i);l.set("contentService",v);let A=zf();l.set("iFrameApiService",A);let w=$f(n,i,A);l.set("contentCanvasService",w),ll(n,u),Sl(n,i,A,v),Dl(n)});})();
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
//# sourceMappingURL=Plugin.js.map
